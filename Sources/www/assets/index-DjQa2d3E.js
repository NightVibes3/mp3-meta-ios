var jn=h=>{throw TypeError(h)};var $n=(h,d,g)=>d.has(h)||jn("Cannot "+g);var cr=(h,d,g)=>($n(h,d,"read from private field"),g?g.call(h):d.get(h)),Rr=(h,d,g)=>d.has(h)?jn("Cannot add the same private member more than once"):d instanceof WeakSet?d.add(h):d.set(h,g),Sr=(h,d,g,b)=>($n(h,d,"write to private field"),b?b.call(h,g):d.set(h,g),g),jr=(h,d,g)=>($n(h,d,"access private method"),g);var An=(h,d,g,b)=>({set _(_){Sr(h,d,_,g)},get _(){return cr(h,d,b)}});function _mergeNamespaces(h,d){for(var g=0;g<d.length;g++){const b=d[g];if(typeof b!="string"&&!Array.isArray(b)){for(const _ in b)if(_!=="default"&&!(_ in h)){const $=Object.getOwnPropertyDescriptor(b,_);$&&Object.defineProperty(h,_,$.get?$:{enumerable:!0,get:()=>b[_]})}}}return Object.freeze(Object.defineProperty(h,Symbol.toStringTag,{value:"Module"}))}(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const _ of document.querySelectorAll('link[rel="modulepreload"]'))b(_);new MutationObserver(_=>{for(const $ of _)if($.type==="childList")for(const j of $.addedNodes)j.tagName==="LINK"&&j.rel==="modulepreload"&&b(j)}).observe(document,{childList:!0,subtree:!0});function g(_){const $={};return _.integrity&&($.integrity=_.integrity),_.referrerPolicy&&($.referrerPolicy=_.referrerPolicy),_.crossOrigin==="use-credentials"?$.credentials="include":_.crossOrigin==="anonymous"?$.credentials="omit":$.credentials="same-origin",$}function b(_){if(_.ep)return;_.ep=!0;const $=g(_);fetch(_.href,$)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$1=Symbol.for("react.element"),n$2=Symbol.for("react.portal"),p$2=Symbol.for("react.fragment"),q$1=Symbol.for("react.strict_mode"),r$2=Symbol.for("react.profiler"),t$1=Symbol.for("react.provider"),u=Symbol.for("react.context"),v$2=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),z$1=Symbol.iterator;function A$1(h){return h===null||typeof h!="object"?null:(h=z$1&&h[z$1]||h["@@iterator"],typeof h=="function"?h:null)}var B$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$1=Object.assign,D$1={};function E$2(h,d,g){this.props=h,this.context=d,this.refs=D$1,this.updater=g||B$1}E$2.prototype.isReactComponent={};E$2.prototype.setState=function(h,d){if(typeof h!="object"&&typeof h!="function"&&h!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,h,d,"setState")};E$2.prototype.forceUpdate=function(h){this.updater.enqueueForceUpdate(this,h,"forceUpdate")};function F(){}F.prototype=E$2.prototype;function G$1(h,d,g){this.props=h,this.context=d,this.refs=D$1,this.updater=g||B$1}var H$1=G$1.prototype=new F;H$1.constructor=G$1;C$1(H$1,E$2.prototype);H$1.isPureReactComponent=!0;var I$1=Array.isArray,J=Object.prototype.hasOwnProperty,K$1={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$2(h,d,g){var b,_={},$=null,j=null;if(d!=null)for(b in d.ref!==void 0&&(j=d.ref),d.key!==void 0&&($=""+d.key),d)J.call(d,b)&&!L$1.hasOwnProperty(b)&&(_[b]=d[b]);var _e=arguments.length-2;if(_e===1)_.children=g;else if(1<_e){for(var et=Array(_e),rt=0;rt<_e;rt++)et[rt]=arguments[rt+2];_.children=et}if(h&&h.defaultProps)for(b in _e=h.defaultProps,_e)_[b]===void 0&&(_[b]=_e[b]);return{$$typeof:l$1,type:h,key:$,ref:j,props:_,_owner:K$1.current}}function N$1(h,d){return{$$typeof:l$1,type:h.type,key:d,ref:h.ref,props:h.props,_owner:h._owner}}function O$1(h){return typeof h=="object"&&h!==null&&h.$$typeof===l$1}function escape(h){var d={"=":"=0",":":"=2"};return"$"+h.replace(/[=:]/g,function(g){return d[g]})}var P$1=/\/+/g;function Q$1(h,d){return typeof h=="object"&&h!==null&&h.key!=null?escape(""+h.key):d.toString(36)}function R$2(h,d,g,b,_){var $=typeof h;($==="undefined"||$==="boolean")&&(h=null);var j=!1;if(h===null)j=!0;else switch($){case"string":case"number":j=!0;break;case"object":switch(h.$$typeof){case l$1:case n$2:j=!0}}if(j)return j=h,_=_(j),h=b===""?"."+Q$1(j,0):b,I$1(_)?(g="",h!=null&&(g=h.replace(P$1,"$&/")+"/"),R$2(_,d,g,"",function(rt){return rt})):_!=null&&(O$1(_)&&(_=N$1(_,g+(!_.key||j&&j.key===_.key?"":(""+_.key).replace(P$1,"$&/")+"/")+h)),d.push(_)),1;if(j=0,b=b===""?".":b+":",I$1(h))for(var _e=0;_e<h.length;_e++){$=h[_e];var et=b+Q$1($,_e);j+=R$2($,d,g,et,_)}else if(et=A$1(h),typeof et=="function")for(h=et.call(h),_e=0;!($=h.next()).done;)$=$.value,et=b+Q$1($,_e++),j+=R$2($,d,g,et,_);else if($==="object")throw d=String(h),Error("Objects are not valid as a React child (found: "+(d==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":d)+"). If you meant to render a collection of children, use an array instead.");return j}function S$1(h,d,g){if(h==null)return h;var b=[],_=0;return R$2(h,b,"","",function($){return d.call(g,$,_++)}),b}function T$1(h){if(h._status===-1){var d=h._result;d=d(),d.then(function(g){(h._status===0||h._status===-1)&&(h._status=1,h._result=g)},function(g){(h._status===0||h._status===-1)&&(h._status=2,h._result=g)}),h._status===-1&&(h._status=0,h._result=d)}if(h._status===1)return h._result.default;throw h._result}var U$1={current:null},V$1={transition:null},W$1={ReactCurrentDispatcher:U$1,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$1};function X$2(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$1,forEach:function(h,d,g){S$1(h,function(){d.apply(this,arguments)},g)},count:function(h){var d=0;return S$1(h,function(){d++}),d},toArray:function(h){return S$1(h,function(d){return d})||[]},only:function(h){if(!O$1(h))throw Error("React.Children.only expected to receive a single React element child.");return h}};react_production_min.Component=E$2;react_production_min.Fragment=p$2;react_production_min.Profiler=r$2;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$1;react_production_min.Suspense=w;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.act=X$2;react_production_min.cloneElement=function(h,d,g){if(h==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+h+".");var b=C$1({},h.props),_=h.key,$=h.ref,j=h._owner;if(d!=null){if(d.ref!==void 0&&($=d.ref,j=K$1.current),d.key!==void 0&&(_=""+d.key),h.type&&h.type.defaultProps)var _e=h.type.defaultProps;for(et in d)J.call(d,et)&&!L$1.hasOwnProperty(et)&&(b[et]=d[et]===void 0&&_e!==void 0?_e[et]:d[et])}var et=arguments.length-2;if(et===1)b.children=g;else if(1<et){_e=Array(et);for(var rt=0;rt<et;rt++)_e[rt]=arguments[rt+2];b.children=_e}return{$$typeof:l$1,type:h.type,key:_,ref:$,props:b,_owner:j}};react_production_min.createContext=function(h){return h={$$typeof:u,_currentValue:h,_currentValue2:h,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},h.Provider={$$typeof:t$1,_context:h},h.Consumer=h};react_production_min.createElement=M$2;react_production_min.createFactory=function(h){var d=M$2.bind(null,h);return d.type=h,d};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(h){return{$$typeof:v$2,render:h}};react_production_min.isValidElement=O$1;react_production_min.lazy=function(h){return{$$typeof:y,_payload:{_status:-1,_result:h},_init:T$1}};react_production_min.memo=function(h,d){return{$$typeof:x,type:h,compare:d===void 0?null:d}};react_production_min.startTransition=function(h){var d=V$1.transition;V$1.transition={};try{h()}finally{V$1.transition=d}};react_production_min.unstable_act=X$2;react_production_min.useCallback=function(h,d){return U$1.current.useCallback(h,d)};react_production_min.useContext=function(h){return U$1.current.useContext(h)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(h){return U$1.current.useDeferredValue(h)};react_production_min.useEffect=function(h,d){return U$1.current.useEffect(h,d)};react_production_min.useId=function(){return U$1.current.useId()};react_production_min.useImperativeHandle=function(h,d,g){return U$1.current.useImperativeHandle(h,d,g)};react_production_min.useInsertionEffect=function(h,d){return U$1.current.useInsertionEffect(h,d)};react_production_min.useLayoutEffect=function(h,d){return U$1.current.useLayoutEffect(h,d)};react_production_min.useMemo=function(h,d){return U$1.current.useMemo(h,d)};react_production_min.useReducer=function(h,d,g){return U$1.current.useReducer(h,d,g)};react_production_min.useRef=function(h){return U$1.current.useRef(h)};react_production_min.useState=function(h){return U$1.current.useState(h)};react_production_min.useSyncExternalStore=function(h,d,g){return U$1.current.useSyncExternalStore(h,d,g)};react_production_min.useTransition=function(){return U$1.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;const o$1=getDefaultExportFromCjs(reactExports),React=_mergeNamespaces({__proto__:null,default:o$1},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=reactExports,k=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m$1=Object.prototype.hasOwnProperty,n$1=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$1={key:!0,ref:!0,__self:!0,__source:!0};function q(h,d,g){var b,_={},$=null,j=null;g!==void 0&&($=""+g),d.key!==void 0&&($=""+d.key),d.ref!==void 0&&(j=d.ref);for(b in d)m$1.call(d,b)&&!p$1.hasOwnProperty(b)&&(_[b]=d[b]);if(h&&h.defaultProps)for(b in d=h.defaultProps,d)_[b]===void 0&&(_[b]=d[b]);return{$$typeof:k,type:h,key:$,ref:j,props:_,_owner:n$1.current}}reactJsxRuntime_production_min.Fragment=l;reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(h){function d(Kt,Bt){var nr=Kt.length;Kt.push(Bt);e:for(;0<nr;){var Ut=nr-1>>>1,zt=Kt[Ut];if(0<_(zt,Bt))Kt[Ut]=Bt,Kt[nr]=zt,nr=Ut;else break e}}function g(Kt){return Kt.length===0?null:Kt[0]}function b(Kt){if(Kt.length===0)return null;var Bt=Kt[0],nr=Kt.pop();if(nr!==Bt){Kt[0]=nr;e:for(var Ut=0,zt=Kt.length,sr=zt>>>1;Ut<sr;){var or=2*(Ut+1)-1,ur=Kt[or],_r=or+1,vr=Kt[_r];if(0>_(ur,nr))_r<zt&&0>_(vr,ur)?(Kt[Ut]=vr,Kt[_r]=nr,Ut=_r):(Kt[Ut]=ur,Kt[or]=nr,Ut=or);else if(_r<zt&&0>_(vr,nr))Kt[Ut]=vr,Kt[_r]=nr,Ut=_r;else break e}}return Bt}function _(Kt,Bt){var nr=Kt.sortIndex-Bt.sortIndex;return nr!==0?nr:Kt.id-Bt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var $=performance;h.unstable_now=function(){return $.now()}}else{var j=Date,_e=j.now();h.unstable_now=function(){return j.now()-_e}}var et=[],rt=[],nt=1,st=null,at=3,it=!1,dt=!1,ot=!1,ct=typeof setTimeout=="function"?setTimeout:null,lt=typeof clearTimeout=="function"?clearTimeout:null,ut=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ft(Kt){for(var Bt=g(rt);Bt!==null;){if(Bt.callback===null)b(rt);else if(Bt.startTime<=Kt)b(rt),Bt.sortIndex=Bt.expirationTime,d(et,Bt);else break;Bt=g(rt)}}function Et(Kt){if(ot=!1,ft(Kt),!dt)if(g(et)!==null)dt=!0,tr(Tt);else{var Bt=g(rt);Bt!==null&&er(Et,Bt.startTime-Kt)}}function Tt(Kt,Bt){dt=!1,ot&&(ot=!1,lt(kt),kt=-1),it=!0;var nr=at;try{for(ft(Bt),st=g(et);st!==null&&(!(st.expirationTime>Bt)||Kt&&!Zt());){var Ut=st.callback;if(typeof Ut=="function"){st.callback=null,at=st.priorityLevel;var zt=Ut(st.expirationTime<=Bt);Bt=h.unstable_now(),typeof zt=="function"?st.callback=zt:st===g(et)&&b(et),ft(Bt)}else b(et);st=g(et)}if(st!==null)var sr=!0;else{var or=g(rt);or!==null&&er(Et,or.startTime-Bt),sr=!1}return sr}finally{st=null,at=nr,it=!1}}var St=!1,ht=null,kt=-1,Rt=5,Mt=-1;function Zt(){return!(h.unstable_now()-Mt<Rt)}function Ct(){if(ht!==null){var Kt=h.unstable_now();Mt=Kt;var Bt=!0;try{Bt=ht(!0,Kt)}finally{Bt?Pt():(St=!1,ht=null)}}else St=!1}var Pt;if(typeof ut=="function")Pt=function(){ut(Ct)};else if(typeof MessageChannel<"u"){var xt=new MessageChannel,Ht=xt.port2;xt.port1.onmessage=Ct,Pt=function(){Ht.postMessage(null)}}else Pt=function(){ct(Ct,0)};function tr(Kt){ht=Kt,St||(St=!0,Pt())}function er(Kt,Bt){kt=ct(function(){Kt(h.unstable_now())},Bt)}h.unstable_IdlePriority=5,h.unstable_ImmediatePriority=1,h.unstable_LowPriority=4,h.unstable_NormalPriority=3,h.unstable_Profiling=null,h.unstable_UserBlockingPriority=2,h.unstable_cancelCallback=function(Kt){Kt.callback=null},h.unstable_continueExecution=function(){dt||it||(dt=!0,tr(Tt))},h.unstable_forceFrameRate=function(Kt){0>Kt||125<Kt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Rt=0<Kt?Math.floor(1e3/Kt):5},h.unstable_getCurrentPriorityLevel=function(){return at},h.unstable_getFirstCallbackNode=function(){return g(et)},h.unstable_next=function(Kt){switch(at){case 1:case 2:case 3:var Bt=3;break;default:Bt=at}var nr=at;at=Bt;try{return Kt()}finally{at=nr}},h.unstable_pauseExecution=function(){},h.unstable_requestPaint=function(){},h.unstable_runWithPriority=function(Kt,Bt){switch(Kt){case 1:case 2:case 3:case 4:case 5:break;default:Kt=3}var nr=at;at=Kt;try{return Bt()}finally{at=nr}},h.unstable_scheduleCallback=function(Kt,Bt,nr){var Ut=h.unstable_now();switch(typeof nr=="object"&&nr!==null?(nr=nr.delay,nr=typeof nr=="number"&&0<nr?Ut+nr:Ut):nr=Ut,Kt){case 1:var zt=-1;break;case 2:zt=250;break;case 5:zt=1073741823;break;case 4:zt=1e4;break;default:zt=5e3}return zt=nr+zt,Kt={id:nt++,callback:Bt,priorityLevel:Kt,startTime:nr,expirationTime:zt,sortIndex:-1},nr>Ut?(Kt.sortIndex=nr,d(rt,Kt),g(et)===null&&Kt===g(rt)&&(ot?(lt(kt),kt=-1):ot=!0,er(Et,nr-Ut))):(Kt.sortIndex=zt,d(et,Kt),dt||it||(dt=!0,tr(Tt))),Kt},h.unstable_shouldYield=Zt,h.unstable_wrapCallback=function(Kt){var Bt=at;return function(){var nr=at;at=Bt;try{return Kt.apply(this,arguments)}finally{at=nr}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p(h){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+h,g=1;g<arguments.length;g++)d+="&args[]="+encodeURIComponent(arguments[g]);return"Minified React error #"+h+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(h,d){ha(h,d),ha(h+"Capture",d)}function ha(h,d){for(ea[h]=d,h=0;h<d.length;h++)da.add(d[h])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(h){return ja.call(ma,h)?!0:ja.call(la,h)?!1:ka.test(h)?ma[h]=!0:(la[h]=!0,!1)}function pa(h,d,g,b){if(g!==null&&g.type===0)return!1;switch(typeof d){case"function":case"symbol":return!0;case"boolean":return b?!1:g!==null?!g.acceptsBooleans:(h=h.toLowerCase().slice(0,5),h!=="data-"&&h!=="aria-");default:return!1}}function qa(h,d,g,b){if(d===null||typeof d>"u"||pa(h,d,g,b))return!0;if(b)return!1;if(g!==null)switch(g.type){case 3:return!d;case 4:return d===!1;case 5:return isNaN(d);case 6:return isNaN(d)||1>d}return!1}function v$1(h,d,g,b,_,$,j){this.acceptsBooleans=d===2||d===3||d===4,this.attributeName=b,this.attributeNamespace=_,this.mustUseProperty=g,this.propertyName=h,this.type=d,this.sanitizeURL=$,this.removeEmptyString=j}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(h){z[h]=new v$1(h,0,!1,h,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(h){var d=h[0];z[d]=new v$1(d,1,!1,h[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(h){z[h]=new v$1(h,2,!1,h.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(h){z[h]=new v$1(h,2,!1,h,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(h){z[h]=new v$1(h,3,!1,h.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(h){z[h]=new v$1(h,3,!0,h,null,!1,!1)});["capture","download"].forEach(function(h){z[h]=new v$1(h,4,!1,h,null,!1,!1)});["cols","rows","size","span"].forEach(function(h){z[h]=new v$1(h,6,!1,h,null,!1,!1)});["rowSpan","start"].forEach(function(h){z[h]=new v$1(h,5,!1,h.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(h){return h[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(h){var d=h.replace(ra,sa);z[d]=new v$1(d,1,!1,h,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(h){var d=h.replace(ra,sa);z[d]=new v$1(d,1,!1,h,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(h){var d=h.replace(ra,sa);z[d]=new v$1(d,1,!1,h,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(h){z[h]=new v$1(h,1,!1,h.toLowerCase(),null,!1,!1)});z.xlinkHref=new v$1("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(h){z[h]=new v$1(h,1,!1,h.toLowerCase(),null,!0,!0)});function ta(h,d,g,b){var _=z.hasOwnProperty(d)?z[d]:null;(_!==null?_.type!==0:b||!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(qa(d,g,_,b)&&(g=null),b||_===null?oa(d)&&(g===null?h.removeAttribute(d):h.setAttribute(d,""+g)):_.mustUseProperty?h[_.propertyName]=g===null?_.type===3?!1:"":g:(d=_.attributeName,b=_.attributeNamespace,g===null?h.removeAttribute(d):(_=_.type,g=_===3||_===4&&g===!0?"":""+g,b?h.setAttributeNS(b,d,g):h.setAttribute(d,g))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(h){return h===null||typeof h!="object"?null:(h=Ja&&h[Ja]||h["@@iterator"],typeof h=="function"?h:null)}var A=Object.assign,La;function Ma(h){if(La===void 0)try{throw Error()}catch(g){var d=g.stack.trim().match(/\n( *(at )?)/);La=d&&d[1]||""}return`
`+La+h}var Na=!1;function Oa(h,d){if(!h||Na)return"";Na=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(rt){var b=rt}Reflect.construct(h,[],d)}else{try{d.call()}catch(rt){b=rt}h.call(d.prototype)}else{try{throw Error()}catch(rt){b=rt}h()}}catch(rt){if(rt&&b&&typeof rt.stack=="string"){for(var _=rt.stack.split(`
`),$=b.stack.split(`
`),j=_.length-1,_e=$.length-1;1<=j&&0<=_e&&_[j]!==$[_e];)_e--;for(;1<=j&&0<=_e;j--,_e--)if(_[j]!==$[_e]){if(j!==1||_e!==1)do if(j--,_e--,0>_e||_[j]!==$[_e]){var et=`
`+_[j].replace(" at new "," at ");return h.displayName&&et.includes("<anonymous>")&&(et=et.replace("<anonymous>",h.displayName)),et}while(1<=j&&0<=_e);break}}}finally{Na=!1,Error.prepareStackTrace=g}return(h=h?h.displayName||h.name:"")?Ma(h):""}function Pa(h){switch(h.tag){case 5:return Ma(h.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return h=Oa(h.type,!1),h;case 11:return h=Oa(h.type.render,!1),h;case 1:return h=Oa(h.type,!0),h;default:return""}}function Qa(h){if(h==null)return null;if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case Ca:return(h.displayName||"Context")+".Consumer";case Ba:return(h._context.displayName||"Context")+".Provider";case Da:var d=h.render;return h=h.displayName,h||(h=d.displayName||d.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case Ga:return d=h.displayName||null,d!==null?d:Qa(h.type)||"Memo";case Ha:d=h._payload,h=h._init;try{return Qa(h(d))}catch{}}return null}function Ra(h){var d=h.type;switch(h.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return h=d.render,h=h.displayName||h.name||"",d.displayName||(h!==""?"ForwardRef("+h+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(d);case 8:return d===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function Sa(h){switch(typeof h){case"boolean":case"number":case"string":case"undefined":return h;case"object":return h;default:return""}}function Ta(h){var d=h.type;return(h=h.nodeName)&&h.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function Ua(h){var d=Ta(h)?"checked":"value",g=Object.getOwnPropertyDescriptor(h.constructor.prototype,d),b=""+h[d];if(!h.hasOwnProperty(d)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var _=g.get,$=g.set;return Object.defineProperty(h,d,{configurable:!0,get:function(){return _.call(this)},set:function(j){b=""+j,$.call(this,j)}}),Object.defineProperty(h,d,{enumerable:g.enumerable}),{getValue:function(){return b},setValue:function(j){b=""+j},stopTracking:function(){h._valueTracker=null,delete h[d]}}}}function Va(h){h._valueTracker||(h._valueTracker=Ua(h))}function Wa(h){if(!h)return!1;var d=h._valueTracker;if(!d)return!0;var g=d.getValue(),b="";return h&&(b=Ta(h)?h.checked?"true":"false":h.value),h=b,h!==g?(d.setValue(h),!0):!1}function Xa(h){if(h=h||(typeof document<"u"?document:void 0),typeof h>"u")return null;try{return h.activeElement||h.body}catch{return h.body}}function Ya(h,d){var g=d.checked;return A({},d,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:g??h._wrapperState.initialChecked})}function Za(h,d){var g=d.defaultValue==null?"":d.defaultValue,b=d.checked!=null?d.checked:d.defaultChecked;g=Sa(d.value!=null?d.value:g),h._wrapperState={initialChecked:b,initialValue:g,controlled:d.type==="checkbox"||d.type==="radio"?d.checked!=null:d.value!=null}}function ab(h,d){d=d.checked,d!=null&&ta(h,"checked",d,!1)}function bb(h,d){ab(h,d);var g=Sa(d.value),b=d.type;if(g!=null)b==="number"?(g===0&&h.value===""||h.value!=g)&&(h.value=""+g):h.value!==""+g&&(h.value=""+g);else if(b==="submit"||b==="reset"){h.removeAttribute("value");return}d.hasOwnProperty("value")?cb(h,d.type,g):d.hasOwnProperty("defaultValue")&&cb(h,d.type,Sa(d.defaultValue)),d.checked==null&&d.defaultChecked!=null&&(h.defaultChecked=!!d.defaultChecked)}function db(h,d,g){if(d.hasOwnProperty("value")||d.hasOwnProperty("defaultValue")){var b=d.type;if(!(b!=="submit"&&b!=="reset"||d.value!==void 0&&d.value!==null))return;d=""+h._wrapperState.initialValue,g||d===h.value||(h.value=d),h.defaultValue=d}g=h.name,g!==""&&(h.name=""),h.defaultChecked=!!h._wrapperState.initialChecked,g!==""&&(h.name=g)}function cb(h,d,g){(d!=="number"||Xa(h.ownerDocument)!==h)&&(g==null?h.defaultValue=""+h._wrapperState.initialValue:h.defaultValue!==""+g&&(h.defaultValue=""+g))}var eb=Array.isArray;function fb(h,d,g,b){if(h=h.options,d){d={};for(var _=0;_<g.length;_++)d["$"+g[_]]=!0;for(g=0;g<h.length;g++)_=d.hasOwnProperty("$"+h[g].value),h[g].selected!==_&&(h[g].selected=_),_&&b&&(h[g].defaultSelected=!0)}else{for(g=""+Sa(g),d=null,_=0;_<h.length;_++){if(h[_].value===g){h[_].selected=!0,b&&(h[_].defaultSelected=!0);return}d!==null||h[_].disabled||(d=h[_])}d!==null&&(d.selected=!0)}}function gb(h,d){if(d.dangerouslySetInnerHTML!=null)throw Error(p(91));return A({},d,{value:void 0,defaultValue:void 0,children:""+h._wrapperState.initialValue})}function hb(h,d){var g=d.value;if(g==null){if(g=d.children,d=d.defaultValue,g!=null){if(d!=null)throw Error(p(92));if(eb(g)){if(1<g.length)throw Error(p(93));g=g[0]}d=g}d==null&&(d=""),g=d}h._wrapperState={initialValue:Sa(g)}}function ib(h,d){var g=Sa(d.value),b=Sa(d.defaultValue);g!=null&&(g=""+g,g!==h.value&&(h.value=g),d.defaultValue==null&&h.defaultValue!==g&&(h.defaultValue=g)),b!=null&&(h.defaultValue=""+b)}function jb(h){var d=h.textContent;d===h._wrapperState.initialValue&&d!==""&&d!==null&&(h.value=d)}function kb(h){switch(h){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(h,d){return h==null||h==="http://www.w3.org/1999/xhtml"?kb(d):h==="http://www.w3.org/2000/svg"&&d==="foreignObject"?"http://www.w3.org/1999/xhtml":h}var mb,nb=function(h){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(d,g,b,_){MSApp.execUnsafeLocalFunction(function(){return h(d,g,b,_)})}:h}(function(h,d){if(h.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in h)h.innerHTML=d;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+d.valueOf().toString()+"</svg>",d=mb.firstChild;h.firstChild;)h.removeChild(h.firstChild);for(;d.firstChild;)h.appendChild(d.firstChild)}});function ob(h,d){if(d){var g=h.firstChild;if(g&&g===h.lastChild&&g.nodeType===3){g.nodeValue=d;return}}h.textContent=d}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(h){qb.forEach(function(d){d=d+h.charAt(0).toUpperCase()+h.substring(1),pb[d]=pb[h]})});function rb(h,d,g){return d==null||typeof d=="boolean"||d===""?"":g||typeof d!="number"||d===0||pb.hasOwnProperty(h)&&pb[h]?(""+d).trim():d+"px"}function sb(h,d){h=h.style;for(var g in d)if(d.hasOwnProperty(g)){var b=g.indexOf("--")===0,_=rb(g,d[g],b);g==="float"&&(g="cssFloat"),b?h.setProperty(g,_):h[g]=_}}var tb=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(h,d){if(d){if(tb[h]&&(d.children!=null||d.dangerouslySetInnerHTML!=null))throw Error(p(137,h));if(d.dangerouslySetInnerHTML!=null){if(d.children!=null)throw Error(p(60));if(typeof d.dangerouslySetInnerHTML!="object"||!("__html"in d.dangerouslySetInnerHTML))throw Error(p(61))}if(d.style!=null&&typeof d.style!="object")throw Error(p(62))}}function vb(h,d){if(h.indexOf("-")===-1)return typeof d.is=="string";switch(h){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(h){return h=h.target||h.srcElement||window,h.correspondingUseElement&&(h=h.correspondingUseElement),h.nodeType===3?h.parentNode:h}var yb=null,zb=null,Ab=null;function Bb(h){if(h=Cb(h)){if(typeof yb!="function")throw Error(p(280));var d=h.stateNode;d&&(d=Db(d),yb(h.stateNode,h.type,d))}}function Eb(h){zb?Ab?Ab.push(h):Ab=[h]:zb=h}function Fb(){if(zb){var h=zb,d=Ab;if(Ab=zb=null,Bb(h),d)for(h=0;h<d.length;h++)Bb(d[h])}}function Gb(h,d){return h(d)}function Hb(){}var Ib=!1;function Jb(h,d,g){if(Ib)return h(d,g);Ib=!0;try{return Gb(h,d,g)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(h,d){var g=h.stateNode;if(g===null)return null;var b=Db(g);if(b===null)return null;g=b[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(h=h.type,b=!(h==="button"||h==="input"||h==="select"||h==="textarea")),h=!b;break e;default:h=!1}if(h)return null;if(g&&typeof g!="function")throw Error(p(231,d,typeof g));return g}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(h,d,g,b,_,$,j,_e,et){var rt=Array.prototype.slice.call(arguments,3);try{d.apply(g,rt)}catch(nt){this.onError(nt)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(h){Ob=!0,Pb=h}};function Tb(h,d,g,b,_,$,j,_e,et){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(h,d,g,b,_,$,j,_e,et){if(Tb.apply(this,arguments),Ob){if(Ob){var rt=Pb;Ob=!1,Pb=null}else throw Error(p(198));Qb||(Qb=!0,Rb=rt)}}function Vb(h){var d=h,g=h;if(h.alternate)for(;d.return;)d=d.return;else{h=d;do d=h,d.flags&4098&&(g=d.return),h=d.return;while(h)}return d.tag===3?g:null}function Wb(h){if(h.tag===13){var d=h.memoizedState;if(d===null&&(h=h.alternate,h!==null&&(d=h.memoizedState)),d!==null)return d.dehydrated}return null}function Xb(h){if(Vb(h)!==h)throw Error(p(188))}function Yb(h){var d=h.alternate;if(!d){if(d=Vb(h),d===null)throw Error(p(188));return d!==h?null:h}for(var g=h,b=d;;){var _=g.return;if(_===null)break;var $=_.alternate;if($===null){if(b=_.return,b!==null){g=b;continue}break}if(_.child===$.child){for($=_.child;$;){if($===g)return Xb(_),h;if($===b)return Xb(_),d;$=$.sibling}throw Error(p(188))}if(g.return!==b.return)g=_,b=$;else{for(var j=!1,_e=_.child;_e;){if(_e===g){j=!0,g=_,b=$;break}if(_e===b){j=!0,b=_,g=$;break}_e=_e.sibling}if(!j){for(_e=$.child;_e;){if(_e===g){j=!0,g=$,b=_;break}if(_e===b){j=!0,b=$,g=_;break}_e=_e.sibling}if(!j)throw Error(p(189))}}if(g.alternate!==b)throw Error(p(190))}if(g.tag!==3)throw Error(p(188));return g.stateNode.current===g?h:d}function Zb(h){return h=Yb(h),h!==null?$b(h):null}function $b(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){var d=$b(h);if(d!==null)return d;h=h.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(h){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,h,void 0,(h.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(h){return h>>>=0,h===0?32:31-(pc(h)/qc|0)|0}var rc=64,sc=4194304;function tc(h){switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return h&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return h}}function uc(h,d){var g=h.pendingLanes;if(g===0)return 0;var b=0,_=h.suspendedLanes,$=h.pingedLanes,j=g&268435455;if(j!==0){var _e=j&~_;_e!==0?b=tc(_e):($&=j,$!==0&&(b=tc($)))}else j=g&~_,j!==0?b=tc(j):$!==0&&(b=tc($));if(b===0)return 0;if(d!==0&&d!==b&&!(d&_)&&(_=b&-b,$=d&-d,_>=$||_===16&&($&4194240)!==0))return d;if(b&4&&(b|=g&16),d=h.entangledLanes,d!==0)for(h=h.entanglements,d&=b;0<d;)g=31-oc(d),_=1<<g,b|=h[g],d&=~_;return b}function vc(h,d){switch(h){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(h,d){for(var g=h.suspendedLanes,b=h.pingedLanes,_=h.expirationTimes,$=h.pendingLanes;0<$;){var j=31-oc($),_e=1<<j,et=_[j];et===-1?(!(_e&g)||_e&b)&&(_[j]=vc(_e,d)):et<=d&&(h.expiredLanes|=_e),$&=~_e}}function xc(h){return h=h.pendingLanes&-1073741825,h!==0?h:h&1073741824?1073741824:0}function yc(){var h=rc;return rc<<=1,!(rc&4194240)&&(rc=64),h}function zc(h){for(var d=[],g=0;31>g;g++)d.push(h);return d}function Ac(h,d,g){h.pendingLanes|=d,d!==536870912&&(h.suspendedLanes=0,h.pingedLanes=0),h=h.eventTimes,d=31-oc(d),h[d]=g}function Bc(h,d){var g=h.pendingLanes&~d;h.pendingLanes=d,h.suspendedLanes=0,h.pingedLanes=0,h.expiredLanes&=d,h.mutableReadLanes&=d,h.entangledLanes&=d,d=h.entanglements;var b=h.eventTimes;for(h=h.expirationTimes;0<g;){var _=31-oc(g),$=1<<_;d[_]=0,b[_]=-1,h[_]=-1,g&=~$}}function Cc(h,d){var g=h.entangledLanes|=d;for(h=h.entanglements;g;){var b=31-oc(g),_=1<<b;_&d|h[b]&d&&(h[b]|=d),g&=~_}}var C=0;function Dc(h){return h&=-h,1<h?4<h?h&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(h,d){switch(h){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(d.pointerId)}}function Tc(h,d,g,b,_,$){return h===null||h.nativeEvent!==$?(h={blockedOn:d,domEventName:g,eventSystemFlags:b,nativeEvent:$,targetContainers:[_]},d!==null&&(d=Cb(d),d!==null&&Fc(d)),h):(h.eventSystemFlags|=b,d=h.targetContainers,_!==null&&d.indexOf(_)===-1&&d.push(_),h)}function Uc(h,d,g,b,_){switch(d){case"focusin":return Lc=Tc(Lc,h,d,g,b,_),!0;case"dragenter":return Mc=Tc(Mc,h,d,g,b,_),!0;case"mouseover":return Nc=Tc(Nc,h,d,g,b,_),!0;case"pointerover":var $=_.pointerId;return Oc.set($,Tc(Oc.get($)||null,h,d,g,b,_)),!0;case"gotpointercapture":return $=_.pointerId,Pc.set($,Tc(Pc.get($)||null,h,d,g,b,_)),!0}return!1}function Vc(h){var d=Wc(h.target);if(d!==null){var g=Vb(d);if(g!==null){if(d=g.tag,d===13){if(d=Wb(g),d!==null){h.blockedOn=d,Ic(h.priority,function(){Gc(g)});return}}else if(d===3&&g.stateNode.current.memoizedState.isDehydrated){h.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}h.blockedOn=null}function Xc(h){if(h.blockedOn!==null)return!1;for(var d=h.targetContainers;0<d.length;){var g=Yc(h.domEventName,h.eventSystemFlags,d[0],h.nativeEvent);if(g===null){g=h.nativeEvent;var b=new g.constructor(g.type,g);wb=b,g.target.dispatchEvent(b),wb=null}else return d=Cb(g),d!==null&&Fc(d),h.blockedOn=g,!1;d.shift()}return!0}function Zc(h,d,g){Xc(h)&&g.delete(d)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(h,d){h.blockedOn===d&&(h.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(h){function d(_){return ad(_,h)}if(0<Kc.length){ad(Kc[0],h);for(var g=1;g<Kc.length;g++){var b=Kc[g];b.blockedOn===h&&(b.blockedOn=null)}}for(Lc!==null&&ad(Lc,h),Mc!==null&&ad(Mc,h),Nc!==null&&ad(Nc,h),Oc.forEach(d),Pc.forEach(d),g=0;g<Qc.length;g++)b=Qc[g],b.blockedOn===h&&(b.blockedOn=null);for(;0<Qc.length&&(g=Qc[0],g.blockedOn===null);)Vc(g),g.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(h,d,g,b){var _=C,$=cd.transition;cd.transition=null;try{C=1,fd(h,d,g,b)}finally{C=_,cd.transition=$}}function gd(h,d,g,b){var _=C,$=cd.transition;cd.transition=null;try{C=4,fd(h,d,g,b)}finally{C=_,cd.transition=$}}function fd(h,d,g,b){if(dd){var _=Yc(h,d,g,b);if(_===null)hd(h,d,b,id,g),Sc(h,b);else if(Uc(_,h,d,g,b))b.stopPropagation();else if(Sc(h,b),d&4&&-1<Rc.indexOf(h)){for(;_!==null;){var $=Cb(_);if($!==null&&Ec($),$=Yc(h,d,g,b),$===null&&hd(h,d,b,id,g),$===_)break;_=$}_!==null&&b.stopPropagation()}else hd(h,d,b,null,g)}}var id=null;function Yc(h,d,g,b){if(id=null,h=xb(b),h=Wc(h),h!==null)if(d=Vb(h),d===null)h=null;else if(g=d.tag,g===13){if(h=Wb(d),h!==null)return h;h=null}else if(g===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;h=null}else d!==h&&(h=null);return id=h,null}function jd(h){switch(h){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var h,d=ld,g=d.length,b,_="value"in kd?kd.value:kd.textContent,$=_.length;for(h=0;h<g&&d[h]===_[h];h++);var j=g-h;for(b=1;b<=j&&d[g-b]===_[$-b];b++);return md=_.slice(h,1<b?1-b:void 0)}function od(h){var d=h.keyCode;return"charCode"in h?(h=h.charCode,h===0&&d===13&&(h=13)):h=d,h===10&&(h=13),32<=h||h===13?h:0}function pd(){return!0}function qd(){return!1}function rd(h){function d(g,b,_,$,j){this._reactName=g,this._targetInst=_,this.type=b,this.nativeEvent=$,this.target=j,this.currentTarget=null;for(var _e in h)h.hasOwnProperty(_e)&&(g=h[_e],this[_e]=g?g($):$[_e]);return this.isDefaultPrevented=($.defaultPrevented!=null?$.defaultPrevented:$.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),d}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(h){return h.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(h){return h.relatedTarget===void 0?h.fromElement===h.srcElement?h.toElement:h.fromElement:h.relatedTarget},movementX:function(h){return"movementX"in h?h.movementX:(h!==yd&&(yd&&h.type==="mousemove"?(wd=h.screenX-yd.screenX,xd=h.screenY-yd.screenY):xd=wd=0,yd=h),wd)},movementY:function(h){return"movementY"in h?h.movementY:xd}}),Bd=rd(Ad),Cd=A({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A({},sd,{clipboardData:function(h){return"clipboardData"in h?h.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(h){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(h):(h=Od[h])?!!d[h]:!1}function zd(){return Pd}var Qd=A({},ud,{key:function(h){if(h.key){var d=Md[h.key]||h.key;if(d!=="Unidentified")return d}return h.type==="keypress"?(h=od(h),h===13?"Enter":String.fromCharCode(h)):h.type==="keydown"||h.type==="keyup"?Nd[h.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(h){return h.type==="keypress"?od(h):0},keyCode:function(h){return h.type==="keydown"||h.type==="keyup"?h.keyCode:0},which:function(h){return h.type==="keypress"?od(h):h.type==="keydown"||h.type==="keyup"?h.keyCode:0}}),Rd=rd(Qd),Sd=A({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A({},Ad,{deltaX:function(h){return"deltaX"in h?h.deltaX:"wheelDeltaX"in h?-h.wheelDeltaX:0},deltaY:function(h){return"deltaY"in h?h.deltaY:"wheelDeltaY"in h?-h.wheelDeltaY:"wheelDelta"in h?-h.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae$1=ia&&"CompositionEvent"in window,be$1=null;ia&&"documentMode"in document&&(be$1=document.documentMode);var ce$1=ia&&"TextEvent"in window&&!be$1,de$1=ia&&(!ae$1||be$1&&8<be$1&&11>=be$1),ee$1=" ",fe=!1;function ge$1(h,d){switch(h){case"keyup":return $d.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$1(h){return h=h.detail,typeof h=="object"&&"data"in h?h.data:null}var ie$1=!1;function je(h,d){switch(h){case"compositionend":return he$1(d);case"keypress":return d.which!==32?null:(fe=!0,ee$1);case"textInput":return h=d.data,h===ee$1&&fe?null:h;default:return null}}function ke(h,d){if(ie$1)return h==="compositionend"||!ae$1&&ge$1(h,d)?(h=nd(),md=ld=kd=null,ie$1=!1,h):null;switch(h){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return de$1&&d.locale!=="ko"?null:d.data;default:return null}}var le$1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me$1(h){var d=h&&h.nodeName&&h.nodeName.toLowerCase();return d==="input"?!!le$1[h.type]:d==="textarea"}function ne$1(h,d,g,b){Eb(b),d=oe$1(d,"onChange"),0<d.length&&(g=new td("onChange","change",null,g,b),h.push({event:g,listeners:d}))}var pe$1=null,qe=null;function re(h){se$1(h,0)}function te$1(h){var d=ue$1(h);if(Wa(d))return h}function ve$1(h,d){if(h==="change")return d}var we$1=!1;if(ia){var xe$1;if(ia){var ye$1="oninput"in document;if(!ye$1){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye$1=typeof ze.oninput=="function"}xe$1=ye$1}else xe$1=!1;we$1=xe$1&&(!document.documentMode||9<document.documentMode)}function Ae(){pe$1&&(pe$1.detachEvent("onpropertychange",Be),qe=pe$1=null)}function Be(h){if(h.propertyName==="value"&&te$1(qe)){var d=[];ne$1(d,qe,h,xb(h)),Jb(re,d)}}function Ce(h,d,g){h==="focusin"?(Ae(),pe$1=d,qe=g,pe$1.attachEvent("onpropertychange",Be)):h==="focusout"&&Ae()}function De(h){if(h==="selectionchange"||h==="keyup"||h==="keydown")return te$1(qe)}function Ee(h,d){if(h==="click")return te$1(d)}function Fe(h,d){if(h==="input"||h==="change")return te$1(d)}function Ge(h,d){return h===d&&(h!==0||1/h===1/d)||h!==h&&d!==d}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(h,d){if(He(h,d))return!0;if(typeof h!="object"||h===null||typeof d!="object"||d===null)return!1;var g=Object.keys(h),b=Object.keys(d);if(g.length!==b.length)return!1;for(b=0;b<g.length;b++){var _=g[b];if(!ja.call(d,_)||!He(h[_],d[_]))return!1}return!0}function Je(h){for(;h&&h.firstChild;)h=h.firstChild;return h}function Ke(h,d){var g=Je(h);h=0;for(var b;g;){if(g.nodeType===3){if(b=h+g.textContent.length,h<=d&&b>=d)return{node:g,offset:d-h};h=b}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=Je(g)}}function Le(h,d){return h&&d?h===d?!0:h&&h.nodeType===3?!1:d&&d.nodeType===3?Le(h,d.parentNode):"contains"in h?h.contains(d):h.compareDocumentPosition?!!(h.compareDocumentPosition(d)&16):!1:!1}function Me(){for(var h=window,d=Xa();d instanceof h.HTMLIFrameElement;){try{var g=typeof d.contentWindow.location.href=="string"}catch{g=!1}if(g)h=d.contentWindow;else break;d=Xa(h.document)}return d}function Ne(h){var d=h&&h.nodeName&&h.nodeName.toLowerCase();return d&&(d==="input"&&(h.type==="text"||h.type==="search"||h.type==="tel"||h.type==="url"||h.type==="password")||d==="textarea"||h.contentEditable==="true")}function Oe(h){var d=Me(),g=h.focusedElem,b=h.selectionRange;if(d!==g&&g&&g.ownerDocument&&Le(g.ownerDocument.documentElement,g)){if(b!==null&&Ne(g)){if(d=b.start,h=b.end,h===void 0&&(h=d),"selectionStart"in g)g.selectionStart=d,g.selectionEnd=Math.min(h,g.value.length);else if(h=(d=g.ownerDocument||document)&&d.defaultView||window,h.getSelection){h=h.getSelection();var _=g.textContent.length,$=Math.min(b.start,_);b=b.end===void 0?$:Math.min(b.end,_),!h.extend&&$>b&&(_=b,b=$,$=_),_=Ke(g,$);var j=Ke(g,b);_&&j&&(h.rangeCount!==1||h.anchorNode!==_.node||h.anchorOffset!==_.offset||h.focusNode!==j.node||h.focusOffset!==j.offset)&&(d=d.createRange(),d.setStart(_.node,_.offset),h.removeAllRanges(),$>b?(h.addRange(d),h.extend(j.node,j.offset)):(d.setEnd(j.node,j.offset),h.addRange(d)))}}for(d=[],h=g;h=h.parentNode;)h.nodeType===1&&d.push({element:h,left:h.scrollLeft,top:h.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<d.length;g++)h=d[g],h.element.scrollLeft=h.left,h.element.scrollTop=h.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te$1=!1;function Ue(h,d,g){var b=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;Te$1||Qe==null||Qe!==Xa(b)||(b=Qe,"selectionStart"in b&&Ne(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),Se&&Ie(Se,b)||(Se=b,b=oe$1(Re,"onSelect"),0<b.length&&(d=new td("onSelect","select",null,d,g),h.push({event:d,listeners:b}),d.target=Qe)))}function Ve(h,d){var g={};return g[h.toLowerCase()]=d.toLowerCase(),g["Webkit"+h]="webkit"+d,g["Moz"+h]="moz"+d,g}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(h){if(Xe[h])return Xe[h];if(!We[h])return h;var d=We[h],g;for(g in d)if(d.hasOwnProperty(g)&&g in Ye)return Xe[h]=d[g];return h}var $e$1=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(h,d){df.set(h,d),fa(d,[h])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e$1,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(h,d,g){var b=h.type||"unknown-event";h.currentTarget=g,Ub(b,d,void 0,h),h.currentTarget=null}function se$1(h,d){d=(d&4)!==0;for(var g=0;g<h.length;g++){var b=h[g],_=b.event;b=b.listeners;e:{var $=void 0;if(d)for(var j=b.length-1;0<=j;j--){var _e=b[j],et=_e.instance,rt=_e.currentTarget;if(_e=_e.listener,et!==$&&_.isPropagationStopped())break e;nf(_,_e,rt),$=et}else for(j=0;j<b.length;j++){if(_e=b[j],et=_e.instance,rt=_e.currentTarget,_e=_e.listener,et!==$&&_.isPropagationStopped())break e;nf(_,_e,rt),$=et}}}if(Qb)throw h=Rb,Qb=!1,Rb=null,h}function D(h,d){var g=d[of];g===void 0&&(g=d[of]=new Set);var b=h+"__bubble";g.has(b)||(pf(d,h,2,!1),g.add(b))}function qf(h,d,g){var b=0;d&&(b|=4),pf(g,h,b,d)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(h){if(!h[rf]){h[rf]=!0,da.forEach(function(g){g!=="selectionchange"&&(mf.has(g)||qf(g,!1,h),qf(g,!0,h))});var d=h.nodeType===9?h:h.ownerDocument;d===null||d[rf]||(d[rf]=!0,qf("selectionchange",!1,d))}}function pf(h,d,g,b){switch(jd(d)){case 1:var _=ed;break;case 4:_=gd;break;default:_=fd}g=_.bind(null,d,g,h),_=void 0,!Lb||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(_=!0),b?_!==void 0?h.addEventListener(d,g,{capture:!0,passive:_}):h.addEventListener(d,g,!0):_!==void 0?h.addEventListener(d,g,{passive:_}):h.addEventListener(d,g,!1)}function hd(h,d,g,b,_){var $=b;if(!(d&1)&&!(d&2)&&b!==null)e:for(;;){if(b===null)return;var j=b.tag;if(j===3||j===4){var _e=b.stateNode.containerInfo;if(_e===_||_e.nodeType===8&&_e.parentNode===_)break;if(j===4)for(j=b.return;j!==null;){var et=j.tag;if((et===3||et===4)&&(et=j.stateNode.containerInfo,et===_||et.nodeType===8&&et.parentNode===_))return;j=j.return}for(;_e!==null;){if(j=Wc(_e),j===null)return;if(et=j.tag,et===5||et===6){b=$=j;continue e}_e=_e.parentNode}}b=b.return}Jb(function(){var rt=$,nt=xb(g),st=[];e:{var at=df.get(h);if(at!==void 0){var it=td,dt=h;switch(h){case"keypress":if(od(g)===0)break e;case"keydown":case"keyup":it=Rd;break;case"focusin":dt="focus",it=Fd;break;case"focusout":dt="blur",it=Fd;break;case"beforeblur":case"afterblur":it=Fd;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":it=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":it=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":it=Vd;break;case $e$1:case af:case bf:it=Hd;break;case cf:it=Xd;break;case"scroll":it=vd;break;case"wheel":it=Zd;break;case"copy":case"cut":case"paste":it=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":it=Td}var ot=(d&4)!==0,ct=!ot&&h==="scroll",lt=ot?at!==null?at+"Capture":null:at;ot=[];for(var ut=rt,ft;ut!==null;){ft=ut;var Et=ft.stateNode;if(ft.tag===5&&Et!==null&&(ft=Et,lt!==null&&(Et=Kb(ut,lt),Et!=null&&ot.push(tf(ut,Et,ft)))),ct)break;ut=ut.return}0<ot.length&&(at=new it(at,dt,null,g,nt),st.push({event:at,listeners:ot}))}}if(!(d&7)){e:{if(at=h==="mouseover"||h==="pointerover",it=h==="mouseout"||h==="pointerout",at&&g!==wb&&(dt=g.relatedTarget||g.fromElement)&&(Wc(dt)||dt[uf]))break e;if((it||at)&&(at=nt.window===nt?nt:(at=nt.ownerDocument)?at.defaultView||at.parentWindow:window,it?(dt=g.relatedTarget||g.toElement,it=rt,dt=dt?Wc(dt):null,dt!==null&&(ct=Vb(dt),dt!==ct||dt.tag!==5&&dt.tag!==6)&&(dt=null)):(it=null,dt=rt),it!==dt)){if(ot=Bd,Et="onMouseLeave",lt="onMouseEnter",ut="mouse",(h==="pointerout"||h==="pointerover")&&(ot=Td,Et="onPointerLeave",lt="onPointerEnter",ut="pointer"),ct=it==null?at:ue$1(it),ft=dt==null?at:ue$1(dt),at=new ot(Et,ut+"leave",it,g,nt),at.target=ct,at.relatedTarget=ft,Et=null,Wc(nt)===rt&&(ot=new ot(lt,ut+"enter",dt,g,nt),ot.target=ft,ot.relatedTarget=ct,Et=ot),ct=Et,it&&dt)t:{for(ot=it,lt=dt,ut=0,ft=ot;ft;ft=vf(ft))ut++;for(ft=0,Et=lt;Et;Et=vf(Et))ft++;for(;0<ut-ft;)ot=vf(ot),ut--;for(;0<ft-ut;)lt=vf(lt),ft--;for(;ut--;){if(ot===lt||lt!==null&&ot===lt.alternate)break t;ot=vf(ot),lt=vf(lt)}ot=null}else ot=null;it!==null&&wf(st,at,it,ot,!1),dt!==null&&ct!==null&&wf(st,ct,dt,ot,!0)}}e:{if(at=rt?ue$1(rt):window,it=at.nodeName&&at.nodeName.toLowerCase(),it==="select"||it==="input"&&at.type==="file")var Tt=ve$1;else if(me$1(at))if(we$1)Tt=Fe;else{Tt=De;var St=Ce}else(it=at.nodeName)&&it.toLowerCase()==="input"&&(at.type==="checkbox"||at.type==="radio")&&(Tt=Ee);if(Tt&&(Tt=Tt(h,rt))){ne$1(st,Tt,g,nt);break e}St&&St(h,at,rt),h==="focusout"&&(St=at._wrapperState)&&St.controlled&&at.type==="number"&&cb(at,"number",at.value)}switch(St=rt?ue$1(rt):window,h){case"focusin":(me$1(St)||St.contentEditable==="true")&&(Qe=St,Re=rt,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te$1=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$1=!1,Ue(st,g,nt);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(st,g,nt)}var ht;if(ae$1)e:{switch(h){case"compositionstart":var kt="onCompositionStart";break e;case"compositionend":kt="onCompositionEnd";break e;case"compositionupdate":kt="onCompositionUpdate";break e}kt=void 0}else ie$1?ge$1(h,g)&&(kt="onCompositionEnd"):h==="keydown"&&g.keyCode===229&&(kt="onCompositionStart");kt&&(de$1&&g.locale!=="ko"&&(ie$1||kt!=="onCompositionStart"?kt==="onCompositionEnd"&&ie$1&&(ht=nd()):(kd=nt,ld="value"in kd?kd.value:kd.textContent,ie$1=!0)),St=oe$1(rt,kt),0<St.length&&(kt=new Ld(kt,h,null,g,nt),st.push({event:kt,listeners:St}),ht?kt.data=ht:(ht=he$1(g),ht!==null&&(kt.data=ht)))),(ht=ce$1?je(h,g):ke(h,g))&&(rt=oe$1(rt,"onBeforeInput"),0<rt.length&&(nt=new Ld("onBeforeInput","beforeinput",null,g,nt),st.push({event:nt,listeners:rt}),nt.data=ht))}se$1(st,d)})}function tf(h,d,g){return{instance:h,listener:d,currentTarget:g}}function oe$1(h,d){for(var g=d+"Capture",b=[];h!==null;){var _=h,$=_.stateNode;_.tag===5&&$!==null&&(_=$,$=Kb(h,g),$!=null&&b.unshift(tf(h,$,_)),$=Kb(h,d),$!=null&&b.push(tf(h,$,_))),h=h.return}return b}function vf(h){if(h===null)return null;do h=h.return;while(h&&h.tag!==5);return h||null}function wf(h,d,g,b,_){for(var $=d._reactName,j=[];g!==null&&g!==b;){var _e=g,et=_e.alternate,rt=_e.stateNode;if(et!==null&&et===b)break;_e.tag===5&&rt!==null&&(_e=rt,_?(et=Kb(g,$),et!=null&&j.unshift(tf(g,et,_e))):_||(et=Kb(g,$),et!=null&&j.push(tf(g,et,_e)))),g=g.return}j.length!==0&&h.push({event:d,listeners:j})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(h){return(typeof h=="string"?h:""+h).replace(xf,`
`).replace(yf,"")}function Af(h,d,g){if(d=zf(d),zf(h)!==d&&g)throw Error(p(425))}function Bf(){}var Cf=null,Df=null;function Ef(h,d){return h==="textarea"||h==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(h){return Hf.resolve(null).then(h).catch(If)}:Ff;function If(h){setTimeout(function(){throw h})}function Kf(h,d){var g=d,b=0;do{var _=g.nextSibling;if(h.removeChild(g),_&&_.nodeType===8)if(g=_.data,g==="/$"){if(b===0){h.removeChild(_),bd(d);return}b--}else g!=="$"&&g!=="$?"&&g!=="$!"||b++;g=_}while(g);bd(d)}function Lf(h){for(;h!=null;h=h.nextSibling){var d=h.nodeType;if(d===1||d===3)break;if(d===8){if(d=h.data,d==="$"||d==="$!"||d==="$?")break;if(d==="/$")return null}}return h}function Mf(h){h=h.previousSibling;for(var d=0;h;){if(h.nodeType===8){var g=h.data;if(g==="$"||g==="$!"||g==="$?"){if(d===0)return h;d--}else g==="/$"&&d++}h=h.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(h){var d=h[Of];if(d)return d;for(var g=h.parentNode;g;){if(d=g[uf]||g[Of]){if(g=d.alternate,d.child!==null||g!==null&&g.child!==null)for(h=Mf(h);h!==null;){if(g=h[Of])return g;h=Mf(h)}return d}h=g,g=h.parentNode}return null}function Cb(h){return h=h[Of]||h[uf],!h||h.tag!==5&&h.tag!==6&&h.tag!==13&&h.tag!==3?null:h}function ue$1(h){if(h.tag===5||h.tag===6)return h.stateNode;throw Error(p(33))}function Db(h){return h[Pf]||null}var Sf=[],Tf=-1;function Uf(h){return{current:h}}function E$1(h){0>Tf||(h.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(h,d){Tf++,Sf[Tf]=h.current,h.current=d}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(h,d){var g=h.type.contextTypes;if(!g)return Vf;var b=h.stateNode;if(b&&b.__reactInternalMemoizedUnmaskedChildContext===d)return b.__reactInternalMemoizedMaskedChildContext;var _={},$;for($ in g)_[$]=d[$];return b&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=d,h.__reactInternalMemoizedMaskedChildContext=_),_}function Zf(h){return h=h.childContextTypes,h!=null}function $f(){E$1(Wf),E$1(H)}function ag(h,d,g){if(H.current!==Vf)throw Error(p(168));G(H,d),G(Wf,g)}function bg(h,d,g){var b=h.stateNode;if(d=d.childContextTypes,typeof b.getChildContext!="function")return g;b=b.getChildContext();for(var _ in b)if(!(_ in d))throw Error(p(108,Ra(h)||"Unknown",_));return A({},g,b)}function cg(h){return h=(h=h.stateNode)&&h.__reactInternalMemoizedMergedChildContext||Vf,Xf=H.current,G(H,h),G(Wf,Wf.current),!0}function dg(h,d,g){var b=h.stateNode;if(!b)throw Error(p(169));g?(h=bg(h,d,Xf),b.__reactInternalMemoizedMergedChildContext=h,E$1(Wf),E$1(H),G(H,h)):E$1(Wf),G(Wf,g)}var eg=null,fg=!1,gg=!1;function hg(h){eg===null?eg=[h]:eg.push(h)}function ig(h){fg=!0,hg(h)}function jg(){if(!gg&&eg!==null){gg=!0;var h=0,d=C;try{var g=eg;for(C=1;h<g.length;h++){var b=g[h];do b=b(!0);while(b!==null)}eg=null,fg=!1}catch(_){throw eg!==null&&(eg=eg.slice(h+1)),ac(fc,jg),_}finally{C=d,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(h,d){kg[lg++]=ng,kg[lg++]=mg,mg=h,ng=d}function ug(h,d,g){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=h;var b=rg;h=sg;var _=32-oc(b)-1;b&=~(1<<_),g+=1;var $=32-oc(d)+_;if(30<$){var j=_-_%5;$=(b&(1<<j)-1).toString(32),b>>=j,_-=j,rg=1<<32-oc(d)+_|g<<_|b,sg=$+h}else rg=1<<$|g<<_|b,sg=h}function vg(h){h.return!==null&&(tg(h,1),ug(h,1,0))}function wg(h){for(;h===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;h===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;function Ag(h,d){var g=Bg(5,null,null,0);g.elementType="DELETED",g.stateNode=d,g.return=h,d=h.deletions,d===null?(h.deletions=[g],h.flags|=16):d.push(g)}function Cg(h,d){switch(h.tag){case 5:var g=h.type;return d=d.nodeType!==1||g.toLowerCase()!==d.nodeName.toLowerCase()?null:d,d!==null?(h.stateNode=d,xg=h,yg=Lf(d.firstChild),!0):!1;case 6:return d=h.pendingProps===""||d.nodeType!==3?null:d,d!==null?(h.stateNode=d,xg=h,yg=null,!0):!1;case 13:return d=d.nodeType!==8?null:d,d!==null?(g=qg!==null?{id:rg,overflow:sg}:null,h.memoizedState={dehydrated:d,treeContext:g,retryLane:1073741824},g=Bg(18,null,null,0),g.stateNode=d,g.return=h,h.child=g,xg=h,yg=null,!0):!1;default:return!1}}function Dg(h){return(h.mode&1)!==0&&(h.flags&128)===0}function Eg(h){if(I){var d=yg;if(d){var g=d;if(!Cg(h,d)){if(Dg(h))throw Error(p(418));d=Lf(g.nextSibling);var b=xg;d&&Cg(h,d)?Ag(b,g):(h.flags=h.flags&-4097|2,I=!1,xg=h)}}else{if(Dg(h))throw Error(p(418));h.flags=h.flags&-4097|2,I=!1,xg=h}}}function Fg(h){for(h=h.return;h!==null&&h.tag!==5&&h.tag!==3&&h.tag!==13;)h=h.return;xg=h}function Gg(h){if(h!==xg)return!1;if(!I)return Fg(h),I=!0,!1;var d;if((d=h.tag!==3)&&!(d=h.tag!==5)&&(d=h.type,d=d!=="head"&&d!=="body"&&!Ef(h.type,h.memoizedProps)),d&&(d=yg)){if(Dg(h))throw Hg(),Error(p(418));for(;d;)Ag(h,d),d=Lf(d.nextSibling)}if(Fg(h),h.tag===13){if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(p(317));e:{for(h=h.nextSibling,d=0;h;){if(h.nodeType===8){var g=h.data;if(g==="/$"){if(d===0){yg=Lf(h.nextSibling);break e}d--}else g!=="$"&&g!=="$!"&&g!=="$?"||d++}h=h.nextSibling}yg=null}}else yg=xg?Lf(h.stateNode.nextSibling):null;return!0}function Hg(){for(var h=yg;h;)h=Lf(h.nextSibling)}function Ig(){yg=xg=null,I=!1}function Jg(h){zg===null?zg=[h]:zg.push(h)}var Kg=ua.ReactCurrentBatchConfig;function Lg(h,d,g){if(h=g.ref,h!==null&&typeof h!="function"&&typeof h!="object"){if(g._owner){if(g=g._owner,g){if(g.tag!==1)throw Error(p(309));var b=g.stateNode}if(!b)throw Error(p(147,h));var _=b,$=""+h;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===$?d.ref:(d=function(j){var _e=_.refs;j===null?delete _e[$]:_e[$]=j},d._stringRef=$,d)}if(typeof h!="string")throw Error(p(284));if(!g._owner)throw Error(p(290,h))}return h}function Mg(h,d){throw h=Object.prototype.toString.call(d),Error(p(31,h==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":h))}function Ng(h){var d=h._init;return d(h._payload)}function Og(h){function d(lt,ut){if(h){var ft=lt.deletions;ft===null?(lt.deletions=[ut],lt.flags|=16):ft.push(ut)}}function g(lt,ut){if(!h)return null;for(;ut!==null;)d(lt,ut),ut=ut.sibling;return null}function b(lt,ut){for(lt=new Map;ut!==null;)ut.key!==null?lt.set(ut.key,ut):lt.set(ut.index,ut),ut=ut.sibling;return lt}function _(lt,ut){return lt=Pg(lt,ut),lt.index=0,lt.sibling=null,lt}function $(lt,ut,ft){return lt.index=ft,h?(ft=lt.alternate,ft!==null?(ft=ft.index,ft<ut?(lt.flags|=2,ut):ft):(lt.flags|=2,ut)):(lt.flags|=1048576,ut)}function j(lt){return h&&lt.alternate===null&&(lt.flags|=2),lt}function _e(lt,ut,ft,Et){return ut===null||ut.tag!==6?(ut=Qg(ft,lt.mode,Et),ut.return=lt,ut):(ut=_(ut,ft),ut.return=lt,ut)}function et(lt,ut,ft,Et){var Tt=ft.type;return Tt===ya?nt(lt,ut,ft.props.children,Et,ft.key):ut!==null&&(ut.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===Ha&&Ng(Tt)===ut.type)?(Et=_(ut,ft.props),Et.ref=Lg(lt,ut,ft),Et.return=lt,Et):(Et=Rg(ft.type,ft.key,ft.props,null,lt.mode,Et),Et.ref=Lg(lt,ut,ft),Et.return=lt,Et)}function rt(lt,ut,ft,Et){return ut===null||ut.tag!==4||ut.stateNode.containerInfo!==ft.containerInfo||ut.stateNode.implementation!==ft.implementation?(ut=Sg(ft,lt.mode,Et),ut.return=lt,ut):(ut=_(ut,ft.children||[]),ut.return=lt,ut)}function nt(lt,ut,ft,Et,Tt){return ut===null||ut.tag!==7?(ut=Tg(ft,lt.mode,Et,Tt),ut.return=lt,ut):(ut=_(ut,ft),ut.return=lt,ut)}function st(lt,ut,ft){if(typeof ut=="string"&&ut!==""||typeof ut=="number")return ut=Qg(""+ut,lt.mode,ft),ut.return=lt,ut;if(typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case va:return ft=Rg(ut.type,ut.key,ut.props,null,lt.mode,ft),ft.ref=Lg(lt,null,ut),ft.return=lt,ft;case wa:return ut=Sg(ut,lt.mode,ft),ut.return=lt,ut;case Ha:var Et=ut._init;return st(lt,Et(ut._payload),ft)}if(eb(ut)||Ka(ut))return ut=Tg(ut,lt.mode,ft,null),ut.return=lt,ut;Mg(lt,ut)}return null}function at(lt,ut,ft,Et){var Tt=ut!==null?ut.key:null;if(typeof ft=="string"&&ft!==""||typeof ft=="number")return Tt!==null?null:_e(lt,ut,""+ft,Et);if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case va:return ft.key===Tt?et(lt,ut,ft,Et):null;case wa:return ft.key===Tt?rt(lt,ut,ft,Et):null;case Ha:return Tt=ft._init,at(lt,ut,Tt(ft._payload),Et)}if(eb(ft)||Ka(ft))return Tt!==null?null:nt(lt,ut,ft,Et,null);Mg(lt,ft)}return null}function it(lt,ut,ft,Et,Tt){if(typeof Et=="string"&&Et!==""||typeof Et=="number")return lt=lt.get(ft)||null,_e(ut,lt,""+Et,Tt);if(typeof Et=="object"&&Et!==null){switch(Et.$$typeof){case va:return lt=lt.get(Et.key===null?ft:Et.key)||null,et(ut,lt,Et,Tt);case wa:return lt=lt.get(Et.key===null?ft:Et.key)||null,rt(ut,lt,Et,Tt);case Ha:var St=Et._init;return it(lt,ut,ft,St(Et._payload),Tt)}if(eb(Et)||Ka(Et))return lt=lt.get(ft)||null,nt(ut,lt,Et,Tt,null);Mg(ut,Et)}return null}function dt(lt,ut,ft,Et){for(var Tt=null,St=null,ht=ut,kt=ut=0,Rt=null;ht!==null&&kt<ft.length;kt++){ht.index>kt?(Rt=ht,ht=null):Rt=ht.sibling;var Mt=at(lt,ht,ft[kt],Et);if(Mt===null){ht===null&&(ht=Rt);break}h&&ht&&Mt.alternate===null&&d(lt,ht),ut=$(Mt,ut,kt),St===null?Tt=Mt:St.sibling=Mt,St=Mt,ht=Rt}if(kt===ft.length)return g(lt,ht),I&&tg(lt,kt),Tt;if(ht===null){for(;kt<ft.length;kt++)ht=st(lt,ft[kt],Et),ht!==null&&(ut=$(ht,ut,kt),St===null?Tt=ht:St.sibling=ht,St=ht);return I&&tg(lt,kt),Tt}for(ht=b(lt,ht);kt<ft.length;kt++)Rt=it(ht,lt,kt,ft[kt],Et),Rt!==null&&(h&&Rt.alternate!==null&&ht.delete(Rt.key===null?kt:Rt.key),ut=$(Rt,ut,kt),St===null?Tt=Rt:St.sibling=Rt,St=Rt);return h&&ht.forEach(function(Zt){return d(lt,Zt)}),I&&tg(lt,kt),Tt}function ot(lt,ut,ft,Et){var Tt=Ka(ft);if(typeof Tt!="function")throw Error(p(150));if(ft=Tt.call(ft),ft==null)throw Error(p(151));for(var St=Tt=null,ht=ut,kt=ut=0,Rt=null,Mt=ft.next();ht!==null&&!Mt.done;kt++,Mt=ft.next()){ht.index>kt?(Rt=ht,ht=null):Rt=ht.sibling;var Zt=at(lt,ht,Mt.value,Et);if(Zt===null){ht===null&&(ht=Rt);break}h&&ht&&Zt.alternate===null&&d(lt,ht),ut=$(Zt,ut,kt),St===null?Tt=Zt:St.sibling=Zt,St=Zt,ht=Rt}if(Mt.done)return g(lt,ht),I&&tg(lt,kt),Tt;if(ht===null){for(;!Mt.done;kt++,Mt=ft.next())Mt=st(lt,Mt.value,Et),Mt!==null&&(ut=$(Mt,ut,kt),St===null?Tt=Mt:St.sibling=Mt,St=Mt);return I&&tg(lt,kt),Tt}for(ht=b(lt,ht);!Mt.done;kt++,Mt=ft.next())Mt=it(ht,lt,kt,Mt.value,Et),Mt!==null&&(h&&Mt.alternate!==null&&ht.delete(Mt.key===null?kt:Mt.key),ut=$(Mt,ut,kt),St===null?Tt=Mt:St.sibling=Mt,St=Mt);return h&&ht.forEach(function(Ct){return d(lt,Ct)}),I&&tg(lt,kt),Tt}function ct(lt,ut,ft,Et){if(typeof ft=="object"&&ft!==null&&ft.type===ya&&ft.key===null&&(ft=ft.props.children),typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case va:e:{for(var Tt=ft.key,St=ut;St!==null;){if(St.key===Tt){if(Tt=ft.type,Tt===ya){if(St.tag===7){g(lt,St.sibling),ut=_(St,ft.props.children),ut.return=lt,lt=ut;break e}}else if(St.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===Ha&&Ng(Tt)===St.type){g(lt,St.sibling),ut=_(St,ft.props),ut.ref=Lg(lt,St,ft),ut.return=lt,lt=ut;break e}g(lt,St);break}else d(lt,St);St=St.sibling}ft.type===ya?(ut=Tg(ft.props.children,lt.mode,Et,ft.key),ut.return=lt,lt=ut):(Et=Rg(ft.type,ft.key,ft.props,null,lt.mode,Et),Et.ref=Lg(lt,ut,ft),Et.return=lt,lt=Et)}return j(lt);case wa:e:{for(St=ft.key;ut!==null;){if(ut.key===St)if(ut.tag===4&&ut.stateNode.containerInfo===ft.containerInfo&&ut.stateNode.implementation===ft.implementation){g(lt,ut.sibling),ut=_(ut,ft.children||[]),ut.return=lt,lt=ut;break e}else{g(lt,ut);break}else d(lt,ut);ut=ut.sibling}ut=Sg(ft,lt.mode,Et),ut.return=lt,lt=ut}return j(lt);case Ha:return St=ft._init,ct(lt,ut,St(ft._payload),Et)}if(eb(ft))return dt(lt,ut,ft,Et);if(Ka(ft))return ot(lt,ut,ft,Et);Mg(lt,ft)}return typeof ft=="string"&&ft!==""||typeof ft=="number"?(ft=""+ft,ut!==null&&ut.tag===6?(g(lt,ut.sibling),ut=_(ut,ft),ut.return=lt,lt=ut):(g(lt,ut),ut=Qg(ft,lt.mode,Et),ut.return=lt,lt=ut),j(lt)):g(lt,ut)}return ct}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(h){var d=Wg.current;E$1(Wg),h._currentValue=d}function bh(h,d,g){for(;h!==null;){var b=h.alternate;if((h.childLanes&d)!==d?(h.childLanes|=d,b!==null&&(b.childLanes|=d)):b!==null&&(b.childLanes&d)!==d&&(b.childLanes|=d),h===g)break;h=h.return}}function ch(h,d){Xg=h,Zg=Yg=null,h=h.dependencies,h!==null&&h.firstContext!==null&&(h.lanes&d&&(dh=!0),h.firstContext=null)}function eh(h){var d=h._currentValue;if(Zg!==h)if(h={context:h,memoizedValue:d,next:null},Yg===null){if(Xg===null)throw Error(p(308));Yg=h,Xg.dependencies={lanes:0,firstContext:h}}else Yg=Yg.next=h;return d}var fh=null;function gh(h){fh===null?fh=[h]:fh.push(h)}function hh(h,d,g,b){var _=d.interleaved;return _===null?(g.next=g,gh(d)):(g.next=_.next,_.next=g),d.interleaved=g,ih(h,b)}function ih(h,d){h.lanes|=d;var g=h.alternate;for(g!==null&&(g.lanes|=d),g=h,h=h.return;h!==null;)h.childLanes|=d,g=h.alternate,g!==null&&(g.childLanes|=d),g=h,h=h.return;return g.tag===3?g.stateNode:null}var jh=!1;function kh(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(h,d){h=h.updateQueue,d.updateQueue===h&&(d.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,effects:h.effects})}function mh(h,d){return{eventTime:h,lane:d,tag:0,payload:null,callback:null,next:null}}function nh(h,d,g){var b=h.updateQueue;if(b===null)return null;if(b=b.shared,K&2){var _=b.pending;return _===null?d.next=d:(d.next=_.next,_.next=d),b.pending=d,ih(h,g)}return _=b.interleaved,_===null?(d.next=d,gh(b)):(d.next=_.next,_.next=d),b.interleaved=d,ih(h,g)}function oh(h,d,g){if(d=d.updateQueue,d!==null&&(d=d.shared,(g&4194240)!==0)){var b=d.lanes;b&=h.pendingLanes,g|=b,d.lanes=g,Cc(h,g)}}function ph(h,d){var g=h.updateQueue,b=h.alternate;if(b!==null&&(b=b.updateQueue,g===b)){var _=null,$=null;if(g=g.firstBaseUpdate,g!==null){do{var j={eventTime:g.eventTime,lane:g.lane,tag:g.tag,payload:g.payload,callback:g.callback,next:null};$===null?_=$=j:$=$.next=j,g=g.next}while(g!==null);$===null?_=$=d:$=$.next=d}else _=$=d;g={baseState:b.baseState,firstBaseUpdate:_,lastBaseUpdate:$,shared:b.shared,effects:b.effects},h.updateQueue=g;return}h=g.lastBaseUpdate,h===null?g.firstBaseUpdate=d:h.next=d,g.lastBaseUpdate=d}function qh(h,d,g,b){var _=h.updateQueue;jh=!1;var $=_.firstBaseUpdate,j=_.lastBaseUpdate,_e=_.shared.pending;if(_e!==null){_.shared.pending=null;var et=_e,rt=et.next;et.next=null,j===null?$=rt:j.next=rt,j=et;var nt=h.alternate;nt!==null&&(nt=nt.updateQueue,_e=nt.lastBaseUpdate,_e!==j&&(_e===null?nt.firstBaseUpdate=rt:_e.next=rt,nt.lastBaseUpdate=et))}if($!==null){var st=_.baseState;j=0,nt=rt=et=null,_e=$;do{var at=_e.lane,it=_e.eventTime;if((b&at)===at){nt!==null&&(nt=nt.next={eventTime:it,lane:0,tag:_e.tag,payload:_e.payload,callback:_e.callback,next:null});e:{var dt=h,ot=_e;switch(at=d,it=g,ot.tag){case 1:if(dt=ot.payload,typeof dt=="function"){st=dt.call(it,st,at);break e}st=dt;break e;case 3:dt.flags=dt.flags&-65537|128;case 0:if(dt=ot.payload,at=typeof dt=="function"?dt.call(it,st,at):dt,at==null)break e;st=A({},st,at);break e;case 2:jh=!0}}_e.callback!==null&&_e.lane!==0&&(h.flags|=64,at=_.effects,at===null?_.effects=[_e]:at.push(_e))}else it={eventTime:it,lane:at,tag:_e.tag,payload:_e.payload,callback:_e.callback,next:null},nt===null?(rt=nt=it,et=st):nt=nt.next=it,j|=at;if(_e=_e.next,_e===null){if(_e=_.shared.pending,_e===null)break;at=_e,_e=at.next,at.next=null,_.lastBaseUpdate=at,_.shared.pending=null}}while(!0);if(nt===null&&(et=st),_.baseState=et,_.firstBaseUpdate=rt,_.lastBaseUpdate=nt,d=_.shared.interleaved,d!==null){_=d;do j|=_.lane,_=_.next;while(_!==d)}else $===null&&(_.shared.lanes=0);rh|=j,h.lanes=j,h.memoizedState=st}}function sh(h,d,g){if(h=d.effects,d.effects=null,h!==null)for(d=0;d<h.length;d++){var b=h[d],_=b.callback;if(_!==null){if(b.callback=null,b=g,typeof _!="function")throw Error(p(191,_));_.call(b)}}}var th={},uh=Uf(th),vh=Uf(th),wh=Uf(th);function xh(h){if(h===th)throw Error(p(174));return h}function yh(h,d){switch(G(wh,d),G(vh,h),G(uh,th),h=d.nodeType,h){case 9:case 11:d=(d=d.documentElement)?d.namespaceURI:lb(null,"");break;default:h=h===8?d.parentNode:d,d=h.namespaceURI||null,h=h.tagName,d=lb(d,h)}E$1(uh),G(uh,d)}function zh(){E$1(uh),E$1(vh),E$1(wh)}function Ah(h){xh(wh.current);var d=xh(uh.current),g=lb(d,h.type);d!==g&&(G(vh,h),G(uh,g))}function Bh(h){vh.current===h&&(E$1(uh),E$1(vh))}var L=Uf(0);function Ch(h){for(var d=h;d!==null;){if(d.tag===13){var g=d.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||g.data==="$!"))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if(d.flags&128)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===h)break;for(;d.sibling===null;){if(d.return===null||d.return===h)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var Dh=[];function Eh(){for(var h=0;h<Dh.length;h++)Dh[h]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M$1=null,N=null,O=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P(){throw Error(p(321))}function Mh(h,d){if(d===null)return!1;for(var g=0;g<d.length&&g<h.length;g++)if(!He(h[g],d[g]))return!1;return!0}function Nh(h,d,g,b,_,$){if(Hh=$,M$1=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,Fh.current=h===null||h.memoizedState===null?Oh:Ph,h=g(b,_),Jh){$=0;do{if(Jh=!1,Kh=0,25<=$)throw Error(p(301));$+=1,O=N=null,d.updateQueue=null,Fh.current=Qh,h=g(b,_)}while(Jh)}if(Fh.current=Rh,d=N!==null&&N.next!==null,Hh=0,O=N=M$1=null,Ih=!1,d)throw Error(p(300));return h}function Sh(){var h=Kh!==0;return Kh=0,h}function Th(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O===null?M$1.memoizedState=O=h:O=O.next=h,O}function Uh(){if(N===null){var h=M$1.alternate;h=h!==null?h.memoizedState:null}else h=N.next;var d=O===null?M$1.memoizedState:O.next;if(d!==null)O=d,N=h;else{if(h===null)throw Error(p(310));N=h,h={memoizedState:N.memoizedState,baseState:N.baseState,baseQueue:N.baseQueue,queue:N.queue,next:null},O===null?M$1.memoizedState=O=h:O=O.next=h}return O}function Vh(h,d){return typeof d=="function"?d(h):d}function Wh(h){var d=Uh(),g=d.queue;if(g===null)throw Error(p(311));g.lastRenderedReducer=h;var b=N,_=b.baseQueue,$=g.pending;if($!==null){if(_!==null){var j=_.next;_.next=$.next,$.next=j}b.baseQueue=_=$,g.pending=null}if(_!==null){$=_.next,b=b.baseState;var _e=j=null,et=null,rt=$;do{var nt=rt.lane;if((Hh&nt)===nt)et!==null&&(et=et.next={lane:0,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null}),b=rt.hasEagerState?rt.eagerState:h(b,rt.action);else{var st={lane:nt,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null};et===null?(_e=et=st,j=b):et=et.next=st,M$1.lanes|=nt,rh|=nt}rt=rt.next}while(rt!==null&&rt!==$);et===null?j=b:et.next=_e,He(b,d.memoizedState)||(dh=!0),d.memoizedState=b,d.baseState=j,d.baseQueue=et,g.lastRenderedState=b}if(h=g.interleaved,h!==null){_=h;do $=_.lane,M$1.lanes|=$,rh|=$,_=_.next;while(_!==h)}else _===null&&(g.lanes=0);return[d.memoizedState,g.dispatch]}function Xh(h){var d=Uh(),g=d.queue;if(g===null)throw Error(p(311));g.lastRenderedReducer=h;var b=g.dispatch,_=g.pending,$=d.memoizedState;if(_!==null){g.pending=null;var j=_=_.next;do $=h($,j.action),j=j.next;while(j!==_);He($,d.memoizedState)||(dh=!0),d.memoizedState=$,d.baseQueue===null&&(d.baseState=$),g.lastRenderedState=$}return[$,b]}function Yh(){}function Zh(h,d){var g=M$1,b=Uh(),_=d(),$=!He(b.memoizedState,_);if($&&(b.memoizedState=_,dh=!0),b=b.queue,$h(ai.bind(null,g,b,h),[h]),b.getSnapshot!==d||$||O!==null&&O.memoizedState.tag&1){if(g.flags|=2048,bi(9,ci.bind(null,g,b,_,d),void 0,null),Q===null)throw Error(p(349));Hh&30||di(g,d,_)}return _}function di(h,d,g){h.flags|=16384,h={getSnapshot:d,value:g},d=M$1.updateQueue,d===null?(d={lastEffect:null,stores:null},M$1.updateQueue=d,d.stores=[h]):(g=d.stores,g===null?d.stores=[h]:g.push(h))}function ci(h,d,g,b){d.value=g,d.getSnapshot=b,ei(d)&&fi(h)}function ai(h,d,g){return g(function(){ei(d)&&fi(h)})}function ei(h){var d=h.getSnapshot;h=h.value;try{var g=d();return!He(h,g)}catch{return!0}}function fi(h){var d=ih(h,1);d!==null&&gi(d,h,1,-1)}function hi(h){var d=Th();return typeof h=="function"&&(h=h()),d.memoizedState=d.baseState=h,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:h},d.queue=h,h=h.dispatch=ii.bind(null,M$1,h),[d.memoizedState,h]}function bi(h,d,g,b){return h={tag:h,create:d,destroy:g,deps:b,next:null},d=M$1.updateQueue,d===null?(d={lastEffect:null,stores:null},M$1.updateQueue=d,d.lastEffect=h.next=h):(g=d.lastEffect,g===null?d.lastEffect=h.next=h:(b=g.next,g.next=h,h.next=b,d.lastEffect=h)),h}function ji(){return Uh().memoizedState}function ki(h,d,g,b){var _=Th();M$1.flags|=h,_.memoizedState=bi(1|d,g,void 0,b===void 0?null:b)}function li(h,d,g,b){var _=Uh();b=b===void 0?null:b;var $=void 0;if(N!==null){var j=N.memoizedState;if($=j.destroy,b!==null&&Mh(b,j.deps)){_.memoizedState=bi(d,g,$,b);return}}M$1.flags|=h,_.memoizedState=bi(1|d,g,$,b)}function mi(h,d){return ki(8390656,8,h,d)}function $h(h,d){return li(2048,8,h,d)}function ni(h,d){return li(4,2,h,d)}function oi(h,d){return li(4,4,h,d)}function pi(h,d){if(typeof d=="function")return h=h(),d(h),function(){d(null)};if(d!=null)return h=h(),d.current=h,function(){d.current=null}}function qi(h,d,g){return g=g!=null?g.concat([h]):null,li(4,4,pi.bind(null,d,h),g)}function ri(){}function si(h,d){var g=Uh();d=d===void 0?null:d;var b=g.memoizedState;return b!==null&&d!==null&&Mh(d,b[1])?b[0]:(g.memoizedState=[h,d],h)}function ti(h,d){var g=Uh();d=d===void 0?null:d;var b=g.memoizedState;return b!==null&&d!==null&&Mh(d,b[1])?b[0]:(h=h(),g.memoizedState=[h,d],h)}function ui(h,d,g){return Hh&21?(He(g,d)||(g=yc(),M$1.lanes|=g,rh|=g,h.baseState=!0),d):(h.baseState&&(h.baseState=!1,dh=!0),h.memoizedState=g)}function vi(h,d){var g=C;C=g!==0&&4>g?g:4,h(!0);var b=Gh.transition;Gh.transition={};try{h(!1),d()}finally{C=g,Gh.transition=b}}function wi(){return Uh().memoizedState}function xi(h,d,g){var b=yi(h);if(g={lane:b,action:g,hasEagerState:!1,eagerState:null,next:null},zi(h))Ai(d,g);else if(g=hh(h,d,g,b),g!==null){var _=R$1();gi(g,h,b,_),Bi(g,d,b)}}function ii(h,d,g){var b=yi(h),_={lane:b,action:g,hasEagerState:!1,eagerState:null,next:null};if(zi(h))Ai(d,_);else{var $=h.alternate;if(h.lanes===0&&($===null||$.lanes===0)&&($=d.lastRenderedReducer,$!==null))try{var j=d.lastRenderedState,_e=$(j,g);if(_.hasEagerState=!0,_.eagerState=_e,He(_e,j)){var et=d.interleaved;et===null?(_.next=_,gh(d)):(_.next=et.next,et.next=_),d.interleaved=_;return}}catch{}finally{}g=hh(h,d,_,b),g!==null&&(_=R$1(),gi(g,h,b,_),Bi(g,d,b))}}function zi(h){var d=h.alternate;return h===M$1||d!==null&&d===M$1}function Ai(h,d){Jh=Ih=!0;var g=h.pending;g===null?d.next=d:(d.next=g.next,g.next=d),h.pending=d}function Bi(h,d,g){if(g&4194240){var b=d.lanes;b&=h.pendingLanes,g|=b,d.lanes=g,Cc(h,g)}}var Rh={readContext:eh,useCallback:P,useContext:P,useEffect:P,useImperativeHandle:P,useInsertionEffect:P,useLayoutEffect:P,useMemo:P,useReducer:P,useRef:P,useState:P,useDebugValue:P,useDeferredValue:P,useTransition:P,useMutableSource:P,useSyncExternalStore:P,useId:P,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(h,d){return Th().memoizedState=[h,d===void 0?null:d],h},useContext:eh,useEffect:mi,useImperativeHandle:function(h,d,g){return g=g!=null?g.concat([h]):null,ki(4194308,4,pi.bind(null,d,h),g)},useLayoutEffect:function(h,d){return ki(4194308,4,h,d)},useInsertionEffect:function(h,d){return ki(4,2,h,d)},useMemo:function(h,d){var g=Th();return d=d===void 0?null:d,h=h(),g.memoizedState=[h,d],h},useReducer:function(h,d,g){var b=Th();return d=g!==void 0?g(d):d,b.memoizedState=b.baseState=d,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:d},b.queue=h,h=h.dispatch=xi.bind(null,M$1,h),[b.memoizedState,h]},useRef:function(h){var d=Th();return h={current:h},d.memoizedState=h},useState:hi,useDebugValue:ri,useDeferredValue:function(h){return Th().memoizedState=h},useTransition:function(){var h=hi(!1),d=h[0];return h=vi.bind(null,h[1]),Th().memoizedState=h,[d,h]},useMutableSource:function(){},useSyncExternalStore:function(h,d,g){var b=M$1,_=Th();if(I){if(g===void 0)throw Error(p(407));g=g()}else{if(g=d(),Q===null)throw Error(p(349));Hh&30||di(b,d,g)}_.memoizedState=g;var $={value:g,getSnapshot:d};return _.queue=$,mi(ai.bind(null,b,$,h),[h]),b.flags|=2048,bi(9,ci.bind(null,b,$,g,d),void 0,null),g},useId:function(){var h=Th(),d=Q.identifierPrefix;if(I){var g=sg,b=rg;g=(b&~(1<<32-oc(b)-1)).toString(32)+g,d=":"+d+"R"+g,g=Kh++,0<g&&(d+="H"+g.toString(32)),d+=":"}else g=Lh++,d=":"+d+"r"+g.toString(32)+":";return h.memoizedState=d},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(h){var d=Uh();return ui(d,N.memoizedState,h)},useTransition:function(){var h=Wh(Vh)[0],d=Uh().memoizedState;return[h,d]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(h){var d=Uh();return N===null?d.memoizedState=h:ui(d,N.memoizedState,h)},useTransition:function(){var h=Xh(Vh)[0],d=Uh().memoizedState;return[h,d]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(h,d){if(h&&h.defaultProps){d=A({},d),h=h.defaultProps;for(var g in h)d[g]===void 0&&(d[g]=h[g]);return d}return d}function Di(h,d,g,b){d=h.memoizedState,g=g(b,d),g=g==null?d:A({},d,g),h.memoizedState=g,h.lanes===0&&(h.updateQueue.baseState=g)}var Ei={isMounted:function(h){return(h=h._reactInternals)?Vb(h)===h:!1},enqueueSetState:function(h,d,g){h=h._reactInternals;var b=R$1(),_=yi(h),$=mh(b,_);$.payload=d,g!=null&&($.callback=g),d=nh(h,$,_),d!==null&&(gi(d,h,_,b),oh(d,h,_))},enqueueReplaceState:function(h,d,g){h=h._reactInternals;var b=R$1(),_=yi(h),$=mh(b,_);$.tag=1,$.payload=d,g!=null&&($.callback=g),d=nh(h,$,_),d!==null&&(gi(d,h,_,b),oh(d,h,_))},enqueueForceUpdate:function(h,d){h=h._reactInternals;var g=R$1(),b=yi(h),_=mh(g,b);_.tag=2,d!=null&&(_.callback=d),d=nh(h,_,b),d!==null&&(gi(d,h,b,g),oh(d,h,b))}};function Fi(h,d,g,b,_,$,j){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(b,$,j):d.prototype&&d.prototype.isPureReactComponent?!Ie(g,b)||!Ie(_,$):!0}function Gi(h,d,g){var b=!1,_=Vf,$=d.contextType;return typeof $=="object"&&$!==null?$=eh($):(_=Zf(d)?Xf:H.current,b=d.contextTypes,$=(b=b!=null)?Yf(h,_):Vf),d=new d(g,$),h.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Ei,h.stateNode=d,d._reactInternals=h,b&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=_,h.__reactInternalMemoizedMaskedChildContext=$),d}function Hi(h,d,g,b){h=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(g,b),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(g,b),d.state!==h&&Ei.enqueueReplaceState(d,d.state,null)}function Ii(h,d,g,b){var _=h.stateNode;_.props=g,_.state=h.memoizedState,_.refs={},kh(h);var $=d.contextType;typeof $=="object"&&$!==null?_.context=eh($):($=Zf(d)?Xf:H.current,_.context=Yf(h,$)),_.state=h.memoizedState,$=d.getDerivedStateFromProps,typeof $=="function"&&(Di(h,d,$,g),_.state=h.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(d=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),d!==_.state&&Ei.enqueueReplaceState(_,_.state,null),qh(h,g,_,b),_.state=h.memoizedState),typeof _.componentDidMount=="function"&&(h.flags|=4194308)}function Ji(h,d){try{var g="",b=d;do g+=Pa(b),b=b.return;while(b);var _=g}catch($){_=`
Error generating stack: `+$.message+`
`+$.stack}return{value:h,source:d,stack:_,digest:null}}function Ki(h,d,g){return{value:h,source:null,stack:g??null,digest:d??null}}function Li(h,d){try{console.error(d.value)}catch(g){setTimeout(function(){throw g})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(h,d,g){g=mh(-1,g),g.tag=3,g.payload={element:null};var b=d.value;return g.callback=function(){Oi||(Oi=!0,Pi=b),Li(h,d)},g}function Qi(h,d,g){g=mh(-1,g),g.tag=3;var b=h.type.getDerivedStateFromError;if(typeof b=="function"){var _=d.value;g.payload=function(){return b(_)},g.callback=function(){Li(h,d)}}var $=h.stateNode;return $!==null&&typeof $.componentDidCatch=="function"&&(g.callback=function(){Li(h,d),typeof b!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var j=d.stack;this.componentDidCatch(d.value,{componentStack:j!==null?j:""})}),g}function Si(h,d,g){var b=h.pingCache;if(b===null){b=h.pingCache=new Mi;var _=new Set;b.set(d,_)}else _=b.get(d),_===void 0&&(_=new Set,b.set(d,_));_.has(g)||(_.add(g),h=Ti.bind(null,h,d,g),d.then(h,h))}function Ui(h){do{var d;if((d=h.tag===13)&&(d=h.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return h;h=h.return}while(h!==null);return null}function Vi(h,d,g,b,_){return h.mode&1?(h.flags|=65536,h.lanes=_,h):(h===d?h.flags|=65536:(h.flags|=128,g.flags|=131072,g.flags&=-52805,g.tag===1&&(g.alternate===null?g.tag=17:(d=mh(-1,1),d.tag=2,nh(g,d,1))),g.lanes|=1),h)}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(h,d,g,b){d.child=h===null?Vg(d,null,g,b):Ug(d,h.child,g,b)}function Yi(h,d,g,b,_){g=g.render;var $=d.ref;return ch(d,_),b=Nh(h,d,g,b,$,_),g=Sh(),h!==null&&!dh?(d.updateQueue=h.updateQueue,d.flags&=-2053,h.lanes&=~_,Zi(h,d,_)):(I&&g&&vg(d),d.flags|=1,Xi(h,d,b,_),d.child)}function $i(h,d,g,b,_){if(h===null){var $=g.type;return typeof $=="function"&&!aj($)&&$.defaultProps===void 0&&g.compare===null&&g.defaultProps===void 0?(d.tag=15,d.type=$,bj(h,d,$,b,_)):(h=Rg(g.type,null,b,d,d.mode,_),h.ref=d.ref,h.return=d,d.child=h)}if($=h.child,!(h.lanes&_)){var j=$.memoizedProps;if(g=g.compare,g=g!==null?g:Ie,g(j,b)&&h.ref===d.ref)return Zi(h,d,_)}return d.flags|=1,h=Pg($,b),h.ref=d.ref,h.return=d,d.child=h}function bj(h,d,g,b,_){if(h!==null){var $=h.memoizedProps;if(Ie($,b)&&h.ref===d.ref)if(dh=!1,d.pendingProps=b=$,(h.lanes&_)!==0)h.flags&131072&&(dh=!0);else return d.lanes=h.lanes,Zi(h,d,_)}return cj(h,d,g,b,_)}function dj(h,d,g){var b=d.pendingProps,_=b.children,$=h!==null?h.memoizedState:null;if(b.mode==="hidden")if(!(d.mode&1))d.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(ej,fj),fj|=g;else{if(!(g&1073741824))return h=$!==null?$.baseLanes|g:g,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:h,cachePool:null,transitions:null},d.updateQueue=null,G(ej,fj),fj|=h,null;d.memoizedState={baseLanes:0,cachePool:null,transitions:null},b=$!==null?$.baseLanes:g,G(ej,fj),fj|=b}else $!==null?(b=$.baseLanes|g,d.memoizedState=null):b=g,G(ej,fj),fj|=b;return Xi(h,d,_,g),d.child}function gj(h,d){var g=d.ref;(h===null&&g!==null||h!==null&&h.ref!==g)&&(d.flags|=512,d.flags|=2097152)}function cj(h,d,g,b,_){var $=Zf(g)?Xf:H.current;return $=Yf(d,$),ch(d,_),g=Nh(h,d,g,b,$,_),b=Sh(),h!==null&&!dh?(d.updateQueue=h.updateQueue,d.flags&=-2053,h.lanes&=~_,Zi(h,d,_)):(I&&b&&vg(d),d.flags|=1,Xi(h,d,g,_),d.child)}function hj(h,d,g,b,_){if(Zf(g)){var $=!0;cg(d)}else $=!1;if(ch(d,_),d.stateNode===null)ij(h,d),Gi(d,g,b),Ii(d,g,b,_),b=!0;else if(h===null){var j=d.stateNode,_e=d.memoizedProps;j.props=_e;var et=j.context,rt=g.contextType;typeof rt=="object"&&rt!==null?rt=eh(rt):(rt=Zf(g)?Xf:H.current,rt=Yf(d,rt));var nt=g.getDerivedStateFromProps,st=typeof nt=="function"||typeof j.getSnapshotBeforeUpdate=="function";st||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(_e!==b||et!==rt)&&Hi(d,j,b,rt),jh=!1;var at=d.memoizedState;j.state=at,qh(d,b,j,_),et=d.memoizedState,_e!==b||at!==et||Wf.current||jh?(typeof nt=="function"&&(Di(d,g,nt,b),et=d.memoizedState),(_e=jh||Fi(d,g,_e,b,at,et,rt))?(st||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount()),typeof j.componentDidMount=="function"&&(d.flags|=4194308)):(typeof j.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=b,d.memoizedState=et),j.props=b,j.state=et,j.context=rt,b=_e):(typeof j.componentDidMount=="function"&&(d.flags|=4194308),b=!1)}else{j=d.stateNode,lh(h,d),_e=d.memoizedProps,rt=d.type===d.elementType?_e:Ci(d.type,_e),j.props=rt,st=d.pendingProps,at=j.context,et=g.contextType,typeof et=="object"&&et!==null?et=eh(et):(et=Zf(g)?Xf:H.current,et=Yf(d,et));var it=g.getDerivedStateFromProps;(nt=typeof it=="function"||typeof j.getSnapshotBeforeUpdate=="function")||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(_e!==st||at!==et)&&Hi(d,j,b,et),jh=!1,at=d.memoizedState,j.state=at,qh(d,b,j,_);var dt=d.memoizedState;_e!==st||at!==dt||Wf.current||jh?(typeof it=="function"&&(Di(d,g,it,b),dt=d.memoizedState),(rt=jh||Fi(d,g,rt,b,at,dt,et)||!1)?(nt||typeof j.UNSAFE_componentWillUpdate!="function"&&typeof j.componentWillUpdate!="function"||(typeof j.componentWillUpdate=="function"&&j.componentWillUpdate(b,dt,et),typeof j.UNSAFE_componentWillUpdate=="function"&&j.UNSAFE_componentWillUpdate(b,dt,et)),typeof j.componentDidUpdate=="function"&&(d.flags|=4),typeof j.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof j.componentDidUpdate!="function"||_e===h.memoizedProps&&at===h.memoizedState||(d.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||_e===h.memoizedProps&&at===h.memoizedState||(d.flags|=1024),d.memoizedProps=b,d.memoizedState=dt),j.props=b,j.state=dt,j.context=et,b=rt):(typeof j.componentDidUpdate!="function"||_e===h.memoizedProps&&at===h.memoizedState||(d.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||_e===h.memoizedProps&&at===h.memoizedState||(d.flags|=1024),b=!1)}return jj(h,d,g,b,$,_)}function jj(h,d,g,b,_,$){gj(h,d);var j=(d.flags&128)!==0;if(!b&&!j)return _&&dg(d,g,!1),Zi(h,d,$);b=d.stateNode,Wi.current=d;var _e=j&&typeof g.getDerivedStateFromError!="function"?null:b.render();return d.flags|=1,h!==null&&j?(d.child=Ug(d,h.child,null,$),d.child=Ug(d,null,_e,$)):Xi(h,d,_e,$),d.memoizedState=b.state,_&&dg(d,g,!0),d.child}function kj(h){var d=h.stateNode;d.pendingContext?ag(h,d.pendingContext,d.pendingContext!==d.context):d.context&&ag(h,d.context,!1),yh(h,d.containerInfo)}function lj(h,d,g,b,_){return Ig(),Jg(_),d.flags|=256,Xi(h,d,g,b),d.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(h){return{baseLanes:h,cachePool:null,transitions:null}}function oj(h,d,g){var b=d.pendingProps,_=L.current,$=!1,j=(d.flags&128)!==0,_e;if((_e=j)||(_e=h!==null&&h.memoizedState===null?!1:(_&2)!==0),_e?($=!0,d.flags&=-129):(h===null||h.memoizedState!==null)&&(_|=1),G(L,_&1),h===null)return Eg(d),h=d.memoizedState,h!==null&&(h=h.dehydrated,h!==null)?(d.mode&1?h.data==="$!"?d.lanes=8:d.lanes=1073741824:d.lanes=1,null):(j=b.children,h=b.fallback,$?(b=d.mode,$=d.child,j={mode:"hidden",children:j},!(b&1)&&$!==null?($.childLanes=0,$.pendingProps=j):$=pj(j,b,0,null),h=Tg(h,b,g,null),$.return=d,h.return=d,$.sibling=h,d.child=$,d.child.memoizedState=nj(g),d.memoizedState=mj,h):qj(d,j));if(_=h.memoizedState,_!==null&&(_e=_.dehydrated,_e!==null))return rj(h,d,j,b,_e,_,g);if($){$=b.fallback,j=d.mode,_=h.child,_e=_.sibling;var et={mode:"hidden",children:b.children};return!(j&1)&&d.child!==_?(b=d.child,b.childLanes=0,b.pendingProps=et,d.deletions=null):(b=Pg(_,et),b.subtreeFlags=_.subtreeFlags&14680064),_e!==null?$=Pg(_e,$):($=Tg($,j,g,null),$.flags|=2),$.return=d,b.return=d,b.sibling=$,d.child=b,b=$,$=d.child,j=h.child.memoizedState,j=j===null?nj(g):{baseLanes:j.baseLanes|g,cachePool:null,transitions:j.transitions},$.memoizedState=j,$.childLanes=h.childLanes&~g,d.memoizedState=mj,b}return $=h.child,h=$.sibling,b=Pg($,{mode:"visible",children:b.children}),!(d.mode&1)&&(b.lanes=g),b.return=d,b.sibling=null,h!==null&&(g=d.deletions,g===null?(d.deletions=[h],d.flags|=16):g.push(h)),d.child=b,d.memoizedState=null,b}function qj(h,d){return d=pj({mode:"visible",children:d},h.mode,0,null),d.return=h,h.child=d}function sj(h,d,g,b){return b!==null&&Jg(b),Ug(d,h.child,null,g),h=qj(d,d.pendingProps.children),h.flags|=2,d.memoizedState=null,h}function rj(h,d,g,b,_,$,j){if(g)return d.flags&256?(d.flags&=-257,b=Ki(Error(p(422))),sj(h,d,j,b)):d.memoizedState!==null?(d.child=h.child,d.flags|=128,null):($=b.fallback,_=d.mode,b=pj({mode:"visible",children:b.children},_,0,null),$=Tg($,_,j,null),$.flags|=2,b.return=d,$.return=d,b.sibling=$,d.child=b,d.mode&1&&Ug(d,h.child,null,j),d.child.memoizedState=nj(j),d.memoizedState=mj,$);if(!(d.mode&1))return sj(h,d,j,null);if(_.data==="$!"){if(b=_.nextSibling&&_.nextSibling.dataset,b)var _e=b.dgst;return b=_e,$=Error(p(419)),b=Ki($,b,void 0),sj(h,d,j,b)}if(_e=(j&h.childLanes)!==0,dh||_e){if(b=Q,b!==null){switch(j&-j){case 4:_=2;break;case 16:_=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:_=32;break;case 536870912:_=268435456;break;default:_=0}_=_&(b.suspendedLanes|j)?0:_,_!==0&&_!==$.retryLane&&($.retryLane=_,ih(h,_),gi(b,h,_,-1))}return tj(),b=Ki(Error(p(421))),sj(h,d,j,b)}return _.data==="$?"?(d.flags|=128,d.child=h.child,d=uj.bind(null,h),_._reactRetry=d,null):(h=$.treeContext,yg=Lf(_.nextSibling),xg=d,I=!0,zg=null,h!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=h.id,sg=h.overflow,qg=d),d=qj(d,b.children),d.flags|=4096,d)}function vj(h,d,g){h.lanes|=d;var b=h.alternate;b!==null&&(b.lanes|=d),bh(h.return,d,g)}function wj(h,d,g,b,_){var $=h.memoizedState;$===null?h.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:b,tail:g,tailMode:_}:($.isBackwards=d,$.rendering=null,$.renderingStartTime=0,$.last=b,$.tail=g,$.tailMode=_)}function xj(h,d,g){var b=d.pendingProps,_=b.revealOrder,$=b.tail;if(Xi(h,d,b.children,g),b=L.current,b&2)b=b&1|2,d.flags|=128;else{if(h!==null&&h.flags&128)e:for(h=d.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&vj(h,g,d);else if(h.tag===19)vj(h,g,d);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===d)break e;for(;h.sibling===null;){if(h.return===null||h.return===d)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}b&=1}if(G(L,b),!(d.mode&1))d.memoizedState=null;else switch(_){case"forwards":for(g=d.child,_=null;g!==null;)h=g.alternate,h!==null&&Ch(h)===null&&(_=g),g=g.sibling;g=_,g===null?(_=d.child,d.child=null):(_=g.sibling,g.sibling=null),wj(d,!1,_,g,$);break;case"backwards":for(g=null,_=d.child,d.child=null;_!==null;){if(h=_.alternate,h!==null&&Ch(h)===null){d.child=_;break}h=_.sibling,_.sibling=g,g=_,_=h}wj(d,!0,g,null,$);break;case"together":wj(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function ij(h,d){!(d.mode&1)&&h!==null&&(h.alternate=null,d.alternate=null,d.flags|=2)}function Zi(h,d,g){if(h!==null&&(d.dependencies=h.dependencies),rh|=d.lanes,!(g&d.childLanes))return null;if(h!==null&&d.child!==h.child)throw Error(p(153));if(d.child!==null){for(h=d.child,g=Pg(h,h.pendingProps),d.child=g,g.return=d;h.sibling!==null;)h=h.sibling,g=g.sibling=Pg(h,h.pendingProps),g.return=d;g.sibling=null}return d.child}function yj(h,d,g){switch(d.tag){case 3:kj(d),Ig();break;case 5:Ah(d);break;case 1:Zf(d.type)&&cg(d);break;case 4:yh(d,d.stateNode.containerInfo);break;case 10:var b=d.type._context,_=d.memoizedProps.value;G(Wg,b._currentValue),b._currentValue=_;break;case 13:if(b=d.memoizedState,b!==null)return b.dehydrated!==null?(G(L,L.current&1),d.flags|=128,null):g&d.child.childLanes?oj(h,d,g):(G(L,L.current&1),h=Zi(h,d,g),h!==null?h.sibling:null);G(L,L.current&1);break;case 19:if(b=(g&d.childLanes)!==0,h.flags&128){if(b)return xj(h,d,g);d.flags|=128}if(_=d.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),G(L,L.current),b)break;return null;case 22:case 23:return d.lanes=0,dj(h,d,g)}return Zi(h,d,g)}var zj,Aj,Bj,Cj;zj=function(h,d){for(var g=d.child;g!==null;){if(g.tag===5||g.tag===6)h.appendChild(g.stateNode);else if(g.tag!==4&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===d)break;for(;g.sibling===null;){if(g.return===null||g.return===d)return;g=g.return}g.sibling.return=g.return,g=g.sibling}};Aj=function(){};Bj=function(h,d,g,b){var _=h.memoizedProps;if(_!==b){h=d.stateNode,xh(uh.current);var $=null;switch(g){case"input":_=Ya(h,_),b=Ya(h,b),$=[];break;case"select":_=A({},_,{value:void 0}),b=A({},b,{value:void 0}),$=[];break;case"textarea":_=gb(h,_),b=gb(h,b),$=[];break;default:typeof _.onClick!="function"&&typeof b.onClick=="function"&&(h.onclick=Bf)}ub(g,b);var j;g=null;for(rt in _)if(!b.hasOwnProperty(rt)&&_.hasOwnProperty(rt)&&_[rt]!=null)if(rt==="style"){var _e=_[rt];for(j in _e)_e.hasOwnProperty(j)&&(g||(g={}),g[j]="")}else rt!=="dangerouslySetInnerHTML"&&rt!=="children"&&rt!=="suppressContentEditableWarning"&&rt!=="suppressHydrationWarning"&&rt!=="autoFocus"&&(ea.hasOwnProperty(rt)?$||($=[]):($=$||[]).push(rt,null));for(rt in b){var et=b[rt];if(_e=_!=null?_[rt]:void 0,b.hasOwnProperty(rt)&&et!==_e&&(et!=null||_e!=null))if(rt==="style")if(_e){for(j in _e)!_e.hasOwnProperty(j)||et&&et.hasOwnProperty(j)||(g||(g={}),g[j]="");for(j in et)et.hasOwnProperty(j)&&_e[j]!==et[j]&&(g||(g={}),g[j]=et[j])}else g||($||($=[]),$.push(rt,g)),g=et;else rt==="dangerouslySetInnerHTML"?(et=et?et.__html:void 0,_e=_e?_e.__html:void 0,et!=null&&_e!==et&&($=$||[]).push(rt,et)):rt==="children"?typeof et!="string"&&typeof et!="number"||($=$||[]).push(rt,""+et):rt!=="suppressContentEditableWarning"&&rt!=="suppressHydrationWarning"&&(ea.hasOwnProperty(rt)?(et!=null&&rt==="onScroll"&&D("scroll",h),$||_e===et||($=[])):($=$||[]).push(rt,et))}g&&($=$||[]).push("style",g);var rt=$;(d.updateQueue=rt)&&(d.flags|=4)}};Cj=function(h,d,g,b){g!==b&&(d.flags|=4)};function Dj(h,d){if(!I)switch(h.tailMode){case"hidden":d=h.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?h.tail=null:g.sibling=null;break;case"collapsed":g=h.tail;for(var b=null;g!==null;)g.alternate!==null&&(b=g),g=g.sibling;b===null?d||h.tail===null?h.tail=null:h.tail.sibling=null:b.sibling=null}}function S(h){var d=h.alternate!==null&&h.alternate.child===h.child,g=0,b=0;if(d)for(var _=h.child;_!==null;)g|=_.lanes|_.childLanes,b|=_.subtreeFlags&14680064,b|=_.flags&14680064,_.return=h,_=_.sibling;else for(_=h.child;_!==null;)g|=_.lanes|_.childLanes,b|=_.subtreeFlags,b|=_.flags,_.return=h,_=_.sibling;return h.subtreeFlags|=b,h.childLanes=g,d}function Ej(h,d,g){var b=d.pendingProps;switch(wg(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(d),null;case 1:return Zf(d.type)&&$f(),S(d),null;case 3:return b=d.stateNode,zh(),E$1(Wf),E$1(H),Eh(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(h===null||h.child===null)&&(Gg(d)?d.flags|=4:h===null||h.memoizedState.isDehydrated&&!(d.flags&256)||(d.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(h,d),S(d),null;case 5:Bh(d);var _=xh(wh.current);if(g=d.type,h!==null&&d.stateNode!=null)Bj(h,d,g,b,_),h.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!b){if(d.stateNode===null)throw Error(p(166));return S(d),null}if(h=xh(uh.current),Gg(d)){b=d.stateNode,g=d.type;var $=d.memoizedProps;switch(b[Of]=d,b[Pf]=$,h=(d.mode&1)!==0,g){case"dialog":D("cancel",b),D("close",b);break;case"iframe":case"object":case"embed":D("load",b);break;case"video":case"audio":for(_=0;_<lf.length;_++)D(lf[_],b);break;case"source":D("error",b);break;case"img":case"image":case"link":D("error",b),D("load",b);break;case"details":D("toggle",b);break;case"input":Za(b,$),D("invalid",b);break;case"select":b._wrapperState={wasMultiple:!!$.multiple},D("invalid",b);break;case"textarea":hb(b,$),D("invalid",b)}ub(g,$),_=null;for(var j in $)if($.hasOwnProperty(j)){var _e=$[j];j==="children"?typeof _e=="string"?b.textContent!==_e&&($.suppressHydrationWarning!==!0&&Af(b.textContent,_e,h),_=["children",_e]):typeof _e=="number"&&b.textContent!==""+_e&&($.suppressHydrationWarning!==!0&&Af(b.textContent,_e,h),_=["children",""+_e]):ea.hasOwnProperty(j)&&_e!=null&&j==="onScroll"&&D("scroll",b)}switch(g){case"input":Va(b),db(b,$,!0);break;case"textarea":Va(b),jb(b);break;case"select":case"option":break;default:typeof $.onClick=="function"&&(b.onclick=Bf)}b=_,d.updateQueue=b,b!==null&&(d.flags|=4)}else{j=_.nodeType===9?_:_.ownerDocument,h==="http://www.w3.org/1999/xhtml"&&(h=kb(g)),h==="http://www.w3.org/1999/xhtml"?g==="script"?(h=j.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild)):typeof b.is=="string"?h=j.createElement(g,{is:b.is}):(h=j.createElement(g),g==="select"&&(j=h,b.multiple?j.multiple=!0:b.size&&(j.size=b.size))):h=j.createElementNS(h,g),h[Of]=d,h[Pf]=b,zj(h,d,!1,!1),d.stateNode=h;e:{switch(j=vb(g,b),g){case"dialog":D("cancel",h),D("close",h),_=b;break;case"iframe":case"object":case"embed":D("load",h),_=b;break;case"video":case"audio":for(_=0;_<lf.length;_++)D(lf[_],h);_=b;break;case"source":D("error",h),_=b;break;case"img":case"image":case"link":D("error",h),D("load",h),_=b;break;case"details":D("toggle",h),_=b;break;case"input":Za(h,b),_=Ya(h,b),D("invalid",h);break;case"option":_=b;break;case"select":h._wrapperState={wasMultiple:!!b.multiple},_=A({},b,{value:void 0}),D("invalid",h);break;case"textarea":hb(h,b),_=gb(h,b),D("invalid",h);break;default:_=b}ub(g,_),_e=_;for($ in _e)if(_e.hasOwnProperty($)){var et=_e[$];$==="style"?sb(h,et):$==="dangerouslySetInnerHTML"?(et=et?et.__html:void 0,et!=null&&nb(h,et)):$==="children"?typeof et=="string"?(g!=="textarea"||et!=="")&&ob(h,et):typeof et=="number"&&ob(h,""+et):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(ea.hasOwnProperty($)?et!=null&&$==="onScroll"&&D("scroll",h):et!=null&&ta(h,$,et,j))}switch(g){case"input":Va(h),db(h,b,!1);break;case"textarea":Va(h),jb(h);break;case"option":b.value!=null&&h.setAttribute("value",""+Sa(b.value));break;case"select":h.multiple=!!b.multiple,$=b.value,$!=null?fb(h,!!b.multiple,$,!1):b.defaultValue!=null&&fb(h,!!b.multiple,b.defaultValue,!0);break;default:typeof _.onClick=="function"&&(h.onclick=Bf)}switch(g){case"button":case"input":case"select":case"textarea":b=!!b.autoFocus;break e;case"img":b=!0;break e;default:b=!1}}b&&(d.flags|=4)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return S(d),null;case 6:if(h&&d.stateNode!=null)Cj(h,d,h.memoizedProps,b);else{if(typeof b!="string"&&d.stateNode===null)throw Error(p(166));if(g=xh(wh.current),xh(uh.current),Gg(d)){if(b=d.stateNode,g=d.memoizedProps,b[Of]=d,($=b.nodeValue!==g)&&(h=xg,h!==null))switch(h.tag){case 3:Af(b.nodeValue,g,(h.mode&1)!==0);break;case 5:h.memoizedProps.suppressHydrationWarning!==!0&&Af(b.nodeValue,g,(h.mode&1)!==0)}$&&(d.flags|=4)}else b=(g.nodeType===9?g:g.ownerDocument).createTextNode(b),b[Of]=d,d.stateNode=b}return S(d),null;case 13:if(E$1(L),b=d.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(I&&yg!==null&&d.mode&1&&!(d.flags&128))Hg(),Ig(),d.flags|=98560,$=!1;else if($=Gg(d),b!==null&&b.dehydrated!==null){if(h===null){if(!$)throw Error(p(318));if($=d.memoizedState,$=$!==null?$.dehydrated:null,!$)throw Error(p(317));$[Of]=d}else Ig(),!(d.flags&128)&&(d.memoizedState=null),d.flags|=4;S(d),$=!1}else zg!==null&&(Fj(zg),zg=null),$=!0;if(!$)return d.flags&65536?d:null}return d.flags&128?(d.lanes=g,d):(b=b!==null,b!==(h!==null&&h.memoizedState!==null)&&b&&(d.child.flags|=8192,d.mode&1&&(h===null||L.current&1?T===0&&(T=3):tj())),d.updateQueue!==null&&(d.flags|=4),S(d),null);case 4:return zh(),Aj(h,d),h===null&&sf(d.stateNode.containerInfo),S(d),null;case 10:return ah(d.type._context),S(d),null;case 17:return Zf(d.type)&&$f(),S(d),null;case 19:if(E$1(L),$=d.memoizedState,$===null)return S(d),null;if(b=(d.flags&128)!==0,j=$.rendering,j===null)if(b)Dj($,!1);else{if(T!==0||h!==null&&h.flags&128)for(h=d.child;h!==null;){if(j=Ch(h),j!==null){for(d.flags|=128,Dj($,!1),b=j.updateQueue,b!==null&&(d.updateQueue=b,d.flags|=4),d.subtreeFlags=0,b=g,g=d.child;g!==null;)$=g,h=b,$.flags&=14680066,j=$.alternate,j===null?($.childLanes=0,$.lanes=h,$.child=null,$.subtreeFlags=0,$.memoizedProps=null,$.memoizedState=null,$.updateQueue=null,$.dependencies=null,$.stateNode=null):($.childLanes=j.childLanes,$.lanes=j.lanes,$.child=j.child,$.subtreeFlags=0,$.deletions=null,$.memoizedProps=j.memoizedProps,$.memoizedState=j.memoizedState,$.updateQueue=j.updateQueue,$.type=j.type,h=j.dependencies,$.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),g=g.sibling;return G(L,L.current&1|2),d.child}h=h.sibling}$.tail!==null&&B()>Gj&&(d.flags|=128,b=!0,Dj($,!1),d.lanes=4194304)}else{if(!b)if(h=Ch(j),h!==null){if(d.flags|=128,b=!0,g=h.updateQueue,g!==null&&(d.updateQueue=g,d.flags|=4),Dj($,!0),$.tail===null&&$.tailMode==="hidden"&&!j.alternate&&!I)return S(d),null}else 2*B()-$.renderingStartTime>Gj&&g!==1073741824&&(d.flags|=128,b=!0,Dj($,!1),d.lanes=4194304);$.isBackwards?(j.sibling=d.child,d.child=j):(g=$.last,g!==null?g.sibling=j:d.child=j,$.last=j)}return $.tail!==null?(d=$.tail,$.rendering=d,$.tail=d.sibling,$.renderingStartTime=B(),d.sibling=null,g=L.current,G(L,b?g&1|2:g&1),d):(S(d),null);case 22:case 23:return Hj(),b=d.memoizedState!==null,h!==null&&h.memoizedState!==null!==b&&(d.flags|=8192),b&&d.mode&1?fj&1073741824&&(S(d),d.subtreeFlags&6&&(d.flags|=8192)):S(d),null;case 24:return null;case 25:return null}throw Error(p(156,d.tag))}function Ij(h,d){switch(wg(d),d.tag){case 1:return Zf(d.type)&&$f(),h=d.flags,h&65536?(d.flags=h&-65537|128,d):null;case 3:return zh(),E$1(Wf),E$1(H),Eh(),h=d.flags,h&65536&&!(h&128)?(d.flags=h&-65537|128,d):null;case 5:return Bh(d),null;case 13:if(E$1(L),h=d.memoizedState,h!==null&&h.dehydrated!==null){if(d.alternate===null)throw Error(p(340));Ig()}return h=d.flags,h&65536?(d.flags=h&-65537|128,d):null;case 19:return E$1(L),null;case 4:return zh(),null;case 10:return ah(d.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V=null;function Lj(h,d){var g=h.ref;if(g!==null)if(typeof g=="function")try{g(null)}catch(b){W(h,d,b)}else g.current=null}function Mj(h,d,g){try{g()}catch(b){W(h,d,b)}}var Nj=!1;function Oj(h,d){if(Cf=dd,h=Me(),Ne(h)){if("selectionStart"in h)var g={start:h.selectionStart,end:h.selectionEnd};else e:{g=(g=h.ownerDocument)&&g.defaultView||window;var b=g.getSelection&&g.getSelection();if(b&&b.rangeCount!==0){g=b.anchorNode;var _=b.anchorOffset,$=b.focusNode;b=b.focusOffset;try{g.nodeType,$.nodeType}catch{g=null;break e}var j=0,_e=-1,et=-1,rt=0,nt=0,st=h,at=null;t:for(;;){for(var it;st!==g||_!==0&&st.nodeType!==3||(_e=j+_),st!==$||b!==0&&st.nodeType!==3||(et=j+b),st.nodeType===3&&(j+=st.nodeValue.length),(it=st.firstChild)!==null;)at=st,st=it;for(;;){if(st===h)break t;if(at===g&&++rt===_&&(_e=j),at===$&&++nt===b&&(et=j),(it=st.nextSibling)!==null)break;st=at,at=st.parentNode}st=it}g=_e===-1||et===-1?null:{start:_e,end:et}}else g=null}g=g||{start:0,end:0}}else g=null;for(Df={focusedElem:h,selectionRange:g},dd=!1,V=d;V!==null;)if(d=V,h=d.child,(d.subtreeFlags&1028)!==0&&h!==null)h.return=d,V=h;else for(;V!==null;){d=V;try{var dt=d.alternate;if(d.flags&1024)switch(d.tag){case 0:case 11:case 15:break;case 1:if(dt!==null){var ot=dt.memoizedProps,ct=dt.memoizedState,lt=d.stateNode,ut=lt.getSnapshotBeforeUpdate(d.elementType===d.type?ot:Ci(d.type,ot),ct);lt.__reactInternalSnapshotBeforeUpdate=ut}break;case 3:var ft=d.stateNode.containerInfo;ft.nodeType===1?ft.textContent="":ft.nodeType===9&&ft.documentElement&&ft.removeChild(ft.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p(163))}}catch(Et){W(d,d.return,Et)}if(h=d.sibling,h!==null){h.return=d.return,V=h;break}V=d.return}return dt=Nj,Nj=!1,dt}function Pj(h,d,g){var b=d.updateQueue;if(b=b!==null?b.lastEffect:null,b!==null){var _=b=b.next;do{if((_.tag&h)===h){var $=_.destroy;_.destroy=void 0,$!==void 0&&Mj(d,g,$)}_=_.next}while(_!==b)}}function Qj(h,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var g=d=d.next;do{if((g.tag&h)===h){var b=g.create;g.destroy=b()}g=g.next}while(g!==d)}}function Rj(h){var d=h.ref;if(d!==null){var g=h.stateNode;switch(h.tag){case 5:h=g;break;default:h=g}typeof d=="function"?d(h):d.current=h}}function Sj(h){var d=h.alternate;d!==null&&(h.alternate=null,Sj(d)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(d=h.stateNode,d!==null&&(delete d[Of],delete d[Pf],delete d[of],delete d[Qf],delete d[Rf])),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function Tj(h){return h.tag===5||h.tag===3||h.tag===4}function Uj(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||Tj(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function Vj(h,d,g){var b=h.tag;if(b===5||b===6)h=h.stateNode,d?g.nodeType===8?g.parentNode.insertBefore(h,d):g.insertBefore(h,d):(g.nodeType===8?(d=g.parentNode,d.insertBefore(h,g)):(d=g,d.appendChild(h)),g=g._reactRootContainer,g!=null||d.onclick!==null||(d.onclick=Bf));else if(b!==4&&(h=h.child,h!==null))for(Vj(h,d,g),h=h.sibling;h!==null;)Vj(h,d,g),h=h.sibling}function Wj(h,d,g){var b=h.tag;if(b===5||b===6)h=h.stateNode,d?g.insertBefore(h,d):g.appendChild(h);else if(b!==4&&(h=h.child,h!==null))for(Wj(h,d,g),h=h.sibling;h!==null;)Wj(h,d,g),h=h.sibling}var X$1=null,Xj=!1;function Yj(h,d,g){for(g=g.child;g!==null;)Zj(h,d,g),g=g.sibling}function Zj(h,d,g){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,g)}catch{}switch(g.tag){case 5:U||Lj(g,d);case 6:var b=X$1,_=Xj;X$1=null,Yj(h,d,g),X$1=b,Xj=_,X$1!==null&&(Xj?(h=X$1,g=g.stateNode,h.nodeType===8?h.parentNode.removeChild(g):h.removeChild(g)):X$1.removeChild(g.stateNode));break;case 18:X$1!==null&&(Xj?(h=X$1,g=g.stateNode,h.nodeType===8?Kf(h.parentNode,g):h.nodeType===1&&Kf(h,g),bd(h)):Kf(X$1,g.stateNode));break;case 4:b=X$1,_=Xj,X$1=g.stateNode.containerInfo,Xj=!0,Yj(h,d,g),X$1=b,Xj=_;break;case 0:case 11:case 14:case 15:if(!U&&(b=g.updateQueue,b!==null&&(b=b.lastEffect,b!==null))){_=b=b.next;do{var $=_,j=$.destroy;$=$.tag,j!==void 0&&($&2||$&4)&&Mj(g,d,j),_=_.next}while(_!==b)}Yj(h,d,g);break;case 1:if(!U&&(Lj(g,d),b=g.stateNode,typeof b.componentWillUnmount=="function"))try{b.props=g.memoizedProps,b.state=g.memoizedState,b.componentWillUnmount()}catch(_e){W(g,d,_e)}Yj(h,d,g);break;case 21:Yj(h,d,g);break;case 22:g.mode&1?(U=(b=U)||g.memoizedState!==null,Yj(h,d,g),U=b):Yj(h,d,g);break;default:Yj(h,d,g)}}function ak(h){var d=h.updateQueue;if(d!==null){h.updateQueue=null;var g=h.stateNode;g===null&&(g=h.stateNode=new Kj),d.forEach(function(b){var _=bk.bind(null,h,b);g.has(b)||(g.add(b),b.then(_,_))})}}function ck(h,d){var g=d.deletions;if(g!==null)for(var b=0;b<g.length;b++){var _=g[b];try{var $=h,j=d,_e=j;e:for(;_e!==null;){switch(_e.tag){case 5:X$1=_e.stateNode,Xj=!1;break e;case 3:X$1=_e.stateNode.containerInfo,Xj=!0;break e;case 4:X$1=_e.stateNode.containerInfo,Xj=!0;break e}_e=_e.return}if(X$1===null)throw Error(p(160));Zj($,j,_),X$1=null,Xj=!1;var et=_.alternate;et!==null&&(et.return=null),_.return=null}catch(rt){W(_,d,rt)}}if(d.subtreeFlags&12854)for(d=d.child;d!==null;)dk(d,h),d=d.sibling}function dk(h,d){var g=h.alternate,b=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:if(ck(d,h),ek(h),b&4){try{Pj(3,h,h.return),Qj(3,h)}catch(ot){W(h,h.return,ot)}try{Pj(5,h,h.return)}catch(ot){W(h,h.return,ot)}}break;case 1:ck(d,h),ek(h),b&512&&g!==null&&Lj(g,g.return);break;case 5:if(ck(d,h),ek(h),b&512&&g!==null&&Lj(g,g.return),h.flags&32){var _=h.stateNode;try{ob(_,"")}catch(ot){W(h,h.return,ot)}}if(b&4&&(_=h.stateNode,_!=null)){var $=h.memoizedProps,j=g!==null?g.memoizedProps:$,_e=h.type,et=h.updateQueue;if(h.updateQueue=null,et!==null)try{_e==="input"&&$.type==="radio"&&$.name!=null&&ab(_,$),vb(_e,j);var rt=vb(_e,$);for(j=0;j<et.length;j+=2){var nt=et[j],st=et[j+1];nt==="style"?sb(_,st):nt==="dangerouslySetInnerHTML"?nb(_,st):nt==="children"?ob(_,st):ta(_,nt,st,rt)}switch(_e){case"input":bb(_,$);break;case"textarea":ib(_,$);break;case"select":var at=_._wrapperState.wasMultiple;_._wrapperState.wasMultiple=!!$.multiple;var it=$.value;it!=null?fb(_,!!$.multiple,it,!1):at!==!!$.multiple&&($.defaultValue!=null?fb(_,!!$.multiple,$.defaultValue,!0):fb(_,!!$.multiple,$.multiple?[]:"",!1))}_[Pf]=$}catch(ot){W(h,h.return,ot)}}break;case 6:if(ck(d,h),ek(h),b&4){if(h.stateNode===null)throw Error(p(162));_=h.stateNode,$=h.memoizedProps;try{_.nodeValue=$}catch(ot){W(h,h.return,ot)}}break;case 3:if(ck(d,h),ek(h),b&4&&g!==null&&g.memoizedState.isDehydrated)try{bd(d.containerInfo)}catch(ot){W(h,h.return,ot)}break;case 4:ck(d,h),ek(h);break;case 13:ck(d,h),ek(h),_=h.child,_.flags&8192&&($=_.memoizedState!==null,_.stateNode.isHidden=$,!$||_.alternate!==null&&_.alternate.memoizedState!==null||(fk=B())),b&4&&ak(h);break;case 22:if(nt=g!==null&&g.memoizedState!==null,h.mode&1?(U=(rt=U)||nt,ck(d,h),U=rt):ck(d,h),ek(h),b&8192){if(rt=h.memoizedState!==null,(h.stateNode.isHidden=rt)&&!nt&&h.mode&1)for(V=h,nt=h.child;nt!==null;){for(st=V=nt;V!==null;){switch(at=V,it=at.child,at.tag){case 0:case 11:case 14:case 15:Pj(4,at,at.return);break;case 1:Lj(at,at.return);var dt=at.stateNode;if(typeof dt.componentWillUnmount=="function"){b=at,g=at.return;try{d=b,dt.props=d.memoizedProps,dt.state=d.memoizedState,dt.componentWillUnmount()}catch(ot){W(b,g,ot)}}break;case 5:Lj(at,at.return);break;case 22:if(at.memoizedState!==null){gk(st);continue}}it!==null?(it.return=at,V=it):gk(st)}nt=nt.sibling}e:for(nt=null,st=h;;){if(st.tag===5){if(nt===null){nt=st;try{_=st.stateNode,rt?($=_.style,typeof $.setProperty=="function"?$.setProperty("display","none","important"):$.display="none"):(_e=st.stateNode,et=st.memoizedProps.style,j=et!=null&&et.hasOwnProperty("display")?et.display:null,_e.style.display=rb("display",j))}catch(ot){W(h,h.return,ot)}}}else if(st.tag===6){if(nt===null)try{st.stateNode.nodeValue=rt?"":st.memoizedProps}catch(ot){W(h,h.return,ot)}}else if((st.tag!==22&&st.tag!==23||st.memoizedState===null||st===h)&&st.child!==null){st.child.return=st,st=st.child;continue}if(st===h)break e;for(;st.sibling===null;){if(st.return===null||st.return===h)break e;nt===st&&(nt=null),st=st.return}nt===st&&(nt=null),st.sibling.return=st.return,st=st.sibling}}break;case 19:ck(d,h),ek(h),b&4&&ak(h);break;case 21:break;default:ck(d,h),ek(h)}}function ek(h){var d=h.flags;if(d&2){try{e:{for(var g=h.return;g!==null;){if(Tj(g)){var b=g;break e}g=g.return}throw Error(p(160))}switch(b.tag){case 5:var _=b.stateNode;b.flags&32&&(ob(_,""),b.flags&=-33);var $=Uj(h);Wj(h,$,_);break;case 3:case 4:var j=b.stateNode.containerInfo,_e=Uj(h);Vj(h,_e,j);break;default:throw Error(p(161))}}catch(et){W(h,h.return,et)}h.flags&=-3}d&4096&&(h.flags&=-4097)}function hk(h,d,g){V=h,ik(h)}function ik(h,d,g){for(var b=(h.mode&1)!==0;V!==null;){var _=V,$=_.child;if(_.tag===22&&b){var j=_.memoizedState!==null||Jj;if(!j){var _e=_.alternate,et=_e!==null&&_e.memoizedState!==null||U;_e=Jj;var rt=U;if(Jj=j,(U=et)&&!rt)for(V=_;V!==null;)j=V,et=j.child,j.tag===22&&j.memoizedState!==null?jk(_):et!==null?(et.return=j,V=et):jk(_);for(;$!==null;)V=$,ik($),$=$.sibling;V=_,Jj=_e,U=rt}kk(h)}else _.subtreeFlags&8772&&$!==null?($.return=_,V=$):kk(h)}}function kk(h){for(;V!==null;){var d=V;if(d.flags&8772){var g=d.alternate;try{if(d.flags&8772)switch(d.tag){case 0:case 11:case 15:U||Qj(5,d);break;case 1:var b=d.stateNode;if(d.flags&4&&!U)if(g===null)b.componentDidMount();else{var _=d.elementType===d.type?g.memoizedProps:Ci(d.type,g.memoizedProps);b.componentDidUpdate(_,g.memoizedState,b.__reactInternalSnapshotBeforeUpdate)}var $=d.updateQueue;$!==null&&sh(d,$,b);break;case 3:var j=d.updateQueue;if(j!==null){if(g=null,d.child!==null)switch(d.child.tag){case 5:g=d.child.stateNode;break;case 1:g=d.child.stateNode}sh(d,j,g)}break;case 5:var _e=d.stateNode;if(g===null&&d.flags&4){g=_e;var et=d.memoizedProps;switch(d.type){case"button":case"input":case"select":case"textarea":et.autoFocus&&g.focus();break;case"img":et.src&&(g.src=et.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(d.memoizedState===null){var rt=d.alternate;if(rt!==null){var nt=rt.memoizedState;if(nt!==null){var st=nt.dehydrated;st!==null&&bd(st)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p(163))}U||d.flags&512&&Rj(d)}catch(at){W(d,d.return,at)}}if(d===h){V=null;break}if(g=d.sibling,g!==null){g.return=d.return,V=g;break}V=d.return}}function gk(h){for(;V!==null;){var d=V;if(d===h){V=null;break}var g=d.sibling;if(g!==null){g.return=d.return,V=g;break}V=d.return}}function jk(h){for(;V!==null;){var d=V;try{switch(d.tag){case 0:case 11:case 15:var g=d.return;try{Qj(4,d)}catch(et){W(d,g,et)}break;case 1:var b=d.stateNode;if(typeof b.componentDidMount=="function"){var _=d.return;try{b.componentDidMount()}catch(et){W(d,_,et)}}var $=d.return;try{Rj(d)}catch(et){W(d,$,et)}break;case 5:var j=d.return;try{Rj(d)}catch(et){W(d,j,et)}}}catch(et){W(d,d.return,et)}if(d===h){V=null;break}var _e=d.sibling;if(_e!==null){_e.return=d.return,V=_e;break}V=d.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K=0,Q=null,Y=null,Z=0,fj=0,ej=Uf(0),T=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R$1(){return K&6?B():Ak!==-1?Ak:Ak=B()}function yi(h){return h.mode&1?K&2&&Z!==0?Z&-Z:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(h=C,h!==0||(h=window.event,h=h===void 0?16:jd(h.type)),h):1}function gi(h,d,g,b){if(50<yk)throw yk=0,zk=null,Error(p(185));Ac(h,g,b),(!(K&2)||h!==Q)&&(h===Q&&(!(K&2)&&(qk|=g),T===4&&Ck(h,Z)),Dk(h,b),g===1&&K===0&&!(d.mode&1)&&(Gj=B()+500,fg&&jg()))}function Dk(h,d){var g=h.callbackNode;wc(h,d);var b=uc(h,h===Q?Z:0);if(b===0)g!==null&&bc(g),h.callbackNode=null,h.callbackPriority=0;else if(d=b&-b,h.callbackPriority!==d){if(g!=null&&bc(g),d===1)h.tag===0?ig(Ek.bind(null,h)):hg(Ek.bind(null,h)),Jf(function(){!(K&6)&&jg()}),g=null;else{switch(Dc(b)){case 1:g=fc;break;case 4:g=gc;break;case 16:g=hc;break;case 536870912:g=jc;break;default:g=hc}g=Fk(g,Gk.bind(null,h))}h.callbackPriority=d,h.callbackNode=g}}function Gk(h,d){if(Ak=-1,Bk=0,K&6)throw Error(p(327));var g=h.callbackNode;if(Hk()&&h.callbackNode!==g)return null;var b=uc(h,h===Q?Z:0);if(b===0)return null;if(b&30||b&h.expiredLanes||d)d=Ik(h,b);else{d=b;var _=K;K|=2;var $=Jk();(Q!==h||Z!==d)&&(uk=null,Gj=B()+500,Kk(h,d));do try{Lk();break}catch(_e){Mk(h,_e)}while(!0);$g(),mk.current=$,K=_,Y!==null?d=0:(Q=null,Z=0,d=T)}if(d!==0){if(d===2&&(_=xc(h),_!==0&&(b=_,d=Nk(h,_))),d===1)throw g=pk,Kk(h,0),Ck(h,b),Dk(h,B()),g;if(d===6)Ck(h,b);else{if(_=h.current.alternate,!(b&30)&&!Ok(_)&&(d=Ik(h,b),d===2&&($=xc(h),$!==0&&(b=$,d=Nk(h,$))),d===1))throw g=pk,Kk(h,0),Ck(h,b),Dk(h,B()),g;switch(h.finishedWork=_,h.finishedLanes=b,d){case 0:case 1:throw Error(p(345));case 2:Pk(h,tk,uk);break;case 3:if(Ck(h,b),(b&130023424)===b&&(d=fk+500-B(),10<d)){if(uc(h,0)!==0)break;if(_=h.suspendedLanes,(_&b)!==b){R$1(),h.pingedLanes|=h.suspendedLanes&_;break}h.timeoutHandle=Ff(Pk.bind(null,h,tk,uk),d);break}Pk(h,tk,uk);break;case 4:if(Ck(h,b),(b&4194240)===b)break;for(d=h.eventTimes,_=-1;0<b;){var j=31-oc(b);$=1<<j,j=d[j],j>_&&(_=j),b&=~$}if(b=_,b=B()-b,b=(120>b?120:480>b?480:1080>b?1080:1920>b?1920:3e3>b?3e3:4320>b?4320:1960*lk(b/1960))-b,10<b){h.timeoutHandle=Ff(Pk.bind(null,h,tk,uk),b);break}Pk(h,tk,uk);break;case 5:Pk(h,tk,uk);break;default:throw Error(p(329))}}}return Dk(h,B()),h.callbackNode===g?Gk.bind(null,h):null}function Nk(h,d){var g=sk;return h.current.memoizedState.isDehydrated&&(Kk(h,d).flags|=256),h=Ik(h,d),h!==2&&(d=tk,tk=g,d!==null&&Fj(d)),h}function Fj(h){tk===null?tk=h:tk.push.apply(tk,h)}function Ok(h){for(var d=h;;){if(d.flags&16384){var g=d.updateQueue;if(g!==null&&(g=g.stores,g!==null))for(var b=0;b<g.length;b++){var _=g[b],$=_.getSnapshot;_=_.value;try{if(!He($(),_))return!1}catch{return!1}}}if(g=d.child,d.subtreeFlags&16384&&g!==null)g.return=d,d=g;else{if(d===h)break;for(;d.sibling===null;){if(d.return===null||d.return===h)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function Ck(h,d){for(d&=~rk,d&=~qk,h.suspendedLanes|=d,h.pingedLanes&=~d,h=h.expirationTimes;0<d;){var g=31-oc(d),b=1<<g;h[g]=-1,d&=~b}}function Ek(h){if(K&6)throw Error(p(327));Hk();var d=uc(h,0);if(!(d&1))return Dk(h,B()),null;var g=Ik(h,d);if(h.tag!==0&&g===2){var b=xc(h);b!==0&&(d=b,g=Nk(h,b))}if(g===1)throw g=pk,Kk(h,0),Ck(h,d),Dk(h,B()),g;if(g===6)throw Error(p(345));return h.finishedWork=h.current.alternate,h.finishedLanes=d,Pk(h,tk,uk),Dk(h,B()),null}function Qk(h,d){var g=K;K|=1;try{return h(d)}finally{K=g,K===0&&(Gj=B()+500,fg&&jg())}}function Rk(h){wk!==null&&wk.tag===0&&!(K&6)&&Hk();var d=K;K|=1;var g=ok.transition,b=C;try{if(ok.transition=null,C=1,h)return h()}finally{C=b,ok.transition=g,K=d,!(K&6)&&jg()}}function Hj(){fj=ej.current,E$1(ej)}function Kk(h,d){h.finishedWork=null,h.finishedLanes=0;var g=h.timeoutHandle;if(g!==-1&&(h.timeoutHandle=-1,Gf(g)),Y!==null)for(g=Y.return;g!==null;){var b=g;switch(wg(b),b.tag){case 1:b=b.type.childContextTypes,b!=null&&$f();break;case 3:zh(),E$1(Wf),E$1(H),Eh();break;case 5:Bh(b);break;case 4:zh();break;case 13:E$1(L);break;case 19:E$1(L);break;case 10:ah(b.type._context);break;case 22:case 23:Hj()}g=g.return}if(Q=h,Y=h=Pg(h.current,null),Z=fj=d,T=0,pk=null,rk=qk=rh=0,tk=sk=null,fh!==null){for(d=0;d<fh.length;d++)if(g=fh[d],b=g.interleaved,b!==null){g.interleaved=null;var _=b.next,$=g.pending;if($!==null){var j=$.next;$.next=_,b.next=j}g.pending=b}fh=null}return h}function Mk(h,d){do{var g=Y;try{if($g(),Fh.current=Rh,Ih){for(var b=M$1.memoizedState;b!==null;){var _=b.queue;_!==null&&(_.pending=null),b=b.next}Ih=!1}if(Hh=0,O=N=M$1=null,Jh=!1,Kh=0,nk.current=null,g===null||g.return===null){T=1,pk=d,Y=null;break}e:{var $=h,j=g.return,_e=g,et=d;if(d=Z,_e.flags|=32768,et!==null&&typeof et=="object"&&typeof et.then=="function"){var rt=et,nt=_e,st=nt.tag;if(!(nt.mode&1)&&(st===0||st===11||st===15)){var at=nt.alternate;at?(nt.updateQueue=at.updateQueue,nt.memoizedState=at.memoizedState,nt.lanes=at.lanes):(nt.updateQueue=null,nt.memoizedState=null)}var it=Ui(j);if(it!==null){it.flags&=-257,Vi(it,j,_e,$,d),it.mode&1&&Si($,rt,d),d=it,et=rt;var dt=d.updateQueue;if(dt===null){var ot=new Set;ot.add(et),d.updateQueue=ot}else dt.add(et);break e}else{if(!(d&1)){Si($,rt,d),tj();break e}et=Error(p(426))}}else if(I&&_e.mode&1){var ct=Ui(j);if(ct!==null){!(ct.flags&65536)&&(ct.flags|=256),Vi(ct,j,_e,$,d),Jg(Ji(et,_e));break e}}$=et=Ji(et,_e),T!==4&&(T=2),sk===null?sk=[$]:sk.push($),$=j;do{switch($.tag){case 3:$.flags|=65536,d&=-d,$.lanes|=d;var lt=Ni($,et,d);ph($,lt);break e;case 1:_e=et;var ut=$.type,ft=$.stateNode;if(!($.flags&128)&&(typeof ut.getDerivedStateFromError=="function"||ft!==null&&typeof ft.componentDidCatch=="function"&&(Ri===null||!Ri.has(ft)))){$.flags|=65536,d&=-d,$.lanes|=d;var Et=Qi($,_e,d);ph($,Et);break e}}$=$.return}while($!==null)}Sk(g)}catch(Tt){d=Tt,Y===g&&g!==null&&(Y=g=g.return);continue}break}while(!0)}function Jk(){var h=mk.current;return mk.current=Rh,h===null?Rh:h}function tj(){(T===0||T===3||T===2)&&(T=4),Q===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q,Z)}function Ik(h,d){var g=K;K|=2;var b=Jk();(Q!==h||Z!==d)&&(uk=null,Kk(h,d));do try{Tk();break}catch(_){Mk(h,_)}while(!0);if($g(),K=g,mk.current=b,Y!==null)throw Error(p(261));return Q=null,Z=0,T}function Tk(){for(;Y!==null;)Uk(Y)}function Lk(){for(;Y!==null&&!cc();)Uk(Y)}function Uk(h){var d=Vk(h.alternate,h,fj);h.memoizedProps=h.pendingProps,d===null?Sk(h):Y=d,nk.current=null}function Sk(h){var d=h;do{var g=d.alternate;if(h=d.return,d.flags&32768){if(g=Ij(g,d),g!==null){g.flags&=32767,Y=g;return}if(h!==null)h.flags|=32768,h.subtreeFlags=0,h.deletions=null;else{T=6,Y=null;return}}else if(g=Ej(g,d,fj),g!==null){Y=g;return}if(d=d.sibling,d!==null){Y=d;return}Y=d=h}while(d!==null);T===0&&(T=5)}function Pk(h,d,g){var b=C,_=ok.transition;try{ok.transition=null,C=1,Wk(h,d,g,b)}finally{ok.transition=_,C=b}return null}function Wk(h,d,g,b){do Hk();while(wk!==null);if(K&6)throw Error(p(327));g=h.finishedWork;var _=h.finishedLanes;if(g===null)return null;if(h.finishedWork=null,h.finishedLanes=0,g===h.current)throw Error(p(177));h.callbackNode=null,h.callbackPriority=0;var $=g.lanes|g.childLanes;if(Bc(h,$),h===Q&&(Y=Q=null,Z=0),!(g.subtreeFlags&2064)&&!(g.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),$=(g.flags&15990)!==0,g.subtreeFlags&15990||$){$=ok.transition,ok.transition=null;var j=C;C=1;var _e=K;K|=4,nk.current=null,Oj(h,g),dk(g,h),Oe(Df),dd=!!Cf,Df=Cf=null,h.current=g,hk(g),dc(),K=_e,C=j,ok.transition=$}else h.current=g;if(vk&&(vk=!1,wk=h,xk=_),$=h.pendingLanes,$===0&&(Ri=null),mc(g.stateNode),Dk(h,B()),d!==null)for(b=h.onRecoverableError,g=0;g<d.length;g++)_=d[g],b(_.value,{componentStack:_.stack,digest:_.digest});if(Oi)throw Oi=!1,h=Pi,Pi=null,h;return xk&1&&h.tag!==0&&Hk(),$=h.pendingLanes,$&1?h===zk?yk++:(yk=0,zk=h):yk=0,jg(),null}function Hk(){if(wk!==null){var h=Dc(xk),d=ok.transition,g=C;try{if(ok.transition=null,C=16>h?16:h,wk===null)var b=!1;else{if(h=wk,wk=null,xk=0,K&6)throw Error(p(331));var _=K;for(K|=4,V=h.current;V!==null;){var $=V,j=$.child;if(V.flags&16){var _e=$.deletions;if(_e!==null){for(var et=0;et<_e.length;et++){var rt=_e[et];for(V=rt;V!==null;){var nt=V;switch(nt.tag){case 0:case 11:case 15:Pj(8,nt,$)}var st=nt.child;if(st!==null)st.return=nt,V=st;else for(;V!==null;){nt=V;var at=nt.sibling,it=nt.return;if(Sj(nt),nt===rt){V=null;break}if(at!==null){at.return=it,V=at;break}V=it}}}var dt=$.alternate;if(dt!==null){var ot=dt.child;if(ot!==null){dt.child=null;do{var ct=ot.sibling;ot.sibling=null,ot=ct}while(ot!==null)}}V=$}}if($.subtreeFlags&2064&&j!==null)j.return=$,V=j;else e:for(;V!==null;){if($=V,$.flags&2048)switch($.tag){case 0:case 11:case 15:Pj(9,$,$.return)}var lt=$.sibling;if(lt!==null){lt.return=$.return,V=lt;break e}V=$.return}}var ut=h.current;for(V=ut;V!==null;){j=V;var ft=j.child;if(j.subtreeFlags&2064&&ft!==null)ft.return=j,V=ft;else e:for(j=ut;V!==null;){if(_e=V,_e.flags&2048)try{switch(_e.tag){case 0:case 11:case 15:Qj(9,_e)}}catch(Tt){W(_e,_e.return,Tt)}if(_e===j){V=null;break e}var Et=_e.sibling;if(Et!==null){Et.return=_e.return,V=Et;break e}V=_e.return}}if(K=_,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,h)}catch{}b=!0}return b}finally{C=g,ok.transition=d}}return!1}function Xk(h,d,g){d=Ji(g,d),d=Ni(h,d,1),h=nh(h,d,1),d=R$1(),h!==null&&(Ac(h,1,d),Dk(h,d))}function W(h,d,g){if(h.tag===3)Xk(h,h,g);else for(;d!==null;){if(d.tag===3){Xk(d,h,g);break}else if(d.tag===1){var b=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(Ri===null||!Ri.has(b))){h=Ji(g,h),h=Qi(d,h,1),d=nh(d,h,1),h=R$1(),d!==null&&(Ac(d,1,h),Dk(d,h));break}}d=d.return}}function Ti(h,d,g){var b=h.pingCache;b!==null&&b.delete(d),d=R$1(),h.pingedLanes|=h.suspendedLanes&g,Q===h&&(Z&g)===g&&(T===4||T===3&&(Z&130023424)===Z&&500>B()-fk?Kk(h,0):rk|=g),Dk(h,d)}function Yk(h,d){d===0&&(h.mode&1?(d=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):d=1);var g=R$1();h=ih(h,d),h!==null&&(Ac(h,d,g),Dk(h,g))}function uj(h){var d=h.memoizedState,g=0;d!==null&&(g=d.retryLane),Yk(h,g)}function bk(h,d){var g=0;switch(h.tag){case 13:var b=h.stateNode,_=h.memoizedState;_!==null&&(g=_.retryLane);break;case 19:b=h.stateNode;break;default:throw Error(p(314))}b!==null&&b.delete(d),Yk(h,g)}var Vk;Vk=function(h,d,g){if(h!==null)if(h.memoizedProps!==d.pendingProps||Wf.current)dh=!0;else{if(!(h.lanes&g)&&!(d.flags&128))return dh=!1,yj(h,d,g);dh=!!(h.flags&131072)}else dh=!1,I&&d.flags&1048576&&ug(d,ng,d.index);switch(d.lanes=0,d.tag){case 2:var b=d.type;ij(h,d),h=d.pendingProps;var _=Yf(d,H.current);ch(d,g),_=Nh(null,d,b,h,_,g);var $=Sh();return d.flags|=1,typeof _=="object"&&_!==null&&typeof _.render=="function"&&_.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,Zf(b)?($=!0,cg(d)):$=!1,d.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,kh(d),_.updater=Ei,d.stateNode=_,_._reactInternals=d,Ii(d,b,h,g),d=jj(null,d,b,!0,$,g)):(d.tag=0,I&&$&&vg(d),Xi(null,d,_,g),d=d.child),d;case 16:b=d.elementType;e:{switch(ij(h,d),h=d.pendingProps,_=b._init,b=_(b._payload),d.type=b,_=d.tag=Zk(b),h=Ci(b,h),_){case 0:d=cj(null,d,b,h,g);break e;case 1:d=hj(null,d,b,h,g);break e;case 11:d=Yi(null,d,b,h,g);break e;case 14:d=$i(null,d,b,Ci(b.type,h),g);break e}throw Error(p(306,b,""))}return d;case 0:return b=d.type,_=d.pendingProps,_=d.elementType===b?_:Ci(b,_),cj(h,d,b,_,g);case 1:return b=d.type,_=d.pendingProps,_=d.elementType===b?_:Ci(b,_),hj(h,d,b,_,g);case 3:e:{if(kj(d),h===null)throw Error(p(387));b=d.pendingProps,$=d.memoizedState,_=$.element,lh(h,d),qh(d,b,null,g);var j=d.memoizedState;if(b=j.element,$.isDehydrated)if($={element:b,isDehydrated:!1,cache:j.cache,pendingSuspenseBoundaries:j.pendingSuspenseBoundaries,transitions:j.transitions},d.updateQueue.baseState=$,d.memoizedState=$,d.flags&256){_=Ji(Error(p(423)),d),d=lj(h,d,b,g,_);break e}else if(b!==_){_=Ji(Error(p(424)),d),d=lj(h,d,b,g,_);break e}else for(yg=Lf(d.stateNode.containerInfo.firstChild),xg=d,I=!0,zg=null,g=Vg(d,null,b,g),d.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(Ig(),b===_){d=Zi(h,d,g);break e}Xi(h,d,b,g)}d=d.child}return d;case 5:return Ah(d),h===null&&Eg(d),b=d.type,_=d.pendingProps,$=h!==null?h.memoizedProps:null,j=_.children,Ef(b,_)?j=null:$!==null&&Ef(b,$)&&(d.flags|=32),gj(h,d),Xi(h,d,j,g),d.child;case 6:return h===null&&Eg(d),null;case 13:return oj(h,d,g);case 4:return yh(d,d.stateNode.containerInfo),b=d.pendingProps,h===null?d.child=Ug(d,null,b,g):Xi(h,d,b,g),d.child;case 11:return b=d.type,_=d.pendingProps,_=d.elementType===b?_:Ci(b,_),Yi(h,d,b,_,g);case 7:return Xi(h,d,d.pendingProps,g),d.child;case 8:return Xi(h,d,d.pendingProps.children,g),d.child;case 12:return Xi(h,d,d.pendingProps.children,g),d.child;case 10:e:{if(b=d.type._context,_=d.pendingProps,$=d.memoizedProps,j=_.value,G(Wg,b._currentValue),b._currentValue=j,$!==null)if(He($.value,j)){if($.children===_.children&&!Wf.current){d=Zi(h,d,g);break e}}else for($=d.child,$!==null&&($.return=d);$!==null;){var _e=$.dependencies;if(_e!==null){j=$.child;for(var et=_e.firstContext;et!==null;){if(et.context===b){if($.tag===1){et=mh(-1,g&-g),et.tag=2;var rt=$.updateQueue;if(rt!==null){rt=rt.shared;var nt=rt.pending;nt===null?et.next=et:(et.next=nt.next,nt.next=et),rt.pending=et}}$.lanes|=g,et=$.alternate,et!==null&&(et.lanes|=g),bh($.return,g,d),_e.lanes|=g;break}et=et.next}}else if($.tag===10)j=$.type===d.type?null:$.child;else if($.tag===18){if(j=$.return,j===null)throw Error(p(341));j.lanes|=g,_e=j.alternate,_e!==null&&(_e.lanes|=g),bh(j,g,d),j=$.sibling}else j=$.child;if(j!==null)j.return=$;else for(j=$;j!==null;){if(j===d){j=null;break}if($=j.sibling,$!==null){$.return=j.return,j=$;break}j=j.return}$=j}Xi(h,d,_.children,g),d=d.child}return d;case 9:return _=d.type,b=d.pendingProps.children,ch(d,g),_=eh(_),b=b(_),d.flags|=1,Xi(h,d,b,g),d.child;case 14:return b=d.type,_=Ci(b,d.pendingProps),_=Ci(b.type,_),$i(h,d,b,_,g);case 15:return bj(h,d,d.type,d.pendingProps,g);case 17:return b=d.type,_=d.pendingProps,_=d.elementType===b?_:Ci(b,_),ij(h,d),d.tag=1,Zf(b)?(h=!0,cg(d)):h=!1,ch(d,g),Gi(d,b,_),Ii(d,b,_,g),jj(null,d,b,!0,h,g);case 19:return xj(h,d,g);case 22:return dj(h,d,g)}throw Error(p(156,d.tag))};function Fk(h,d){return ac(h,d)}function $k(h,d,g,b){this.tag=h,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(h,d,g,b){return new $k(h,d,g,b)}function aj(h){return h=h.prototype,!(!h||!h.isReactComponent)}function Zk(h){if(typeof h=="function")return aj(h)?1:0;if(h!=null){if(h=h.$$typeof,h===Da)return 11;if(h===Ga)return 14}return 2}function Pg(h,d){var g=h.alternate;return g===null?(g=Bg(h.tag,d,h.key,h.mode),g.elementType=h.elementType,g.type=h.type,g.stateNode=h.stateNode,g.alternate=h,h.alternate=g):(g.pendingProps=d,g.type=h.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=h.flags&14680064,g.childLanes=h.childLanes,g.lanes=h.lanes,g.child=h.child,g.memoizedProps=h.memoizedProps,g.memoizedState=h.memoizedState,g.updateQueue=h.updateQueue,d=h.dependencies,g.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},g.sibling=h.sibling,g.index=h.index,g.ref=h.ref,g}function Rg(h,d,g,b,_,$){var j=2;if(b=h,typeof h=="function")aj(h)&&(j=1);else if(typeof h=="string")j=5;else e:switch(h){case ya:return Tg(g.children,_,$,d);case za:j=8,_|=8;break;case Aa:return h=Bg(12,g,d,_|2),h.elementType=Aa,h.lanes=$,h;case Ea:return h=Bg(13,g,d,_),h.elementType=Ea,h.lanes=$,h;case Fa:return h=Bg(19,g,d,_),h.elementType=Fa,h.lanes=$,h;case Ia:return pj(g,_,$,d);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case Ba:j=10;break e;case Ca:j=9;break e;case Da:j=11;break e;case Ga:j=14;break e;case Ha:j=16,b=null;break e}throw Error(p(130,h==null?h:typeof h,""))}return d=Bg(j,g,d,_),d.elementType=h,d.type=b,d.lanes=$,d}function Tg(h,d,g,b){return h=Bg(7,h,b,d),h.lanes=g,h}function pj(h,d,g,b){return h=Bg(22,h,b,d),h.elementType=Ia,h.lanes=g,h.stateNode={isHidden:!1},h}function Qg(h,d,g){return h=Bg(6,h,null,d),h.lanes=g,h}function Sg(h,d,g){return d=Bg(4,h.children!==null?h.children:[],h.key,d),d.lanes=g,d.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},d}function al(h,d,g,b,_){this.tag=d,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=b,this.onRecoverableError=_,this.mutableSourceEagerHydrationData=null}function bl(h,d,g,b,_,$,j,_e,et){return h=new al(h,d,g,_e,et),d===1?(d=1,$===!0&&(d|=8)):d=0,$=Bg(3,null,null,d),h.current=$,$.stateNode=h,$.memoizedState={element:b,isDehydrated:g,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh($),h}function cl(h,d,g){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:b==null?null:""+b,children:h,containerInfo:d,implementation:g}}function dl(h){if(!h)return Vf;h=h._reactInternals;e:{if(Vb(h)!==h||h.tag!==1)throw Error(p(170));var d=h;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(Zf(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(p(171))}if(h.tag===1){var g=h.type;if(Zf(g))return bg(h,g,d)}return d}function el(h,d,g,b,_,$,j,_e,et){return h=bl(g,b,!0,h,_,$,j,_e,et),h.context=dl(null),g=h.current,b=R$1(),_=yi(g),$=mh(b,_),$.callback=d??null,nh(g,$,_),h.current.lanes=_,Ac(h,_,b),Dk(h,b),h}function fl(h,d,g,b){var _=d.current,$=R$1(),j=yi(_);return g=dl(g),d.context===null?d.context=g:d.pendingContext=g,d=mh($,j),d.payload={element:h},b=b===void 0?null:b,b!==null&&(d.callback=b),h=nh(_,d,j),h!==null&&(gi(h,_,j,$),oh(h,_,j)),j}function gl(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 5:return h.child.stateNode;default:return h.child.stateNode}}function hl(h,d){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var g=h.retryLane;h.retryLane=g!==0&&g<d?g:d}}function il(h,d){hl(h,d),(h=h.alternate)&&hl(h,d)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(h){console.error(h)};function ll(h){this._internalRoot=h}ml.prototype.render=ll.prototype.render=function(h){var d=this._internalRoot;if(d===null)throw Error(p(409));fl(h,d,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var h=this._internalRoot;if(h!==null){this._internalRoot=null;var d=h.containerInfo;Rk(function(){fl(null,h,null,null)}),d[uf]=null}};function ml(h){this._internalRoot=h}ml.prototype.unstable_scheduleHydration=function(h){if(h){var d=Hc();h={blockedOn:null,target:h,priority:d};for(var g=0;g<Qc.length&&d!==0&&d<Qc[g].priority;g++);Qc.splice(g,0,h),g===0&&Vc(h)}};function nl(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)}function ol(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11&&(h.nodeType!==8||h.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(h,d,g,b,_){if(_){if(typeof b=="function"){var $=b;b=function(){var rt=gl(j);$.call(rt)}}var j=el(d,b,h,0,null,!1,!1,"",pl);return h._reactRootContainer=j,h[uf]=j.current,sf(h.nodeType===8?h.parentNode:h),Rk(),j}for(;_=h.lastChild;)h.removeChild(_);if(typeof b=="function"){var _e=b;b=function(){var rt=gl(et);_e.call(rt)}}var et=bl(h,0,!1,null,null,!1,!1,"",pl);return h._reactRootContainer=et,h[uf]=et.current,sf(h.nodeType===8?h.parentNode:h),Rk(function(){fl(d,et,g,b)}),et}function rl(h,d,g,b,_){var $=g._reactRootContainer;if($){var j=$;if(typeof _=="function"){var _e=_;_=function(){var et=gl(j);_e.call(et)}}fl(d,j,h,_)}else j=ql(g,d,h,_,b);return gl(j)}Ec=function(h){switch(h.tag){case 3:var d=h.stateNode;if(d.current.memoizedState.isDehydrated){var g=tc(d.pendingLanes);g!==0&&(Cc(d,g|1),Dk(d,B()),!(K&6)&&(Gj=B()+500,jg()))}break;case 13:Rk(function(){var b=ih(h,1);if(b!==null){var _=R$1();gi(b,h,1,_)}}),il(h,1)}};Fc=function(h){if(h.tag===13){var d=ih(h,134217728);if(d!==null){var g=R$1();gi(d,h,134217728,g)}il(h,134217728)}};Gc=function(h){if(h.tag===13){var d=yi(h),g=ih(h,d);if(g!==null){var b=R$1();gi(g,h,d,b)}il(h,d)}};Hc=function(){return C};Ic=function(h,d){var g=C;try{return C=h,d()}finally{C=g}};yb=function(h,d,g){switch(d){case"input":if(bb(h,g),d=g.name,g.type==="radio"&&d!=null){for(g=h;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll("input[name="+JSON.stringify(""+d)+'][type="radio"]'),d=0;d<g.length;d++){var b=g[d];if(b!==h&&b.form===h.form){var _=Db(b);if(!_)throw Error(p(90));Wa(b),bb(b,_)}}}break;case"textarea":ib(h,g);break;case"select":d=g.value,d!=null&&fb(h,!!g.multiple,d,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue$1,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(h){return h=Zb(h),h===null?null:h.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(h,d){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(d))throw Error(p(200));return cl(h,d,null,g)};reactDom_production_min.createRoot=function(h,d){if(!nl(h))throw Error(p(299));var g=!1,b="",_=kl;return d!=null&&(d.unstable_strictMode===!0&&(g=!0),d.identifierPrefix!==void 0&&(b=d.identifierPrefix),d.onRecoverableError!==void 0&&(_=d.onRecoverableError)),d=bl(h,1,!1,null,null,g,!1,b,_),h[uf]=d.current,sf(h.nodeType===8?h.parentNode:h),new ll(d)};reactDom_production_min.findDOMNode=function(h){if(h==null)return null;if(h.nodeType===1)return h;var d=h._reactInternals;if(d===void 0)throw typeof h.render=="function"?Error(p(188)):(h=Object.keys(h).join(","),Error(p(268,h)));return h=Zb(d),h=h===null?null:h.stateNode,h};reactDom_production_min.flushSync=function(h){return Rk(h)};reactDom_production_min.hydrate=function(h,d,g){if(!ol(d))throw Error(p(200));return rl(null,h,d,!0,g)};reactDom_production_min.hydrateRoot=function(h,d,g){if(!nl(h))throw Error(p(405));var b=g!=null&&g.hydratedSources||null,_=!1,$="",j=kl;if(g!=null&&(g.unstable_strictMode===!0&&(_=!0),g.identifierPrefix!==void 0&&($=g.identifierPrefix),g.onRecoverableError!==void 0&&(j=g.onRecoverableError)),d=el(d,null,h,1,g??null,_,!1,$,j),h[uf]=d.current,sf(h),b)for(h=0;h<b.length;h++)g=b[h],_=g._getVersion,_=_(g._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[g,_]:d.mutableSourceEagerHydrationData.push(g,_);return new ml(d)};reactDom_production_min.render=function(h,d,g){if(!ol(d))throw Error(p(200));return rl(null,h,d,!1,g)};reactDom_production_min.unmountComponentAtNode=function(h){if(!ol(h))throw Error(p(40));return h._reactRootContainer?(Rk(function(){rl(null,null,h,!1,function(){h._reactRootContainer=null,h[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(h,d,g,b){if(!ol(g))throw Error(p(200));if(h==null||h._reactInternals===void 0)throw Error(p(38));return rl(h,d,g,!1,b)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(h){console.error(h)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports;const vt=getDefaultExportFromCjs(reactDomExports);var createRoot,m=reactDomExports;createRoot=m.createRoot,m.hydrateRoot;const TOAST_LIMIT=1,TOAST_REMOVE_DELAY=1e6;let count$2=0;function genId(){return count$2=(count$2+1)%Number.MAX_SAFE_INTEGER,count$2.toString()}const toastTimeouts=new Map,addToRemoveQueue=h=>{if(toastTimeouts.has(h))return;const d=setTimeout(()=>{toastTimeouts.delete(h),dispatch({type:"REMOVE_TOAST",toastId:h})},TOAST_REMOVE_DELAY);toastTimeouts.set(h,d)},reducer=(h,d)=>{switch(d.type){case"ADD_TOAST":return{...h,toasts:[d.toast,...h.toasts].slice(0,TOAST_LIMIT)};case"UPDATE_TOAST":return{...h,toasts:h.toasts.map(g=>g.id===d.toast.id?{...g,...d.toast}:g)};case"DISMISS_TOAST":{const{toastId:g}=d;return g?addToRemoveQueue(g):h.toasts.forEach(b=>{addToRemoveQueue(b.id)}),{...h,toasts:h.toasts.map(b=>b.id===g||g===void 0?{...b,open:!1}:b)}}case"REMOVE_TOAST":return d.toastId===void 0?{...h,toasts:[]}:{...h,toasts:h.toasts.filter(g=>g.id!==d.toastId)}}},listeners=[];let memoryState={toasts:[]};function dispatch(h){memoryState=reducer(memoryState,h),listeners.forEach(d=>{d(memoryState)})}function toast({...h}){const d=genId(),g=_=>dispatch({type:"UPDATE_TOAST",toast:{..._,id:d}}),b=()=>dispatch({type:"DISMISS_TOAST",toastId:d});return dispatch({type:"ADD_TOAST",toast:{...h,id:d,open:!0,onOpenChange:_=>{_||b()}}}),{id:d,dismiss:b,update:g}}function useToast(){const[h,d]=reactExports.useState(memoryState);return reactExports.useEffect(()=>(listeners.push(d),()=>{const g=listeners.indexOf(d);g>-1&&listeners.splice(g,1)}),[h]),{...h,toast,dismiss:g=>dispatch({type:"DISMISS_TOAST",toastId:g})}}function composeEventHandlers(h,d,{checkForDefaultPrevented:g=!0}={}){return function(_){if(h==null||h(_),g===!1||!_.defaultPrevented)return d==null?void 0:d(_)}}function setRef(h,d){if(typeof h=="function")return h(d);h!=null&&(h.current=d)}function composeRefs(...h){return d=>{let g=!1;const b=h.map(_=>{const $=setRef(_,d);return!g&&typeof $=="function"&&(g=!0),$});if(g)return()=>{for(let _=0;_<b.length;_++){const $=b[_];typeof $=="function"?$():setRef(h[_],null)}}}}function useComposedRefs(...h){return reactExports.useCallback(composeRefs(...h),h)}function createContext2(h,d){const g=reactExports.createContext(d),b=$=>{const{children:j,..._e}=$,et=reactExports.useMemo(()=>_e,Object.values(_e));return jsxRuntimeExports.jsx(g.Provider,{value:et,children:j})};b.displayName=h+"Provider";function _($){const j=reactExports.useContext(g);if(j)return j;if(d!==void 0)return d;throw new Error(`\`${$}\` must be used within \`${h}\``)}return[b,_]}function createContextScope(h,d=[]){let g=[];function b($,j){const _e=reactExports.createContext(j),et=g.length;g=[...g,j];const rt=st=>{var lt;const{scope:at,children:it,...dt}=st,ot=((lt=at==null?void 0:at[h])==null?void 0:lt[et])||_e,ct=reactExports.useMemo(()=>dt,Object.values(dt));return jsxRuntimeExports.jsx(ot.Provider,{value:ct,children:it})};rt.displayName=$+"Provider";function nt(st,at){var ot;const it=((ot=at==null?void 0:at[h])==null?void 0:ot[et])||_e,dt=reactExports.useContext(it);if(dt)return dt;if(j!==void 0)return j;throw new Error(`\`${st}\` must be used within \`${$}\``)}return[rt,nt]}const _=()=>{const $=g.map(j=>reactExports.createContext(j));return function(_e){const et=(_e==null?void 0:_e[h])||$;return reactExports.useMemo(()=>({[`__scope${h}`]:{..._e,[h]:et}}),[_e,et])}};return _.scopeName=h,[b,composeContextScopes(_,...d)]}function composeContextScopes(...h){const d=h[0];if(h.length===1)return d;const g=()=>{const b=h.map(_=>({useScope:_(),scopeName:_.scopeName}));return function($){const j=b.reduce((_e,{useScope:et,scopeName:rt})=>{const st=et($)[`__scope${rt}`];return{..._e,...st}},{});return reactExports.useMemo(()=>({[`__scope${d.scopeName}`]:j}),[j])}};return g.scopeName=d.scopeName,g}function createSlot(h){const d=createSlotClone(h),g=reactExports.forwardRef((b,_)=>{const{children:$,...j}=b,_e=reactExports.Children.toArray($),et=_e.find(isSlottable);if(et){const rt=et.props.children,nt=_e.map(st=>st===et?reactExports.Children.count(rt)>1?reactExports.Children.only(null):reactExports.isValidElement(rt)?rt.props.children:null:st);return jsxRuntimeExports.jsx(d,{...j,ref:_,children:reactExports.isValidElement(rt)?reactExports.cloneElement(rt,void 0,nt):null})}return jsxRuntimeExports.jsx(d,{...j,ref:_,children:$})});return g.displayName=`${h}.Slot`,g}function createSlotClone(h){const d=reactExports.forwardRef((g,b)=>{const{children:_,...$}=g;if(reactExports.isValidElement(_)){const j=getElementRef$1(_),_e=mergeProps($,_.props);return _.type!==reactExports.Fragment&&(_e.ref=b?composeRefs(b,j):j),reactExports.cloneElement(_,_e)}return reactExports.Children.count(_)>1?reactExports.Children.only(null):null});return d.displayName=`${h}.SlotClone`,d}var SLOTTABLE_IDENTIFIER=Symbol("radix.slottable");function createSlottable(h){const d=({children:g})=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:g});return d.displayName=`${h}.Slottable`,d.__radixId=SLOTTABLE_IDENTIFIER,d}function isSlottable(h){return reactExports.isValidElement(h)&&typeof h.type=="function"&&"__radixId"in h.type&&h.type.__radixId===SLOTTABLE_IDENTIFIER}function mergeProps(h,d){const g={...d};for(const b in d){const _=h[b],$=d[b];/^on[A-Z]/.test(b)?_&&$?g[b]=(..._e)=>{const et=$(..._e);return _(..._e),et}:_&&(g[b]=_):b==="style"?g[b]={..._,...$}:b==="className"&&(g[b]=[_,$].filter(Boolean).join(" "))}return{...h,...g}}function getElementRef$1(h){var b,_;let d=(b=Object.getOwnPropertyDescriptor(h.props,"ref"))==null?void 0:b.get,g=d&&"isReactWarning"in d&&d.isReactWarning;return g?h.ref:(d=(_=Object.getOwnPropertyDescriptor(h,"ref"))==null?void 0:_.get,g=d&&"isReactWarning"in d&&d.isReactWarning,g?h.props.ref:h.props.ref||h.ref)}function createCollection(h){const d=h+"CollectionProvider",[g,b]=createContextScope(d),[_,$]=g(d,{collectionRef:{current:null},itemMap:new Map}),j=ot=>{const{scope:ct,children:lt}=ot,ut=o$1.useRef(null),ft=o$1.useRef(new Map).current;return jsxRuntimeExports.jsx(_,{scope:ct,itemMap:ft,collectionRef:ut,children:lt})};j.displayName=d;const _e=h+"CollectionSlot",et=createSlot(_e),rt=o$1.forwardRef((ot,ct)=>{const{scope:lt,children:ut}=ot,ft=$(_e,lt),Et=useComposedRefs(ct,ft.collectionRef);return jsxRuntimeExports.jsx(et,{ref:Et,children:ut})});rt.displayName=_e;const nt=h+"CollectionItemSlot",st="data-radix-collection-item",at=createSlot(nt),it=o$1.forwardRef((ot,ct)=>{const{scope:lt,children:ut,...ft}=ot,Et=o$1.useRef(null),Tt=useComposedRefs(ct,Et),St=$(nt,lt);return o$1.useEffect(()=>(St.itemMap.set(Et,{ref:Et,...ft}),()=>void St.itemMap.delete(Et))),jsxRuntimeExports.jsx(at,{[st]:"",ref:Tt,children:ut})});it.displayName=nt;function dt(ot){const ct=$(h+"CollectionConsumer",ot);return o$1.useCallback(()=>{const ut=ct.collectionRef.current;if(!ut)return[];const ft=Array.from(ut.querySelectorAll(`[${st}]`));return Array.from(ct.itemMap.values()).sort((St,ht)=>ft.indexOf(St.ref.current)-ft.indexOf(ht.ref.current))},[ct.collectionRef,ct.itemMap])}return[{Provider:j,Slot:rt,ItemSlot:it},dt,b]}var NODES=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Primitive=NODES.reduce((h,d)=>{const g=createSlot(`Primitive.${d}`),b=reactExports.forwardRef((_,$)=>{const{asChild:j,..._e}=_,et=j?g:d;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),jsxRuntimeExports.jsx(et,{..._e,ref:$})});return b.displayName=`Primitive.${d}`,{...h,[d]:b}},{});function dispatchDiscreteCustomEvent(h,d){h&&reactDomExports.flushSync(()=>h.dispatchEvent(d))}function useCallbackRef$1(h){const d=reactExports.useRef(h);return reactExports.useEffect(()=>{d.current=h}),reactExports.useMemo(()=>(...g)=>{var b;return(b=d.current)==null?void 0:b.call(d,...g)},[])}function useEscapeKeydown(h,d=globalThis==null?void 0:globalThis.document){const g=useCallbackRef$1(h);reactExports.useEffect(()=>{const b=_=>{_.key==="Escape"&&g(_)};return d.addEventListener("keydown",b,{capture:!0}),()=>d.removeEventListener("keydown",b,{capture:!0})},[g,d])}var DISMISSABLE_LAYER_NAME="DismissableLayer",CONTEXT_UPDATE="dismissableLayer.update",POINTER_DOWN_OUTSIDE="dismissableLayer.pointerDownOutside",FOCUS_OUTSIDE="dismissableLayer.focusOutside",originalBodyPointerEvents,DismissableLayerContext=reactExports.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),DismissableLayer=reactExports.forwardRef((h,d)=>{const{disableOutsidePointerEvents:g=!1,onEscapeKeyDown:b,onPointerDownOutside:_,onFocusOutside:$,onInteractOutside:j,onDismiss:_e,...et}=h,rt=reactExports.useContext(DismissableLayerContext),[nt,st]=reactExports.useState(null),at=(nt==null?void 0:nt.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,it]=reactExports.useState({}),dt=useComposedRefs(d,ht=>st(ht)),ot=Array.from(rt.layers),[ct]=[...rt.layersWithOutsidePointerEventsDisabled].slice(-1),lt=ot.indexOf(ct),ut=nt?ot.indexOf(nt):-1,ft=rt.layersWithOutsidePointerEventsDisabled.size>0,Et=ut>=lt,Tt=usePointerDownOutside(ht=>{const kt=ht.target,Rt=[...rt.branches].some(Mt=>Mt.contains(kt));!Et||Rt||(_==null||_(ht),j==null||j(ht),ht.defaultPrevented||_e==null||_e())},at),St=useFocusOutside(ht=>{const kt=ht.target;[...rt.branches].some(Mt=>Mt.contains(kt))||($==null||$(ht),j==null||j(ht),ht.defaultPrevented||_e==null||_e())},at);return useEscapeKeydown(ht=>{ut===rt.layers.size-1&&(b==null||b(ht),!ht.defaultPrevented&&_e&&(ht.preventDefault(),_e()))},at),reactExports.useEffect(()=>{if(nt)return g&&(rt.layersWithOutsidePointerEventsDisabled.size===0&&(originalBodyPointerEvents=at.body.style.pointerEvents,at.body.style.pointerEvents="none"),rt.layersWithOutsidePointerEventsDisabled.add(nt)),rt.layers.add(nt),dispatchUpdate(),()=>{g&&rt.layersWithOutsidePointerEventsDisabled.size===1&&(at.body.style.pointerEvents=originalBodyPointerEvents)}},[nt,at,g,rt]),reactExports.useEffect(()=>()=>{nt&&(rt.layers.delete(nt),rt.layersWithOutsidePointerEventsDisabled.delete(nt),dispatchUpdate())},[nt,rt]),reactExports.useEffect(()=>{const ht=()=>it({});return document.addEventListener(CONTEXT_UPDATE,ht),()=>document.removeEventListener(CONTEXT_UPDATE,ht)},[]),jsxRuntimeExports.jsx(Primitive.div,{...et,ref:dt,style:{pointerEvents:ft?Et?"auto":"none":void 0,...h.style},onFocusCapture:composeEventHandlers(h.onFocusCapture,St.onFocusCapture),onBlurCapture:composeEventHandlers(h.onBlurCapture,St.onBlurCapture),onPointerDownCapture:composeEventHandlers(h.onPointerDownCapture,Tt.onPointerDownCapture)})});DismissableLayer.displayName=DISMISSABLE_LAYER_NAME;var BRANCH_NAME="DismissableLayerBranch",DismissableLayerBranch=reactExports.forwardRef((h,d)=>{const g=reactExports.useContext(DismissableLayerContext),b=reactExports.useRef(null),_=useComposedRefs(d,b);return reactExports.useEffect(()=>{const $=b.current;if($)return g.branches.add($),()=>{g.branches.delete($)}},[g.branches]),jsxRuntimeExports.jsx(Primitive.div,{...h,ref:_})});DismissableLayerBranch.displayName=BRANCH_NAME;function usePointerDownOutside(h,d=globalThis==null?void 0:globalThis.document){const g=useCallbackRef$1(h),b=reactExports.useRef(!1),_=reactExports.useRef(()=>{});return reactExports.useEffect(()=>{const $=_e=>{if(_e.target&&!b.current){let et=function(){handleAndDispatchCustomEvent$1(POINTER_DOWN_OUTSIDE,g,rt,{discrete:!0})};const rt={originalEvent:_e};_e.pointerType==="touch"?(d.removeEventListener("click",_.current),_.current=et,d.addEventListener("click",_.current,{once:!0})):et()}else d.removeEventListener("click",_.current);b.current=!1},j=window.setTimeout(()=>{d.addEventListener("pointerdown",$)},0);return()=>{window.clearTimeout(j),d.removeEventListener("pointerdown",$),d.removeEventListener("click",_.current)}},[d,g]),{onPointerDownCapture:()=>b.current=!0}}function useFocusOutside(h,d=globalThis==null?void 0:globalThis.document){const g=useCallbackRef$1(h),b=reactExports.useRef(!1);return reactExports.useEffect(()=>{const _=$=>{$.target&&!b.current&&handleAndDispatchCustomEvent$1(FOCUS_OUTSIDE,g,{originalEvent:$},{discrete:!1})};return d.addEventListener("focusin",_),()=>d.removeEventListener("focusin",_)},[d,g]),{onFocusCapture:()=>b.current=!0,onBlurCapture:()=>b.current=!1}}function dispatchUpdate(){const h=new CustomEvent(CONTEXT_UPDATE);document.dispatchEvent(h)}function handleAndDispatchCustomEvent$1(h,d,g,{discrete:b}){const _=g.originalEvent.target,$=new CustomEvent(h,{bubbles:!1,cancelable:!0,detail:g});d&&_.addEventListener(h,d,{once:!0}),b?dispatchDiscreteCustomEvent(_,$):_.dispatchEvent($)}var Root$5=DismissableLayer,Branch=DismissableLayerBranch,useLayoutEffect2=globalThis!=null&&globalThis.document?reactExports.useLayoutEffect:()=>{},PORTAL_NAME$2="Portal",Portal$1=reactExports.forwardRef((h,d)=>{var _e;const{container:g,...b}=h,[_,$]=reactExports.useState(!1);useLayoutEffect2(()=>$(!0),[]);const j=g||_&&((_e=globalThis==null?void 0:globalThis.document)==null?void 0:_e.body);return j?vt.createPortal(jsxRuntimeExports.jsx(Primitive.div,{...b,ref:d}),j):null});Portal$1.displayName=PORTAL_NAME$2;function useStateMachine(h,d){return reactExports.useReducer((g,b)=>d[g][b]??g,h)}var Presence=h=>{const{present:d,children:g}=h,b=usePresence(d),_=typeof g=="function"?g({present:b.isPresent}):reactExports.Children.only(g),$=useComposedRefs(b.ref,getElementRef(_));return typeof g=="function"||b.isPresent?reactExports.cloneElement(_,{ref:$}):null};Presence.displayName="Presence";function usePresence(h){const[d,g]=reactExports.useState(),b=reactExports.useRef(null),_=reactExports.useRef(h),$=reactExports.useRef("none"),j=h?"mounted":"unmounted",[_e,et]=useStateMachine(j,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return reactExports.useEffect(()=>{const rt=getAnimationName(b.current);$.current=_e==="mounted"?rt:"none"},[_e]),useLayoutEffect2(()=>{const rt=b.current,nt=_.current;if(nt!==h){const at=$.current,it=getAnimationName(rt);h?et("MOUNT"):it==="none"||(rt==null?void 0:rt.display)==="none"?et("UNMOUNT"):et(nt&&at!==it?"ANIMATION_OUT":"UNMOUNT"),_.current=h}},[h,et]),useLayoutEffect2(()=>{if(d){let rt;const nt=d.ownerDocument.defaultView??window,st=it=>{const ot=getAnimationName(b.current).includes(it.animationName);if(it.target===d&&ot&&(et("ANIMATION_END"),!_.current)){const ct=d.style.animationFillMode;d.style.animationFillMode="forwards",rt=nt.setTimeout(()=>{d.style.animationFillMode==="forwards"&&(d.style.animationFillMode=ct)})}},at=it=>{it.target===d&&($.current=getAnimationName(b.current))};return d.addEventListener("animationstart",at),d.addEventListener("animationcancel",st),d.addEventListener("animationend",st),()=>{nt.clearTimeout(rt),d.removeEventListener("animationstart",at),d.removeEventListener("animationcancel",st),d.removeEventListener("animationend",st)}}else et("ANIMATION_END")},[d,et]),{isPresent:["mounted","unmountSuspended"].includes(_e),ref:reactExports.useCallback(rt=>{b.current=rt?getComputedStyle(rt):null,g(rt)},[])}}function getAnimationName(h){return(h==null?void 0:h.animationName)||"none"}function getElementRef(h){var b,_;let d=(b=Object.getOwnPropertyDescriptor(h.props,"ref"))==null?void 0:b.get,g=d&&"isReactWarning"in d&&d.isReactWarning;return g?h.ref:(d=(_=Object.getOwnPropertyDescriptor(h,"ref"))==null?void 0:_.get,g=d&&"isReactWarning"in d&&d.isReactWarning,g?h.props.ref:h.props.ref||h.ref)}var useInsertionEffect=React[" useInsertionEffect ".trim().toString()]||useLayoutEffect2;function useControllableState({prop:h,defaultProp:d,onChange:g=()=>{},caller:b}){const[_,$,j]=useUncontrolledState({defaultProp:d,onChange:g}),_e=h!==void 0,et=_e?h:_;{const nt=reactExports.useRef(h!==void 0);reactExports.useEffect(()=>{const st=nt.current;st!==_e&&console.warn(`${b} is changing from ${st?"controlled":"uncontrolled"} to ${_e?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),nt.current=_e},[_e,b])}const rt=reactExports.useCallback(nt=>{var st;if(_e){const at=isFunction(nt)?nt(h):nt;at!==h&&((st=j.current)==null||st.call(j,at))}else $(nt)},[_e,h,$,j]);return[et,rt]}function useUncontrolledState({defaultProp:h,onChange:d}){const[g,b]=reactExports.useState(h),_=reactExports.useRef(g),$=reactExports.useRef(d);return useInsertionEffect(()=>{$.current=d},[d]),reactExports.useEffect(()=>{var j;_.current!==g&&((j=$.current)==null||j.call($,g),_.current=g)},[g,_]),[g,b,$]}function isFunction(h){return typeof h=="function"}var VISUALLY_HIDDEN_STYLES=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),NAME$1="VisuallyHidden",VisuallyHidden=reactExports.forwardRef((h,d)=>jsxRuntimeExports.jsx(Primitive.span,{...h,ref:d,style:{...VISUALLY_HIDDEN_STYLES,...h.style}}));VisuallyHidden.displayName=NAME$1;var Root$4=VisuallyHidden,PROVIDER_NAME$1="ToastProvider",[Collection,useCollection,createCollectionScope]=createCollection("Toast"),[createToastContext,createToastScope]=createContextScope("Toast",[createCollectionScope]),[ToastProviderProvider,useToastProviderContext]=createToastContext(PROVIDER_NAME$1),ToastProvider$1=h=>{const{__scopeToast:d,label:g="Notification",duration:b=5e3,swipeDirection:_="right",swipeThreshold:$=50,children:j}=h,[_e,et]=reactExports.useState(null),[rt,nt]=reactExports.useState(0),st=reactExports.useRef(!1),at=reactExports.useRef(!1);return g.trim()||console.error(`Invalid prop \`label\` supplied to \`${PROVIDER_NAME$1}\`. Expected non-empty \`string\`.`),jsxRuntimeExports.jsx(Collection.Provider,{scope:d,children:jsxRuntimeExports.jsx(ToastProviderProvider,{scope:d,label:g,duration:b,swipeDirection:_,swipeThreshold:$,toastCount:rt,viewport:_e,onViewportChange:et,onToastAdd:reactExports.useCallback(()=>nt(it=>it+1),[]),onToastRemove:reactExports.useCallback(()=>nt(it=>it-1),[]),isFocusedToastEscapeKeyDownRef:st,isClosePausedRef:at,children:j})})};ToastProvider$1.displayName=PROVIDER_NAME$1;var VIEWPORT_NAME="ToastViewport",VIEWPORT_DEFAULT_HOTKEY=["F8"],VIEWPORT_PAUSE="toast.viewportPause",VIEWPORT_RESUME="toast.viewportResume",ToastViewport$1=reactExports.forwardRef((h,d)=>{const{__scopeToast:g,hotkey:b=VIEWPORT_DEFAULT_HOTKEY,label:_="Notifications ({hotkey})",...$}=h,j=useToastProviderContext(VIEWPORT_NAME,g),_e=useCollection(g),et=reactExports.useRef(null),rt=reactExports.useRef(null),nt=reactExports.useRef(null),st=reactExports.useRef(null),at=useComposedRefs(d,st,j.onViewportChange),it=b.join("+").replace(/Key/g,"").replace(/Digit/g,""),dt=j.toastCount>0;reactExports.useEffect(()=>{const ct=lt=>{var ft;b.length!==0&&b.every(Et=>lt[Et]||lt.code===Et)&&((ft=st.current)==null||ft.focus())};return document.addEventListener("keydown",ct),()=>document.removeEventListener("keydown",ct)},[b]),reactExports.useEffect(()=>{const ct=et.current,lt=st.current;if(dt&&ct&&lt){const ut=()=>{if(!j.isClosePausedRef.current){const St=new CustomEvent(VIEWPORT_PAUSE);lt.dispatchEvent(St),j.isClosePausedRef.current=!0}},ft=()=>{if(j.isClosePausedRef.current){const St=new CustomEvent(VIEWPORT_RESUME);lt.dispatchEvent(St),j.isClosePausedRef.current=!1}},Et=St=>{!ct.contains(St.relatedTarget)&&ft()},Tt=()=>{ct.contains(document.activeElement)||ft()};return ct.addEventListener("focusin",ut),ct.addEventListener("focusout",Et),ct.addEventListener("pointermove",ut),ct.addEventListener("pointerleave",Tt),window.addEventListener("blur",ut),window.addEventListener("focus",ft),()=>{ct.removeEventListener("focusin",ut),ct.removeEventListener("focusout",Et),ct.removeEventListener("pointermove",ut),ct.removeEventListener("pointerleave",Tt),window.removeEventListener("blur",ut),window.removeEventListener("focus",ft)}}},[dt,j.isClosePausedRef]);const ot=reactExports.useCallback(({tabbingDirection:ct})=>{const ut=_e().map(ft=>{const Et=ft.ref.current,Tt=[Et,...getTabbableCandidates$1(Et)];return ct==="forwards"?Tt:Tt.reverse()});return(ct==="forwards"?ut.reverse():ut).flat()},[_e]);return reactExports.useEffect(()=>{const ct=st.current;if(ct){const lt=ut=>{var Tt,St,ht;const ft=ut.altKey||ut.ctrlKey||ut.metaKey;if(ut.key==="Tab"&&!ft){const kt=document.activeElement,Rt=ut.shiftKey;if(ut.target===ct&&Rt){(Tt=rt.current)==null||Tt.focus();return}const Ct=ot({tabbingDirection:Rt?"backwards":"forwards"}),Pt=Ct.findIndex(xt=>xt===kt);focusFirst$1(Ct.slice(Pt+1))?ut.preventDefault():Rt?(St=rt.current)==null||St.focus():(ht=nt.current)==null||ht.focus()}};return ct.addEventListener("keydown",lt),()=>ct.removeEventListener("keydown",lt)}},[_e,ot]),jsxRuntimeExports.jsxs(Branch,{ref:et,role:"region","aria-label":_.replace("{hotkey}",it),tabIndex:-1,style:{pointerEvents:dt?void 0:"none"},children:[dt&&jsxRuntimeExports.jsx(FocusProxy,{ref:rt,onFocusFromOutsideViewport:()=>{const ct=ot({tabbingDirection:"forwards"});focusFirst$1(ct)}}),jsxRuntimeExports.jsx(Collection.Slot,{scope:g,children:jsxRuntimeExports.jsx(Primitive.ol,{tabIndex:-1,...$,ref:at})}),dt&&jsxRuntimeExports.jsx(FocusProxy,{ref:nt,onFocusFromOutsideViewport:()=>{const ct=ot({tabbingDirection:"backwards"});focusFirst$1(ct)}})]})});ToastViewport$1.displayName=VIEWPORT_NAME;var FOCUS_PROXY_NAME="ToastFocusProxy",FocusProxy=reactExports.forwardRef((h,d)=>{const{__scopeToast:g,onFocusFromOutsideViewport:b,..._}=h,$=useToastProviderContext(FOCUS_PROXY_NAME,g);return jsxRuntimeExports.jsx(VisuallyHidden,{"aria-hidden":!0,tabIndex:0,..._,ref:d,style:{position:"fixed"},onFocus:j=>{var rt;const _e=j.relatedTarget;!((rt=$.viewport)!=null&&rt.contains(_e))&&b()}})});FocusProxy.displayName=FOCUS_PROXY_NAME;var TOAST_NAME="Toast",TOAST_SWIPE_START="toast.swipeStart",TOAST_SWIPE_MOVE="toast.swipeMove",TOAST_SWIPE_CANCEL="toast.swipeCancel",TOAST_SWIPE_END="toast.swipeEnd",Toast$1=reactExports.forwardRef((h,d)=>{const{forceMount:g,open:b,defaultOpen:_,onOpenChange:$,...j}=h,[_e,et]=useControllableState({prop:b,defaultProp:_??!0,onChange:$,caller:TOAST_NAME});return jsxRuntimeExports.jsx(Presence,{present:g||_e,children:jsxRuntimeExports.jsx(ToastImpl,{open:_e,...j,ref:d,onClose:()=>et(!1),onPause:useCallbackRef$1(h.onPause),onResume:useCallbackRef$1(h.onResume),onSwipeStart:composeEventHandlers(h.onSwipeStart,rt=>{rt.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:composeEventHandlers(h.onSwipeMove,rt=>{const{x:nt,y:st}=rt.detail.delta;rt.currentTarget.setAttribute("data-swipe","move"),rt.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${nt}px`),rt.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${st}px`)}),onSwipeCancel:composeEventHandlers(h.onSwipeCancel,rt=>{rt.currentTarget.setAttribute("data-swipe","cancel"),rt.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),rt.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),rt.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),rt.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:composeEventHandlers(h.onSwipeEnd,rt=>{const{x:nt,y:st}=rt.detail.delta;rt.currentTarget.setAttribute("data-swipe","end"),rt.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),rt.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),rt.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${nt}px`),rt.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${st}px`),et(!1)})})})});Toast$1.displayName=TOAST_NAME;var[ToastInteractiveProvider,useToastInteractiveContext]=createToastContext(TOAST_NAME,{onClose(){}}),ToastImpl=reactExports.forwardRef((h,d)=>{const{__scopeToast:g,type:b="foreground",duration:_,open:$,onClose:j,onEscapeKeyDown:_e,onPause:et,onResume:rt,onSwipeStart:nt,onSwipeMove:st,onSwipeCancel:at,onSwipeEnd:it,...dt}=h,ot=useToastProviderContext(TOAST_NAME,g),[ct,lt]=reactExports.useState(null),ut=useComposedRefs(d,xt=>lt(xt)),ft=reactExports.useRef(null),Et=reactExports.useRef(null),Tt=_||ot.duration,St=reactExports.useRef(0),ht=reactExports.useRef(Tt),kt=reactExports.useRef(0),{onToastAdd:Rt,onToastRemove:Mt}=ot,Zt=useCallbackRef$1(()=>{var Ht;(ct==null?void 0:ct.contains(document.activeElement))&&((Ht=ot.viewport)==null||Ht.focus()),j()}),Ct=reactExports.useCallback(xt=>{!xt||xt===1/0||(window.clearTimeout(kt.current),St.current=new Date().getTime(),kt.current=window.setTimeout(Zt,xt))},[Zt]);reactExports.useEffect(()=>{const xt=ot.viewport;if(xt){const Ht=()=>{Ct(ht.current),rt==null||rt()},tr=()=>{const er=new Date().getTime()-St.current;ht.current=ht.current-er,window.clearTimeout(kt.current),et==null||et()};return xt.addEventListener(VIEWPORT_PAUSE,tr),xt.addEventListener(VIEWPORT_RESUME,Ht),()=>{xt.removeEventListener(VIEWPORT_PAUSE,tr),xt.removeEventListener(VIEWPORT_RESUME,Ht)}}},[ot.viewport,Tt,et,rt,Ct]),reactExports.useEffect(()=>{$&&!ot.isClosePausedRef.current&&Ct(Tt)},[$,Tt,ot.isClosePausedRef,Ct]),reactExports.useEffect(()=>(Rt(),()=>Mt()),[Rt,Mt]);const Pt=reactExports.useMemo(()=>ct?getAnnounceTextContent(ct):null,[ct]);return ot.viewport?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Pt&&jsxRuntimeExports.jsx(ToastAnnounce,{__scopeToast:g,role:"status","aria-live":b==="foreground"?"assertive":"polite","aria-atomic":!0,children:Pt}),jsxRuntimeExports.jsx(ToastInteractiveProvider,{scope:g,onClose:Zt,children:reactDomExports.createPortal(jsxRuntimeExports.jsx(Collection.ItemSlot,{scope:g,children:jsxRuntimeExports.jsx(Root$5,{asChild:!0,onEscapeKeyDown:composeEventHandlers(_e,()=>{ot.isFocusedToastEscapeKeyDownRef.current||Zt(),ot.isFocusedToastEscapeKeyDownRef.current=!1}),children:jsxRuntimeExports.jsx(Primitive.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":$?"open":"closed","data-swipe-direction":ot.swipeDirection,...dt,ref:ut,style:{userSelect:"none",touchAction:"none",...h.style},onKeyDown:composeEventHandlers(h.onKeyDown,xt=>{xt.key==="Escape"&&(_e==null||_e(xt.nativeEvent),xt.nativeEvent.defaultPrevented||(ot.isFocusedToastEscapeKeyDownRef.current=!0,Zt()))}),onPointerDown:composeEventHandlers(h.onPointerDown,xt=>{xt.button===0&&(ft.current={x:xt.clientX,y:xt.clientY})}),onPointerMove:composeEventHandlers(h.onPointerMove,xt=>{if(!ft.current)return;const Ht=xt.clientX-ft.current.x,tr=xt.clientY-ft.current.y,er=!!Et.current,Kt=["left","right"].includes(ot.swipeDirection),Bt=["left","up"].includes(ot.swipeDirection)?Math.min:Math.max,nr=Kt?Bt(0,Ht):0,Ut=Kt?0:Bt(0,tr),zt=xt.pointerType==="touch"?10:2,sr={x:nr,y:Ut},or={originalEvent:xt,delta:sr};er?(Et.current=sr,handleAndDispatchCustomEvent(TOAST_SWIPE_MOVE,st,or,{discrete:!1})):isDeltaInDirection(sr,ot.swipeDirection,zt)?(Et.current=sr,handleAndDispatchCustomEvent(TOAST_SWIPE_START,nt,or,{discrete:!1}),xt.target.setPointerCapture(xt.pointerId)):(Math.abs(Ht)>zt||Math.abs(tr)>zt)&&(ft.current=null)}),onPointerUp:composeEventHandlers(h.onPointerUp,xt=>{const Ht=Et.current,tr=xt.target;if(tr.hasPointerCapture(xt.pointerId)&&tr.releasePointerCapture(xt.pointerId),Et.current=null,ft.current=null,Ht){const er=xt.currentTarget,Kt={originalEvent:xt,delta:Ht};isDeltaInDirection(Ht,ot.swipeDirection,ot.swipeThreshold)?handleAndDispatchCustomEvent(TOAST_SWIPE_END,it,Kt,{discrete:!0}):handleAndDispatchCustomEvent(TOAST_SWIPE_CANCEL,at,Kt,{discrete:!0}),er.addEventListener("click",Bt=>Bt.preventDefault(),{once:!0})}})})})}),ot.viewport)})]}):null}),ToastAnnounce=h=>{const{__scopeToast:d,children:g,...b}=h,_=useToastProviderContext(TOAST_NAME,d),[$,j]=reactExports.useState(!1),[_e,et]=reactExports.useState(!1);return useNextFrame(()=>j(!0)),reactExports.useEffect(()=>{const rt=window.setTimeout(()=>et(!0),1e3);return()=>window.clearTimeout(rt)},[]),_e?null:jsxRuntimeExports.jsx(Portal$1,{asChild:!0,children:jsxRuntimeExports.jsx(VisuallyHidden,{...b,children:$&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[_.label," ",g]})})})},TITLE_NAME$1="ToastTitle",ToastTitle$1=reactExports.forwardRef((h,d)=>{const{__scopeToast:g,...b}=h;return jsxRuntimeExports.jsx(Primitive.div,{...b,ref:d})});ToastTitle$1.displayName=TITLE_NAME$1;var DESCRIPTION_NAME$1="ToastDescription",ToastDescription$1=reactExports.forwardRef((h,d)=>{const{__scopeToast:g,...b}=h;return jsxRuntimeExports.jsx(Primitive.div,{...b,ref:d})});ToastDescription$1.displayName=DESCRIPTION_NAME$1;var ACTION_NAME="ToastAction",ToastAction$1=reactExports.forwardRef((h,d)=>{const{altText:g,...b}=h;return g.trim()?jsxRuntimeExports.jsx(ToastAnnounceExclude,{altText:g,asChild:!0,children:jsxRuntimeExports.jsx(ToastClose$1,{...b,ref:d})}):(console.error(`Invalid prop \`altText\` supplied to \`${ACTION_NAME}\`. Expected non-empty \`string\`.`),null)});ToastAction$1.displayName=ACTION_NAME;var CLOSE_NAME$1="ToastClose",ToastClose$1=reactExports.forwardRef((h,d)=>{const{__scopeToast:g,...b}=h,_=useToastInteractiveContext(CLOSE_NAME$1,g);return jsxRuntimeExports.jsx(ToastAnnounceExclude,{asChild:!0,children:jsxRuntimeExports.jsx(Primitive.button,{type:"button",...b,ref:d,onClick:composeEventHandlers(h.onClick,_.onClose)})})});ToastClose$1.displayName=CLOSE_NAME$1;var ToastAnnounceExclude=reactExports.forwardRef((h,d)=>{const{__scopeToast:g,altText:b,..._}=h;return jsxRuntimeExports.jsx(Primitive.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":b||void 0,..._,ref:d})});function getAnnounceTextContent(h){const d=[];return Array.from(h.childNodes).forEach(b=>{if(b.nodeType===b.TEXT_NODE&&b.textContent&&d.push(b.textContent),isHTMLElement$1(b)){const _=b.ariaHidden||b.hidden||b.style.display==="none",$=b.dataset.radixToastAnnounceExclude==="";if(!_)if($){const j=b.dataset.radixToastAnnounceAlt;j&&d.push(j)}else d.push(...getAnnounceTextContent(b))}}),d}function handleAndDispatchCustomEvent(h,d,g,{discrete:b}){const _=g.originalEvent.currentTarget,$=new CustomEvent(h,{bubbles:!0,cancelable:!0,detail:g});d&&_.addEventListener(h,d,{once:!0}),b?dispatchDiscreteCustomEvent(_,$):_.dispatchEvent($)}var isDeltaInDirection=(h,d,g=0)=>{const b=Math.abs(h.x),_=Math.abs(h.y),$=b>_;return d==="left"||d==="right"?$&&b>g:!$&&_>g};function useNextFrame(h=()=>{}){const d=useCallbackRef$1(h);useLayoutEffect2(()=>{let g=0,b=0;return g=window.requestAnimationFrame(()=>b=window.requestAnimationFrame(d)),()=>{window.cancelAnimationFrame(g),window.cancelAnimationFrame(b)}},[d])}function isHTMLElement$1(h){return h.nodeType===h.ELEMENT_NODE}function getTabbableCandidates$1(h){const d=[],g=document.createTreeWalker(h,NodeFilter.SHOW_ELEMENT,{acceptNode:b=>{const _=b.tagName==="INPUT"&&b.type==="hidden";return b.disabled||b.hidden||_?NodeFilter.FILTER_SKIP:b.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;g.nextNode();)d.push(g.currentNode);return d}function focusFirst$1(h){const d=document.activeElement;return h.some(g=>g===d?!0:(g.focus(),document.activeElement!==d))}var Provider$1=ToastProvider$1,Viewport=ToastViewport$1,Root2$1=Toast$1,Title$1=ToastTitle$1,Description$1=ToastDescription$1,Action$1=ToastAction$1,Close$1=ToastClose$1;function r$1(h){var d,g,b="";if(typeof h=="string"||typeof h=="number")b+=h;else if(typeof h=="object")if(Array.isArray(h)){var _=h.length;for(d=0;d<_;d++)h[d]&&(g=r$1(h[d]))&&(b&&(b+=" "),b+=g)}else for(g in h)h[g]&&(b&&(b+=" "),b+=g);return b}function clsx(){for(var h,d,g=0,b="",_=arguments.length;g<_;g++)(h=arguments[g])&&(d=r$1(h))&&(b&&(b+=" "),b+=d);return b}const falsyToString=h=>typeof h=="boolean"?`${h}`:h===0?"0":h,cx=clsx,cva=(h,d)=>g=>{var b;if((d==null?void 0:d.variants)==null)return cx(h,g==null?void 0:g.class,g==null?void 0:g.className);const{variants:_,defaultVariants:$}=d,j=Object.keys(_).map(rt=>{const nt=g==null?void 0:g[rt],st=$==null?void 0:$[rt];if(nt===null)return null;const at=falsyToString(nt)||falsyToString(st);return _[rt][at]}),_e=g&&Object.entries(g).reduce((rt,nt)=>{let[st,at]=nt;return at===void 0||(rt[st]=at),rt},{}),et=d==null||(b=d.compoundVariants)===null||b===void 0?void 0:b.reduce((rt,nt)=>{let{class:st,className:at,...it}=nt;return Object.entries(it).every(dt=>{let[ot,ct]=dt;return Array.isArray(ct)?ct.includes({...$,..._e}[ot]):{...$,..._e}[ot]===ct})?[...rt,st,at]:rt},[]);return cx(h,j,et,g==null?void 0:g.class,g==null?void 0:g.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=h=>h.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mergeClasses=(...h)=>h.filter((d,g,b)=>!!d&&d.trim()!==""&&b.indexOf(d)===g).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Icon=reactExports.forwardRef(({color:h="currentColor",size:d=24,strokeWidth:g=2,absoluteStrokeWidth:b,className:_="",children:$,iconNode:j,..._e},et)=>reactExports.createElement("svg",{ref:et,...defaultAttributes,width:d,height:d,stroke:h,strokeWidth:b?Number(g)*24/Number(d):g,className:mergeClasses("lucide",_),..._e},[...j.map(([rt,nt])=>reactExports.createElement(rt,nt)),...Array.isArray($)?$:[$]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const createLucideIcon=(h,d)=>{const g=reactExports.forwardRef(({className:b,..._},$)=>reactExports.createElement(Icon,{ref:$,iconNode:d,className:mergeClasses(`lucide-${toKebabCase(h)}`,b),..._}));return g.displayName=`${h}`,g};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Archive=createLucideIcon("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CheckCheck=createLucideIcon("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Check=createLucideIcon("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChevronDown=createLucideIcon("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChevronUp=createLucideIcon("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CircleAlert=createLucideIcon("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CircleCheck=createLucideIcon("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Database=createLucideIcon("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Disc=createLucideIcon("Disc",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Download=createLucideIcon("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ExternalLink=createLucideIcon("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ImagePlus=createLucideIcon("ImagePlus",[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Info=createLucideIcon("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Key=createLucideIcon("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LoaderCircle=createLucideIcon("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Music=createLucideIcon("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pause=createLucideIcon("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pencil=createLucideIcon("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Play=createLucideIcon("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Plus=createLucideIcon("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Radio=createLucideIcon("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RotateCcw=createLucideIcon("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Settings=createLucideIcon("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Shield=createLucideIcon("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Terminal=createLucideIcon("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Trash2=createLucideIcon("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Upload=createLucideIcon("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Users=createLucideIcon("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=createLucideIcon("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Youtube=createLucideIcon("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]),CLASS_PART_SEPARATOR="-",createClassGroupUtils=h=>{const d=createClassMap(h),{conflictingClassGroups:g,conflictingClassGroupModifiers:b}=h;return{getClassGroupId:j=>{const _e=j.split(CLASS_PART_SEPARATOR);return _e[0]===""&&_e.length!==1&&_e.shift(),getGroupRecursive(_e,d)||getGroupIdForArbitraryProperty(j)},getConflictingClassGroupIds:(j,_e)=>{const et=g[j]||[];return _e&&b[j]?[...et,...b[j]]:et}}},getGroupRecursive=(h,d)=>{var j;if(h.length===0)return d.classGroupId;const g=h[0],b=d.nextPart.get(g),_=b?getGroupRecursive(h.slice(1),b):void 0;if(_)return _;if(d.validators.length===0)return;const $=h.join(CLASS_PART_SEPARATOR);return(j=d.validators.find(({validator:_e})=>_e($)))==null?void 0:j.classGroupId},arbitraryPropertyRegex=/^\[(.+)\]$/,getGroupIdForArbitraryProperty=h=>{if(arbitraryPropertyRegex.test(h)){const d=arbitraryPropertyRegex.exec(h)[1],g=d==null?void 0:d.substring(0,d.indexOf(":"));if(g)return"arbitrary.."+g}},createClassMap=h=>{const{theme:d,prefix:g}=h,b={nextPart:new Map,validators:[]};return getPrefixedClassGroupEntries(Object.entries(h.classGroups),g).forEach(([$,j])=>{processClassesRecursively(j,b,$,d)}),b},processClassesRecursively=(h,d,g,b)=>{h.forEach(_=>{if(typeof _=="string"){const $=_===""?d:getPart(d,_);$.classGroupId=g;return}if(typeof _=="function"){if(isThemeGetter(_)){processClassesRecursively(_(b),d,g,b);return}d.validators.push({validator:_,classGroupId:g});return}Object.entries(_).forEach(([$,j])=>{processClassesRecursively(j,getPart(d,$),g,b)})})},getPart=(h,d)=>{let g=h;return d.split(CLASS_PART_SEPARATOR).forEach(b=>{g.nextPart.has(b)||g.nextPart.set(b,{nextPart:new Map,validators:[]}),g=g.nextPart.get(b)}),g},isThemeGetter=h=>h.isThemeGetter,getPrefixedClassGroupEntries=(h,d)=>d?h.map(([g,b])=>{const _=b.map($=>typeof $=="string"?d+$:typeof $=="object"?Object.fromEntries(Object.entries($).map(([j,_e])=>[d+j,_e])):$);return[g,_]}):h,createLruCache=h=>{if(h<1)return{get:()=>{},set:()=>{}};let d=0,g=new Map,b=new Map;const _=($,j)=>{g.set($,j),d++,d>h&&(d=0,b=g,g=new Map)};return{get($){let j=g.get($);if(j!==void 0)return j;if((j=b.get($))!==void 0)return _($,j),j},set($,j){g.has($)?g.set($,j):_($,j)}}},IMPORTANT_MODIFIER="!",createParseClassName=h=>{const{separator:d,experimentalParseClassName:g}=h,b=d.length===1,_=d[0],$=d.length,j=_e=>{const et=[];let rt=0,nt=0,st;for(let ct=0;ct<_e.length;ct++){let lt=_e[ct];if(rt===0){if(lt===_&&(b||_e.slice(ct,ct+$)===d)){et.push(_e.slice(nt,ct)),nt=ct+$;continue}if(lt==="/"){st=ct;continue}}lt==="["?rt++:lt==="]"&&rt--}const at=et.length===0?_e:_e.substring(nt),it=at.startsWith(IMPORTANT_MODIFIER),dt=it?at.substring(1):at,ot=st&&st>nt?st-nt:void 0;return{modifiers:et,hasImportantModifier:it,baseClassName:dt,maybePostfixModifierPosition:ot}};return g?_e=>g({className:_e,parseClassName:j}):j},sortModifiers=h=>{if(h.length<=1)return h;const d=[];let g=[];return h.forEach(b=>{b[0]==="["?(d.push(...g.sort(),b),g=[]):g.push(b)}),d.push(...g.sort()),d},createConfigUtils=h=>({cache:createLruCache(h.cacheSize),parseClassName:createParseClassName(h),...createClassGroupUtils(h)}),SPLIT_CLASSES_REGEX=/\s+/,mergeClassList=(h,d)=>{const{parseClassName:g,getClassGroupId:b,getConflictingClassGroupIds:_}=d,$=[],j=h.trim().split(SPLIT_CLASSES_REGEX);let _e="";for(let et=j.length-1;et>=0;et-=1){const rt=j[et],{modifiers:nt,hasImportantModifier:st,baseClassName:at,maybePostfixModifierPosition:it}=g(rt);let dt=!!it,ot=b(dt?at.substring(0,it):at);if(!ot){if(!dt){_e=rt+(_e.length>0?" "+_e:_e);continue}if(ot=b(at),!ot){_e=rt+(_e.length>0?" "+_e:_e);continue}dt=!1}const ct=sortModifiers(nt).join(":"),lt=st?ct+IMPORTANT_MODIFIER:ct,ut=lt+ot;if($.includes(ut))continue;$.push(ut);const ft=_(ot,dt);for(let Et=0;Et<ft.length;++Et){const Tt=ft[Et];$.push(lt+Tt)}_e=rt+(_e.length>0?" "+_e:_e)}return _e};function twJoin(){let h=0,d,g,b="";for(;h<arguments.length;)(d=arguments[h++])&&(g=toValue(d))&&(b&&(b+=" "),b+=g);return b}const toValue=h=>{if(typeof h=="string")return h;let d,g="";for(let b=0;b<h.length;b++)h[b]&&(d=toValue(h[b]))&&(g&&(g+=" "),g+=d);return g};function createTailwindMerge(h,...d){let g,b,_,$=j;function j(et){const rt=d.reduce((nt,st)=>st(nt),h());return g=createConfigUtils(rt),b=g.cache.get,_=g.cache.set,$=_e,_e(et)}function _e(et){const rt=b(et);if(rt)return rt;const nt=mergeClassList(et,g);return _(et,nt),nt}return function(){return $(twJoin.apply(null,arguments))}}const fromTheme=h=>{const d=g=>g[h]||[];return d.isThemeGetter=!0,d},arbitraryValueRegex=/^\[(?:([a-z-]+):)?(.+)\]$/i,fractionRegex=/^\d+\/\d+$/,stringLengths=new Set(["px","full","screen"]),tshirtUnitRegex=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,lengthUnitRegex=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,colorFunctionRegex=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,shadowRegex=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,imageRegex=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,isLength=h=>isNumber$1(h)||stringLengths.has(h)||fractionRegex.test(h),isArbitraryLength=h=>getIsArbitraryValue(h,"length",isLengthOnly),isNumber$1=h=>!!h&&!Number.isNaN(Number(h)),isArbitraryNumber=h=>getIsArbitraryValue(h,"number",isNumber$1),isInteger=h=>!!h&&Number.isInteger(Number(h)),isPercent=h=>h.endsWith("%")&&isNumber$1(h.slice(0,-1)),isArbitraryValue=h=>arbitraryValueRegex.test(h),isTshirtSize=h=>tshirtUnitRegex.test(h),sizeLabels=new Set(["length","size","percentage"]),isArbitrarySize=h=>getIsArbitraryValue(h,sizeLabels,isNever),isArbitraryPosition=h=>getIsArbitraryValue(h,"position",isNever),imageLabels=new Set(["image","url"]),isArbitraryImage=h=>getIsArbitraryValue(h,imageLabels,isImage),isArbitraryShadow=h=>getIsArbitraryValue(h,"",isShadow),isAny=()=>!0,getIsArbitraryValue=(h,d,g)=>{const b=arbitraryValueRegex.exec(h);return b?b[1]?typeof d=="string"?b[1]===d:d.has(b[1]):g(b[2]):!1},isLengthOnly=h=>lengthUnitRegex.test(h)&&!colorFunctionRegex.test(h),isNever=()=>!1,isShadow=h=>shadowRegex.test(h),isImage=h=>imageRegex.test(h),getDefaultConfig=()=>{const h=fromTheme("colors"),d=fromTheme("spacing"),g=fromTheme("blur"),b=fromTheme("brightness"),_=fromTheme("borderColor"),$=fromTheme("borderRadius"),j=fromTheme("borderSpacing"),_e=fromTheme("borderWidth"),et=fromTheme("contrast"),rt=fromTheme("grayscale"),nt=fromTheme("hueRotate"),st=fromTheme("invert"),at=fromTheme("gap"),it=fromTheme("gradientColorStops"),dt=fromTheme("gradientColorStopPositions"),ot=fromTheme("inset"),ct=fromTheme("margin"),lt=fromTheme("opacity"),ut=fromTheme("padding"),ft=fromTheme("saturate"),Et=fromTheme("scale"),Tt=fromTheme("sepia"),St=fromTheme("skew"),ht=fromTheme("space"),kt=fromTheme("translate"),Rt=()=>["auto","contain","none"],Mt=()=>["auto","hidden","clip","visible","scroll"],Zt=()=>["auto",isArbitraryValue,d],Ct=()=>[isArbitraryValue,d],Pt=()=>["",isLength,isArbitraryLength],xt=()=>["auto",isNumber$1,isArbitraryValue],Ht=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],tr=()=>["solid","dashed","dotted","double","none"],er=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Kt=()=>["start","end","center","between","around","evenly","stretch"],Bt=()=>["","0",isArbitraryValue],nr=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Ut=()=>[isNumber$1,isArbitraryValue];return{cacheSize:500,separator:":",theme:{colors:[isAny],spacing:[isLength,isArbitraryLength],blur:["none","",isTshirtSize,isArbitraryValue],brightness:Ut(),borderColor:[h],borderRadius:["none","","full",isTshirtSize,isArbitraryValue],borderSpacing:Ct(),borderWidth:Pt(),contrast:Ut(),grayscale:Bt(),hueRotate:Ut(),invert:Bt(),gap:Ct(),gradientColorStops:[h],gradientColorStopPositions:[isPercent,isArbitraryLength],inset:Zt(),margin:Zt(),opacity:Ut(),padding:Ct(),saturate:Ut(),scale:Ut(),sepia:Bt(),skew:Ut(),space:Ct(),translate:Ct()},classGroups:{aspect:[{aspect:["auto","square","video",isArbitraryValue]}],container:["container"],columns:[{columns:[isTshirtSize]}],"break-after":[{"break-after":nr()}],"break-before":[{"break-before":nr()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Ht(),isArbitraryValue]}],overflow:[{overflow:Mt()}],"overflow-x":[{"overflow-x":Mt()}],"overflow-y":[{"overflow-y":Mt()}],overscroll:[{overscroll:Rt()}],"overscroll-x":[{"overscroll-x":Rt()}],"overscroll-y":[{"overscroll-y":Rt()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[ot]}],"inset-x":[{"inset-x":[ot]}],"inset-y":[{"inset-y":[ot]}],start:[{start:[ot]}],end:[{end:[ot]}],top:[{top:[ot]}],right:[{right:[ot]}],bottom:[{bottom:[ot]}],left:[{left:[ot]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",isInteger,isArbitraryValue]}],basis:[{basis:Zt()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",isArbitraryValue]}],grow:[{grow:Bt()}],shrink:[{shrink:Bt()}],order:[{order:["first","last","none",isInteger,isArbitraryValue]}],"grid-cols":[{"grid-cols":[isAny]}],"col-start-end":[{col:["auto",{span:["full",isInteger,isArbitraryValue]},isArbitraryValue]}],"col-start":[{"col-start":xt()}],"col-end":[{"col-end":xt()}],"grid-rows":[{"grid-rows":[isAny]}],"row-start-end":[{row:["auto",{span:[isInteger,isArbitraryValue]},isArbitraryValue]}],"row-start":[{"row-start":xt()}],"row-end":[{"row-end":xt()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",isArbitraryValue]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",isArbitraryValue]}],gap:[{gap:[at]}],"gap-x":[{"gap-x":[at]}],"gap-y":[{"gap-y":[at]}],"justify-content":[{justify:["normal",...Kt()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Kt(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Kt(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[ut]}],px:[{px:[ut]}],py:[{py:[ut]}],ps:[{ps:[ut]}],pe:[{pe:[ut]}],pt:[{pt:[ut]}],pr:[{pr:[ut]}],pb:[{pb:[ut]}],pl:[{pl:[ut]}],m:[{m:[ct]}],mx:[{mx:[ct]}],my:[{my:[ct]}],ms:[{ms:[ct]}],me:[{me:[ct]}],mt:[{mt:[ct]}],mr:[{mr:[ct]}],mb:[{mb:[ct]}],ml:[{ml:[ct]}],"space-x":[{"space-x":[ht]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[ht]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",isArbitraryValue,d]}],"min-w":[{"min-w":[isArbitraryValue,d,"min","max","fit"]}],"max-w":[{"max-w":[isArbitraryValue,d,"none","full","min","max","fit","prose",{screen:[isTshirtSize]},isTshirtSize]}],h:[{h:[isArbitraryValue,d,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[isArbitraryValue,d,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[isArbitraryValue,d,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[isArbitraryValue,d,"auto","min","max","fit"]}],"font-size":[{text:["base",isTshirtSize,isArbitraryLength]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",isArbitraryNumber]}],"font-family":[{font:[isAny]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",isArbitraryValue]}],"line-clamp":[{"line-clamp":["none",isNumber$1,isArbitraryNumber]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",isLength,isArbitraryValue]}],"list-image":[{"list-image":["none",isArbitraryValue]}],"list-style-type":[{list:["none","disc","decimal",isArbitraryValue]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[h]}],"placeholder-opacity":[{"placeholder-opacity":[lt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[h]}],"text-opacity":[{"text-opacity":[lt]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...tr(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",isLength,isArbitraryLength]}],"underline-offset":[{"underline-offset":["auto",isLength,isArbitraryValue]}],"text-decoration-color":[{decoration:[h]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:Ct()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",isArbitraryValue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",isArbitraryValue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[lt]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Ht(),isArbitraryPosition]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",isArbitrarySize]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},isArbitraryImage]}],"bg-color":[{bg:[h]}],"gradient-from-pos":[{from:[dt]}],"gradient-via-pos":[{via:[dt]}],"gradient-to-pos":[{to:[dt]}],"gradient-from":[{from:[it]}],"gradient-via":[{via:[it]}],"gradient-to":[{to:[it]}],rounded:[{rounded:[$]}],"rounded-s":[{"rounded-s":[$]}],"rounded-e":[{"rounded-e":[$]}],"rounded-t":[{"rounded-t":[$]}],"rounded-r":[{"rounded-r":[$]}],"rounded-b":[{"rounded-b":[$]}],"rounded-l":[{"rounded-l":[$]}],"rounded-ss":[{"rounded-ss":[$]}],"rounded-se":[{"rounded-se":[$]}],"rounded-ee":[{"rounded-ee":[$]}],"rounded-es":[{"rounded-es":[$]}],"rounded-tl":[{"rounded-tl":[$]}],"rounded-tr":[{"rounded-tr":[$]}],"rounded-br":[{"rounded-br":[$]}],"rounded-bl":[{"rounded-bl":[$]}],"border-w":[{border:[_e]}],"border-w-x":[{"border-x":[_e]}],"border-w-y":[{"border-y":[_e]}],"border-w-s":[{"border-s":[_e]}],"border-w-e":[{"border-e":[_e]}],"border-w-t":[{"border-t":[_e]}],"border-w-r":[{"border-r":[_e]}],"border-w-b":[{"border-b":[_e]}],"border-w-l":[{"border-l":[_e]}],"border-opacity":[{"border-opacity":[lt]}],"border-style":[{border:[...tr(),"hidden"]}],"divide-x":[{"divide-x":[_e]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[_e]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[lt]}],"divide-style":[{divide:tr()}],"border-color":[{border:[_]}],"border-color-x":[{"border-x":[_]}],"border-color-y":[{"border-y":[_]}],"border-color-s":[{"border-s":[_]}],"border-color-e":[{"border-e":[_]}],"border-color-t":[{"border-t":[_]}],"border-color-r":[{"border-r":[_]}],"border-color-b":[{"border-b":[_]}],"border-color-l":[{"border-l":[_]}],"divide-color":[{divide:[_]}],"outline-style":[{outline:["",...tr()]}],"outline-offset":[{"outline-offset":[isLength,isArbitraryValue]}],"outline-w":[{outline:[isLength,isArbitraryLength]}],"outline-color":[{outline:[h]}],"ring-w":[{ring:Pt()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[h]}],"ring-opacity":[{"ring-opacity":[lt]}],"ring-offset-w":[{"ring-offset":[isLength,isArbitraryLength]}],"ring-offset-color":[{"ring-offset":[h]}],shadow:[{shadow:["","inner","none",isTshirtSize,isArbitraryShadow]}],"shadow-color":[{shadow:[isAny]}],opacity:[{opacity:[lt]}],"mix-blend":[{"mix-blend":[...er(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":er()}],filter:[{filter:["","none"]}],blur:[{blur:[g]}],brightness:[{brightness:[b]}],contrast:[{contrast:[et]}],"drop-shadow":[{"drop-shadow":["","none",isTshirtSize,isArbitraryValue]}],grayscale:[{grayscale:[rt]}],"hue-rotate":[{"hue-rotate":[nt]}],invert:[{invert:[st]}],saturate:[{saturate:[ft]}],sepia:[{sepia:[Tt]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[g]}],"backdrop-brightness":[{"backdrop-brightness":[b]}],"backdrop-contrast":[{"backdrop-contrast":[et]}],"backdrop-grayscale":[{"backdrop-grayscale":[rt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[nt]}],"backdrop-invert":[{"backdrop-invert":[st]}],"backdrop-opacity":[{"backdrop-opacity":[lt]}],"backdrop-saturate":[{"backdrop-saturate":[ft]}],"backdrop-sepia":[{"backdrop-sepia":[Tt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[j]}],"border-spacing-x":[{"border-spacing-x":[j]}],"border-spacing-y":[{"border-spacing-y":[j]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",isArbitraryValue]}],duration:[{duration:Ut()}],ease:[{ease:["linear","in","out","in-out",isArbitraryValue]}],delay:[{delay:Ut()}],animate:[{animate:["none","spin","ping","pulse","bounce",isArbitraryValue]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[Et]}],"scale-x":[{"scale-x":[Et]}],"scale-y":[{"scale-y":[Et]}],rotate:[{rotate:[isInteger,isArbitraryValue]}],"translate-x":[{"translate-x":[kt]}],"translate-y":[{"translate-y":[kt]}],"skew-x":[{"skew-x":[St]}],"skew-y":[{"skew-y":[St]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",isArbitraryValue]}],accent:[{accent:["auto",h]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",isArbitraryValue]}],"caret-color":[{caret:[h]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":Ct()}],"scroll-mx":[{"scroll-mx":Ct()}],"scroll-my":[{"scroll-my":Ct()}],"scroll-ms":[{"scroll-ms":Ct()}],"scroll-me":[{"scroll-me":Ct()}],"scroll-mt":[{"scroll-mt":Ct()}],"scroll-mr":[{"scroll-mr":Ct()}],"scroll-mb":[{"scroll-mb":Ct()}],"scroll-ml":[{"scroll-ml":Ct()}],"scroll-p":[{"scroll-p":Ct()}],"scroll-px":[{"scroll-px":Ct()}],"scroll-py":[{"scroll-py":Ct()}],"scroll-ps":[{"scroll-ps":Ct()}],"scroll-pe":[{"scroll-pe":Ct()}],"scroll-pt":[{"scroll-pt":Ct()}],"scroll-pr":[{"scroll-pr":Ct()}],"scroll-pb":[{"scroll-pb":Ct()}],"scroll-pl":[{"scroll-pl":Ct()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",isArbitraryValue]}],fill:[{fill:[h,"none"]}],"stroke-w":[{stroke:[isLength,isArbitraryLength,isArbitraryNumber]}],stroke:[{stroke:[h,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},twMerge=createTailwindMerge(getDefaultConfig);function cn(...h){return twMerge(clsx(h))}const ToastProvider=Provider$1,ToastViewport=reactExports.forwardRef(({className:h,...d},g)=>jsxRuntimeExports.jsx(Viewport,{ref:g,className:cn("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",h),...d}));ToastViewport.displayName=Viewport.displayName;const toastVariants=cva("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Toast=reactExports.forwardRef(({className:h,variant:d,...g},b)=>jsxRuntimeExports.jsx(Root2$1,{ref:b,className:cn(toastVariants({variant:d}),h),...g}));Toast.displayName=Root2$1.displayName;const ToastAction=reactExports.forwardRef(({className:h,...d},g)=>jsxRuntimeExports.jsx(Action$1,{ref:g,className:cn("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",h),...d}));ToastAction.displayName=Action$1.displayName;const ToastClose=reactExports.forwardRef(({className:h,...d},g)=>jsxRuntimeExports.jsx(Close$1,{ref:g,className:cn("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",h),"toast-close":"",...d,children:jsxRuntimeExports.jsx(X,{className:"h-4 w-4"})}));ToastClose.displayName=Close$1.displayName;const ToastTitle=reactExports.forwardRef(({className:h,...d},g)=>jsxRuntimeExports.jsx(Title$1,{ref:g,className:cn("text-sm font-semibold",h),...d}));ToastTitle.displayName=Title$1.displayName;const ToastDescription=reactExports.forwardRef(({className:h,...d},g)=>jsxRuntimeExports.jsx(Description$1,{ref:g,className:cn("text-sm opacity-90",h),...d}));ToastDescription.displayName=Description$1.displayName;function Toaster$1(){const{toasts:h}=useToast();return jsxRuntimeExports.jsxs(ToastProvider,{children:[h.map(function({id:d,title:g,description:b,action:_,...$}){return jsxRuntimeExports.jsxs(Toast,{...$,children:[jsxRuntimeExports.jsxs("div",{className:"grid gap-1",children:[g&&jsxRuntimeExports.jsx(ToastTitle,{children:g}),b&&jsxRuntimeExports.jsx(ToastDescription,{children:b})]}),_,jsxRuntimeExports.jsx(ToastClose,{})]},d)}),jsxRuntimeExports.jsx(ToastViewport,{})]})}var jt=h=>{switch(h){case"success":return ee;case"info":return ae;case"warning":return oe;case"error":return se;default:return null}},te=Array(12).fill(0),Yt=({visible:h,className:d})=>o$1.createElement("div",{className:["sonner-loading-wrapper",d].filter(Boolean).join(" "),"data-visible":h},o$1.createElement("div",{className:"sonner-spinner"},te.map((g,b)=>o$1.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${b}`})))),ee=o$1.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},o$1.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),oe=o$1.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},o$1.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),ae=o$1.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},o$1.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),se=o$1.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},o$1.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Ot=o$1.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},o$1.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),o$1.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Ft=()=>{let[h,d]=o$1.useState(document.hidden);return o$1.useEffect(()=>{let g=()=>{d(document.hidden)};return document.addEventListener("visibilitychange",g),()=>window.removeEventListener("visibilitychange",g)},[]),h},bt=1,yt=class{constructor(){this.subscribe=h=>(this.subscribers.push(h),()=>{let d=this.subscribers.indexOf(h);this.subscribers.splice(d,1)}),this.publish=h=>{this.subscribers.forEach(d=>d(h))},this.addToast=h=>{this.publish(h),this.toasts=[...this.toasts,h]},this.create=h=>{var d;let{message:g,...b}=h,_=typeof(h==null?void 0:h.id)=="number"||((d=h.id)==null?void 0:d.length)>0?h.id:bt++,$=this.toasts.find(_e=>_e.id===_),j=h.dismissible===void 0?!0:h.dismissible;return this.dismissedToasts.has(_)&&this.dismissedToasts.delete(_),$?this.toasts=this.toasts.map(_e=>_e.id===_?(this.publish({..._e,...h,id:_,title:g}),{..._e,...h,id:_,dismissible:j,title:g}):_e):this.addToast({title:g,...b,dismissible:j,id:_}),_},this.dismiss=h=>(this.dismissedToasts.add(h),h||this.toasts.forEach(d=>{this.subscribers.forEach(g=>g({id:d.id,dismiss:!0}))}),this.subscribers.forEach(d=>d({id:h,dismiss:!0})),h),this.message=(h,d)=>this.create({...d,message:h}),this.error=(h,d)=>this.create({...d,message:h,type:"error"}),this.success=(h,d)=>this.create({...d,type:"success",message:h}),this.info=(h,d)=>this.create({...d,type:"info",message:h}),this.warning=(h,d)=>this.create({...d,type:"warning",message:h}),this.loading=(h,d)=>this.create({...d,type:"loading",message:h}),this.promise=(h,d)=>{if(!d)return;let g;d.loading!==void 0&&(g=this.create({...d,promise:h,type:"loading",message:d.loading,description:typeof d.description!="function"?d.description:void 0}));let b=h instanceof Promise?h:h(),_=g!==void 0,$,j=b.then(async et=>{if($=["resolve",et],o$1.isValidElement(et))_=!1,this.create({id:g,type:"default",message:et});else if(ie(et)&&!et.ok){_=!1;let rt=typeof d.error=="function"?await d.error(`HTTP error! status: ${et.status}`):d.error,nt=typeof d.description=="function"?await d.description(`HTTP error! status: ${et.status}`):d.description;this.create({id:g,type:"error",message:rt,description:nt})}else if(d.success!==void 0){_=!1;let rt=typeof d.success=="function"?await d.success(et):d.success,nt=typeof d.description=="function"?await d.description(et):d.description;this.create({id:g,type:"success",message:rt,description:nt})}}).catch(async et=>{if($=["reject",et],d.error!==void 0){_=!1;let rt=typeof d.error=="function"?await d.error(et):d.error,nt=typeof d.description=="function"?await d.description(et):d.description;this.create({id:g,type:"error",message:rt,description:nt})}}).finally(()=>{var et;_&&(this.dismiss(g),g=void 0),(et=d.finally)==null||et.call(d)}),_e=()=>new Promise((et,rt)=>j.then(()=>$[0]==="reject"?rt($[1]):et($[1])).catch(rt));return typeof g!="string"&&typeof g!="number"?{unwrap:_e}:Object.assign(g,{unwrap:_e})},this.custom=(h,d)=>{let g=(d==null?void 0:d.id)||bt++;return this.create({jsx:h(g),id:g,...d}),g},this.getActiveToasts=()=>this.toasts.filter(h=>!this.dismissedToasts.has(h.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},v=new yt,ne=(h,d)=>{let g=(d==null?void 0:d.id)||bt++;return v.addToast({title:h,...d,id:g}),g},ie=h=>h&&typeof h=="object"&&"ok"in h&&typeof h.ok=="boolean"&&"status"in h&&typeof h.status=="number",le=ne,ce=()=>v.toasts,de=()=>v.getActiveToasts(),ue=Object.assign(le,{success:v.success,info:v.info,warning:v.warning,error:v.error,custom:v.custom,message:v.message,promise:v.promise,dismiss:v.dismiss,loading:v.loading},{getHistory:ce,getToasts:de});function wt(h,{insertAt:d}={}){if(typeof document>"u")return;let g=document.head||document.getElementsByTagName("head")[0],b=document.createElement("style");b.type="text/css",d==="top"&&g.firstChild?g.insertBefore(b,g.firstChild):g.appendChild(b),b.styleSheet?b.styleSheet.cssText=h:b.appendChild(document.createTextNode(h))}wt(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function tt(h){return h.label!==void 0}var pe=3,me="32px",ge="16px",Wt=4e3,he=356,be=14,ye=20,we=200;function M(...h){return h.filter(Boolean).join(" ")}function xe(h){let[d,g]=h.split("-"),b=[];return d&&b.push(d),g&&b.push(g),b}var ve=h=>{var d,g,b,_,$,j,_e,et,rt,nt,st;let{invert:at,toast:it,unstyled:dt,interacting:ot,setHeights:ct,visibleToasts:lt,heights:ut,index:ft,toasts:Et,expanded:Tt,removeToast:St,defaultRichColors:ht,closeButton:kt,style:Rt,cancelButtonStyle:Mt,actionButtonStyle:Zt,className:Ct="",descriptionClassName:Pt="",duration:xt,position:Ht,gap:tr,loadingIcon:er,expandByDefault:Kt,classNames:Bt,icons:nr,closeButtonAriaLabel:Ut="Close toast",pauseWhenPageIsHidden:zt}=h,[sr,or]=o$1.useState(null),[ur,_r]=o$1.useState(null),[vr,br]=o$1.useState(!1),[Er,Cr]=o$1.useState(!1),[kr,Or]=o$1.useState(!1),[Jt,mt]=o$1.useState(!1),[Vt,Qt]=o$1.useState(!1),[It,Nt]=o$1.useState(0),[qt,ar]=o$1.useState(0),lr=o$1.useRef(it.duration||xt||Wt),Gt=o$1.useRef(null),dr=o$1.useRef(null),mr=ft===0,fr=ft+1<=lt,gr=it.type,At=it.dismissible!==!1,pt=it.className||"",gt=it.descriptionClassName||"",Dt=o$1.useMemo(()=>ut.findIndex(xr=>xr.toastId===it.id)||0,[ut,it.id]),Xt=o$1.useMemo(()=>{var xr;return(xr=it.closeButton)!=null?xr:kt},[it.closeButton,kt]),rr=o$1.useMemo(()=>it.duration||xt||Wt,[it.duration,xt]),ir=o$1.useRef(0),wr=o$1.useRef(0),Ir=o$1.useRef(0),Tr=o$1.useRef(null),[$r,Ar]=Ht.split("-"),nn=o$1.useMemo(()=>ut.reduce((xr,Pr,$t)=>$t>=Dt?xr:xr+Pr.height,0),[ut,Dt]),mn=Ft(),sn=it.invert||at,Ur=gr==="loading";wr.current=o$1.useMemo(()=>Dt*tr+nn,[Dt,nn]),o$1.useEffect(()=>{lr.current=rr},[rr]),o$1.useEffect(()=>{br(!0)},[]),o$1.useEffect(()=>{let xr=dr.current;if(xr){let Pr=xr.getBoundingClientRect().height;return ar(Pr),ct($t=>[{toastId:it.id,height:Pr,position:it.position},...$t]),()=>ct($t=>$t.filter(Lt=>Lt.toastId!==it.id))}},[ct,it.id]),o$1.useLayoutEffect(()=>{if(!vr)return;let xr=dr.current,Pr=xr.style.height;xr.style.height="auto";let $t=xr.getBoundingClientRect().height;xr.style.height=Pr,ar($t),ct(Lt=>Lt.find(hr=>hr.toastId===it.id)?Lt.map(hr=>hr.toastId===it.id?{...hr,height:$t}:hr):[{toastId:it.id,height:$t,position:it.position},...Lt])},[vr,it.title,it.description,ct,it.id]);let Fr=o$1.useCallback(()=>{Cr(!0),Nt(wr.current),ct(xr=>xr.filter(Pr=>Pr.toastId!==it.id)),setTimeout(()=>{St(it)},we)},[it,St,ct,wr]);o$1.useEffect(()=>{if(it.promise&&gr==="loading"||it.duration===1/0||it.type==="loading")return;let xr;return Tt||ot||zt&&mn?(()=>{if(Ir.current<ir.current){let Pr=new Date().getTime()-ir.current;lr.current=lr.current-Pr}Ir.current=new Date().getTime()})():lr.current!==1/0&&(ir.current=new Date().getTime(),xr=setTimeout(()=>{var Pr;(Pr=it.onAutoClose)==null||Pr.call(it,it),Fr()},lr.current)),()=>clearTimeout(xr)},[Tt,ot,it,gr,zt,mn,Fr]),o$1.useEffect(()=>{it.delete&&Fr()},[Fr,it.delete]);function Cn(){var xr,Pr,$t;return nr!=null&&nr.loading?o$1.createElement("div",{className:M(Bt==null?void 0:Bt.loader,(xr=it==null?void 0:it.classNames)==null?void 0:xr.loader,"sonner-loader"),"data-visible":gr==="loading"},nr.loading):er?o$1.createElement("div",{className:M(Bt==null?void 0:Bt.loader,(Pr=it==null?void 0:it.classNames)==null?void 0:Pr.loader,"sonner-loader"),"data-visible":gr==="loading"},er):o$1.createElement(Yt,{className:M(Bt==null?void 0:Bt.loader,($t=it==null?void 0:it.classNames)==null?void 0:$t.loader),visible:gr==="loading"})}return o$1.createElement("li",{tabIndex:0,ref:dr,className:M(Ct,pt,Bt==null?void 0:Bt.toast,(d=it==null?void 0:it.classNames)==null?void 0:d.toast,Bt==null?void 0:Bt.default,Bt==null?void 0:Bt[gr],(g=it==null?void 0:it.classNames)==null?void 0:g[gr]),"data-sonner-toast":"","data-rich-colors":(b=it.richColors)!=null?b:ht,"data-styled":!(it.jsx||it.unstyled||dt),"data-mounted":vr,"data-promise":!!it.promise,"data-swiped":Vt,"data-removed":Er,"data-visible":fr,"data-y-position":$r,"data-x-position":Ar,"data-index":ft,"data-front":mr,"data-swiping":kr,"data-dismissible":At,"data-type":gr,"data-invert":sn,"data-swipe-out":Jt,"data-swipe-direction":ur,"data-expanded":!!(Tt||Kt&&vr),style:{"--index":ft,"--toasts-before":ft,"--z-index":Et.length-ft,"--offset":`${Er?It:wr.current}px`,"--initial-height":Kt?"auto":`${qt}px`,...Rt,...it.style},onDragEnd:()=>{Or(!1),or(null),Tr.current=null},onPointerDown:xr=>{Ur||!At||(Gt.current=new Date,Nt(wr.current),xr.target.setPointerCapture(xr.pointerId),xr.target.tagName!=="BUTTON"&&(Or(!0),Tr.current={x:xr.clientX,y:xr.clientY}))},onPointerUp:()=>{var xr,Pr,$t,Lt;if(Jt||!At)return;Tr.current=null;let hr=Number(((xr=dr.current)==null?void 0:xr.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),pr=Number(((Pr=dr.current)==null?void 0:Pr.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),yr=new Date().getTime()-(($t=Gt.current)==null?void 0:$t.getTime()),Nr=sr==="x"?hr:pr,Mr=Math.abs(Nr)/yr;if(Math.abs(Nr)>=ye||Mr>.11){Nt(wr.current),(Lt=it.onDismiss)==null||Lt.call(it,it),_r(sr==="x"?hr>0?"right":"left":pr>0?"down":"up"),Fr(),mt(!0),Qt(!1);return}Or(!1),or(null)},onPointerMove:xr=>{var Pr,$t,Lt,hr;if(!Tr.current||!At||((Pr=window.getSelection())==null?void 0:Pr.toString().length)>0)return;let pr=xr.clientY-Tr.current.y,yr=xr.clientX-Tr.current.x,Nr=($t=h.swipeDirections)!=null?$t:xe(Ht);!sr&&(Math.abs(yr)>1||Math.abs(pr)>1)&&or(Math.abs(yr)>Math.abs(pr)?"x":"y");let Mr={x:0,y:0};sr==="y"?(Nr.includes("top")||Nr.includes("bottom"))&&(Nr.includes("top")&&pr<0||Nr.includes("bottom")&&pr>0)&&(Mr.y=pr):sr==="x"&&(Nr.includes("left")||Nr.includes("right"))&&(Nr.includes("left")&&yr<0||Nr.includes("right")&&yr>0)&&(Mr.x=yr),(Math.abs(Mr.x)>0||Math.abs(Mr.y)>0)&&Qt(!0),(Lt=dr.current)==null||Lt.style.setProperty("--swipe-amount-x",`${Mr.x}px`),(hr=dr.current)==null||hr.style.setProperty("--swipe-amount-y",`${Mr.y}px`)}},Xt&&!it.jsx?o$1.createElement("button",{"aria-label":Ut,"data-disabled":Ur,"data-close-button":!0,onClick:Ur||!At?()=>{}:()=>{var xr;Fr(),(xr=it.onDismiss)==null||xr.call(it,it)},className:M(Bt==null?void 0:Bt.closeButton,(_=it==null?void 0:it.classNames)==null?void 0:_.closeButton)},($=nr==null?void 0:nr.close)!=null?$:Ot):null,it.jsx||reactExports.isValidElement(it.title)?it.jsx?it.jsx:typeof it.title=="function"?it.title():it.title:o$1.createElement(o$1.Fragment,null,gr||it.icon||it.promise?o$1.createElement("div",{"data-icon":"",className:M(Bt==null?void 0:Bt.icon,(j=it==null?void 0:it.classNames)==null?void 0:j.icon)},it.promise||it.type==="loading"&&!it.icon?it.icon||Cn():null,it.type!=="loading"?it.icon||(nr==null?void 0:nr[gr])||jt(gr):null):null,o$1.createElement("div",{"data-content":"",className:M(Bt==null?void 0:Bt.content,(_e=it==null?void 0:it.classNames)==null?void 0:_e.content)},o$1.createElement("div",{"data-title":"",className:M(Bt==null?void 0:Bt.title,(et=it==null?void 0:it.classNames)==null?void 0:et.title)},typeof it.title=="function"?it.title():it.title),it.description?o$1.createElement("div",{"data-description":"",className:M(Pt,gt,Bt==null?void 0:Bt.description,(rt=it==null?void 0:it.classNames)==null?void 0:rt.description)},typeof it.description=="function"?it.description():it.description):null),reactExports.isValidElement(it.cancel)?it.cancel:it.cancel&&tt(it.cancel)?o$1.createElement("button",{"data-button":!0,"data-cancel":!0,style:it.cancelButtonStyle||Mt,onClick:xr=>{var Pr,$t;tt(it.cancel)&&At&&(($t=(Pr=it.cancel).onClick)==null||$t.call(Pr,xr),Fr())},className:M(Bt==null?void 0:Bt.cancelButton,(nt=it==null?void 0:it.classNames)==null?void 0:nt.cancelButton)},it.cancel.label):null,reactExports.isValidElement(it.action)?it.action:it.action&&tt(it.action)?o$1.createElement("button",{"data-button":!0,"data-action":!0,style:it.actionButtonStyle||Zt,onClick:xr=>{var Pr,$t;tt(it.action)&&(($t=(Pr=it.action).onClick)==null||$t.call(Pr,xr),!xr.defaultPrevented&&Fr())},className:M(Bt==null?void 0:Bt.actionButton,(st=it==null?void 0:it.classNames)==null?void 0:st.actionButton)},it.action.label):null))};function _t(){if(typeof window>"u"||typeof document>"u")return"ltr";let h=document.documentElement.getAttribute("dir");return h==="auto"||!h?window.getComputedStyle(document.documentElement).direction:h}function Te(h,d){let g={};return[h,d].forEach((b,_)=>{let $=_===1,j=$?"--mobile-offset":"--offset",_e=$?ge:me;function et(rt){["top","right","bottom","left"].forEach(nt=>{g[`${j}-${nt}`]=typeof rt=="number"?`${rt}px`:rt})}typeof b=="number"||typeof b=="string"?et(b):typeof b=="object"?["top","right","bottom","left"].forEach(rt=>{b[rt]===void 0?g[`${j}-${rt}`]=_e:g[`${j}-${rt}`]=typeof b[rt]=="number"?`${b[rt]}px`:b[rt]}):et(_e)}),g}var $e=reactExports.forwardRef(function(h,d){let{invert:g,position:b="bottom-right",hotkey:_=["altKey","KeyT"],expand:$,closeButton:j,className:_e,offset:et,mobileOffset:rt,theme:nt="light",richColors:st,duration:at,style:it,visibleToasts:dt=pe,toastOptions:ot,dir:ct=_t(),gap:lt=be,loadingIcon:ut,icons:ft,containerAriaLabel:Et="Notifications",pauseWhenPageIsHidden:Tt}=h,[St,ht]=o$1.useState([]),kt=o$1.useMemo(()=>Array.from(new Set([b].concat(St.filter(zt=>zt.position).map(zt=>zt.position)))),[St,b]),[Rt,Mt]=o$1.useState([]),[Zt,Ct]=o$1.useState(!1),[Pt,xt]=o$1.useState(!1),[Ht,tr]=o$1.useState(nt!=="system"?nt:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),er=o$1.useRef(null),Kt=_.join("+").replace(/Key/g,"").replace(/Digit/g,""),Bt=o$1.useRef(null),nr=o$1.useRef(!1),Ut=o$1.useCallback(zt=>{ht(sr=>{var or;return(or=sr.find(ur=>ur.id===zt.id))!=null&&or.delete||v.dismiss(zt.id),sr.filter(({id:ur})=>ur!==zt.id)})},[]);return o$1.useEffect(()=>v.subscribe(zt=>{if(zt.dismiss){ht(sr=>sr.map(or=>or.id===zt.id?{...or,delete:!0}:or));return}setTimeout(()=>{vt.flushSync(()=>{ht(sr=>{let or=sr.findIndex(ur=>ur.id===zt.id);return or!==-1?[...sr.slice(0,or),{...sr[or],...zt},...sr.slice(or+1)]:[zt,...sr]})})})}),[]),o$1.useEffect(()=>{if(nt!=="system"){tr(nt);return}if(nt==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?tr("dark"):tr("light")),typeof window>"u")return;let zt=window.matchMedia("(prefers-color-scheme: dark)");try{zt.addEventListener("change",({matches:sr})=>{tr(sr?"dark":"light")})}catch{zt.addListener(({matches:or})=>{try{tr(or?"dark":"light")}catch(ur){console.error(ur)}})}},[nt]),o$1.useEffect(()=>{St.length<=1&&Ct(!1)},[St]),o$1.useEffect(()=>{let zt=sr=>{var or,ur;_.every(_r=>sr[_r]||sr.code===_r)&&(Ct(!0),(or=er.current)==null||or.focus()),sr.code==="Escape"&&(document.activeElement===er.current||(ur=er.current)!=null&&ur.contains(document.activeElement))&&Ct(!1)};return document.addEventListener("keydown",zt),()=>document.removeEventListener("keydown",zt)},[_]),o$1.useEffect(()=>{if(er.current)return()=>{Bt.current&&(Bt.current.focus({preventScroll:!0}),Bt.current=null,nr.current=!1)}},[er.current]),o$1.createElement("section",{ref:d,"aria-label":`${Et} ${Kt}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},kt.map((zt,sr)=>{var or;let[ur,_r]=zt.split("-");return St.length?o$1.createElement("ol",{key:zt,dir:ct==="auto"?_t():ct,tabIndex:-1,ref:er,className:_e,"data-sonner-toaster":!0,"data-theme":Ht,"data-y-position":ur,"data-lifted":Zt&&St.length>1&&!$,"data-x-position":_r,style:{"--front-toast-height":`${((or=Rt[0])==null?void 0:or.height)||0}px`,"--width":`${he}px`,"--gap":`${lt}px`,...it,...Te(et,rt)},onBlur:vr=>{nr.current&&!vr.currentTarget.contains(vr.relatedTarget)&&(nr.current=!1,Bt.current&&(Bt.current.focus({preventScroll:!0}),Bt.current=null))},onFocus:vr=>{vr.target instanceof HTMLElement&&vr.target.dataset.dismissible==="false"||nr.current||(nr.current=!0,Bt.current=vr.relatedTarget)},onMouseEnter:()=>Ct(!0),onMouseMove:()=>Ct(!0),onMouseLeave:()=>{Pt||Ct(!1)},onDragEnd:()=>Ct(!1),onPointerDown:vr=>{vr.target instanceof HTMLElement&&vr.target.dataset.dismissible==="false"||xt(!0)},onPointerUp:()=>xt(!1)},St.filter(vr=>!vr.position&&sr===0||vr.position===zt).map((vr,br)=>{var Er,Cr;return o$1.createElement(ve,{key:vr.id,icons:ft,index:br,toast:vr,defaultRichColors:st,duration:(Er=ot==null?void 0:ot.duration)!=null?Er:at,className:ot==null?void 0:ot.className,descriptionClassName:ot==null?void 0:ot.descriptionClassName,invert:g,visibleToasts:dt,closeButton:(Cr=ot==null?void 0:ot.closeButton)!=null?Cr:j,interacting:Pt,position:zt,style:ot==null?void 0:ot.style,unstyled:ot==null?void 0:ot.unstyled,classNames:ot==null?void 0:ot.classNames,cancelButtonStyle:ot==null?void 0:ot.cancelButtonStyle,actionButtonStyle:ot==null?void 0:ot.actionButtonStyle,removeToast:Ut,toasts:St.filter(kr=>kr.position==vr.position),heights:Rt.filter(kr=>kr.position==vr.position),setHeights:Mt,expandByDefault:$,gap:lt,loadingIcon:ut,expanded:Zt,pauseWhenPageIsHidden:Tt,swipeDirections:h.swipeDirections})})):null}))});const Toaster=({...h})=>jsxRuntimeExports.jsx($e,{theme:"dark",className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...h});var useReactId=React[" useId ".trim().toString()]||(()=>{}),count$1=0;function useId(h){const[d,g]=reactExports.useState(useReactId());return useLayoutEffect2(()=>{g(b=>b??String(count$1++))},[h]),d?`radix-${d}`:""}const sides=["top","right","bottom","left"],min=Math.min,max=Math.max,round=Math.round,floor=Math.floor,createCoords=h=>({x:h,y:h}),oppositeSideMap={left:"right",right:"left",bottom:"top",top:"bottom"},oppositeAlignmentMap={start:"end",end:"start"};function clamp(h,d,g){return max(h,min(d,g))}function evaluate(h,d){return typeof h=="function"?h(d):h}function getSide(h){return h.split("-")[0]}function getAlignment(h){return h.split("-")[1]}function getOppositeAxis(h){return h==="x"?"y":"x"}function getAxisLength(h){return h==="y"?"height":"width"}const yAxisSides=new Set(["top","bottom"]);function getSideAxis(h){return yAxisSides.has(getSide(h))?"y":"x"}function getAlignmentAxis(h){return getOppositeAxis(getSideAxis(h))}function getAlignmentSides(h,d,g){g===void 0&&(g=!1);const b=getAlignment(h),_=getAlignmentAxis(h),$=getAxisLength(_);let j=_==="x"?b===(g?"end":"start")?"right":"left":b==="start"?"bottom":"top";return d.reference[$]>d.floating[$]&&(j=getOppositePlacement(j)),[j,getOppositePlacement(j)]}function getExpandedPlacements(h){const d=getOppositePlacement(h);return[getOppositeAlignmentPlacement(h),d,getOppositeAlignmentPlacement(d)]}function getOppositeAlignmentPlacement(h){return h.replace(/start|end/g,d=>oppositeAlignmentMap[d])}const lrPlacement=["left","right"],rlPlacement=["right","left"],tbPlacement=["top","bottom"],btPlacement=["bottom","top"];function getSideList(h,d,g){switch(h){case"top":case"bottom":return g?d?rlPlacement:lrPlacement:d?lrPlacement:rlPlacement;case"left":case"right":return d?tbPlacement:btPlacement;default:return[]}}function getOppositeAxisPlacements(h,d,g,b){const _=getAlignment(h);let $=getSideList(getSide(h),g==="start",b);return _&&($=$.map(j=>j+"-"+_),d&&($=$.concat($.map(getOppositeAlignmentPlacement)))),$}function getOppositePlacement(h){return h.replace(/left|right|bottom|top/g,d=>oppositeSideMap[d])}function expandPaddingObject(h){return{top:0,right:0,bottom:0,left:0,...h}}function getPaddingObject(h){return typeof h!="number"?expandPaddingObject(h):{top:h,right:h,bottom:h,left:h}}function rectToClientRect(h){const{x:d,y:g,width:b,height:_}=h;return{width:b,height:_,top:g,left:d,right:d+b,bottom:g+_,x:d,y:g}}function computeCoordsFromPlacement(h,d,g){let{reference:b,floating:_}=h;const $=getSideAxis(d),j=getAlignmentAxis(d),_e=getAxisLength(j),et=getSide(d),rt=$==="y",nt=b.x+b.width/2-_.width/2,st=b.y+b.height/2-_.height/2,at=b[_e]/2-_[_e]/2;let it;switch(et){case"top":it={x:nt,y:b.y-_.height};break;case"bottom":it={x:nt,y:b.y+b.height};break;case"right":it={x:b.x+b.width,y:st};break;case"left":it={x:b.x-_.width,y:st};break;default:it={x:b.x,y:b.y}}switch(getAlignment(d)){case"start":it[j]-=at*(g&&rt?-1:1);break;case"end":it[j]+=at*(g&&rt?-1:1);break}return it}const computePosition$1=async(h,d,g)=>{const{placement:b="bottom",strategy:_="absolute",middleware:$=[],platform:j}=g,_e=$.filter(Boolean),et=await(j.isRTL==null?void 0:j.isRTL(d));let rt=await j.getElementRects({reference:h,floating:d,strategy:_}),{x:nt,y:st}=computeCoordsFromPlacement(rt,b,et),at=b,it={},dt=0;for(let ot=0;ot<_e.length;ot++){const{name:ct,fn:lt}=_e[ot],{x:ut,y:ft,data:Et,reset:Tt}=await lt({x:nt,y:st,initialPlacement:b,placement:at,strategy:_,middlewareData:it,rects:rt,platform:j,elements:{reference:h,floating:d}});nt=ut??nt,st=ft??st,it={...it,[ct]:{...it[ct],...Et}},Tt&&dt<=50&&(dt++,typeof Tt=="object"&&(Tt.placement&&(at=Tt.placement),Tt.rects&&(rt=Tt.rects===!0?await j.getElementRects({reference:h,floating:d,strategy:_}):Tt.rects),{x:nt,y:st}=computeCoordsFromPlacement(rt,at,et)),ot=-1)}return{x:nt,y:st,placement:at,strategy:_,middlewareData:it}};async function detectOverflow(h,d){var g;d===void 0&&(d={});const{x:b,y:_,platform:$,rects:j,elements:_e,strategy:et}=h,{boundary:rt="clippingAncestors",rootBoundary:nt="viewport",elementContext:st="floating",altBoundary:at=!1,padding:it=0}=evaluate(d,h),dt=getPaddingObject(it),ct=_e[at?st==="floating"?"reference":"floating":st],lt=rectToClientRect(await $.getClippingRect({element:(g=await($.isElement==null?void 0:$.isElement(ct)))==null||g?ct:ct.contextElement||await($.getDocumentElement==null?void 0:$.getDocumentElement(_e.floating)),boundary:rt,rootBoundary:nt,strategy:et})),ut=st==="floating"?{x:b,y:_,width:j.floating.width,height:j.floating.height}:j.reference,ft=await($.getOffsetParent==null?void 0:$.getOffsetParent(_e.floating)),Et=await($.isElement==null?void 0:$.isElement(ft))?await($.getScale==null?void 0:$.getScale(ft))||{x:1,y:1}:{x:1,y:1},Tt=rectToClientRect($.convertOffsetParentRelativeRectToViewportRelativeRect?await $.convertOffsetParentRelativeRectToViewportRelativeRect({elements:_e,rect:ut,offsetParent:ft,strategy:et}):ut);return{top:(lt.top-Tt.top+dt.top)/Et.y,bottom:(Tt.bottom-lt.bottom+dt.bottom)/Et.y,left:(lt.left-Tt.left+dt.left)/Et.x,right:(Tt.right-lt.right+dt.right)/Et.x}}const arrow$3=h=>({name:"arrow",options:h,async fn(d){const{x:g,y:b,placement:_,rects:$,platform:j,elements:_e,middlewareData:et}=d,{element:rt,padding:nt=0}=evaluate(h,d)||{};if(rt==null)return{};const st=getPaddingObject(nt),at={x:g,y:b},it=getAlignmentAxis(_),dt=getAxisLength(it),ot=await j.getDimensions(rt),ct=it==="y",lt=ct?"top":"left",ut=ct?"bottom":"right",ft=ct?"clientHeight":"clientWidth",Et=$.reference[dt]+$.reference[it]-at[it]-$.floating[dt],Tt=at[it]-$.reference[it],St=await(j.getOffsetParent==null?void 0:j.getOffsetParent(rt));let ht=St?St[ft]:0;(!ht||!await(j.isElement==null?void 0:j.isElement(St)))&&(ht=_e.floating[ft]||$.floating[dt]);const kt=Et/2-Tt/2,Rt=ht/2-ot[dt]/2-1,Mt=min(st[lt],Rt),Zt=min(st[ut],Rt),Ct=Mt,Pt=ht-ot[dt]-Zt,xt=ht/2-ot[dt]/2+kt,Ht=clamp(Ct,xt,Pt),tr=!et.arrow&&getAlignment(_)!=null&&xt!==Ht&&$.reference[dt]/2-(xt<Ct?Mt:Zt)-ot[dt]/2<0,er=tr?xt<Ct?xt-Ct:xt-Pt:0;return{[it]:at[it]+er,data:{[it]:Ht,centerOffset:xt-Ht-er,...tr&&{alignmentOffset:er}},reset:tr}}}),flip$2=function(h){return h===void 0&&(h={}),{name:"flip",options:h,async fn(d){var g,b;const{placement:_,middlewareData:$,rects:j,initialPlacement:_e,platform:et,elements:rt}=d,{mainAxis:nt=!0,crossAxis:st=!0,fallbackPlacements:at,fallbackStrategy:it="bestFit",fallbackAxisSideDirection:dt="none",flipAlignment:ot=!0,...ct}=evaluate(h,d);if((g=$.arrow)!=null&&g.alignmentOffset)return{};const lt=getSide(_),ut=getSideAxis(_e),ft=getSide(_e)===_e,Et=await(et.isRTL==null?void 0:et.isRTL(rt.floating)),Tt=at||(ft||!ot?[getOppositePlacement(_e)]:getExpandedPlacements(_e)),St=dt!=="none";!at&&St&&Tt.push(...getOppositeAxisPlacements(_e,ot,dt,Et));const ht=[_e,...Tt],kt=await detectOverflow(d,ct),Rt=[];let Mt=((b=$.flip)==null?void 0:b.overflows)||[];if(nt&&Rt.push(kt[lt]),st){const xt=getAlignmentSides(_,j,Et);Rt.push(kt[xt[0]],kt[xt[1]])}if(Mt=[...Mt,{placement:_,overflows:Rt}],!Rt.every(xt=>xt<=0)){var Zt,Ct;const xt=(((Zt=$.flip)==null?void 0:Zt.index)||0)+1,Ht=ht[xt];if(Ht&&(!(st==="alignment"?ut!==getSideAxis(Ht):!1)||Mt.every(Kt=>Kt.overflows[0]>0&&getSideAxis(Kt.placement)===ut)))return{data:{index:xt,overflows:Mt},reset:{placement:Ht}};let tr=(Ct=Mt.filter(er=>er.overflows[0]<=0).sort((er,Kt)=>er.overflows[1]-Kt.overflows[1])[0])==null?void 0:Ct.placement;if(!tr)switch(it){case"bestFit":{var Pt;const er=(Pt=Mt.filter(Kt=>{if(St){const Bt=getSideAxis(Kt.placement);return Bt===ut||Bt==="y"}return!0}).map(Kt=>[Kt.placement,Kt.overflows.filter(Bt=>Bt>0).reduce((Bt,nr)=>Bt+nr,0)]).sort((Kt,Bt)=>Kt[1]-Bt[1])[0])==null?void 0:Pt[0];er&&(tr=er);break}case"initialPlacement":tr=_e;break}if(_!==tr)return{reset:{placement:tr}}}return{}}}};function getSideOffsets(h,d){return{top:h.top-d.height,right:h.right-d.width,bottom:h.bottom-d.height,left:h.left-d.width}}function isAnySideFullyClipped(h){return sides.some(d=>h[d]>=0)}const hide$2=function(h){return h===void 0&&(h={}),{name:"hide",options:h,async fn(d){const{rects:g}=d,{strategy:b="referenceHidden",..._}=evaluate(h,d);switch(b){case"referenceHidden":{const $=await detectOverflow(d,{..._,elementContext:"reference"}),j=getSideOffsets($,g.reference);return{data:{referenceHiddenOffsets:j,referenceHidden:isAnySideFullyClipped(j)}}}case"escaped":{const $=await detectOverflow(d,{..._,altBoundary:!0}),j=getSideOffsets($,g.floating);return{data:{escapedOffsets:j,escaped:isAnySideFullyClipped(j)}}}default:return{}}}}},originSides=new Set(["left","top"]);async function convertValueToCoords(h,d){const{placement:g,platform:b,elements:_}=h,$=await(b.isRTL==null?void 0:b.isRTL(_.floating)),j=getSide(g),_e=getAlignment(g),et=getSideAxis(g)==="y",rt=originSides.has(j)?-1:1,nt=$&&et?-1:1,st=evaluate(d,h);let{mainAxis:at,crossAxis:it,alignmentAxis:dt}=typeof st=="number"?{mainAxis:st,crossAxis:0,alignmentAxis:null}:{mainAxis:st.mainAxis||0,crossAxis:st.crossAxis||0,alignmentAxis:st.alignmentAxis};return _e&&typeof dt=="number"&&(it=_e==="end"?dt*-1:dt),et?{x:it*nt,y:at*rt}:{x:at*rt,y:it*nt}}const offset$2=function(h){return h===void 0&&(h=0),{name:"offset",options:h,async fn(d){var g,b;const{x:_,y:$,placement:j,middlewareData:_e}=d,et=await convertValueToCoords(d,h);return j===((g=_e.offset)==null?void 0:g.placement)&&(b=_e.arrow)!=null&&b.alignmentOffset?{}:{x:_+et.x,y:$+et.y,data:{...et,placement:j}}}}},shift$2=function(h){return h===void 0&&(h={}),{name:"shift",options:h,async fn(d){const{x:g,y:b,placement:_}=d,{mainAxis:$=!0,crossAxis:j=!1,limiter:_e={fn:ct=>{let{x:lt,y:ut}=ct;return{x:lt,y:ut}}},...et}=evaluate(h,d),rt={x:g,y:b},nt=await detectOverflow(d,et),st=getSideAxis(getSide(_)),at=getOppositeAxis(st);let it=rt[at],dt=rt[st];if($){const ct=at==="y"?"top":"left",lt=at==="y"?"bottom":"right",ut=it+nt[ct],ft=it-nt[lt];it=clamp(ut,it,ft)}if(j){const ct=st==="y"?"top":"left",lt=st==="y"?"bottom":"right",ut=dt+nt[ct],ft=dt-nt[lt];dt=clamp(ut,dt,ft)}const ot=_e.fn({...d,[at]:it,[st]:dt});return{...ot,data:{x:ot.x-g,y:ot.y-b,enabled:{[at]:$,[st]:j}}}}}},limitShift$2=function(h){return h===void 0&&(h={}),{options:h,fn(d){const{x:g,y:b,placement:_,rects:$,middlewareData:j}=d,{offset:_e=0,mainAxis:et=!0,crossAxis:rt=!0}=evaluate(h,d),nt={x:g,y:b},st=getSideAxis(_),at=getOppositeAxis(st);let it=nt[at],dt=nt[st];const ot=evaluate(_e,d),ct=typeof ot=="number"?{mainAxis:ot,crossAxis:0}:{mainAxis:0,crossAxis:0,...ot};if(et){const ft=at==="y"?"height":"width",Et=$.reference[at]-$.floating[ft]+ct.mainAxis,Tt=$.reference[at]+$.reference[ft]-ct.mainAxis;it<Et?it=Et:it>Tt&&(it=Tt)}if(rt){var lt,ut;const ft=at==="y"?"width":"height",Et=originSides.has(getSide(_)),Tt=$.reference[st]-$.floating[ft]+(Et&&((lt=j.offset)==null?void 0:lt[st])||0)+(Et?0:ct.crossAxis),St=$.reference[st]+$.reference[ft]+(Et?0:((ut=j.offset)==null?void 0:ut[st])||0)-(Et?ct.crossAxis:0);dt<Tt?dt=Tt:dt>St&&(dt=St)}return{[at]:it,[st]:dt}}}},size$2=function(h){return h===void 0&&(h={}),{name:"size",options:h,async fn(d){var g,b;const{placement:_,rects:$,platform:j,elements:_e}=d,{apply:et=()=>{},...rt}=evaluate(h,d),nt=await detectOverflow(d,rt),st=getSide(_),at=getAlignment(_),it=getSideAxis(_)==="y",{width:dt,height:ot}=$.floating;let ct,lt;st==="top"||st==="bottom"?(ct=st,lt=at===(await(j.isRTL==null?void 0:j.isRTL(_e.floating))?"start":"end")?"left":"right"):(lt=st,ct=at==="end"?"top":"bottom");const ut=ot-nt.top-nt.bottom,ft=dt-nt.left-nt.right,Et=min(ot-nt[ct],ut),Tt=min(dt-nt[lt],ft),St=!d.middlewareData.shift;let ht=Et,kt=Tt;if((g=d.middlewareData.shift)!=null&&g.enabled.x&&(kt=ft),(b=d.middlewareData.shift)!=null&&b.enabled.y&&(ht=ut),St&&!at){const Mt=max(nt.left,0),Zt=max(nt.right,0),Ct=max(nt.top,0),Pt=max(nt.bottom,0);it?kt=dt-2*(Mt!==0||Zt!==0?Mt+Zt:max(nt.left,nt.right)):ht=ot-2*(Ct!==0||Pt!==0?Ct+Pt:max(nt.top,nt.bottom))}await et({...d,availableWidth:kt,availableHeight:ht});const Rt=await j.getDimensions(_e.floating);return dt!==Rt.width||ot!==Rt.height?{reset:{rects:!0}}:{}}}};function hasWindow(){return typeof window<"u"}function getNodeName(h){return isNode(h)?(h.nodeName||"").toLowerCase():"#document"}function getWindow(h){var d;return(h==null||(d=h.ownerDocument)==null?void 0:d.defaultView)||window}function getDocumentElement(h){var d;return(d=(isNode(h)?h.ownerDocument:h.document)||window.document)==null?void 0:d.documentElement}function isNode(h){return hasWindow()?h instanceof Node||h instanceof getWindow(h).Node:!1}function isElement(h){return hasWindow()?h instanceof Element||h instanceof getWindow(h).Element:!1}function isHTMLElement(h){return hasWindow()?h instanceof HTMLElement||h instanceof getWindow(h).HTMLElement:!1}function isShadowRoot(h){return!hasWindow()||typeof ShadowRoot>"u"?!1:h instanceof ShadowRoot||h instanceof getWindow(h).ShadowRoot}const invalidOverflowDisplayValues=new Set(["inline","contents"]);function isOverflowElement(h){const{overflow:d,overflowX:g,overflowY:b,display:_}=getComputedStyle$1(h);return/auto|scroll|overlay|hidden|clip/.test(d+b+g)&&!invalidOverflowDisplayValues.has(_)}const tableElements=new Set(["table","td","th"]);function isTableElement(h){return tableElements.has(getNodeName(h))}const topLayerSelectors=[":popover-open",":modal"];function isTopLayer(h){return topLayerSelectors.some(d=>{try{return h.matches(d)}catch{return!1}})}const transformProperties=["transform","translate","scale","rotate","perspective"],willChangeValues=["transform","translate","scale","rotate","perspective","filter"],containValues=["paint","layout","strict","content"];function isContainingBlock(h){const d=isWebKit(),g=isElement(h)?getComputedStyle$1(h):h;return transformProperties.some(b=>g[b]?g[b]!=="none":!1)||(g.containerType?g.containerType!=="normal":!1)||!d&&(g.backdropFilter?g.backdropFilter!=="none":!1)||!d&&(g.filter?g.filter!=="none":!1)||willChangeValues.some(b=>(g.willChange||"").includes(b))||containValues.some(b=>(g.contain||"").includes(b))}function getContainingBlock(h){let d=getParentNode(h);for(;isHTMLElement(d)&&!isLastTraversableNode(d);){if(isContainingBlock(d))return d;if(isTopLayer(d))return null;d=getParentNode(d)}return null}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const lastTraversableNodeNames=new Set(["html","body","#document"]);function isLastTraversableNode(h){return lastTraversableNodeNames.has(getNodeName(h))}function getComputedStyle$1(h){return getWindow(h).getComputedStyle(h)}function getNodeScroll(h){return isElement(h)?{scrollLeft:h.scrollLeft,scrollTop:h.scrollTop}:{scrollLeft:h.scrollX,scrollTop:h.scrollY}}function getParentNode(h){if(getNodeName(h)==="html")return h;const d=h.assignedSlot||h.parentNode||isShadowRoot(h)&&h.host||getDocumentElement(h);return isShadowRoot(d)?d.host:d}function getNearestOverflowAncestor(h){const d=getParentNode(h);return isLastTraversableNode(d)?h.ownerDocument?h.ownerDocument.body:h.body:isHTMLElement(d)&&isOverflowElement(d)?d:getNearestOverflowAncestor(d)}function getOverflowAncestors(h,d,g){var b;d===void 0&&(d=[]),g===void 0&&(g=!0);const _=getNearestOverflowAncestor(h),$=_===((b=h.ownerDocument)==null?void 0:b.body),j=getWindow(_);if($){const _e=getFrameElement(j);return d.concat(j,j.visualViewport||[],isOverflowElement(_)?_:[],_e&&g?getOverflowAncestors(_e):[])}return d.concat(_,getOverflowAncestors(_,[],g))}function getFrameElement(h){return h.parent&&Object.getPrototypeOf(h.parent)?h.frameElement:null}function getCssDimensions(h){const d=getComputedStyle$1(h);let g=parseFloat(d.width)||0,b=parseFloat(d.height)||0;const _=isHTMLElement(h),$=_?h.offsetWidth:g,j=_?h.offsetHeight:b,_e=round(g)!==$||round(b)!==j;return _e&&(g=$,b=j),{width:g,height:b,$:_e}}function unwrapElement(h){return isElement(h)?h:h.contextElement}function getScale(h){const d=unwrapElement(h);if(!isHTMLElement(d))return createCoords(1);const g=d.getBoundingClientRect(),{width:b,height:_,$}=getCssDimensions(d);let j=($?round(g.width):g.width)/b,_e=($?round(g.height):g.height)/_;return(!j||!Number.isFinite(j))&&(j=1),(!_e||!Number.isFinite(_e))&&(_e=1),{x:j,y:_e}}const noOffsets=createCoords(0);function getVisualOffsets(h){const d=getWindow(h);return!isWebKit()||!d.visualViewport?noOffsets:{x:d.visualViewport.offsetLeft,y:d.visualViewport.offsetTop}}function shouldAddVisualOffsets(h,d,g){return d===void 0&&(d=!1),!g||d&&g!==getWindow(h)?!1:d}function getBoundingClientRect(h,d,g,b){d===void 0&&(d=!1),g===void 0&&(g=!1);const _=h.getBoundingClientRect(),$=unwrapElement(h);let j=createCoords(1);d&&(b?isElement(b)&&(j=getScale(b)):j=getScale(h));const _e=shouldAddVisualOffsets($,g,b)?getVisualOffsets($):createCoords(0);let et=(_.left+_e.x)/j.x,rt=(_.top+_e.y)/j.y,nt=_.width/j.x,st=_.height/j.y;if($){const at=getWindow($),it=b&&isElement(b)?getWindow(b):b;let dt=at,ot=getFrameElement(dt);for(;ot&&b&&it!==dt;){const ct=getScale(ot),lt=ot.getBoundingClientRect(),ut=getComputedStyle$1(ot),ft=lt.left+(ot.clientLeft+parseFloat(ut.paddingLeft))*ct.x,Et=lt.top+(ot.clientTop+parseFloat(ut.paddingTop))*ct.y;et*=ct.x,rt*=ct.y,nt*=ct.x,st*=ct.y,et+=ft,rt+=Et,dt=getWindow(ot),ot=getFrameElement(dt)}}return rectToClientRect({width:nt,height:st,x:et,y:rt})}function getWindowScrollBarX(h,d){const g=getNodeScroll(h).scrollLeft;return d?d.left+g:getBoundingClientRect(getDocumentElement(h)).left+g}function getHTMLOffset(h,d,g){g===void 0&&(g=!1);const b=h.getBoundingClientRect(),_=b.left+d.scrollLeft-(g?0:getWindowScrollBarX(h,b)),$=b.top+d.scrollTop;return{x:_,y:$}}function convertOffsetParentRelativeRectToViewportRelativeRect(h){let{elements:d,rect:g,offsetParent:b,strategy:_}=h;const $=_==="fixed",j=getDocumentElement(b),_e=d?isTopLayer(d.floating):!1;if(b===j||_e&&$)return g;let et={scrollLeft:0,scrollTop:0},rt=createCoords(1);const nt=createCoords(0),st=isHTMLElement(b);if((st||!st&&!$)&&((getNodeName(b)!=="body"||isOverflowElement(j))&&(et=getNodeScroll(b)),isHTMLElement(b))){const it=getBoundingClientRect(b);rt=getScale(b),nt.x=it.x+b.clientLeft,nt.y=it.y+b.clientTop}const at=j&&!st&&!$?getHTMLOffset(j,et,!0):createCoords(0);return{width:g.width*rt.x,height:g.height*rt.y,x:g.x*rt.x-et.scrollLeft*rt.x+nt.x+at.x,y:g.y*rt.y-et.scrollTop*rt.y+nt.y+at.y}}function getClientRects(h){return Array.from(h.getClientRects())}function getDocumentRect(h){const d=getDocumentElement(h),g=getNodeScroll(h),b=h.ownerDocument.body,_=max(d.scrollWidth,d.clientWidth,b.scrollWidth,b.clientWidth),$=max(d.scrollHeight,d.clientHeight,b.scrollHeight,b.clientHeight);let j=-g.scrollLeft+getWindowScrollBarX(h);const _e=-g.scrollTop;return getComputedStyle$1(b).direction==="rtl"&&(j+=max(d.clientWidth,b.clientWidth)-_),{width:_,height:$,x:j,y:_e}}function getViewportRect(h,d){const g=getWindow(h),b=getDocumentElement(h),_=g.visualViewport;let $=b.clientWidth,j=b.clientHeight,_e=0,et=0;if(_){$=_.width,j=_.height;const rt=isWebKit();(!rt||rt&&d==="fixed")&&(_e=_.offsetLeft,et=_.offsetTop)}return{width:$,height:j,x:_e,y:et}}const absoluteOrFixed=new Set(["absolute","fixed"]);function getInnerBoundingClientRect(h,d){const g=getBoundingClientRect(h,!0,d==="fixed"),b=g.top+h.clientTop,_=g.left+h.clientLeft,$=isHTMLElement(h)?getScale(h):createCoords(1),j=h.clientWidth*$.x,_e=h.clientHeight*$.y,et=_*$.x,rt=b*$.y;return{width:j,height:_e,x:et,y:rt}}function getClientRectFromClippingAncestor(h,d,g){let b;if(d==="viewport")b=getViewportRect(h,g);else if(d==="document")b=getDocumentRect(getDocumentElement(h));else if(isElement(d))b=getInnerBoundingClientRect(d,g);else{const _=getVisualOffsets(h);b={x:d.x-_.x,y:d.y-_.y,width:d.width,height:d.height}}return rectToClientRect(b)}function hasFixedPositionAncestor(h,d){const g=getParentNode(h);return g===d||!isElement(g)||isLastTraversableNode(g)?!1:getComputedStyle$1(g).position==="fixed"||hasFixedPositionAncestor(g,d)}function getClippingElementAncestors(h,d){const g=d.get(h);if(g)return g;let b=getOverflowAncestors(h,[],!1).filter(_e=>isElement(_e)&&getNodeName(_e)!=="body"),_=null;const $=getComputedStyle$1(h).position==="fixed";let j=$?getParentNode(h):h;for(;isElement(j)&&!isLastTraversableNode(j);){const _e=getComputedStyle$1(j),et=isContainingBlock(j);!et&&_e.position==="fixed"&&(_=null),($?!et&&!_:!et&&_e.position==="static"&&!!_&&absoluteOrFixed.has(_.position)||isOverflowElement(j)&&!et&&hasFixedPositionAncestor(h,j))?b=b.filter(nt=>nt!==j):_=_e,j=getParentNode(j)}return d.set(h,b),b}function getClippingRect(h){let{element:d,boundary:g,rootBoundary:b,strategy:_}=h;const j=[...g==="clippingAncestors"?isTopLayer(d)?[]:getClippingElementAncestors(d,this._c):[].concat(g),b],_e=j[0],et=j.reduce((rt,nt)=>{const st=getClientRectFromClippingAncestor(d,nt,_);return rt.top=max(st.top,rt.top),rt.right=min(st.right,rt.right),rt.bottom=min(st.bottom,rt.bottom),rt.left=max(st.left,rt.left),rt},getClientRectFromClippingAncestor(d,_e,_));return{width:et.right-et.left,height:et.bottom-et.top,x:et.left,y:et.top}}function getDimensions(h){const{width:d,height:g}=getCssDimensions(h);return{width:d,height:g}}function getRectRelativeToOffsetParent(h,d,g){const b=isHTMLElement(d),_=getDocumentElement(d),$=g==="fixed",j=getBoundingClientRect(h,!0,$,d);let _e={scrollLeft:0,scrollTop:0};const et=createCoords(0);function rt(){et.x=getWindowScrollBarX(_)}if(b||!b&&!$)if((getNodeName(d)!=="body"||isOverflowElement(_))&&(_e=getNodeScroll(d)),b){const it=getBoundingClientRect(d,!0,$,d);et.x=it.x+d.clientLeft,et.y=it.y+d.clientTop}else _&&rt();$&&!b&&_&&rt();const nt=_&&!b&&!$?getHTMLOffset(_,_e):createCoords(0),st=j.left+_e.scrollLeft-et.x-nt.x,at=j.top+_e.scrollTop-et.y-nt.y;return{x:st,y:at,width:j.width,height:j.height}}function isStaticPositioned(h){return getComputedStyle$1(h).position==="static"}function getTrueOffsetParent(h,d){if(!isHTMLElement(h)||getComputedStyle$1(h).position==="fixed")return null;if(d)return d(h);let g=h.offsetParent;return getDocumentElement(h)===g&&(g=g.ownerDocument.body),g}function getOffsetParent(h,d){const g=getWindow(h);if(isTopLayer(h))return g;if(!isHTMLElement(h)){let _=getParentNode(h);for(;_&&!isLastTraversableNode(_);){if(isElement(_)&&!isStaticPositioned(_))return _;_=getParentNode(_)}return g}let b=getTrueOffsetParent(h,d);for(;b&&isTableElement(b)&&isStaticPositioned(b);)b=getTrueOffsetParent(b,d);return b&&isLastTraversableNode(b)&&isStaticPositioned(b)&&!isContainingBlock(b)?g:b||getContainingBlock(h)||g}const getElementRects=async function(h){const d=this.getOffsetParent||getOffsetParent,g=this.getDimensions,b=await g(h.floating);return{reference:getRectRelativeToOffsetParent(h.reference,await d(h.floating),h.strategy),floating:{x:0,y:0,width:b.width,height:b.height}}};function isRTL(h){return getComputedStyle$1(h).direction==="rtl"}const platform={convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement,getClippingRect,getOffsetParent,getElementRects,getClientRects,getDimensions,getScale,isElement,isRTL};function rectsAreEqual(h,d){return h.x===d.x&&h.y===d.y&&h.width===d.width&&h.height===d.height}function observeMove(h,d){let g=null,b;const _=getDocumentElement(h);function $(){var _e;clearTimeout(b),(_e=g)==null||_e.disconnect(),g=null}function j(_e,et){_e===void 0&&(_e=!1),et===void 0&&(et=1),$();const rt=h.getBoundingClientRect(),{left:nt,top:st,width:at,height:it}=rt;if(_e||d(),!at||!it)return;const dt=floor(st),ot=floor(_.clientWidth-(nt+at)),ct=floor(_.clientHeight-(st+it)),lt=floor(nt),ft={rootMargin:-dt+"px "+-ot+"px "+-ct+"px "+-lt+"px",threshold:max(0,min(1,et))||1};let Et=!0;function Tt(St){const ht=St[0].intersectionRatio;if(ht!==et){if(!Et)return j();ht?j(!1,ht):b=setTimeout(()=>{j(!1,1e-7)},1e3)}ht===1&&!rectsAreEqual(rt,h.getBoundingClientRect())&&j(),Et=!1}try{g=new IntersectionObserver(Tt,{...ft,root:_.ownerDocument})}catch{g=new IntersectionObserver(Tt,ft)}g.observe(h)}return j(!0),$}function autoUpdate(h,d,g,b){b===void 0&&(b={});const{ancestorScroll:_=!0,ancestorResize:$=!0,elementResize:j=typeof ResizeObserver=="function",layoutShift:_e=typeof IntersectionObserver=="function",animationFrame:et=!1}=b,rt=unwrapElement(h),nt=_||$?[...rt?getOverflowAncestors(rt):[],...getOverflowAncestors(d)]:[];nt.forEach(lt=>{_&&lt.addEventListener("scroll",g,{passive:!0}),$&&lt.addEventListener("resize",g)});const st=rt&&_e?observeMove(rt,g):null;let at=-1,it=null;j&&(it=new ResizeObserver(lt=>{let[ut]=lt;ut&&ut.target===rt&&it&&(it.unobserve(d),cancelAnimationFrame(at),at=requestAnimationFrame(()=>{var ft;(ft=it)==null||ft.observe(d)})),g()}),rt&&!et&&it.observe(rt),it.observe(d));let dt,ot=et?getBoundingClientRect(h):null;et&&ct();function ct(){const lt=getBoundingClientRect(h);ot&&!rectsAreEqual(ot,lt)&&g(),ot=lt,dt=requestAnimationFrame(ct)}return g(),()=>{var lt;nt.forEach(ut=>{_&&ut.removeEventListener("scroll",g),$&&ut.removeEventListener("resize",g)}),st==null||st(),(lt=it)==null||lt.disconnect(),it=null,et&&cancelAnimationFrame(dt)}}const offset$1=offset$2,shift$1=shift$2,flip$1=flip$2,size$1=size$2,hide$1=hide$2,arrow$2=arrow$3,limitShift$1=limitShift$2,computePosition=(h,d,g)=>{const b=new Map,_={platform,...g},$={..._.platform,_c:b};return computePosition$1(h,d,{..._,platform:$})};var isClient=typeof document<"u",noop$4=function(){},index=isClient?reactExports.useLayoutEffect:noop$4;function deepEqual(h,d){if(h===d)return!0;if(typeof h!=typeof d)return!1;if(typeof h=="function"&&h.toString()===d.toString())return!0;let g,b,_;if(h&&d&&typeof h=="object"){if(Array.isArray(h)){if(g=h.length,g!==d.length)return!1;for(b=g;b--!==0;)if(!deepEqual(h[b],d[b]))return!1;return!0}if(_=Object.keys(h),g=_.length,g!==Object.keys(d).length)return!1;for(b=g;b--!==0;)if(!{}.hasOwnProperty.call(d,_[b]))return!1;for(b=g;b--!==0;){const $=_[b];if(!($==="_owner"&&h.$$typeof)&&!deepEqual(h[$],d[$]))return!1}return!0}return h!==h&&d!==d}function getDPR(h){return typeof window>"u"?1:(h.ownerDocument.defaultView||window).devicePixelRatio||1}function roundByDPR(h,d){const g=getDPR(h);return Math.round(d*g)/g}function useLatestRef(h){const d=reactExports.useRef(h);return index(()=>{d.current=h}),d}function useFloating(h){h===void 0&&(h={});const{placement:d="bottom",strategy:g="absolute",middleware:b=[],platform:_,elements:{reference:$,floating:j}={},transform:_e=!0,whileElementsMounted:et,open:rt}=h,[nt,st]=reactExports.useState({x:0,y:0,strategy:g,placement:d,middlewareData:{},isPositioned:!1}),[at,it]=reactExports.useState(b);deepEqual(at,b)||it(b);const[dt,ot]=reactExports.useState(null),[ct,lt]=reactExports.useState(null),ut=reactExports.useCallback(Kt=>{Kt!==St.current&&(St.current=Kt,ot(Kt))},[]),ft=reactExports.useCallback(Kt=>{Kt!==ht.current&&(ht.current=Kt,lt(Kt))},[]),Et=$||dt,Tt=j||ct,St=reactExports.useRef(null),ht=reactExports.useRef(null),kt=reactExports.useRef(nt),Rt=et!=null,Mt=useLatestRef(et),Zt=useLatestRef(_),Ct=useLatestRef(rt),Pt=reactExports.useCallback(()=>{if(!St.current||!ht.current)return;const Kt={placement:d,strategy:g,middleware:at};Zt.current&&(Kt.platform=Zt.current),computePosition(St.current,ht.current,Kt).then(Bt=>{const nr={...Bt,isPositioned:Ct.current!==!1};xt.current&&!deepEqual(kt.current,nr)&&(kt.current=nr,reactDomExports.flushSync(()=>{st(nr)}))})},[at,d,g,Zt,Ct]);index(()=>{rt===!1&&kt.current.isPositioned&&(kt.current.isPositioned=!1,st(Kt=>({...Kt,isPositioned:!1})))},[rt]);const xt=reactExports.useRef(!1);index(()=>(xt.current=!0,()=>{xt.current=!1}),[]),index(()=>{if(Et&&(St.current=Et),Tt&&(ht.current=Tt),Et&&Tt){if(Mt.current)return Mt.current(Et,Tt,Pt);Pt()}},[Et,Tt,Pt,Mt,Rt]);const Ht=reactExports.useMemo(()=>({reference:St,floating:ht,setReference:ut,setFloating:ft}),[ut,ft]),tr=reactExports.useMemo(()=>({reference:Et,floating:Tt}),[Et,Tt]),er=reactExports.useMemo(()=>{const Kt={position:g,left:0,top:0};if(!tr.floating)return Kt;const Bt=roundByDPR(tr.floating,nt.x),nr=roundByDPR(tr.floating,nt.y);return _e?{...Kt,transform:"translate("+Bt+"px, "+nr+"px)",...getDPR(tr.floating)>=1.5&&{willChange:"transform"}}:{position:g,left:Bt,top:nr}},[g,_e,tr.floating,nt.x,nt.y]);return reactExports.useMemo(()=>({...nt,update:Pt,refs:Ht,elements:tr,floatingStyles:er}),[nt,Pt,Ht,tr,er])}const arrow$1=h=>{function d(g){return{}.hasOwnProperty.call(g,"current")}return{name:"arrow",options:h,fn(g){const{element:b,padding:_}=typeof h=="function"?h(g):h;return b&&d(b)?b.current!=null?arrow$2({element:b.current,padding:_}).fn(g):{}:b?arrow$2({element:b,padding:_}).fn(g):{}}}},offset=(h,d)=>({...offset$1(h),options:[h,d]}),shift=(h,d)=>({...shift$1(h),options:[h,d]}),limitShift=(h,d)=>({...limitShift$1(h),options:[h,d]}),flip=(h,d)=>({...flip$1(h),options:[h,d]}),size=(h,d)=>({...size$1(h),options:[h,d]}),hide=(h,d)=>({...hide$1(h),options:[h,d]}),arrow=(h,d)=>({...arrow$1(h),options:[h,d]});var NAME="Arrow",Arrow$1=reactExports.forwardRef((h,d)=>{const{children:g,width:b=10,height:_=5,...$}=h;return jsxRuntimeExports.jsx(Primitive.svg,{...$,ref:d,width:b,height:_,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:h.asChild?g:jsxRuntimeExports.jsx("polygon",{points:"0,0 30,0 15,10"})})});Arrow$1.displayName=NAME;var Root$3=Arrow$1;function useSize(h){const[d,g]=reactExports.useState(void 0);return useLayoutEffect2(()=>{if(h){g({width:h.offsetWidth,height:h.offsetHeight});const b=new ResizeObserver(_=>{if(!Array.isArray(_)||!_.length)return;const $=_[0];let j,_e;if("borderBoxSize"in $){const et=$.borderBoxSize,rt=Array.isArray(et)?et[0]:et;j=rt.inlineSize,_e=rt.blockSize}else j=h.offsetWidth,_e=h.offsetHeight;g({width:j,height:_e})});return b.observe(h,{box:"border-box"}),()=>b.unobserve(h)}else g(void 0)},[h]),d}var POPPER_NAME="Popper",[createPopperContext,createPopperScope]=createContextScope(POPPER_NAME),[PopperProvider,usePopperContext]=createPopperContext(POPPER_NAME),Popper=h=>{const{__scopePopper:d,children:g}=h,[b,_]=reactExports.useState(null);return jsxRuntimeExports.jsx(PopperProvider,{scope:d,anchor:b,onAnchorChange:_,children:g})};Popper.displayName=POPPER_NAME;var ANCHOR_NAME="PopperAnchor",PopperAnchor=reactExports.forwardRef((h,d)=>{const{__scopePopper:g,virtualRef:b,..._}=h,$=usePopperContext(ANCHOR_NAME,g),j=reactExports.useRef(null),_e=useComposedRefs(d,j);return reactExports.useEffect(()=>{$.onAnchorChange((b==null?void 0:b.current)||j.current)}),b?null:jsxRuntimeExports.jsx(Primitive.div,{..._,ref:_e})});PopperAnchor.displayName=ANCHOR_NAME;var CONTENT_NAME$2="PopperContent",[PopperContentProvider,useContentContext]=createPopperContext(CONTENT_NAME$2),PopperContent=reactExports.forwardRef((h,d)=>{var vr,br,Er,Cr,kr,Or;const{__scopePopper:g,side:b="bottom",sideOffset:_=0,align:$="center",alignOffset:j=0,arrowPadding:_e=0,avoidCollisions:et=!0,collisionBoundary:rt=[],collisionPadding:nt=0,sticky:st="partial",hideWhenDetached:at=!1,updatePositionStrategy:it="optimized",onPlaced:dt,...ot}=h,ct=usePopperContext(CONTENT_NAME$2,g),[lt,ut]=reactExports.useState(null),ft=useComposedRefs(d,Jt=>ut(Jt)),[Et,Tt]=reactExports.useState(null),St=useSize(Et),ht=(St==null?void 0:St.width)??0,kt=(St==null?void 0:St.height)??0,Rt=b+($!=="center"?"-"+$:""),Mt=typeof nt=="number"?nt:{top:0,right:0,bottom:0,left:0,...nt},Zt=Array.isArray(rt)?rt:[rt],Ct=Zt.length>0,Pt={padding:Mt,boundary:Zt.filter(isNotNull),altBoundary:Ct},{refs:xt,floatingStyles:Ht,placement:tr,isPositioned:er,middlewareData:Kt}=useFloating({strategy:"fixed",placement:Rt,whileElementsMounted:(...Jt)=>autoUpdate(...Jt,{animationFrame:it==="always"}),elements:{reference:ct.anchor},middleware:[offset({mainAxis:_+kt,alignmentAxis:j}),et&&shift({mainAxis:!0,crossAxis:!1,limiter:st==="partial"?limitShift():void 0,...Pt}),et&&flip({...Pt}),size({...Pt,apply:({elements:Jt,rects:mt,availableWidth:Vt,availableHeight:Qt})=>{const{width:It,height:Nt}=mt.reference,qt=Jt.floating.style;qt.setProperty("--radix-popper-available-width",`${Vt}px`),qt.setProperty("--radix-popper-available-height",`${Qt}px`),qt.setProperty("--radix-popper-anchor-width",`${It}px`),qt.setProperty("--radix-popper-anchor-height",`${Nt}px`)}}),Et&&arrow({element:Et,padding:_e}),transformOrigin({arrowWidth:ht,arrowHeight:kt}),at&&hide({strategy:"referenceHidden",...Pt})]}),[Bt,nr]=getSideAndAlignFromPlacement(tr),Ut=useCallbackRef$1(dt);useLayoutEffect2(()=>{er&&(Ut==null||Ut())},[er,Ut]);const zt=(vr=Kt.arrow)==null?void 0:vr.x,sr=(br=Kt.arrow)==null?void 0:br.y,or=((Er=Kt.arrow)==null?void 0:Er.centerOffset)!==0,[ur,_r]=reactExports.useState();return useLayoutEffect2(()=>{lt&&_r(window.getComputedStyle(lt).zIndex)},[lt]),jsxRuntimeExports.jsx("div",{ref:xt.setFloating,"data-radix-popper-content-wrapper":"",style:{...Ht,transform:er?Ht.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ur,"--radix-popper-transform-origin":[(Cr=Kt.transformOrigin)==null?void 0:Cr.x,(kr=Kt.transformOrigin)==null?void 0:kr.y].join(" "),...((Or=Kt.hide)==null?void 0:Or.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:h.dir,children:jsxRuntimeExports.jsx(PopperContentProvider,{scope:g,placedSide:Bt,onArrowChange:Tt,arrowX:zt,arrowY:sr,shouldHideArrow:or,children:jsxRuntimeExports.jsx(Primitive.div,{"data-side":Bt,"data-align":nr,...ot,ref:ft,style:{...ot.style,animation:er?void 0:"none"}})})})});PopperContent.displayName=CONTENT_NAME$2;var ARROW_NAME$1="PopperArrow",OPPOSITE_SIDE={top:"bottom",right:"left",bottom:"top",left:"right"},PopperArrow=reactExports.forwardRef(function(d,g){const{__scopePopper:b,..._}=d,$=useContentContext(ARROW_NAME$1,b),j=OPPOSITE_SIDE[$.placedSide];return jsxRuntimeExports.jsx("span",{ref:$.onArrowChange,style:{position:"absolute",left:$.arrowX,top:$.arrowY,[j]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[$.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[$.placedSide],visibility:$.shouldHideArrow?"hidden":void 0},children:jsxRuntimeExports.jsx(Root$3,{..._,ref:g,style:{..._.style,display:"block"}})})});PopperArrow.displayName=ARROW_NAME$1;function isNotNull(h){return h!==null}var transformOrigin=h=>({name:"transformOrigin",options:h,fn(d){var ct,lt,ut;const{placement:g,rects:b,middlewareData:_}=d,j=((ct=_.arrow)==null?void 0:ct.centerOffset)!==0,_e=j?0:h.arrowWidth,et=j?0:h.arrowHeight,[rt,nt]=getSideAndAlignFromPlacement(g),st={start:"0%",center:"50%",end:"100%"}[nt],at=(((lt=_.arrow)==null?void 0:lt.x)??0)+_e/2,it=(((ut=_.arrow)==null?void 0:ut.y)??0)+et/2;let dt="",ot="";return rt==="bottom"?(dt=j?st:`${at}px`,ot=`${-et}px`):rt==="top"?(dt=j?st:`${at}px`,ot=`${b.floating.height+et}px`):rt==="right"?(dt=`${-et}px`,ot=j?st:`${it}px`):rt==="left"&&(dt=`${b.floating.width+et}px`,ot=j?st:`${it}px`),{data:{x:dt,y:ot}}}});function getSideAndAlignFromPlacement(h){const[d,g="center"]=h.split("-");return[d,g]}var Root2=Popper,Anchor=PopperAnchor,Content$1=PopperContent,Arrow=PopperArrow,[createTooltipContext,createTooltipScope]=createContextScope("Tooltip",[createPopperScope]),usePopperScope=createPopperScope(),PROVIDER_NAME="TooltipProvider",DEFAULT_DELAY_DURATION=700,TOOLTIP_OPEN="tooltip.open",[TooltipProviderContextProvider,useTooltipProviderContext]=createTooltipContext(PROVIDER_NAME),TooltipProvider$1=h=>{const{__scopeTooltip:d,delayDuration:g=DEFAULT_DELAY_DURATION,skipDelayDuration:b=300,disableHoverableContent:_=!1,children:$}=h,j=reactExports.useRef(!0),_e=reactExports.useRef(!1),et=reactExports.useRef(0);return reactExports.useEffect(()=>{const rt=et.current;return()=>window.clearTimeout(rt)},[]),jsxRuntimeExports.jsx(TooltipProviderContextProvider,{scope:d,isOpenDelayedRef:j,delayDuration:g,onOpen:reactExports.useCallback(()=>{window.clearTimeout(et.current),j.current=!1},[]),onClose:reactExports.useCallback(()=>{window.clearTimeout(et.current),et.current=window.setTimeout(()=>j.current=!0,b)},[b]),isPointerInTransitRef:_e,onPointerInTransitChange:reactExports.useCallback(rt=>{_e.current=rt},[]),disableHoverableContent:_,children:$})};TooltipProvider$1.displayName=PROVIDER_NAME;var TOOLTIP_NAME="Tooltip",[TooltipContextProvider,useTooltipContext]=createTooltipContext(TOOLTIP_NAME),Tooltip$1=h=>{const{__scopeTooltip:d,children:g,open:b,defaultOpen:_,onOpenChange:$,disableHoverableContent:j,delayDuration:_e}=h,et=useTooltipProviderContext(TOOLTIP_NAME,h.__scopeTooltip),rt=usePopperScope(d),[nt,st]=reactExports.useState(null),at=useId(),it=reactExports.useRef(0),dt=j??et.disableHoverableContent,ot=_e??et.delayDuration,ct=reactExports.useRef(!1),[lt,ut]=useControllableState({prop:b,defaultProp:_??!1,onChange:ht=>{ht?(et.onOpen(),document.dispatchEvent(new CustomEvent(TOOLTIP_OPEN))):et.onClose(),$==null||$(ht)},caller:TOOLTIP_NAME}),ft=reactExports.useMemo(()=>lt?ct.current?"delayed-open":"instant-open":"closed",[lt]),Et=reactExports.useCallback(()=>{window.clearTimeout(it.current),it.current=0,ct.current=!1,ut(!0)},[ut]),Tt=reactExports.useCallback(()=>{window.clearTimeout(it.current),it.current=0,ut(!1)},[ut]),St=reactExports.useCallback(()=>{window.clearTimeout(it.current),it.current=window.setTimeout(()=>{ct.current=!0,ut(!0),it.current=0},ot)},[ot,ut]);return reactExports.useEffect(()=>()=>{it.current&&(window.clearTimeout(it.current),it.current=0)},[]),jsxRuntimeExports.jsx(Root2,{...rt,children:jsxRuntimeExports.jsx(TooltipContextProvider,{scope:d,contentId:at,open:lt,stateAttribute:ft,trigger:nt,onTriggerChange:st,onTriggerEnter:reactExports.useCallback(()=>{et.isOpenDelayedRef.current?St():Et()},[et.isOpenDelayedRef,St,Et]),onTriggerLeave:reactExports.useCallback(()=>{dt?Tt():(window.clearTimeout(it.current),it.current=0)},[Tt,dt]),onOpen:Et,onClose:Tt,disableHoverableContent:dt,children:g})})};Tooltip$1.displayName=TOOLTIP_NAME;var TRIGGER_NAME$1="TooltipTrigger",TooltipTrigger$1=reactExports.forwardRef((h,d)=>{const{__scopeTooltip:g,...b}=h,_=useTooltipContext(TRIGGER_NAME$1,g),$=useTooltipProviderContext(TRIGGER_NAME$1,g),j=usePopperScope(g),_e=reactExports.useRef(null),et=useComposedRefs(d,_e,_.onTriggerChange),rt=reactExports.useRef(!1),nt=reactExports.useRef(!1),st=reactExports.useCallback(()=>rt.current=!1,[]);return reactExports.useEffect(()=>()=>document.removeEventListener("pointerup",st),[st]),jsxRuntimeExports.jsx(Anchor,{asChild:!0,...j,children:jsxRuntimeExports.jsx(Primitive.button,{"aria-describedby":_.open?_.contentId:void 0,"data-state":_.stateAttribute,...b,ref:et,onPointerMove:composeEventHandlers(h.onPointerMove,at=>{at.pointerType!=="touch"&&!nt.current&&!$.isPointerInTransitRef.current&&(_.onTriggerEnter(),nt.current=!0)}),onPointerLeave:composeEventHandlers(h.onPointerLeave,()=>{_.onTriggerLeave(),nt.current=!1}),onPointerDown:composeEventHandlers(h.onPointerDown,()=>{_.open&&_.onClose(),rt.current=!0,document.addEventListener("pointerup",st,{once:!0})}),onFocus:composeEventHandlers(h.onFocus,()=>{rt.current||_.onOpen()}),onBlur:composeEventHandlers(h.onBlur,_.onClose),onClick:composeEventHandlers(h.onClick,_.onClose)})})});TooltipTrigger$1.displayName=TRIGGER_NAME$1;var PORTAL_NAME$1="TooltipPortal",[PortalProvider$1,usePortalContext$1]=createTooltipContext(PORTAL_NAME$1,{forceMount:void 0}),CONTENT_NAME$1="TooltipContent",TooltipContent$1=reactExports.forwardRef((h,d)=>{const g=usePortalContext$1(CONTENT_NAME$1,h.__scopeTooltip),{forceMount:b=g.forceMount,side:_="top",...$}=h,j=useTooltipContext(CONTENT_NAME$1,h.__scopeTooltip);return jsxRuntimeExports.jsx(Presence,{present:b||j.open,children:j.disableHoverableContent?jsxRuntimeExports.jsx(TooltipContentImpl,{side:_,...$,ref:d}):jsxRuntimeExports.jsx(TooltipContentHoverable,{side:_,...$,ref:d})})}),TooltipContentHoverable=reactExports.forwardRef((h,d)=>{const g=useTooltipContext(CONTENT_NAME$1,h.__scopeTooltip),b=useTooltipProviderContext(CONTENT_NAME$1,h.__scopeTooltip),_=reactExports.useRef(null),$=useComposedRefs(d,_),[j,_e]=reactExports.useState(null),{trigger:et,onClose:rt}=g,nt=_.current,{onPointerInTransitChange:st}=b,at=reactExports.useCallback(()=>{_e(null),st(!1)},[st]),it=reactExports.useCallback((dt,ot)=>{const ct=dt.currentTarget,lt={x:dt.clientX,y:dt.clientY},ut=getExitSideFromRect(lt,ct.getBoundingClientRect()),ft=getPaddedExitPoints(lt,ut),Et=getPointsFromRect(ot.getBoundingClientRect()),Tt=getHull([...ft,...Et]);_e(Tt),st(!0)},[st]);return reactExports.useEffect(()=>()=>at(),[at]),reactExports.useEffect(()=>{if(et&&nt){const dt=ct=>it(ct,nt),ot=ct=>it(ct,et);return et.addEventListener("pointerleave",dt),nt.addEventListener("pointerleave",ot),()=>{et.removeEventListener("pointerleave",dt),nt.removeEventListener("pointerleave",ot)}}},[et,nt,it,at]),reactExports.useEffect(()=>{if(j){const dt=ot=>{const ct=ot.target,lt={x:ot.clientX,y:ot.clientY},ut=(et==null?void 0:et.contains(ct))||(nt==null?void 0:nt.contains(ct)),ft=!isPointInPolygon(lt,j);ut?at():ft&&(at(),rt())};return document.addEventListener("pointermove",dt),()=>document.removeEventListener("pointermove",dt)}},[et,nt,j,rt,at]),jsxRuntimeExports.jsx(TooltipContentImpl,{...h,ref:$})}),[VisuallyHiddenContentContextProvider,useVisuallyHiddenContentContext]=createTooltipContext(TOOLTIP_NAME,{isInside:!1}),Slottable=createSlottable("TooltipContent"),TooltipContentImpl=reactExports.forwardRef((h,d)=>{const{__scopeTooltip:g,children:b,"aria-label":_,onEscapeKeyDown:$,onPointerDownOutside:j,..._e}=h,et=useTooltipContext(CONTENT_NAME$1,g),rt=usePopperScope(g),{onClose:nt}=et;return reactExports.useEffect(()=>(document.addEventListener(TOOLTIP_OPEN,nt),()=>document.removeEventListener(TOOLTIP_OPEN,nt)),[nt]),reactExports.useEffect(()=>{if(et.trigger){const st=at=>{const it=at.target;it!=null&&it.contains(et.trigger)&&nt()};return window.addEventListener("scroll",st,{capture:!0}),()=>window.removeEventListener("scroll",st,{capture:!0})}},[et.trigger,nt]),jsxRuntimeExports.jsx(DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:$,onPointerDownOutside:j,onFocusOutside:st=>st.preventDefault(),onDismiss:nt,children:jsxRuntimeExports.jsxs(Content$1,{"data-state":et.stateAttribute,...rt,..._e,ref:d,style:{..._e.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[jsxRuntimeExports.jsx(Slottable,{children:b}),jsxRuntimeExports.jsx(VisuallyHiddenContentContextProvider,{scope:g,isInside:!0,children:jsxRuntimeExports.jsx(Root$4,{id:et.contentId,role:"tooltip",children:_||b})})]})})});TooltipContent$1.displayName=CONTENT_NAME$1;var ARROW_NAME="TooltipArrow",TooltipArrow=reactExports.forwardRef((h,d)=>{const{__scopeTooltip:g,...b}=h,_=usePopperScope(g);return useVisuallyHiddenContentContext(ARROW_NAME,g).isInside?null:jsxRuntimeExports.jsx(Arrow,{..._,...b,ref:d})});TooltipArrow.displayName=ARROW_NAME;function getExitSideFromRect(h,d){const g=Math.abs(d.top-h.y),b=Math.abs(d.bottom-h.y),_=Math.abs(d.right-h.x),$=Math.abs(d.left-h.x);switch(Math.min(g,b,_,$)){case $:return"left";case _:return"right";case g:return"top";case b:return"bottom";default:throw new Error("unreachable")}}function getPaddedExitPoints(h,d,g=5){const b=[];switch(d){case"top":b.push({x:h.x-g,y:h.y+g},{x:h.x+g,y:h.y+g});break;case"bottom":b.push({x:h.x-g,y:h.y-g},{x:h.x+g,y:h.y-g});break;case"left":b.push({x:h.x+g,y:h.y-g},{x:h.x+g,y:h.y+g});break;case"right":b.push({x:h.x-g,y:h.y-g},{x:h.x-g,y:h.y+g});break}return b}function getPointsFromRect(h){const{top:d,right:g,bottom:b,left:_}=h;return[{x:_,y:d},{x:g,y:d},{x:g,y:b},{x:_,y:b}]}function isPointInPolygon(h,d){const{x:g,y:b}=h;let _=!1;for(let $=0,j=d.length-1;$<d.length;j=$++){const _e=d[$],et=d[j],rt=_e.x,nt=_e.y,st=et.x,at=et.y;nt>b!=at>b&&g<(st-rt)*(b-nt)/(at-nt)+rt&&(_=!_)}return _}function getHull(h){const d=h.slice();return d.sort((g,b)=>g.x<b.x?-1:g.x>b.x?1:g.y<b.y?-1:g.y>b.y?1:0),getHullPresorted(d)}function getHullPresorted(h){if(h.length<=1)return h.slice();const d=[];for(let b=0;b<h.length;b++){const _=h[b];for(;d.length>=2;){const $=d[d.length-1],j=d[d.length-2];if(($.x-j.x)*(_.y-j.y)>=($.y-j.y)*(_.x-j.x))d.pop();else break}d.push(_)}d.pop();const g=[];for(let b=h.length-1;b>=0;b--){const _=h[b];for(;g.length>=2;){const $=g[g.length-1],j=g[g.length-2];if(($.x-j.x)*(_.y-j.y)>=($.y-j.y)*(_.x-j.x))g.pop();else break}g.push(_)}return g.pop(),d.length===1&&g.length===1&&d[0].x===g[0].x&&d[0].y===g[0].y?d:d.concat(g)}var Provider=TooltipProvider$1,Root3=Tooltip$1,Trigger$1=TooltipTrigger$1,Content2=TooltipContent$1;const TooltipProvider=Provider,Tooltip=Root3,TooltipTrigger=Trigger$1,TooltipContent=reactExports.forwardRef(({className:h,sideOffset:d=4,...g},b)=>jsxRuntimeExports.jsx(Content2,{ref:b,sideOffset:d,className:cn("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",h),...g}));TooltipContent.displayName=Content2.displayName;var Subscribable=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(h){return this.listeners.add(h),this.onSubscribe(),()=>{this.listeners.delete(h),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},isServer=typeof window>"u"||"Deno"in globalThis;function noop$3(){}function functionalUpdate(h,d){return typeof h=="function"?h(d):h}function isValidTimeout(h){return typeof h=="number"&&h>=0&&h!==1/0}function timeUntilStale(h,d){return Math.max(h+(d||0)-Date.now(),0)}function resolveStaleTime(h,d){return typeof h=="function"?h(d):h}function resolveEnabled(h,d){return typeof h=="function"?h(d):h}function matchQuery(h,d){const{type:g="all",exact:b,fetchStatus:_,predicate:$,queryKey:j,stale:_e}=h;if(j){if(b){if(d.queryHash!==hashQueryKeyByOptions(j,d.options))return!1}else if(!partialMatchKey(d.queryKey,j))return!1}if(g!=="all"){const et=d.isActive();if(g==="active"&&!et||g==="inactive"&&et)return!1}return!(typeof _e=="boolean"&&d.isStale()!==_e||_&&_!==d.state.fetchStatus||$&&!$(d))}function matchMutation(h,d){const{exact:g,status:b,predicate:_,mutationKey:$}=h;if($){if(!d.options.mutationKey)return!1;if(g){if(hashKey(d.options.mutationKey)!==hashKey($))return!1}else if(!partialMatchKey(d.options.mutationKey,$))return!1}return!(b&&d.state.status!==b||_&&!_(d))}function hashQueryKeyByOptions(h,d){return((d==null?void 0:d.queryKeyHashFn)||hashKey)(h)}function hashKey(h){return JSON.stringify(h,(d,g)=>isPlainObject$1(g)?Object.keys(g).sort().reduce((b,_)=>(b[_]=g[_],b),{}):g)}function partialMatchKey(h,d){return h===d?!0:typeof h!=typeof d?!1:h&&d&&typeof h=="object"&&typeof d=="object"?Object.keys(d).every(g=>partialMatchKey(h[g],d[g])):!1}function replaceEqualDeep(h,d){if(h===d)return h;const g=isPlainArray(h)&&isPlainArray(d);if(g||isPlainObject$1(h)&&isPlainObject$1(d)){const b=g?h:Object.keys(h),_=b.length,$=g?d:Object.keys(d),j=$.length,_e=g?[]:{},et=new Set(b);let rt=0;for(let nt=0;nt<j;nt++){const st=g?nt:$[nt];(!g&&et.has(st)||g)&&h[st]===void 0&&d[st]===void 0?(_e[st]=void 0,rt++):(_e[st]=replaceEqualDeep(h[st],d[st]),_e[st]===h[st]&&h[st]!==void 0&&rt++)}return _===j&&rt===_?h:_e}return d}function isPlainArray(h){return Array.isArray(h)&&h.length===Object.keys(h).length}function isPlainObject$1(h){if(!hasObjectPrototype(h))return!1;const d=h.constructor;if(d===void 0)return!0;const g=d.prototype;return!(!hasObjectPrototype(g)||!g.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(h)!==Object.prototype)}function hasObjectPrototype(h){return Object.prototype.toString.call(h)==="[object Object]"}function sleep$1(h){return new Promise(d=>{setTimeout(d,h)})}function replaceData(h,d,g){return typeof g.structuralSharing=="function"?g.structuralSharing(h,d):g.structuralSharing!==!1?replaceEqualDeep(h,d):d}function addToEnd(h,d,g=0){const b=[...h,d];return g&&b.length>g?b.slice(1):b}function addToStart(h,d,g=0){const b=[d,...h];return g&&b.length>g?b.slice(0,-1):b}var skipToken=Symbol();function ensureQueryFn(h,d){return!h.queryFn&&(d!=null&&d.initialPromise)?()=>d.initialPromise:!h.queryFn||h.queryFn===skipToken?()=>Promise.reject(new Error(`Missing queryFn: '${h.queryHash}'`)):h.queryFn}var ln,Zr,gn,Ln,FocusManager=(Ln=class extends Subscribable{constructor(){super();Rr(this,ln);Rr(this,Zr);Rr(this,gn);Sr(this,gn,d=>{if(!isServer&&window.addEventListener){const g=()=>d();return window.addEventListener("visibilitychange",g,!1),()=>{window.removeEventListener("visibilitychange",g)}}})}onSubscribe(){cr(this,Zr)||this.setEventListener(cr(this,gn))}onUnsubscribe(){var d;this.hasListeners()||((d=cr(this,Zr))==null||d.call(this),Sr(this,Zr,void 0))}setEventListener(d){var g;Sr(this,gn,d),(g=cr(this,Zr))==null||g.call(this),Sr(this,Zr,d(b=>{typeof b=="boolean"?this.setFocused(b):this.onFocus()}))}setFocused(d){cr(this,ln)!==d&&(Sr(this,ln,d),this.onFocus())}onFocus(){const d=this.isFocused();this.listeners.forEach(g=>{g(d)})}isFocused(){var d;return typeof cr(this,ln)=="boolean"?cr(this,ln):((d=globalThis.document)==null?void 0:d.visibilityState)!=="hidden"}},ln=new WeakMap,Zr=new WeakMap,gn=new WeakMap,Ln),focusManager=new FocusManager,yn,Jr,vn,Fn,OnlineManager=(Fn=class extends Subscribable{constructor(){super();Rr(this,yn,!0);Rr(this,Jr);Rr(this,vn);Sr(this,vn,d=>{if(!isServer&&window.addEventListener){const g=()=>d(!0),b=()=>d(!1);return window.addEventListener("online",g,!1),window.addEventListener("offline",b,!1),()=>{window.removeEventListener("online",g),window.removeEventListener("offline",b)}}})}onSubscribe(){cr(this,Jr)||this.setEventListener(cr(this,vn))}onUnsubscribe(){var d;this.hasListeners()||((d=cr(this,Jr))==null||d.call(this),Sr(this,Jr,void 0))}setEventListener(d){var g;Sr(this,vn,d),(g=cr(this,Jr))==null||g.call(this),Sr(this,Jr,d(this.setOnline.bind(this)))}setOnline(d){cr(this,yn)!==d&&(Sr(this,yn,d),this.listeners.forEach(b=>{b(d)}))}isOnline(){return cr(this,yn)}},yn=new WeakMap,Jr=new WeakMap,vn=new WeakMap,Fn),onlineManager=new OnlineManager;function pendingThenable(){let h,d;const g=new Promise((_,$)=>{h=_,d=$});g.status="pending",g.catch(()=>{});function b(_){Object.assign(g,_),delete g.resolve,delete g.reject}return g.resolve=_=>{b({status:"fulfilled",value:_}),h(_)},g.reject=_=>{b({status:"rejected",reason:_}),d(_)},g}function defaultRetryDelay(h){return Math.min(1e3*2**h,3e4)}function canFetch(h){return(h??"online")==="online"?onlineManager.isOnline():!0}var CancelledError=class extends Error{constructor(h){super("CancelledError"),this.revert=h==null?void 0:h.revert,this.silent=h==null?void 0:h.silent}};function isCancelledError(h){return h instanceof CancelledError}function createRetryer(h){let d=!1,g=0,b=!1,_;const $=pendingThenable(),j=ot=>{var ct;b||(at(new CancelledError(ot)),(ct=h.abort)==null||ct.call(h))},_e=()=>{d=!0},et=()=>{d=!1},rt=()=>focusManager.isFocused()&&(h.networkMode==="always"||onlineManager.isOnline())&&h.canRun(),nt=()=>canFetch(h.networkMode)&&h.canRun(),st=ot=>{var ct;b||(b=!0,(ct=h.onSuccess)==null||ct.call(h,ot),_==null||_(),$.resolve(ot))},at=ot=>{var ct;b||(b=!0,(ct=h.onError)==null||ct.call(h,ot),_==null||_(),$.reject(ot))},it=()=>new Promise(ot=>{var ct;_=lt=>{(b||rt())&&ot(lt)},(ct=h.onPause)==null||ct.call(h)}).then(()=>{var ot;_=void 0,b||(ot=h.onContinue)==null||ot.call(h)}),dt=()=>{if(b)return;let ot;const ct=g===0?h.initialPromise:void 0;try{ot=ct??h.fn()}catch(lt){ot=Promise.reject(lt)}Promise.resolve(ot).then(st).catch(lt=>{var St;if(b)return;const ut=h.retry??(isServer?0:3),ft=h.retryDelay??defaultRetryDelay,Et=typeof ft=="function"?ft(g,lt):ft,Tt=ut===!0||typeof ut=="number"&&g<ut||typeof ut=="function"&&ut(g,lt);if(d||!Tt){at(lt);return}g++,(St=h.onFail)==null||St.call(h,g,lt),sleep$1(Et).then(()=>rt()?void 0:it()).then(()=>{d?at(lt):dt()})})};return{promise:$,cancel:j,continue:()=>(_==null||_(),$),cancelRetry:_e,continueRetry:et,canStart:nt,start:()=>(nt()?dt():it().then(dt),$)}}var defaultScheduler=h=>setTimeout(h,0);function createNotifyManager(){let h=[],d=0,g=_e=>{_e()},b=_e=>{_e()},_=defaultScheduler;const $=_e=>{d?h.push(_e):_(()=>{g(_e)})},j=()=>{const _e=h;h=[],_e.length&&_(()=>{b(()=>{_e.forEach(et=>{g(et)})})})};return{batch:_e=>{let et;d++;try{et=_e()}finally{d--,d||j()}return et},batchCalls:_e=>(...et)=>{$(()=>{_e(...et)})},schedule:$,setNotifyFunction:_e=>{g=_e},setBatchNotifyFunction:_e=>{b=_e},setScheduler:_e=>{_=_e}}}var notifyManager=createNotifyManager(),un,Bn,Removable=(Bn=class{constructor(){Rr(this,un)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),isValidTimeout(this.gcTime)&&Sr(this,un,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(h){this.gcTime=Math.max(this.gcTime||0,h??(isServer?1/0:5*60*1e3))}clearGcTimeout(){cr(this,un)&&(clearTimeout(cr(this,un)),Sr(this,un,void 0))}},un=new WeakMap,Bn),bn,dn,zr,fn,Lr,Sn,hn,Wr,Xr,Un,Query=(Un=class extends Removable{constructor(d){super();Rr(this,Wr);Rr(this,bn);Rr(this,dn);Rr(this,zr);Rr(this,fn);Rr(this,Lr);Rr(this,Sn);Rr(this,hn);Sr(this,hn,!1),Sr(this,Sn,d.defaultOptions),this.setOptions(d.options),this.observers=[],Sr(this,fn,d.client),Sr(this,zr,cr(this,fn).getQueryCache()),this.queryKey=d.queryKey,this.queryHash=d.queryHash,Sr(this,bn,getDefaultState$1(this.options)),this.state=d.state??cr(this,bn),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var d;return(d=cr(this,Lr))==null?void 0:d.promise}setOptions(d){this.options={...cr(this,Sn),...d},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&cr(this,zr).remove(this)}setData(d,g){const b=replaceData(this.state.data,d,this.options);return jr(this,Wr,Xr).call(this,{data:b,type:"success",dataUpdatedAt:g==null?void 0:g.updatedAt,manual:g==null?void 0:g.manual}),b}setState(d,g){jr(this,Wr,Xr).call(this,{type:"setState",state:d,setStateOptions:g})}cancel(d){var b,_;const g=(b=cr(this,Lr))==null?void 0:b.promise;return(_=cr(this,Lr))==null||_.cancel(d),g?g.then(noop$3).catch(noop$3):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(cr(this,bn))}isActive(){return this.observers.some(d=>resolveEnabled(d.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===skipToken||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(d=>resolveStaleTime(d.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(d=>d.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(d=0){return this.state.data===void 0?!0:d==="static"?!1:this.state.isInvalidated?!0:!timeUntilStale(this.state.dataUpdatedAt,d)}onFocus(){var g;const d=this.observers.find(b=>b.shouldFetchOnWindowFocus());d==null||d.refetch({cancelRefetch:!1}),(g=cr(this,Lr))==null||g.continue()}onOnline(){var g;const d=this.observers.find(b=>b.shouldFetchOnReconnect());d==null||d.refetch({cancelRefetch:!1}),(g=cr(this,Lr))==null||g.continue()}addObserver(d){this.observers.includes(d)||(this.observers.push(d),this.clearGcTimeout(),cr(this,zr).notify({type:"observerAdded",query:this,observer:d}))}removeObserver(d){this.observers.includes(d)&&(this.observers=this.observers.filter(g=>g!==d),this.observers.length||(cr(this,Lr)&&(cr(this,hn)?cr(this,Lr).cancel({revert:!0}):cr(this,Lr).cancelRetry()),this.scheduleGc()),cr(this,zr).notify({type:"observerRemoved",query:this,observer:d}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||jr(this,Wr,Xr).call(this,{type:"invalidate"})}fetch(d,g){var rt,nt,st;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(g!=null&&g.cancelRefetch))this.cancel({silent:!0});else if(cr(this,Lr))return cr(this,Lr).continueRetry(),cr(this,Lr).promise}if(d&&this.setOptions(d),!this.options.queryFn){const at=this.observers.find(it=>it.options.queryFn);at&&this.setOptions(at.options)}const b=new AbortController,_=at=>{Object.defineProperty(at,"signal",{enumerable:!0,get:()=>(Sr(this,hn,!0),b.signal)})},$=()=>{const at=ensureQueryFn(this.options,g),dt=(()=>{const ot={client:cr(this,fn),queryKey:this.queryKey,meta:this.meta};return _(ot),ot})();return Sr(this,hn,!1),this.options.persister?this.options.persister(at,dt,this):at(dt)},_e=(()=>{const at={fetchOptions:g,options:this.options,queryKey:this.queryKey,client:cr(this,fn),state:this.state,fetchFn:$};return _(at),at})();(rt=this.options.behavior)==null||rt.onFetch(_e,this),Sr(this,dn,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((nt=_e.fetchOptions)==null?void 0:nt.meta))&&jr(this,Wr,Xr).call(this,{type:"fetch",meta:(st=_e.fetchOptions)==null?void 0:st.meta});const et=at=>{var it,dt,ot,ct;isCancelledError(at)&&at.silent||jr(this,Wr,Xr).call(this,{type:"error",error:at}),isCancelledError(at)||((dt=(it=cr(this,zr).config).onError)==null||dt.call(it,at,this),(ct=(ot=cr(this,zr).config).onSettled)==null||ct.call(ot,this.state.data,at,this)),this.scheduleGc()};return Sr(this,Lr,createRetryer({initialPromise:g==null?void 0:g.initialPromise,fn:_e.fetchFn,abort:b.abort.bind(b),onSuccess:at=>{var it,dt,ot,ct;if(at===void 0){et(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(at)}catch(lt){et(lt);return}(dt=(it=cr(this,zr).config).onSuccess)==null||dt.call(it,at,this),(ct=(ot=cr(this,zr).config).onSettled)==null||ct.call(ot,at,this.state.error,this),this.scheduleGc()},onError:et,onFail:(at,it)=>{jr(this,Wr,Xr).call(this,{type:"failed",failureCount:at,error:it})},onPause:()=>{jr(this,Wr,Xr).call(this,{type:"pause"})},onContinue:()=>{jr(this,Wr,Xr).call(this,{type:"continue"})},retry:_e.options.retry,retryDelay:_e.options.retryDelay,networkMode:_e.options.networkMode,canRun:()=>!0})),cr(this,Lr).start()}},bn=new WeakMap,dn=new WeakMap,zr=new WeakMap,fn=new WeakMap,Lr=new WeakMap,Sn=new WeakMap,hn=new WeakMap,Wr=new WeakSet,Xr=function(d){const g=b=>{switch(d.type){case"failed":return{...b,fetchFailureCount:d.failureCount,fetchFailureReason:d.error};case"pause":return{...b,fetchStatus:"paused"};case"continue":return{...b,fetchStatus:"fetching"};case"fetch":return{...b,...fetchState(b.data,this.options),fetchMeta:d.meta??null};case"success":return Sr(this,dn,void 0),{...b,data:d.data,dataUpdateCount:b.dataUpdateCount+1,dataUpdatedAt:d.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!d.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const _=d.error;return isCancelledError(_)&&_.revert&&cr(this,dn)?{...cr(this,dn),fetchStatus:"idle"}:{...b,error:_,errorUpdateCount:b.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:b.fetchFailureCount+1,fetchFailureReason:_,fetchStatus:"idle",status:"error"};case"invalidate":return{...b,isInvalidated:!0};case"setState":return{...b,...d.state}}};this.state=g(this.state),notifyManager.batch(()=>{this.observers.forEach(b=>{b.onQueryUpdate()}),cr(this,zr).notify({query:this,type:"updated",action:d})})},Un);function fetchState(h,d){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:canFetch(d.networkMode)?"fetching":"paused",...h===void 0&&{error:null,status:"pending"}}}function getDefaultState$1(h){const d=typeof h.initialData=="function"?h.initialData():h.initialData,g=d!==void 0,b=g?typeof h.initialDataUpdatedAt=="function"?h.initialDataUpdatedAt():h.initialDataUpdatedAt:0;return{data:d,dataUpdateCount:0,dataUpdatedAt:g?b??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:g?"success":"pending",fetchStatus:"idle"}}var Hr,zn,QueryCache=(zn=class extends Subscribable{constructor(d={}){super();Rr(this,Hr);this.config=d,Sr(this,Hr,new Map)}build(d,g,b){const _=g.queryKey,$=g.queryHash??hashQueryKeyByOptions(_,g);let j=this.get($);return j||(j=new Query({client:d,queryKey:_,queryHash:$,options:d.defaultQueryOptions(g),state:b,defaultOptions:d.getQueryDefaults(_)}),this.add(j)),j}add(d){cr(this,Hr).has(d.queryHash)||(cr(this,Hr).set(d.queryHash,d),this.notify({type:"added",query:d}))}remove(d){const g=cr(this,Hr).get(d.queryHash);g&&(d.destroy(),g===d&&cr(this,Hr).delete(d.queryHash),this.notify({type:"removed",query:d}))}clear(){notifyManager.batch(()=>{this.getAll().forEach(d=>{this.remove(d)})})}get(d){return cr(this,Hr).get(d)}getAll(){return[...cr(this,Hr).values()]}find(d){const g={exact:!0,...d};return this.getAll().find(b=>matchQuery(g,b))}findAll(d={}){const g=this.getAll();return Object.keys(d).length>0?g.filter(b=>matchQuery(d,b)):g}notify(d){notifyManager.batch(()=>{this.listeners.forEach(g=>{g(d)})})}onFocus(){notifyManager.batch(()=>{this.getAll().forEach(d=>{d.onFocus()})})}onOnline(){notifyManager.batch(()=>{this.getAll().forEach(d=>{d.onOnline()})})}},Hr=new WeakMap,zn),Gr,Br,pn,qr,Qr,Wn,Mutation=(Wn=class extends Removable{constructor(d){super();Rr(this,qr);Rr(this,Gr);Rr(this,Br);Rr(this,pn);this.mutationId=d.mutationId,Sr(this,Br,d.mutationCache),Sr(this,Gr,[]),this.state=d.state||getDefaultState(),this.setOptions(d.options),this.scheduleGc()}setOptions(d){this.options=d,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(d){cr(this,Gr).includes(d)||(cr(this,Gr).push(d),this.clearGcTimeout(),cr(this,Br).notify({type:"observerAdded",mutation:this,observer:d}))}removeObserver(d){Sr(this,Gr,cr(this,Gr).filter(g=>g!==d)),this.scheduleGc(),cr(this,Br).notify({type:"observerRemoved",mutation:this,observer:d})}optionalRemove(){cr(this,Gr).length||(this.state.status==="pending"?this.scheduleGc():cr(this,Br).remove(this))}continue(){var d;return((d=cr(this,pn))==null?void 0:d.continue())??this.execute(this.state.variables)}async execute(d){var $,j,_e,et,rt,nt,st,at,it,dt,ot,ct,lt,ut,ft,Et,Tt,St,ht,kt;const g=()=>{jr(this,qr,Qr).call(this,{type:"continue"})};Sr(this,pn,createRetryer({fn:()=>this.options.mutationFn?this.options.mutationFn(d):Promise.reject(new Error("No mutationFn found")),onFail:(Rt,Mt)=>{jr(this,qr,Qr).call(this,{type:"failed",failureCount:Rt,error:Mt})},onPause:()=>{jr(this,qr,Qr).call(this,{type:"pause"})},onContinue:g,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>cr(this,Br).canRun(this)}));const b=this.state.status==="pending",_=!cr(this,pn).canStart();try{if(b)g();else{jr(this,qr,Qr).call(this,{type:"pending",variables:d,isPaused:_}),await((j=($=cr(this,Br).config).onMutate)==null?void 0:j.call($,d,this));const Mt=await((et=(_e=this.options).onMutate)==null?void 0:et.call(_e,d));Mt!==this.state.context&&jr(this,qr,Qr).call(this,{type:"pending",context:Mt,variables:d,isPaused:_})}const Rt=await cr(this,pn).start();return await((nt=(rt=cr(this,Br).config).onSuccess)==null?void 0:nt.call(rt,Rt,d,this.state.context,this)),await((at=(st=this.options).onSuccess)==null?void 0:at.call(st,Rt,d,this.state.context)),await((dt=(it=cr(this,Br).config).onSettled)==null?void 0:dt.call(it,Rt,null,this.state.variables,this.state.context,this)),await((ct=(ot=this.options).onSettled)==null?void 0:ct.call(ot,Rt,null,d,this.state.context)),jr(this,qr,Qr).call(this,{type:"success",data:Rt}),Rt}catch(Rt){try{throw await((ut=(lt=cr(this,Br).config).onError)==null?void 0:ut.call(lt,Rt,d,this.state.context,this)),await((Et=(ft=this.options).onError)==null?void 0:Et.call(ft,Rt,d,this.state.context)),await((St=(Tt=cr(this,Br).config).onSettled)==null?void 0:St.call(Tt,void 0,Rt,this.state.variables,this.state.context,this)),await((kt=(ht=this.options).onSettled)==null?void 0:kt.call(ht,void 0,Rt,d,this.state.context)),Rt}finally{jr(this,qr,Qr).call(this,{type:"error",error:Rt})}}finally{cr(this,Br).runNext(this)}}},Gr=new WeakMap,Br=new WeakMap,pn=new WeakMap,qr=new WeakSet,Qr=function(d){const g=b=>{switch(d.type){case"failed":return{...b,failureCount:d.failureCount,failureReason:d.error};case"pause":return{...b,isPaused:!0};case"continue":return{...b,isPaused:!1};case"pending":return{...b,context:d.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:d.isPaused,status:"pending",variables:d.variables,submittedAt:Date.now()};case"success":return{...b,data:d.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...b,data:void 0,error:d.error,failureCount:b.failureCount+1,failureReason:d.error,isPaused:!1,status:"error"}}};this.state=g(this.state),notifyManager.batch(()=>{cr(this,Gr).forEach(b=>{b.onMutationUpdate(d)}),cr(this,Br).notify({mutation:this,type:"updated",action:d})})},Wn);function getDefaultState(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Yr,Vr,kn,Vn,MutationCache=(Vn=class extends Subscribable{constructor(d={}){super();Rr(this,Yr);Rr(this,Vr);Rr(this,kn);this.config=d,Sr(this,Yr,new Set),Sr(this,Vr,new Map),Sr(this,kn,0)}build(d,g,b){const _=new Mutation({mutationCache:this,mutationId:++An(this,kn)._,options:d.defaultMutationOptions(g),state:b});return this.add(_),_}add(d){cr(this,Yr).add(d);const g=scopeFor(d);if(typeof g=="string"){const b=cr(this,Vr).get(g);b?b.push(d):cr(this,Vr).set(g,[d])}this.notify({type:"added",mutation:d})}remove(d){if(cr(this,Yr).delete(d)){const g=scopeFor(d);if(typeof g=="string"){const b=cr(this,Vr).get(g);if(b)if(b.length>1){const _=b.indexOf(d);_!==-1&&b.splice(_,1)}else b[0]===d&&cr(this,Vr).delete(g)}}this.notify({type:"removed",mutation:d})}canRun(d){const g=scopeFor(d);if(typeof g=="string"){const b=cr(this,Vr).get(g),_=b==null?void 0:b.find($=>$.state.status==="pending");return!_||_===d}else return!0}runNext(d){var b;const g=scopeFor(d);if(typeof g=="string"){const _=(b=cr(this,Vr).get(g))==null?void 0:b.find($=>$!==d&&$.state.isPaused);return(_==null?void 0:_.continue())??Promise.resolve()}else return Promise.resolve()}clear(){notifyManager.batch(()=>{cr(this,Yr).forEach(d=>{this.notify({type:"removed",mutation:d})}),cr(this,Yr).clear(),cr(this,Vr).clear()})}getAll(){return Array.from(cr(this,Yr))}find(d){const g={exact:!0,...d};return this.getAll().find(b=>matchMutation(g,b))}findAll(d={}){return this.getAll().filter(g=>matchMutation(d,g))}notify(d){notifyManager.batch(()=>{this.listeners.forEach(g=>{g(d)})})}resumePausedMutations(){const d=this.getAll().filter(g=>g.state.isPaused);return notifyManager.batch(()=>Promise.all(d.map(g=>g.continue().catch(noop$3))))}},Yr=new WeakMap,Vr=new WeakMap,kn=new WeakMap,Vn);function scopeFor(h){var d;return(d=h.options.scope)==null?void 0:d.id}function infiniteQueryBehavior(h){return{onFetch:(d,g)=>{var nt,st,at,it,dt;const b=d.options,_=(at=(st=(nt=d.fetchOptions)==null?void 0:nt.meta)==null?void 0:st.fetchMore)==null?void 0:at.direction,$=((it=d.state.data)==null?void 0:it.pages)||[],j=((dt=d.state.data)==null?void 0:dt.pageParams)||[];let _e={pages:[],pageParams:[]},et=0;const rt=async()=>{let ot=!1;const ct=ft=>{Object.defineProperty(ft,"signal",{enumerable:!0,get:()=>(d.signal.aborted?ot=!0:d.signal.addEventListener("abort",()=>{ot=!0}),d.signal)})},lt=ensureQueryFn(d.options,d.fetchOptions),ut=async(ft,Et,Tt)=>{if(ot)return Promise.reject();if(Et==null&&ft.pages.length)return Promise.resolve(ft);const ht=(()=>{const Zt={client:d.client,queryKey:d.queryKey,pageParam:Et,direction:Tt?"backward":"forward",meta:d.options.meta};return ct(Zt),Zt})(),kt=await lt(ht),{maxPages:Rt}=d.options,Mt=Tt?addToStart:addToEnd;return{pages:Mt(ft.pages,kt,Rt),pageParams:Mt(ft.pageParams,Et,Rt)}};if(_&&$.length){const ft=_==="backward",Et=ft?getPreviousPageParam:getNextPageParam,Tt={pages:$,pageParams:j},St=Et(b,Tt);_e=await ut(Tt,St,ft)}else{const ft=h??$.length;do{const Et=et===0?j[0]??b.initialPageParam:getNextPageParam(b,_e);if(et>0&&Et==null)break;_e=await ut(_e,Et),et++}while(et<ft)}return _e};d.options.persister?d.fetchFn=()=>{var ot,ct;return(ct=(ot=d.options).persister)==null?void 0:ct.call(ot,rt,{client:d.client,queryKey:d.queryKey,meta:d.options.meta,signal:d.signal},g)}:d.fetchFn=rt}}}function getNextPageParam(h,{pages:d,pageParams:g}){const b=d.length-1;return d.length>0?h.getNextPageParam(d[b],d,g[b],g):void 0}function getPreviousPageParam(h,{pages:d,pageParams:g}){var b;return d.length>0?(b=h.getPreviousPageParam)==null?void 0:b.call(h,d[0],d,g[0],g):void 0}var Dr,en,tn,wn,En,rn,_n,xn,Hn,QueryClient=(Hn=class{constructor(h={}){Rr(this,Dr);Rr(this,en);Rr(this,tn);Rr(this,wn);Rr(this,En);Rr(this,rn);Rr(this,_n);Rr(this,xn);Sr(this,Dr,h.queryCache||new QueryCache),Sr(this,en,h.mutationCache||new MutationCache),Sr(this,tn,h.defaultOptions||{}),Sr(this,wn,new Map),Sr(this,En,new Map),Sr(this,rn,0)}mount(){An(this,rn)._++,cr(this,rn)===1&&(Sr(this,_n,focusManager.subscribe(async h=>{h&&(await this.resumePausedMutations(),cr(this,Dr).onFocus())})),Sr(this,xn,onlineManager.subscribe(async h=>{h&&(await this.resumePausedMutations(),cr(this,Dr).onOnline())})))}unmount(){var h,d;An(this,rn)._--,cr(this,rn)===0&&((h=cr(this,_n))==null||h.call(this),Sr(this,_n,void 0),(d=cr(this,xn))==null||d.call(this),Sr(this,xn,void 0))}isFetching(h){return cr(this,Dr).findAll({...h,fetchStatus:"fetching"}).length}isMutating(h){return cr(this,en).findAll({...h,status:"pending"}).length}getQueryData(h){var g;const d=this.defaultQueryOptions({queryKey:h});return(g=cr(this,Dr).get(d.queryHash))==null?void 0:g.state.data}ensureQueryData(h){const d=this.defaultQueryOptions(h),g=cr(this,Dr).build(this,d),b=g.state.data;return b===void 0?this.fetchQuery(h):(h.revalidateIfStale&&g.isStaleByTime(resolveStaleTime(d.staleTime,g))&&this.prefetchQuery(d),Promise.resolve(b))}getQueriesData(h){return cr(this,Dr).findAll(h).map(({queryKey:d,state:g})=>{const b=g.data;return[d,b]})}setQueryData(h,d,g){const b=this.defaultQueryOptions({queryKey:h}),_=cr(this,Dr).get(b.queryHash),$=_==null?void 0:_.state.data,j=functionalUpdate(d,$);if(j!==void 0)return cr(this,Dr).build(this,b).setData(j,{...g,manual:!0})}setQueriesData(h,d,g){return notifyManager.batch(()=>cr(this,Dr).findAll(h).map(({queryKey:b})=>[b,this.setQueryData(b,d,g)]))}getQueryState(h){var g;const d=this.defaultQueryOptions({queryKey:h});return(g=cr(this,Dr).get(d.queryHash))==null?void 0:g.state}removeQueries(h){const d=cr(this,Dr);notifyManager.batch(()=>{d.findAll(h).forEach(g=>{d.remove(g)})})}resetQueries(h,d){const g=cr(this,Dr);return notifyManager.batch(()=>(g.findAll(h).forEach(b=>{b.reset()}),this.refetchQueries({type:"active",...h},d)))}cancelQueries(h,d={}){const g={revert:!0,...d},b=notifyManager.batch(()=>cr(this,Dr).findAll(h).map(_=>_.cancel(g)));return Promise.all(b).then(noop$3).catch(noop$3)}invalidateQueries(h,d={}){return notifyManager.batch(()=>(cr(this,Dr).findAll(h).forEach(g=>{g.invalidate()}),(h==null?void 0:h.refetchType)==="none"?Promise.resolve():this.refetchQueries({...h,type:(h==null?void 0:h.refetchType)??(h==null?void 0:h.type)??"active"},d)))}refetchQueries(h,d={}){const g={...d,cancelRefetch:d.cancelRefetch??!0},b=notifyManager.batch(()=>cr(this,Dr).findAll(h).filter(_=>!_.isDisabled()&&!_.isStatic()).map(_=>{let $=_.fetch(void 0,g);return g.throwOnError||($=$.catch(noop$3)),_.state.fetchStatus==="paused"?Promise.resolve():$}));return Promise.all(b).then(noop$3)}fetchQuery(h){const d=this.defaultQueryOptions(h);d.retry===void 0&&(d.retry=!1);const g=cr(this,Dr).build(this,d);return g.isStaleByTime(resolveStaleTime(d.staleTime,g))?g.fetch(d):Promise.resolve(g.state.data)}prefetchQuery(h){return this.fetchQuery(h).then(noop$3).catch(noop$3)}fetchInfiniteQuery(h){return h.behavior=infiniteQueryBehavior(h.pages),this.fetchQuery(h)}prefetchInfiniteQuery(h){return this.fetchInfiniteQuery(h).then(noop$3).catch(noop$3)}ensureInfiniteQueryData(h){return h.behavior=infiniteQueryBehavior(h.pages),this.ensureQueryData(h)}resumePausedMutations(){return onlineManager.isOnline()?cr(this,en).resumePausedMutations():Promise.resolve()}getQueryCache(){return cr(this,Dr)}getMutationCache(){return cr(this,en)}getDefaultOptions(){return cr(this,tn)}setDefaultOptions(h){Sr(this,tn,h)}setQueryDefaults(h,d){cr(this,wn).set(hashKey(h),{queryKey:h,defaultOptions:d})}getQueryDefaults(h){const d=[...cr(this,wn).values()],g={};return d.forEach(b=>{partialMatchKey(h,b.queryKey)&&Object.assign(g,b.defaultOptions)}),g}setMutationDefaults(h,d){cr(this,En).set(hashKey(h),{mutationKey:h,defaultOptions:d})}getMutationDefaults(h){const d=[...cr(this,En).values()],g={};return d.forEach(b=>{partialMatchKey(h,b.mutationKey)&&Object.assign(g,b.defaultOptions)}),g}defaultQueryOptions(h){if(h._defaulted)return h;const d={...cr(this,tn).queries,...this.getQueryDefaults(h.queryKey),...h,_defaulted:!0};return d.queryHash||(d.queryHash=hashQueryKeyByOptions(d.queryKey,d)),d.refetchOnReconnect===void 0&&(d.refetchOnReconnect=d.networkMode!=="always"),d.throwOnError===void 0&&(d.throwOnError=!!d.suspense),!d.networkMode&&d.persister&&(d.networkMode="offlineFirst"),d.queryFn===skipToken&&(d.enabled=!1),d}defaultMutationOptions(h){return h!=null&&h._defaulted?h:{...cr(this,tn).mutations,...(h==null?void 0:h.mutationKey)&&this.getMutationDefaults(h.mutationKey),...h,_defaulted:!0}}clear(){cr(this,Dr).clear(),cr(this,en).clear()}},Dr=new WeakMap,en=new WeakMap,tn=new WeakMap,wn=new WeakMap,En=new WeakMap,rn=new WeakMap,_n=new WeakMap,xn=new WeakMap,Hn),QueryClientContext=reactExports.createContext(void 0),QueryClientProvider=({client:h,children:d})=>(reactExports.useEffect(()=>(h.mount(),()=>{h.unmount()}),[h]),jsxRuntimeExports.jsx(QueryClientContext.Provider,{value:h,children:d}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(h){for(var d=1;d<arguments.length;d++){var g=arguments[d];for(var b in g)Object.prototype.hasOwnProperty.call(g,b)&&(h[b]=g[b])}return h},_extends$1.apply(this,arguments)}var Action;(function(h){h.Pop="POP",h.Push="PUSH",h.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createBrowserHistory(h){h===void 0&&(h={});function d(b,_){let{pathname:$,search:j,hash:_e}=b.location;return createLocation("",{pathname:$,search:j,hash:_e},_.state&&_.state.usr||null,_.state&&_.state.key||"default")}function g(b,_){return typeof _=="string"?_:createPath(_)}return getUrlBasedHistory(d,g,null,h)}function invariant(h,d){if(h===!1||h===null||typeof h>"u")throw new Error(d)}function warning(h,d){if(!h){typeof console<"u"&&console.warn(d);try{throw new Error(d)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(h,d){return{usr:h.state,key:h.key,idx:d}}function createLocation(h,d,g,b){return g===void 0&&(g=null),_extends$1({pathname:typeof h=="string"?h:h.pathname,search:"",hash:""},typeof d=="string"?parsePath(d):d,{state:g,key:d&&d.key||b||createKey()})}function createPath(h){let{pathname:d="/",search:g="",hash:b=""}=h;return g&&g!=="?"&&(d+=g.charAt(0)==="?"?g:"?"+g),b&&b!=="#"&&(d+=b.charAt(0)==="#"?b:"#"+b),d}function parsePath(h){let d={};if(h){let g=h.indexOf("#");g>=0&&(d.hash=h.substr(g),h=h.substr(0,g));let b=h.indexOf("?");b>=0&&(d.search=h.substr(b),h=h.substr(0,b)),h&&(d.pathname=h)}return d}function getUrlBasedHistory(h,d,g,b){b===void 0&&(b={});let{window:_=document.defaultView,v5Compat:$=!1}=b,j=_.history,_e=Action.Pop,et=null,rt=nt();rt==null&&(rt=0,j.replaceState(_extends$1({},j.state,{idx:rt}),""));function nt(){return(j.state||{idx:null}).idx}function st(){_e=Action.Pop;let ct=nt(),lt=ct==null?null:ct-rt;rt=ct,et&&et({action:_e,location:ot.location,delta:lt})}function at(ct,lt){_e=Action.Push;let ut=createLocation(ot.location,ct,lt);rt=nt()+1;let ft=getHistoryState(ut,rt),Et=ot.createHref(ut);try{j.pushState(ft,"",Et)}catch(Tt){if(Tt instanceof DOMException&&Tt.name==="DataCloneError")throw Tt;_.location.assign(Et)}$&&et&&et({action:_e,location:ot.location,delta:1})}function it(ct,lt){_e=Action.Replace;let ut=createLocation(ot.location,ct,lt);rt=nt();let ft=getHistoryState(ut,rt),Et=ot.createHref(ut);j.replaceState(ft,"",Et),$&&et&&et({action:_e,location:ot.location,delta:0})}function dt(ct){let lt=_.location.origin!=="null"?_.location.origin:_.location.href,ut=typeof ct=="string"?ct:createPath(ct);return ut=ut.replace(/ $/,"%20"),invariant(lt,"No window.location.(origin|href) available to create URL for href: "+ut),new URL(ut,lt)}let ot={get action(){return _e},get location(){return h(_,j)},listen(ct){if(et)throw new Error("A history only accepts one active listener");return _.addEventListener(PopStateEventType,st),et=ct,()=>{_.removeEventListener(PopStateEventType,st),et=null}},createHref(ct){return d(_,ct)},createURL:dt,encodeLocation(ct){let lt=dt(ct);return{pathname:lt.pathname,search:lt.search,hash:lt.hash}},push:at,replace:it,go(ct){return j.go(ct)}};return ot}var ResultType;(function(h){h.data="data",h.deferred="deferred",h.redirect="redirect",h.error="error"})(ResultType||(ResultType={}));function matchRoutes(h,d,g){return g===void 0&&(g="/"),matchRoutesImpl(h,d,g,!1)}function matchRoutesImpl(h,d,g,b){let _=typeof d=="string"?parsePath(d):d,$=stripBasename(_.pathname||"/",g);if($==null)return null;let j=flattenRoutes(h);rankRouteBranches(j);let _e=null;for(let et=0;_e==null&&et<j.length;++et){let rt=decodePath($);_e=matchRouteBranch(j[et],rt,b)}return _e}function flattenRoutes(h,d,g,b){d===void 0&&(d=[]),g===void 0&&(g=[]),b===void 0&&(b="");let _=($,j,_e)=>{let et={relativePath:_e===void 0?$.path||"":_e,caseSensitive:$.caseSensitive===!0,childrenIndex:j,route:$};et.relativePath.startsWith("/")&&(invariant(et.relativePath.startsWith(b),'Absolute route path "'+et.relativePath+'" nested under path '+('"'+b+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),et.relativePath=et.relativePath.slice(b.length));let rt=joinPaths([b,et.relativePath]),nt=g.concat(et);$.children&&$.children.length>0&&(invariant($.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+rt+'".')),flattenRoutes($.children,d,nt,rt)),!($.path==null&&!$.index)&&d.push({path:rt,score:computeScore(rt,$.index),routesMeta:nt})};return h.forEach(($,j)=>{var _e;if($.path===""||!((_e=$.path)!=null&&_e.includes("?")))_($,j);else for(let et of explodeOptionalSegments($.path))_($,j,et)}),d}function explodeOptionalSegments(h){let d=h.split("/");if(d.length===0)return[];let[g,...b]=d,_=g.endsWith("?"),$=g.replace(/\?$/,"");if(b.length===0)return _?[$,""]:[$];let j=explodeOptionalSegments(b.join("/")),_e=[];return _e.push(...j.map(et=>et===""?$:[$,et].join("/"))),_&&_e.push(...j),_e.map(et=>h.startsWith("/")&&et===""?"/":et)}function rankRouteBranches(h){h.sort((d,g)=>d.score!==g.score?g.score-d.score:compareIndexes(d.routesMeta.map(b=>b.childrenIndex),g.routesMeta.map(b=>b.childrenIndex)))}const paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=h=>h==="*";function computeScore(h,d){let g=h.split("/"),b=g.length;return g.some(isSplat)&&(b+=splatPenalty),d&&(b+=indexRouteValue),g.filter(_=>!isSplat(_)).reduce((_,$)=>_+(paramRe.test($)?dynamicSegmentValue:$===""?emptySegmentValue:staticSegmentValue),b)}function compareIndexes(h,d){return h.length===d.length&&h.slice(0,-1).every((b,_)=>b===d[_])?h[h.length-1]-d[d.length-1]:0}function matchRouteBranch(h,d,g){let{routesMeta:b}=h,_={},$="/",j=[];for(let _e=0;_e<b.length;++_e){let et=b[_e],rt=_e===b.length-1,nt=$==="/"?d:d.slice($.length)||"/",st=matchPath({path:et.relativePath,caseSensitive:et.caseSensitive,end:rt},nt),at=et.route;if(!st&&rt&&g&&!b[b.length-1].route.index&&(st=matchPath({path:et.relativePath,caseSensitive:et.caseSensitive,end:!1},nt)),!st)return null;Object.assign(_,st.params),j.push({params:_,pathname:joinPaths([$,st.pathname]),pathnameBase:normalizePathname(joinPaths([$,st.pathnameBase])),route:at}),st.pathnameBase!=="/"&&($=joinPaths([$,st.pathnameBase]))}return j}function matchPath(h,d){typeof h=="string"&&(h={path:h,caseSensitive:!1,end:!0});let[g,b]=compilePath(h.path,h.caseSensitive,h.end),_=d.match(g);if(!_)return null;let $=_[0],j=$.replace(/(.)\/+$/,"$1"),_e=_.slice(1);return{params:b.reduce((rt,nt,st)=>{let{paramName:at,isOptional:it}=nt;if(at==="*"){let ot=_e[st]||"";j=$.slice(0,$.length-ot.length).replace(/(.)\/+$/,"$1")}const dt=_e[st];return it&&!dt?rt[at]=void 0:rt[at]=(dt||"").replace(/%2F/g,"/"),rt},{}),pathname:$,pathnameBase:j,pattern:h}}function compilePath(h,d,g){d===void 0&&(d=!1),g===void 0&&(g=!0),warning(h==="*"||!h.endsWith("*")||h.endsWith("/*"),'Route path "'+h+'" will be treated as if it were '+('"'+h.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+h.replace(/\*$/,"/*")+'".'));let b=[],_="^"+h.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(j,_e,et)=>(b.push({paramName:_e,isOptional:et!=null}),et?"/?([^\\/]+)?":"/([^\\/]+)"));return h.endsWith("*")?(b.push({paramName:"*"}),_+=h==="*"||h==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):g?_+="\\/*$":h!==""&&h!=="/"&&(_+="(?:(?=\\/|$))"),[new RegExp(_,d?void 0:"i"),b]}function decodePath(h){try{return h.split("/").map(d=>decodeURIComponent(d).replace(/\//g,"%2F")).join("/")}catch(d){return warning(!1,'The URL path "'+h+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+d+").")),h}}function stripBasename(h,d){if(d==="/")return h;if(!h.toLowerCase().startsWith(d.toLowerCase()))return null;let g=d.endsWith("/")?d.length-1:d.length,b=h.charAt(g);return b&&b!=="/"?null:h.slice(g)||"/"}const joinPaths=h=>h.join("/").replace(/\/\/+/g,"/"),normalizePathname=h=>h.replace(/\/+$/,"").replace(/^\/*/,"/");function isRouteErrorResponse(h){return h!=null&&typeof h.status=="number"&&typeof h.statusText=="string"&&typeof h.internal=="boolean"&&"data"in h}const validMutationMethodsArr=["post","put","patch","delete"];new Set(validMutationMethodsArr);const validRequestMethodsArr=["get",...validMutationMethodsArr];new Set(validRequestMethodsArr);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends(){return _extends=Object.assign?Object.assign.bind():function(h){for(var d=1;d<arguments.length;d++){var g=arguments[d];for(var b in g)Object.prototype.hasOwnProperty.call(g,b)&&(h[b]=g[b])}return h},_extends.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant(!1),reactExports.useContext(LocationContext).location}function useRoutes(h,d){return useRoutesImpl(h,d)}function useRoutesImpl(h,d,g,b){useInRouterContext()||invariant(!1);let{navigator:_}=reactExports.useContext(NavigationContext),{matches:$}=reactExports.useContext(RouteContext),j=$[$.length-1],_e=j?j.params:{};j&&j.pathname;let et=j?j.pathnameBase:"/";j&&j.route;let rt=useLocation(),nt;if(d){var st;let ct=typeof d=="string"?parsePath(d):d;et==="/"||(st=ct.pathname)!=null&&st.startsWith(et)||invariant(!1),nt=ct}else nt=rt;let at=nt.pathname||"/",it=at;if(et!=="/"){let ct=et.replace(/^\//,"").split("/");it="/"+at.replace(/^\//,"").split("/").slice(ct.length).join("/")}let dt=matchRoutes(h,{pathname:it}),ot=_renderMatches(dt&&dt.map(ct=>Object.assign({},ct,{params:Object.assign({},_e,ct.params),pathname:joinPaths([et,_.encodeLocation?_.encodeLocation(ct.pathname).pathname:ct.pathname]),pathnameBase:ct.pathnameBase==="/"?et:joinPaths([et,_.encodeLocation?_.encodeLocation(ct.pathnameBase).pathname:ct.pathnameBase])})),$,g,b);return d&&ot?reactExports.createElement(LocationContext.Provider,{value:{location:_extends({pathname:"/",search:"",hash:"",state:null,key:"default"},nt),navigationType:Action.Pop}},ot):ot}function DefaultErrorComponent(){let h=useRouteError(),d=isRouteErrorResponse(h)?h.status+" "+h.statusText:h instanceof Error?h.message:JSON.stringify(h),g=h instanceof Error?h.stack:null,_={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},d),g?reactExports.createElement("pre",{style:_},g):null,null)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(d){super(d),this.state={location:d.location,revalidation:d.revalidation,error:d.error}}static getDerivedStateFromError(d){return{error:d}}static getDerivedStateFromProps(d,g){return g.location!==d.location||g.revalidation!=="idle"&&d.revalidation==="idle"?{error:d.error,location:d.location,revalidation:d.revalidation}:{error:d.error!==void 0?d.error:g.error,location:g.location,revalidation:d.revalidation||g.revalidation}}componentDidCatch(d,g){console.error("React Router caught the following error during render",d,g)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(h){let{routeContext:d,match:g,children:b}=h,_=reactExports.useContext(DataRouterContext);return _&&_.static&&_.staticContext&&(g.route.errorElement||g.route.ErrorBoundary)&&(_.staticContext._deepestRenderedBoundaryId=g.route.id),reactExports.createElement(RouteContext.Provider,{value:d},b)}function _renderMatches(h,d,g,b){var _;if(d===void 0&&(d=[]),g===void 0&&(g=null),b===void 0&&(b=null),h==null){var $;if(!g)return null;if(g.errors)h=g.matches;else if(($=b)!=null&&$.v7_partialHydration&&d.length===0&&!g.initialized&&g.matches.length>0)h=g.matches;else return null}let j=h,_e=(_=g)==null?void 0:_.errors;if(_e!=null){let nt=j.findIndex(st=>st.route.id&&(_e==null?void 0:_e[st.route.id])!==void 0);nt>=0||invariant(!1),j=j.slice(0,Math.min(j.length,nt+1))}let et=!1,rt=-1;if(g&&b&&b.v7_partialHydration)for(let nt=0;nt<j.length;nt++){let st=j[nt];if((st.route.HydrateFallback||st.route.hydrateFallbackElement)&&(rt=nt),st.route.id){let{loaderData:at,errors:it}=g,dt=st.route.loader&&at[st.route.id]===void 0&&(!it||it[st.route.id]===void 0);if(st.route.lazy||dt){et=!0,rt>=0?j=j.slice(0,rt+1):j=[j[0]];break}}}return j.reduceRight((nt,st,at)=>{let it,dt=!1,ot=null,ct=null;g&&(it=_e&&st.route.id?_e[st.route.id]:void 0,ot=st.route.errorElement||defaultErrorElement,et&&(rt<0&&at===0?(dt=!0,ct=null):rt===at&&(dt=!0,ct=st.route.hydrateFallbackElement||null)));let lt=d.concat(j.slice(0,at+1)),ut=()=>{let ft;return it?ft=ot:dt?ft=ct:st.route.Component?ft=reactExports.createElement(st.route.Component,null):st.route.element?ft=st.route.element:ft=nt,reactExports.createElement(RenderedRoute,{match:st,routeContext:{outlet:nt,matches:lt,isDataRoute:g!=null},children:ft})};return g&&(st.route.ErrorBoundary||st.route.errorElement||at===0)?reactExports.createElement(RenderErrorBoundary,{location:g.location,revalidation:g.revalidation,component:ot,error:it,children:ut(),routeContext:{outlet:null,matches:lt,isDataRoute:!0}}):ut()},null)}var DataRouterStateHook$1=function(h){return h.UseBlocker="useBlocker",h.UseLoaderData="useLoaderData",h.UseActionData="useActionData",h.UseRouteError="useRouteError",h.UseNavigation="useNavigation",h.UseRouteLoaderData="useRouteLoaderData",h.UseMatches="useMatches",h.UseRevalidator="useRevalidator",h.UseNavigateStable="useNavigate",h.UseRouteId="useRouteId",h}(DataRouterStateHook$1||{});function useDataRouterState(h){let d=reactExports.useContext(DataRouterStateContext);return d||invariant(!1),d}function useRouteContext(h){let d=reactExports.useContext(RouteContext);return d||invariant(!1),d}function useCurrentRouteId(h){let d=useRouteContext(),g=d.matches[d.matches.length-1];return g.route.id||invariant(!1),g.route.id}function useRouteError(){var h;let d=reactExports.useContext(RouteErrorContext),g=useDataRouterState(DataRouterStateHook$1.UseRouteError),b=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return d!==void 0?d:(h=g.errors)==null?void 0:h[b]}function logV6DeprecationWarnings(h,d){h==null||h.v7_startTransition,h==null||h.v7_relativeSplatPath}function Route(h){invariant(!1)}function Router(h){let{basename:d="/",children:g=null,location:b,navigationType:_=Action.Pop,navigator:$,static:j=!1,future:_e}=h;useInRouterContext()&&invariant(!1);let et=d.replace(/^\/*/,"/"),rt=reactExports.useMemo(()=>({basename:et,navigator:$,static:j,future:_extends({v7_relativeSplatPath:!1},_e)}),[et,_e,$,j]);typeof b=="string"&&(b=parsePath(b));let{pathname:nt="/",search:st="",hash:at="",state:it=null,key:dt="default"}=b,ot=reactExports.useMemo(()=>{let ct=stripBasename(nt,et);return ct==null?null:{location:{pathname:ct,search:st,hash:at,state:it,key:dt},navigationType:_}},[et,nt,st,at,it,dt,_]);return ot==null?null:reactExports.createElement(NavigationContext.Provider,{value:rt},reactExports.createElement(LocationContext.Provider,{children:g,value:ot}))}function Routes(h){let{children:d,location:g}=h;return useRoutes(createRoutesFromChildren(d),g)}new Promise(()=>{});function createRoutesFromChildren(h,d){d===void 0&&(d=[]);let g=[];return reactExports.Children.forEach(h,(b,_)=>{if(!reactExports.isValidElement(b))return;let $=[...d,_];if(b.type===reactExports.Fragment){g.push.apply(g,createRoutesFromChildren(b.props.children,$));return}b.type!==Route&&invariant(!1),!b.props.index||!b.props.children||invariant(!1);let j={id:b.props.id||$.join("-"),caseSensitive:b.props.caseSensitive,element:b.props.element,Component:b.props.Component,index:b.props.index,path:b.props.path,loader:b.props.loader,action:b.props.action,errorElement:b.props.errorElement,ErrorBoundary:b.props.ErrorBoundary,hasErrorBoundary:b.props.ErrorBoundary!=null||b.props.errorElement!=null,shouldRevalidate:b.props.shouldRevalidate,handle:b.props.handle,lazy:b.props.lazy};b.props.children&&(j.children=createRoutesFromChildren(b.props.children,$)),g.push(j)}),g}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const REACT_ROUTER_VERSION="6";try{window.__reactRouterVersion=REACT_ROUTER_VERSION}catch{}const START_TRANSITION="startTransition",startTransitionImpl=React[START_TRANSITION];function BrowserRouter(h){let{basename:d,children:g,future:b,window:_}=h,$=reactExports.useRef();$.current==null&&($.current=createBrowserHistory({window:_,v5Compat:!0}));let j=$.current,[_e,et]=reactExports.useState({action:j.action,location:j.location}),{v7_startTransition:rt}=b||{},nt=reactExports.useCallback(st=>{rt&&startTransitionImpl?startTransitionImpl(()=>et(st)):et(st)},[et,rt]);return reactExports.useLayoutEffect(()=>j.listen(nt),[j,nt]),reactExports.useEffect(()=>logV6DeprecationWarnings(b),[b]),reactExports.createElement(Router,{basename:d,children:g,location:_e.location,navigationType:_e.action,navigator:j,future:b})}var DataRouterHook;(function(h){h.UseScrollRestoration="useScrollRestoration",h.UseSubmit="useSubmit",h.UseSubmitFetcher="useSubmitFetcher",h.UseFetcher="useFetcher",h.useViewTransitionState="useViewTransitionState"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(h){h.UseFetcher="useFetcher",h.UseFetchers="useFetchers",h.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function usePrevious(h){const d=reactExports.useRef({value:h,previous:h});return reactExports.useMemo(()=>(d.current.value!==h&&(d.current.previous=d.current.value,d.current.value=h),d.current.previous),[h])}var SWITCH_NAME="Switch",[createSwitchContext,createSwitchScope]=createContextScope(SWITCH_NAME),[SwitchProvider,useSwitchContext]=createSwitchContext(SWITCH_NAME),Switch$1=reactExports.forwardRef((h,d)=>{const{__scopeSwitch:g,name:b,checked:_,defaultChecked:$,required:j,disabled:_e,value:et="on",onCheckedChange:rt,form:nt,...st}=h,[at,it]=reactExports.useState(null),dt=useComposedRefs(d,ft=>it(ft)),ot=reactExports.useRef(!1),ct=at?nt||!!at.closest("form"):!0,[lt,ut]=useControllableState({prop:_,defaultProp:$??!1,onChange:rt,caller:SWITCH_NAME});return jsxRuntimeExports.jsxs(SwitchProvider,{scope:g,checked:lt,disabled:_e,children:[jsxRuntimeExports.jsx(Primitive.button,{type:"button",role:"switch","aria-checked":lt,"aria-required":j,"data-state":getState$1(lt),"data-disabled":_e?"":void 0,disabled:_e,value:et,...st,ref:dt,onClick:composeEventHandlers(h.onClick,ft=>{ut(Et=>!Et),ct&&(ot.current=ft.isPropagationStopped(),ot.current||ft.stopPropagation())})}),ct&&jsxRuntimeExports.jsx(SwitchBubbleInput,{control:at,bubbles:!ot.current,name:b,value:et,checked:lt,required:j,disabled:_e,form:nt,style:{transform:"translateX(-100%)"}})]})});Switch$1.displayName=SWITCH_NAME;var THUMB_NAME="SwitchThumb",SwitchThumb=reactExports.forwardRef((h,d)=>{const{__scopeSwitch:g,...b}=h,_=useSwitchContext(THUMB_NAME,g);return jsxRuntimeExports.jsx(Primitive.span,{"data-state":getState$1(_.checked),"data-disabled":_.disabled?"":void 0,...b,ref:d})});SwitchThumb.displayName=THUMB_NAME;var BUBBLE_INPUT_NAME="SwitchBubbleInput",SwitchBubbleInput=reactExports.forwardRef(({__scopeSwitch:h,control:d,checked:g,bubbles:b=!0,..._},$)=>{const j=reactExports.useRef(null),_e=useComposedRefs(j,$),et=usePrevious(g),rt=useSize(d);return reactExports.useEffect(()=>{const nt=j.current;if(!nt)return;const st=window.HTMLInputElement.prototype,it=Object.getOwnPropertyDescriptor(st,"checked").set;if(et!==g&&it){const dt=new Event("click",{bubbles:b});it.call(nt,g),nt.dispatchEvent(dt)}},[et,g,b]),jsxRuntimeExports.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:g,..._,tabIndex:-1,ref:_e,style:{..._.style,...rt,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});SwitchBubbleInput.displayName=BUBBLE_INPUT_NAME;function getState$1(h){return h?"checked":"unchecked"}var Root$2=Switch$1,Thumb=SwitchThumb;const Switch=reactExports.forwardRef(({className:h,...d},g)=>jsxRuntimeExports.jsx(Root$2,{className:cn("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",h),...d,ref:g,children:jsxRuntimeExports.jsx(Thumb,{className:cn("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Switch.displayName=Root$2.displayName;var AUTOFOCUS_ON_MOUNT="focusScope.autoFocusOnMount",AUTOFOCUS_ON_UNMOUNT="focusScope.autoFocusOnUnmount",EVENT_OPTIONS={bubbles:!1,cancelable:!0},FOCUS_SCOPE_NAME="FocusScope",FocusScope=reactExports.forwardRef((h,d)=>{const{loop:g=!1,trapped:b=!1,onMountAutoFocus:_,onUnmountAutoFocus:$,...j}=h,[_e,et]=reactExports.useState(null),rt=useCallbackRef$1(_),nt=useCallbackRef$1($),st=reactExports.useRef(null),at=useComposedRefs(d,ot=>et(ot)),it=reactExports.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;reactExports.useEffect(()=>{if(b){let ot=function(ft){if(it.paused||!_e)return;const Et=ft.target;_e.contains(Et)?st.current=Et:focus(st.current,{select:!0})},ct=function(ft){if(it.paused||!_e)return;const Et=ft.relatedTarget;Et!==null&&(_e.contains(Et)||focus(st.current,{select:!0}))},lt=function(ft){if(document.activeElement===document.body)for(const Tt of ft)Tt.removedNodes.length>0&&focus(_e)};document.addEventListener("focusin",ot),document.addEventListener("focusout",ct);const ut=new MutationObserver(lt);return _e&&ut.observe(_e,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",ot),document.removeEventListener("focusout",ct),ut.disconnect()}}},[b,_e,it.paused]),reactExports.useEffect(()=>{if(_e){focusScopesStack.add(it);const ot=document.activeElement;if(!_e.contains(ot)){const lt=new CustomEvent(AUTOFOCUS_ON_MOUNT,EVENT_OPTIONS);_e.addEventListener(AUTOFOCUS_ON_MOUNT,rt),_e.dispatchEvent(lt),lt.defaultPrevented||(focusFirst(removeLinks(getTabbableCandidates(_e)),{select:!0}),document.activeElement===ot&&focus(_e))}return()=>{_e.removeEventListener(AUTOFOCUS_ON_MOUNT,rt),setTimeout(()=>{const lt=new CustomEvent(AUTOFOCUS_ON_UNMOUNT,EVENT_OPTIONS);_e.addEventListener(AUTOFOCUS_ON_UNMOUNT,nt),_e.dispatchEvent(lt),lt.defaultPrevented||focus(ot??document.body,{select:!0}),_e.removeEventListener(AUTOFOCUS_ON_UNMOUNT,nt),focusScopesStack.remove(it)},0)}}},[_e,rt,nt,it]);const dt=reactExports.useCallback(ot=>{if(!g&&!b||it.paused)return;const ct=ot.key==="Tab"&&!ot.altKey&&!ot.ctrlKey&&!ot.metaKey,lt=document.activeElement;if(ct&&lt){const ut=ot.currentTarget,[ft,Et]=getTabbableEdges(ut);ft&&Et?!ot.shiftKey&&lt===Et?(ot.preventDefault(),g&&focus(ft,{select:!0})):ot.shiftKey&&lt===ft&&(ot.preventDefault(),g&&focus(Et,{select:!0})):lt===ut&&ot.preventDefault()}},[g,b,it.paused]);return jsxRuntimeExports.jsx(Primitive.div,{tabIndex:-1,...j,ref:at,onKeyDown:dt})});FocusScope.displayName=FOCUS_SCOPE_NAME;function focusFirst(h,{select:d=!1}={}){const g=document.activeElement;for(const b of h)if(focus(b,{select:d}),document.activeElement!==g)return}function getTabbableEdges(h){const d=getTabbableCandidates(h),g=findVisible(d,h),b=findVisible(d.reverse(),h);return[g,b]}function getTabbableCandidates(h){const d=[],g=document.createTreeWalker(h,NodeFilter.SHOW_ELEMENT,{acceptNode:b=>{const _=b.tagName==="INPUT"&&b.type==="hidden";return b.disabled||b.hidden||_?NodeFilter.FILTER_SKIP:b.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;g.nextNode();)d.push(g.currentNode);return d}function findVisible(h,d){for(const g of h)if(!isHidden(g,{upTo:d}))return g}function isHidden(h,{upTo:d}){if(getComputedStyle(h).visibility==="hidden")return!0;for(;h;){if(d!==void 0&&h===d)return!1;if(getComputedStyle(h).display==="none")return!0;h=h.parentElement}return!1}function isSelectableInput(h){return h instanceof HTMLInputElement&&"select"in h}function focus(h,{select:d=!1}={}){if(h&&h.focus){const g=document.activeElement;h.focus({preventScroll:!0}),h!==g&&isSelectableInput(h)&&d&&h.select()}}var focusScopesStack=createFocusScopesStack();function createFocusScopesStack(){let h=[];return{add(d){const g=h[0];d!==g&&(g==null||g.pause()),h=arrayRemove(h,d),h.unshift(d)},remove(d){var g;h=arrayRemove(h,d),(g=h[0])==null||g.resume()}}}function arrayRemove(h,d){const g=[...h],b=g.indexOf(d);return b!==-1&&g.splice(b,1),g}function removeLinks(h){return h.filter(d=>d.tagName!=="A")}var count=0;function useFocusGuards(){reactExports.useEffect(()=>{const h=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",h[0]??createFocusGuard()),document.body.insertAdjacentElement("beforeend",h[1]??createFocusGuard()),count++,()=>{count===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(d=>d.remove()),count--}},[])}function createFocusGuard(){const h=document.createElement("span");return h.setAttribute("data-radix-focus-guard",""),h.tabIndex=0,h.style.outline="none",h.style.opacity="0",h.style.position="fixed",h.style.pointerEvents="none",h}var __assign=function(){return __assign=Object.assign||function(d){for(var g,b=1,_=arguments.length;b<_;b++){g=arguments[b];for(var $ in g)Object.prototype.hasOwnProperty.call(g,$)&&(d[$]=g[$])}return d},__assign.apply(this,arguments)};function __rest(h,d){var g={};for(var b in h)Object.prototype.hasOwnProperty.call(h,b)&&d.indexOf(b)<0&&(g[b]=h[b]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function")for(var _=0,b=Object.getOwnPropertySymbols(h);_<b.length;_++)d.indexOf(b[_])<0&&Object.prototype.propertyIsEnumerable.call(h,b[_])&&(g[b[_]]=h[b[_]]);return g}function __awaiter(h,d,g,b){function _($){return $ instanceof g?$:new g(function(j){j($)})}return new(g||(g=Promise))(function($,j){function _e(nt){try{rt(b.next(nt))}catch(st){j(st)}}function et(nt){try{rt(b.throw(nt))}catch(st){j(st)}}function rt(nt){nt.done?$(nt.value):_(nt.value).then(_e,et)}rt((b=b.apply(h,d||[])).next())})}function __spreadArray(h,d,g){if(g||arguments.length===2)for(var b=0,_=d.length,$;b<_;b++)($||!(b in d))&&($||($=Array.prototype.slice.call(d,0,b)),$[b]=d[b]);return h.concat($||Array.prototype.slice.call(d))}typeof SuppressedError=="function"&&SuppressedError;var zeroRightClassName="right-scroll-bar-position",fullWidthClassName="width-before-scroll-bar",noScrollbarsClassName="with-scroll-bars-hidden",removedBarSizeVariable="--removed-body-scroll-bar-size";function assignRef(h,d){return typeof h=="function"?h(d):h&&(h.current=d),h}function useCallbackRef(h,d){var g=reactExports.useState(function(){return{value:h,callback:d,facade:{get current(){return g.value},set current(b){var _=g.value;_!==b&&(g.value=b,g.callback(b,_))}}}})[0];return g.callback=d,g.facade}var useIsomorphicLayoutEffect$1=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,currentValues=new WeakMap;function useMergeRefs(h,d){var g=useCallbackRef(null,function(b){return h.forEach(function(_){return assignRef(_,b)})});return useIsomorphicLayoutEffect$1(function(){var b=currentValues.get(g);if(b){var _=new Set(b),$=new Set(h),j=g.current;_.forEach(function(_e){$.has(_e)||assignRef(_e,null)}),$.forEach(function(_e){_.has(_e)||assignRef(_e,j)})}currentValues.set(g,h)},[h]),g}function ItoI(h){return h}function innerCreateMedium(h,d){d===void 0&&(d=ItoI);var g=[],b=!1,_={read:function(){if(b)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return g.length?g[g.length-1]:h},useMedium:function($){var j=d($,b);return g.push(j),function(){g=g.filter(function(_e){return _e!==j})}},assignSyncMedium:function($){for(b=!0;g.length;){var j=g;g=[],j.forEach($)}g={push:function(_e){return $(_e)},filter:function(){return g}}},assignMedium:function($){b=!0;var j=[];if(g.length){var _e=g;g=[],_e.forEach($),j=g}var et=function(){var nt=j;j=[],nt.forEach($)},rt=function(){return Promise.resolve().then(et)};rt(),g={push:function(nt){j.push(nt),rt()},filter:function(nt){return j=j.filter(nt),g}}}};return _}function createSidecarMedium(h){h===void 0&&(h={});var d=innerCreateMedium(null);return d.options=__assign({async:!0,ssr:!1},h),d}var SideCar$1=function(h){var d=h.sideCar,g=__rest(h,["sideCar"]);if(!d)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var b=d.read();if(!b)throw new Error("Sidecar medium not found");return reactExports.createElement(b,__assign({},g))};SideCar$1.isSideCarExport=!0;function exportSidecar(h,d){return h.useMedium(d),SideCar$1}var effectCar=createSidecarMedium(),nothing=function(){},RemoveScroll=reactExports.forwardRef(function(h,d){var g=reactExports.useRef(null),b=reactExports.useState({onScrollCapture:nothing,onWheelCapture:nothing,onTouchMoveCapture:nothing}),_=b[0],$=b[1],j=h.forwardProps,_e=h.children,et=h.className,rt=h.removeScrollBar,nt=h.enabled,st=h.shards,at=h.sideCar,it=h.noRelative,dt=h.noIsolation,ot=h.inert,ct=h.allowPinchZoom,lt=h.as,ut=lt===void 0?"div":lt,ft=h.gapMode,Et=__rest(h,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),Tt=at,St=useMergeRefs([g,d]),ht=__assign(__assign({},Et),_);return reactExports.createElement(reactExports.Fragment,null,nt&&reactExports.createElement(Tt,{sideCar:effectCar,removeScrollBar:rt,shards:st,noRelative:it,noIsolation:dt,inert:ot,setCallbacks:$,allowPinchZoom:!!ct,lockRef:g,gapMode:ft}),j?reactExports.cloneElement(reactExports.Children.only(_e),__assign(__assign({},ht),{ref:St})):reactExports.createElement(ut,__assign({},ht,{className:et,ref:St}),_e))});RemoveScroll.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};RemoveScroll.classNames={fullWidth:fullWidthClassName,zeroRight:zeroRightClassName};var getNonce=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function makeStyleTag(){if(!document)return null;var h=document.createElement("style");h.type="text/css";var d=getNonce();return d&&h.setAttribute("nonce",d),h}function injectStyles(h,d){h.styleSheet?h.styleSheet.cssText=d:h.appendChild(document.createTextNode(d))}function insertStyleTag(h){var d=document.head||document.getElementsByTagName("head")[0];d.appendChild(h)}var stylesheetSingleton=function(){var h=0,d=null;return{add:function(g){h==0&&(d=makeStyleTag())&&(injectStyles(d,g),insertStyleTag(d)),h++},remove:function(){h--,!h&&d&&(d.parentNode&&d.parentNode.removeChild(d),d=null)}}},styleHookSingleton=function(){var h=stylesheetSingleton();return function(d,g){reactExports.useEffect(function(){return h.add(d),function(){h.remove()}},[d&&g])}},styleSingleton=function(){var h=styleHookSingleton(),d=function(g){var b=g.styles,_=g.dynamic;return h(b,_),null};return d},zeroGap={left:0,top:0,right:0,gap:0},parse$3=function(h){return parseInt(h||"",10)||0},getOffset=function(h){var d=window.getComputedStyle(document.body),g=d[h==="padding"?"paddingLeft":"marginLeft"],b=d[h==="padding"?"paddingTop":"marginTop"],_=d[h==="padding"?"paddingRight":"marginRight"];return[parse$3(g),parse$3(b),parse$3(_)]},getGapWidth=function(h){if(h===void 0&&(h="margin"),typeof window>"u")return zeroGap;var d=getOffset(h),g=document.documentElement.clientWidth,b=window.innerWidth;return{left:d[0],top:d[1],right:d[2],gap:Math.max(0,b-g+d[2]-d[0])}},Style=styleSingleton(),lockAttribute="data-scroll-locked",getStyles=function(h,d,g,b){var _=h.left,$=h.top,j=h.right,_e=h.gap;return g===void 0&&(g="margin"),`
  .`.concat(noScrollbarsClassName,` {
   overflow: hidden `).concat(b,`;
   padding-right: `).concat(_e,"px ").concat(b,`;
  }
  body[`).concat(lockAttribute,`] {
    overflow: hidden `).concat(b,`;
    overscroll-behavior: contain;
    `).concat([d&&"position: relative ".concat(b,";"),g==="margin"&&`
    padding-left: `.concat(_,`px;
    padding-top: `).concat($,`px;
    padding-right: `).concat(j,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(_e,"px ").concat(b,`;
    `),g==="padding"&&"padding-right: ".concat(_e,"px ").concat(b,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(zeroRightClassName,` {
    right: `).concat(_e,"px ").concat(b,`;
  }
  
  .`).concat(fullWidthClassName,` {
    margin-right: `).concat(_e,"px ").concat(b,`;
  }
  
  .`).concat(zeroRightClassName," .").concat(zeroRightClassName,` {
    right: 0 `).concat(b,`;
  }
  
  .`).concat(fullWidthClassName," .").concat(fullWidthClassName,` {
    margin-right: 0 `).concat(b,`;
  }
  
  body[`).concat(lockAttribute,`] {
    `).concat(removedBarSizeVariable,": ").concat(_e,`px;
  }
`)},getCurrentUseCounter=function(){var h=parseInt(document.body.getAttribute(lockAttribute)||"0",10);return isFinite(h)?h:0},useLockAttribute=function(){reactExports.useEffect(function(){return document.body.setAttribute(lockAttribute,(getCurrentUseCounter()+1).toString()),function(){var h=getCurrentUseCounter()-1;h<=0?document.body.removeAttribute(lockAttribute):document.body.setAttribute(lockAttribute,h.toString())}},[])},RemoveScrollBar=function(h){var d=h.noRelative,g=h.noImportant,b=h.gapMode,_=b===void 0?"margin":b;useLockAttribute();var $=reactExports.useMemo(function(){return getGapWidth(_)},[_]);return reactExports.createElement(Style,{styles:getStyles($,!d,_,g?"":"!important")})},passiveSupported=!1;if(typeof window<"u")try{var options=Object.defineProperty({},"passive",{get:function(){return passiveSupported=!0,!0}});window.addEventListener("test",options,options),window.removeEventListener("test",options,options)}catch{passiveSupported=!1}var nonPassive=passiveSupported?{passive:!1}:!1,alwaysContainsScroll=function(h){return h.tagName==="TEXTAREA"},elementCanBeScrolled=function(h,d){if(!(h instanceof Element))return!1;var g=window.getComputedStyle(h);return g[d]!=="hidden"&&!(g.overflowY===g.overflowX&&!alwaysContainsScroll(h)&&g[d]==="visible")},elementCouldBeVScrolled=function(h){return elementCanBeScrolled(h,"overflowY")},elementCouldBeHScrolled=function(h){return elementCanBeScrolled(h,"overflowX")},locationCouldBeScrolled=function(h,d){var g=d.ownerDocument,b=d;do{typeof ShadowRoot<"u"&&b instanceof ShadowRoot&&(b=b.host);var _=elementCouldBeScrolled(h,b);if(_){var $=getScrollVariables(h,b),j=$[1],_e=$[2];if(j>_e)return!0}b=b.parentNode}while(b&&b!==g.body);return!1},getVScrollVariables=function(h){var d=h.scrollTop,g=h.scrollHeight,b=h.clientHeight;return[d,g,b]},getHScrollVariables=function(h){var d=h.scrollLeft,g=h.scrollWidth,b=h.clientWidth;return[d,g,b]},elementCouldBeScrolled=function(h,d){return h==="v"?elementCouldBeVScrolled(d):elementCouldBeHScrolled(d)},getScrollVariables=function(h,d){return h==="v"?getVScrollVariables(d):getHScrollVariables(d)},getDirectionFactor=function(h,d){return h==="h"&&d==="rtl"?-1:1},handleScroll=function(h,d,g,b,_){var $=getDirectionFactor(h,window.getComputedStyle(d).direction),j=$*b,_e=g.target,et=d.contains(_e),rt=!1,nt=j>0,st=0,at=0;do{if(!_e)break;var it=getScrollVariables(h,_e),dt=it[0],ot=it[1],ct=it[2],lt=ot-ct-$*dt;(dt||lt)&&elementCouldBeScrolled(h,_e)&&(st+=lt,at+=dt);var ut=_e.parentNode;_e=ut&&ut.nodeType===Node.DOCUMENT_FRAGMENT_NODE?ut.host:ut}while(!et&&_e!==document.body||et&&(d.contains(_e)||d===_e));return(nt&&(Math.abs(st)<1||!_)||!nt&&(Math.abs(at)<1||!_))&&(rt=!0),rt},getTouchXY=function(h){return"changedTouches"in h?[h.changedTouches[0].clientX,h.changedTouches[0].clientY]:[0,0]},getDeltaXY=function(h){return[h.deltaX,h.deltaY]},extractRef=function(h){return h&&"current"in h?h.current:h},deltaCompare=function(h,d){return h[0]===d[0]&&h[1]===d[1]},generateStyle=function(h){return`
  .block-interactivity-`.concat(h,` {pointer-events: none;}
  .allow-interactivity-`).concat(h,` {pointer-events: all;}
`)},idCounter=0,lockStack=[];function RemoveScrollSideCar(h){var d=reactExports.useRef([]),g=reactExports.useRef([0,0]),b=reactExports.useRef(),_=reactExports.useState(idCounter++)[0],$=reactExports.useState(styleSingleton)[0],j=reactExports.useRef(h);reactExports.useEffect(function(){j.current=h},[h]),reactExports.useEffect(function(){if(h.inert){document.body.classList.add("block-interactivity-".concat(_));var ot=__spreadArray([h.lockRef.current],(h.shards||[]).map(extractRef),!0).filter(Boolean);return ot.forEach(function(ct){return ct.classList.add("allow-interactivity-".concat(_))}),function(){document.body.classList.remove("block-interactivity-".concat(_)),ot.forEach(function(ct){return ct.classList.remove("allow-interactivity-".concat(_))})}}},[h.inert,h.lockRef.current,h.shards]);var _e=reactExports.useCallback(function(ot,ct){if("touches"in ot&&ot.touches.length===2||ot.type==="wheel"&&ot.ctrlKey)return!j.current.allowPinchZoom;var lt=getTouchXY(ot),ut=g.current,ft="deltaX"in ot?ot.deltaX:ut[0]-lt[0],Et="deltaY"in ot?ot.deltaY:ut[1]-lt[1],Tt,St=ot.target,ht=Math.abs(ft)>Math.abs(Et)?"h":"v";if("touches"in ot&&ht==="h"&&St.type==="range")return!1;var kt=locationCouldBeScrolled(ht,St);if(!kt)return!0;if(kt?Tt=ht:(Tt=ht==="v"?"h":"v",kt=locationCouldBeScrolled(ht,St)),!kt)return!1;if(!b.current&&"changedTouches"in ot&&(ft||Et)&&(b.current=Tt),!Tt)return!0;var Rt=b.current||Tt;return handleScroll(Rt,ct,ot,Rt==="h"?ft:Et,!0)},[]),et=reactExports.useCallback(function(ot){var ct=ot;if(!(!lockStack.length||lockStack[lockStack.length-1]!==$)){var lt="deltaY"in ct?getDeltaXY(ct):getTouchXY(ct),ut=d.current.filter(function(Tt){return Tt.name===ct.type&&(Tt.target===ct.target||ct.target===Tt.shadowParent)&&deltaCompare(Tt.delta,lt)})[0];if(ut&&ut.should){ct.cancelable&&ct.preventDefault();return}if(!ut){var ft=(j.current.shards||[]).map(extractRef).filter(Boolean).filter(function(Tt){return Tt.contains(ct.target)}),Et=ft.length>0?_e(ct,ft[0]):!j.current.noIsolation;Et&&ct.cancelable&&ct.preventDefault()}}},[]),rt=reactExports.useCallback(function(ot,ct,lt,ut){var ft={name:ot,delta:ct,target:lt,should:ut,shadowParent:getOutermostShadowParent(lt)};d.current.push(ft),setTimeout(function(){d.current=d.current.filter(function(Et){return Et!==ft})},1)},[]),nt=reactExports.useCallback(function(ot){g.current=getTouchXY(ot),b.current=void 0},[]),st=reactExports.useCallback(function(ot){rt(ot.type,getDeltaXY(ot),ot.target,_e(ot,h.lockRef.current))},[]),at=reactExports.useCallback(function(ot){rt(ot.type,getTouchXY(ot),ot.target,_e(ot,h.lockRef.current))},[]);reactExports.useEffect(function(){return lockStack.push($),h.setCallbacks({onScrollCapture:st,onWheelCapture:st,onTouchMoveCapture:at}),document.addEventListener("wheel",et,nonPassive),document.addEventListener("touchmove",et,nonPassive),document.addEventListener("touchstart",nt,nonPassive),function(){lockStack=lockStack.filter(function(ot){return ot!==$}),document.removeEventListener("wheel",et,nonPassive),document.removeEventListener("touchmove",et,nonPassive),document.removeEventListener("touchstart",nt,nonPassive)}},[]);var it=h.removeScrollBar,dt=h.inert;return reactExports.createElement(reactExports.Fragment,null,dt?reactExports.createElement($,{styles:generateStyle(_)}):null,it?reactExports.createElement(RemoveScrollBar,{noRelative:h.noRelative,gapMode:h.gapMode}):null)}function getOutermostShadowParent(h){for(var d=null;h!==null;)h instanceof ShadowRoot&&(d=h.host,h=h.host),h=h.parentNode;return d}const SideCar=exportSidecar(effectCar,RemoveScrollSideCar);var ReactRemoveScroll=reactExports.forwardRef(function(h,d){return reactExports.createElement(RemoveScroll,__assign({},h,{ref:d,sideCar:SideCar}))});ReactRemoveScroll.classNames=RemoveScroll.classNames;var getDefaultParent=function(h){if(typeof document>"u")return null;var d=Array.isArray(h)?h[0]:h;return d.ownerDocument.body},counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={},lockCount=0,unwrapHost=function(h){return h&&(h.host||unwrapHost(h.parentNode))},correctTargets=function(h,d){return d.map(function(g){if(h.contains(g))return g;var b=unwrapHost(g);return b&&h.contains(b)?b:(console.error("aria-hidden",g,"in not contained inside",h,". Doing nothing"),null)}).filter(function(g){return!!g})},applyAttributeToOthers=function(h,d,g,b){var _=correctTargets(d,Array.isArray(h)?h:[h]);markerMap[g]||(markerMap[g]=new WeakMap);var $=markerMap[g],j=[],_e=new Set,et=new Set(_),rt=function(st){!st||_e.has(st)||(_e.add(st),rt(st.parentNode))};_.forEach(rt);var nt=function(st){!st||et.has(st)||Array.prototype.forEach.call(st.children,function(at){if(_e.has(at))nt(at);else try{var it=at.getAttribute(b),dt=it!==null&&it!=="false",ot=(counterMap.get(at)||0)+1,ct=($.get(at)||0)+1;counterMap.set(at,ot),$.set(at,ct),j.push(at),ot===1&&dt&&uncontrolledNodes.set(at,!0),ct===1&&at.setAttribute(g,"true"),dt||at.setAttribute(b,"true")}catch(lt){console.error("aria-hidden: cannot operate on ",at,lt)}})};return nt(d),_e.clear(),lockCount++,function(){j.forEach(function(st){var at=counterMap.get(st)-1,it=$.get(st)-1;counterMap.set(st,at),$.set(st,it),at||(uncontrolledNodes.has(st)||st.removeAttribute(b),uncontrolledNodes.delete(st)),it||st.removeAttribute(g)}),lockCount--,lockCount||(counterMap=new WeakMap,counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={})}},hideOthers=function(h,d,g){g===void 0&&(g="data-aria-hidden");var b=Array.from(Array.isArray(h)?h:[h]),_=getDefaultParent(h);return _?(b.push.apply(b,Array.from(_.querySelectorAll("[aria-live]"))),applyAttributeToOthers(b,_,g,"aria-hidden")):function(){return null}},DIALOG_NAME="Dialog",[createDialogContext,createDialogScope]=createContextScope(DIALOG_NAME),[DialogProvider,useDialogContext]=createDialogContext(DIALOG_NAME),Dialog$1=h=>{const{__scopeDialog:d,children:g,open:b,defaultOpen:_,onOpenChange:$,modal:j=!0}=h,_e=reactExports.useRef(null),et=reactExports.useRef(null),[rt,nt]=useControllableState({prop:b,defaultProp:_??!1,onChange:$,caller:DIALOG_NAME});return jsxRuntimeExports.jsx(DialogProvider,{scope:d,triggerRef:_e,contentRef:et,contentId:useId(),titleId:useId(),descriptionId:useId(),open:rt,onOpenChange:nt,onOpenToggle:reactExports.useCallback(()=>nt(st=>!st),[nt]),modal:j,children:g})};Dialog$1.displayName=DIALOG_NAME;var TRIGGER_NAME="DialogTrigger",DialogTrigger$1=reactExports.forwardRef((h,d)=>{const{__scopeDialog:g,...b}=h,_=useDialogContext(TRIGGER_NAME,g),$=useComposedRefs(d,_.triggerRef);return jsxRuntimeExports.jsx(Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":_.open,"aria-controls":_.contentId,"data-state":getState(_.open),...b,ref:$,onClick:composeEventHandlers(h.onClick,_.onOpenToggle)})});DialogTrigger$1.displayName=TRIGGER_NAME;var PORTAL_NAME="DialogPortal",[PortalProvider,usePortalContext]=createDialogContext(PORTAL_NAME,{forceMount:void 0}),DialogPortal$1=h=>{const{__scopeDialog:d,forceMount:g,children:b,container:_}=h,$=useDialogContext(PORTAL_NAME,d);return jsxRuntimeExports.jsx(PortalProvider,{scope:d,forceMount:g,children:reactExports.Children.map(b,j=>jsxRuntimeExports.jsx(Presence,{present:g||$.open,children:jsxRuntimeExports.jsx(Portal$1,{asChild:!0,container:_,children:j})}))})};DialogPortal$1.displayName=PORTAL_NAME;var OVERLAY_NAME="DialogOverlay",DialogOverlay$1=reactExports.forwardRef((h,d)=>{const g=usePortalContext(OVERLAY_NAME,h.__scopeDialog),{forceMount:b=g.forceMount,..._}=h,$=useDialogContext(OVERLAY_NAME,h.__scopeDialog);return $.modal?jsxRuntimeExports.jsx(Presence,{present:b||$.open,children:jsxRuntimeExports.jsx(DialogOverlayImpl,{..._,ref:d})}):null});DialogOverlay$1.displayName=OVERLAY_NAME;var Slot=createSlot("DialogOverlay.RemoveScroll"),DialogOverlayImpl=reactExports.forwardRef((h,d)=>{const{__scopeDialog:g,...b}=h,_=useDialogContext(OVERLAY_NAME,g);return jsxRuntimeExports.jsx(ReactRemoveScroll,{as:Slot,allowPinchZoom:!0,shards:[_.contentRef],children:jsxRuntimeExports.jsx(Primitive.div,{"data-state":getState(_.open),...b,ref:d,style:{pointerEvents:"auto",...b.style}})})}),CONTENT_NAME="DialogContent",DialogContent$1=reactExports.forwardRef((h,d)=>{const g=usePortalContext(CONTENT_NAME,h.__scopeDialog),{forceMount:b=g.forceMount,..._}=h,$=useDialogContext(CONTENT_NAME,h.__scopeDialog);return jsxRuntimeExports.jsx(Presence,{present:b||$.open,children:$.modal?jsxRuntimeExports.jsx(DialogContentModal,{..._,ref:d}):jsxRuntimeExports.jsx(DialogContentNonModal,{..._,ref:d})})});DialogContent$1.displayName=CONTENT_NAME;var DialogContentModal=reactExports.forwardRef((h,d)=>{const g=useDialogContext(CONTENT_NAME,h.__scopeDialog),b=reactExports.useRef(null),_=useComposedRefs(d,g.contentRef,b);return reactExports.useEffect(()=>{const $=b.current;if($)return hideOthers($)},[]),jsxRuntimeExports.jsx(DialogContentImpl,{...h,ref:_,trapFocus:g.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:composeEventHandlers(h.onCloseAutoFocus,$=>{var j;$.preventDefault(),(j=g.triggerRef.current)==null||j.focus()}),onPointerDownOutside:composeEventHandlers(h.onPointerDownOutside,$=>{const j=$.detail.originalEvent,_e=j.button===0&&j.ctrlKey===!0;(j.button===2||_e)&&$.preventDefault()}),onFocusOutside:composeEventHandlers(h.onFocusOutside,$=>$.preventDefault())})}),DialogContentNonModal=reactExports.forwardRef((h,d)=>{const g=useDialogContext(CONTENT_NAME,h.__scopeDialog),b=reactExports.useRef(!1),_=reactExports.useRef(!1);return jsxRuntimeExports.jsx(DialogContentImpl,{...h,ref:d,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:$=>{var j,_e;(j=h.onCloseAutoFocus)==null||j.call(h,$),$.defaultPrevented||(b.current||(_e=g.triggerRef.current)==null||_e.focus(),$.preventDefault()),b.current=!1,_.current=!1},onInteractOutside:$=>{var et,rt;(et=h.onInteractOutside)==null||et.call(h,$),$.defaultPrevented||(b.current=!0,$.detail.originalEvent.type==="pointerdown"&&(_.current=!0));const j=$.target;((rt=g.triggerRef.current)==null?void 0:rt.contains(j))&&$.preventDefault(),$.detail.originalEvent.type==="focusin"&&_.current&&$.preventDefault()}})}),DialogContentImpl=reactExports.forwardRef((h,d)=>{const{__scopeDialog:g,trapFocus:b,onOpenAutoFocus:_,onCloseAutoFocus:$,...j}=h,_e=useDialogContext(CONTENT_NAME,g),et=reactExports.useRef(null),rt=useComposedRefs(d,et);return useFocusGuards(),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(FocusScope,{asChild:!0,loop:!0,trapped:b,onMountAutoFocus:_,onUnmountAutoFocus:$,children:jsxRuntimeExports.jsx(DismissableLayer,{role:"dialog",id:_e.contentId,"aria-describedby":_e.descriptionId,"aria-labelledby":_e.titleId,"data-state":getState(_e.open),...j,ref:rt,onDismiss:()=>_e.onOpenChange(!1)})}),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(TitleWarning,{titleId:_e.titleId}),jsxRuntimeExports.jsx(DescriptionWarning,{contentRef:et,descriptionId:_e.descriptionId})]})]})}),TITLE_NAME="DialogTitle",DialogTitle$1=reactExports.forwardRef((h,d)=>{const{__scopeDialog:g,...b}=h,_=useDialogContext(TITLE_NAME,g);return jsxRuntimeExports.jsx(Primitive.h2,{id:_.titleId,...b,ref:d})});DialogTitle$1.displayName=TITLE_NAME;var DESCRIPTION_NAME="DialogDescription",DialogDescription$1=reactExports.forwardRef((h,d)=>{const{__scopeDialog:g,...b}=h,_=useDialogContext(DESCRIPTION_NAME,g);return jsxRuntimeExports.jsx(Primitive.p,{id:_.descriptionId,...b,ref:d})});DialogDescription$1.displayName=DESCRIPTION_NAME;var CLOSE_NAME="DialogClose",DialogClose=reactExports.forwardRef((h,d)=>{const{__scopeDialog:g,...b}=h,_=useDialogContext(CLOSE_NAME,g);return jsxRuntimeExports.jsx(Primitive.button,{type:"button",...b,ref:d,onClick:composeEventHandlers(h.onClick,()=>_.onOpenChange(!1))})});DialogClose.displayName=CLOSE_NAME;function getState(h){return h?"open":"closed"}var TITLE_WARNING_NAME="DialogTitleWarning",[WarningProvider,useWarningContext]=createContext2(TITLE_WARNING_NAME,{contentName:CONTENT_NAME,titleName:TITLE_NAME,docsSlug:"dialog"}),TitleWarning=({titleId:h})=>{const d=useWarningContext(TITLE_WARNING_NAME),g=`\`${d.contentName}\` requires a \`${d.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${d.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${d.docsSlug}`;return reactExports.useEffect(()=>{h&&(document.getElementById(h)||console.error(g))},[g,h]),null},DESCRIPTION_WARNING_NAME="DialogDescriptionWarning",DescriptionWarning=({contentRef:h,descriptionId:d})=>{const b=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${useWarningContext(DESCRIPTION_WARNING_NAME).contentName}}.`;return reactExports.useEffect(()=>{var $;const _=($=h.current)==null?void 0:$.getAttribute("aria-describedby");d&&_&&(document.getElementById(d)||console.warn(b))},[b,h,d]),null},Root$1=Dialog$1,Trigger=DialogTrigger$1,Portal=DialogPortal$1,Overlay=DialogOverlay$1,Content=DialogContent$1,Title=DialogTitle$1,Description=DialogDescription$1,Close=DialogClose;const Dialog=Root$1,DialogTrigger=Trigger,DialogPortal=Portal,DialogOverlay=reactExports.forwardRef(({className:h,...d},g)=>jsxRuntimeExports.jsx(Overlay,{ref:g,className:cn("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",h),...d}));DialogOverlay.displayName=Overlay.displayName;const DialogContent=reactExports.forwardRef(({className:h,children:d,...g},b)=>jsxRuntimeExports.jsxs(DialogPortal,{children:[jsxRuntimeExports.jsx(DialogOverlay,{}),jsxRuntimeExports.jsxs(Content,{ref:b,className:cn("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",h),...g,children:[d,jsxRuntimeExports.jsxs(Close,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[jsxRuntimeExports.jsx(X,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));DialogContent.displayName=Content.displayName;const DialogHeader=({className:h,...d})=>jsxRuntimeExports.jsx("div",{className:cn("flex flex-col space-y-1.5 text-center sm:text-left",h),...d});DialogHeader.displayName="DialogHeader";const DialogTitle=reactExports.forwardRef(({className:h,...d},g)=>jsxRuntimeExports.jsx(Title,{ref:g,className:cn("text-lg font-semibold leading-none tracking-tight",h),...d}));DialogTitle.displayName=Title.displayName;const DialogDescription=reactExports.forwardRef(({className:h,...d},g)=>jsxRuntimeExports.jsx(Description,{ref:g,className:cn("text-sm text-muted-foreground",h),...d}));DialogDescription.displayName=Description.displayName;const SOURCES=[{key:"itunes",name:"iTunes",description:"Fast, high-quality metadata from Apple Music",icon:jsxRuntimeExports.jsx(Music,{className:"w-4 h-4"}),wave:1,speed:"fast",requiresKey:!1},{key:"youtube",name:"YouTube API",description:"Extensive music catalog with artwork",icon:jsxRuntimeExports.jsx(Youtube,{className:"w-4 h-4"}),wave:1,speed:"fast",requiresKey:!0},{key:"deezer",name:"Deezer",description:"International music coverage",icon:jsxRuntimeExports.jsx(Disc,{className:"w-4 h-4"}),wave:2,speed:"medium",requiresKey:!1},{key:"musicbrainz",name:"MusicBrainz",description:"Open music encyclopedia with rich metadata",icon:jsxRuntimeExports.jsx(Database,{className:"w-4 h-4"}),wave:2,speed:"medium",requiresKey:!1},{key:"piped",name:"Piped",description:"YouTube alternative - no API key needed",icon:jsxRuntimeExports.jsx(Radio,{className:"w-4 h-4"}),wave:2,speed:"medium",requiresKey:!1},{key:"ytdlp",name:"yt-dlp",description:"Most reliable, unlimited (slower)",icon:jsxRuntimeExports.jsx(Terminal,{className:"w-4 h-4"}),wave:3,speed:"slow",requiresKey:!1}],DEFAULT_ENABLED={itunes:!0,youtube:!0,deezer:!0,musicbrainz:!0,piped:!0,ytdlp:!0};function SourceSettings({open:h,onOpenChange:d}){const[g,b]=reactExports.useState(DEFAULT_ENABLED),[_,$]=reactExports.useState(!1);reactExports.useEffect(()=>{$(!0);const st=localStorage.getItem("tagfix-enabled-sources");if(st)try{b({...DEFAULT_ENABLED,...JSON.parse(st)})}catch(at){console.error("Failed to parse saved source settings:",at)}},[]);const j=st=>{const at={...g,[st]:!g[st]};b(at),localStorage.setItem("tagfix-enabled-sources",JSON.stringify(at)),window.dispatchEvent(new StorageEvent("storage",{key:"tagfix-enabled-sources",newValue:JSON.stringify(at)}))},_e=()=>{b(DEFAULT_ENABLED),localStorage.setItem("tagfix-enabled-sources",JSON.stringify(DEFAULT_ENABLED)),window.dispatchEvent(new StorageEvent("storage",{key:"tagfix-enabled-sources",newValue:JSON.stringify(DEFAULT_ENABLED)}))},et=Object.values(g).filter(Boolean).length,rt=st=>{switch(st){case"fast":return"text-emerald-400";case"medium":return"text-amber-400";case"slow":return"text-rose-400";default:return"text-muted-foreground"}},nt=st=>{switch(st){case"fast":return"Fast";case"medium":return"Medium";case"slow":return"Slower";default:return""}};return _?jsxRuntimeExports.jsx(Dialog,{open:h,onOpenChange:d,children:jsxRuntimeExports.jsxs(DialogContent,{className:"sm:max-w-md glass border-border bg-card",children:[jsxRuntimeExports.jsxs(DialogHeader,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx(DialogTitle,{className:"text-lg font-semibold",children:"Metadata Sources"}),jsxRuntimeExports.jsxs("span",{className:"text-xs font-mono text-muted-foreground",children:[et,"/",SOURCES.length," active"]})]}),jsxRuntimeExports.jsx(DialogDescription,{className:"text-sm text-muted-foreground",children:"Toggle which APIs to use for metadata lookup"})]}),jsxRuntimeExports.jsx("div",{className:"space-y-1 mt-2",children:SOURCES.map(st=>jsxRuntimeExports.jsxs("div",{className:cn("flex items-center gap-3 p-3 rounded-xl transition-all","glass-subtle hover:bg-accent/30",!g[st.key]&&"opacity-40"),children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-lg glass-inset flex items-center justify-center shrink-0 text-muted-foreground",children:st.icon}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1.5",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-foreground",children:st.name}),jsxRuntimeExports.jsx("span",{className:cn("text-[10px] font-mono px-1 rounded",rt(st.speed)),children:nt(st.speed)}),jsxRuntimeExports.jsx(TooltipProvider,{delayDuration:300,children:jsxRuntimeExports.jsxs(Tooltip,{children:[jsxRuntimeExports.jsx(TooltipTrigger,{asChild:!0,children:jsxRuntimeExports.jsx("button",{className:"text-muted-foreground/50 hover:text-muted-foreground transition-colors",children:jsxRuntimeExports.jsx(Info,{className:"w-3 h-3"})})}),jsxRuntimeExports.jsxs(TooltipContent,{side:"right",className:"max-w-[200px] text-xs",children:[jsxRuntimeExports.jsx("p",{children:st.description}),st.requiresKey&&jsxRuntimeExports.jsx("p",{className:"text-amber-400 mt-1",children:"Requires API key"})]})]})})]}),jsxRuntimeExports.jsx("p",{className:"text-[11px] text-muted-foreground/70 truncate",children:st.description})]}),jsxRuntimeExports.jsx(Switch,{checked:g[st.key],onCheckedChange:()=>j(st.key),className:"data-[state=checked]:bg-primary shrink-0"})]},st.key))}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-border/50",children:[jsxRuntimeExports.jsx("div",{className:"text-[11px] text-muted-foreground",children:"Changes apply immediately"}),jsxRuntimeExports.jsxs("button",{onClick:_e,className:"flex items-center gap-1.5 text-xs text-muted-foreground hover:text-foreground transition-colors",children:[jsxRuntimeExports.jsx(RotateCcw,{className:"w-3.5 h-3.5"}),"Reset"]})]})]})}):null}const Input=reactExports.forwardRef(({className:h,type:d,...g},b)=>jsxRuntimeExports.jsx("input",{type:d,className:cn("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",h),ref:b,...g}));Input.displayName="Input";const resolveFetch$3=h=>h?(...d)=>h(...d):(...d)=>fetch(...d);class FunctionsError extends Error{constructor(d,g="FunctionsError",b){super(d),this.name=g,this.context=b}}class FunctionsFetchError extends FunctionsError{constructor(d){super("Failed to send a request to the Edge Function","FunctionsFetchError",d)}}class FunctionsRelayError extends FunctionsError{constructor(d){super("Relay Error invoking the Edge Function","FunctionsRelayError",d)}}class FunctionsHttpError extends FunctionsError{constructor(d){super("Edge Function returned a non-2xx status code","FunctionsHttpError",d)}}var FunctionRegion;(function(h){h.Any="any",h.ApNortheast1="ap-northeast-1",h.ApNortheast2="ap-northeast-2",h.ApSouth1="ap-south-1",h.ApSoutheast1="ap-southeast-1",h.ApSoutheast2="ap-southeast-2",h.CaCentral1="ca-central-1",h.EuCentral1="eu-central-1",h.EuWest1="eu-west-1",h.EuWest2="eu-west-2",h.EuWest3="eu-west-3",h.SaEast1="sa-east-1",h.UsEast1="us-east-1",h.UsWest1="us-west-1",h.UsWest2="us-west-2"})(FunctionRegion||(FunctionRegion={}));class FunctionsClient{constructor(d,{headers:g={},customFetch:b,region:_=FunctionRegion.Any}={}){this.url=d,this.headers=g,this.region=_,this.fetch=resolveFetch$3(b)}setAuth(d){this.headers.Authorization=`Bearer ${d}`}invoke(d){return __awaiter(this,arguments,void 0,function*(g,b={}){var _;let $,j;try{const{headers:_e,method:et,body:rt,signal:nt,timeout:st}=b;let at={},{region:it}=b;it||(it=this.region);const dt=new URL(`${this.url}/${g}`);it&&it!=="any"&&(at["x-region"]=it,dt.searchParams.set("forceFunctionRegion",it));let ot;rt&&(_e&&!Object.prototype.hasOwnProperty.call(_e,"Content-Type")||!_e)?typeof Blob<"u"&&rt instanceof Blob||rt instanceof ArrayBuffer?(at["Content-Type"]="application/octet-stream",ot=rt):typeof rt=="string"?(at["Content-Type"]="text/plain",ot=rt):typeof FormData<"u"&&rt instanceof FormData?ot=rt:(at["Content-Type"]="application/json",ot=JSON.stringify(rt)):rt&&typeof rt!="string"&&!(typeof Blob<"u"&&rt instanceof Blob)&&!(rt instanceof ArrayBuffer)&&!(typeof FormData<"u"&&rt instanceof FormData)?ot=JSON.stringify(rt):ot=rt;let ct=nt;st&&(j=new AbortController,$=setTimeout(()=>j.abort(),st),nt?(ct=j.signal,nt.addEventListener("abort",()=>j.abort())):ct=j.signal);const lt=yield this.fetch(dt.toString(),{method:et||"POST",headers:Object.assign(Object.assign(Object.assign({},at),this.headers),_e),body:ot,signal:ct}).catch(Tt=>{throw new FunctionsFetchError(Tt)}),ut=lt.headers.get("x-relay-error");if(ut&&ut==="true")throw new FunctionsRelayError(lt);if(!lt.ok)throw new FunctionsHttpError(lt);let ft=((_=lt.headers.get("Content-Type"))!==null&&_!==void 0?_:"text/plain").split(";")[0].trim(),Et;return ft==="application/json"?Et=yield lt.json():ft==="application/octet-stream"||ft==="application/pdf"?Et=yield lt.blob():ft==="text/event-stream"?Et=lt:ft==="multipart/form-data"?Et=yield lt.formData():Et=yield lt.text(),{data:Et,error:null,response:lt}}catch(_e){return{data:null,error:_e,response:_e instanceof FunctionsHttpError||_e instanceof FunctionsRelayError?_e.context:void 0}}finally{$&&clearTimeout($)}})}}var PostgrestError=class extends Error{constructor(h){super(h.message),this.name="PostgrestError",this.details=h.details,this.hint=h.hint,this.code=h.code}},PostgrestBuilder=class{constructor(h){var d,g,b;this.shouldThrowOnError=!1,this.method=h.method,this.url=h.url,this.headers=new Headers(h.headers),this.schema=h.schema,this.body=h.body,this.shouldThrowOnError=(d=h.shouldThrowOnError)!==null&&d!==void 0?d:!1,this.signal=h.signal,this.isMaybeSingle=(g=h.isMaybeSingle)!==null&&g!==void 0?g:!1,this.urlLengthLimit=(b=h.urlLengthLimit)!==null&&b!==void 0?b:8e3,h.fetch?this.fetch=h.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(h,d){return this.headers=new Headers(this.headers),this.headers.set(h,d),this}then(h,d){var g=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const b=this.fetch;let _=b(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async $=>{let j=null,_e=null,et=null,rt=$.status,nt=$.statusText;if($.ok){var st,at;if(g.method!=="HEAD"){var it;const lt=await $.text();lt===""||(g.headers.get("Accept")==="text/csv"||g.headers.get("Accept")&&(!((it=g.headers.get("Accept"))===null||it===void 0)&&it.includes("application/vnd.pgrst.plan+text"))?_e=lt:_e=JSON.parse(lt))}const ot=(st=g.headers.get("Prefer"))===null||st===void 0?void 0:st.match(/count=(exact|planned|estimated)/),ct=(at=$.headers.get("content-range"))===null||at===void 0?void 0:at.split("/");ot&&ct&&ct.length>1&&(et=parseInt(ct[1])),g.isMaybeSingle&&g.method==="GET"&&Array.isArray(_e)&&(_e.length>1?(j={code:"PGRST116",details:`Results contain ${_e.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},_e=null,et=null,rt=406,nt="Not Acceptable"):_e.length===1?_e=_e[0]:_e=null)}else{var dt;const ot=await $.text();try{j=JSON.parse(ot),Array.isArray(j)&&$.status===404&&(_e=[],j=null,rt=200,nt="OK")}catch{$.status===404&&ot===""?(rt=204,nt="No Content"):j={message:ot}}if(j&&g.isMaybeSingle&&(!(j==null||(dt=j.details)===null||dt===void 0)&&dt.includes("0 rows"))&&(j=null,rt=200,nt="OK"),j&&g.shouldThrowOnError)throw new PostgrestError(j)}return{error:j,data:_e,count:et,status:rt,statusText:nt}});return this.shouldThrowOnError||(_=_.catch($=>{var j;let _e="",et="",rt="";const nt=$==null?void 0:$.cause;if(nt){var st,at,it,dt;const lt=(st=nt==null?void 0:nt.message)!==null&&st!==void 0?st:"",ut=(at=nt==null?void 0:nt.code)!==null&&at!==void 0?at:"";_e=`${(it=$==null?void 0:$.name)!==null&&it!==void 0?it:"FetchError"}: ${$==null?void 0:$.message}`,_e+=`

Caused by: ${(dt=nt==null?void 0:nt.name)!==null&&dt!==void 0?dt:"Error"}: ${lt}`,ut&&(_e+=` (${ut})`),nt!=null&&nt.stack&&(_e+=`
${nt.stack}`)}else{var ot;_e=(ot=$==null?void 0:$.stack)!==null&&ot!==void 0?ot:""}const ct=this.url.toString().length;return($==null?void 0:$.name)==="AbortError"||($==null?void 0:$.code)==="ABORT_ERR"?(rt="",et="Request was aborted (timeout or manual cancellation)",ct>this.urlLengthLimit&&(et+=`. Note: Your request URL is ${ct} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((nt==null?void 0:nt.name)==="HeadersOverflowError"||(nt==null?void 0:nt.code)==="UND_ERR_HEADERS_OVERFLOW")&&(rt="",et="HTTP headers exceeded server limits (typically 16KB)",ct>this.urlLengthLimit&&(et+=`. Your request URL is ${ct} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(j=$==null?void 0:$.name)!==null&&j!==void 0?j:"FetchError"}: ${$==null?void 0:$.message}`,details:_e,hint:et,code:rt},data:null,count:null,status:0,statusText:""}})),_.then(h,d)}returns(){return this}overrideTypes(){return this}},PostgrestTransformBuilder=class extends PostgrestBuilder{select(h){let d=!1;const g=(h??"*").split("").map(b=>/\s/.test(b)&&!d?"":(b==='"'&&(d=!d),b)).join("");return this.url.searchParams.set("select",g),this.headers.append("Prefer","return=representation"),this}order(h,{ascending:d=!0,nullsFirst:g,foreignTable:b,referencedTable:_=b}={}){const $=_?`${_}.order`:"order",j=this.url.searchParams.get($);return this.url.searchParams.set($,`${j?`${j},`:""}${h}.${d?"asc":"desc"}${g===void 0?"":g?".nullsfirst":".nullslast"}`),this}limit(h,{foreignTable:d,referencedTable:g=d}={}){const b=typeof g>"u"?"limit":`${g}.limit`;return this.url.searchParams.set(b,`${h}`),this}range(h,d,{foreignTable:g,referencedTable:b=g}={}){const _=typeof b>"u"?"offset":`${b}.offset`,$=typeof b>"u"?"limit":`${b}.limit`;return this.url.searchParams.set(_,`${h}`),this.url.searchParams.set($,`${d-h+1}`),this}abortSignal(h){return this.signal=h,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:h=!1,verbose:d=!1,settings:g=!1,buffers:b=!1,wal:_=!1,format:$="text"}={}){var j;const _e=[h?"analyze":null,d?"verbose":null,g?"settings":null,b?"buffers":null,_?"wal":null].filter(Boolean).join("|"),et=(j=this.headers.get("Accept"))!==null&&j!==void 0?j:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${$}; for="${et}"; options=${_e};`),$==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(h){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${h}`),this}};const PostgrestReservedCharsRegexp=new RegExp("[,()]");var PostgrestFilterBuilder=class extends PostgrestTransformBuilder{eq(h,d){return this.url.searchParams.append(h,`eq.${d}`),this}neq(h,d){return this.url.searchParams.append(h,`neq.${d}`),this}gt(h,d){return this.url.searchParams.append(h,`gt.${d}`),this}gte(h,d){return this.url.searchParams.append(h,`gte.${d}`),this}lt(h,d){return this.url.searchParams.append(h,`lt.${d}`),this}lte(h,d){return this.url.searchParams.append(h,`lte.${d}`),this}like(h,d){return this.url.searchParams.append(h,`like.${d}`),this}likeAllOf(h,d){return this.url.searchParams.append(h,`like(all).{${d.join(",")}}`),this}likeAnyOf(h,d){return this.url.searchParams.append(h,`like(any).{${d.join(",")}}`),this}ilike(h,d){return this.url.searchParams.append(h,`ilike.${d}`),this}ilikeAllOf(h,d){return this.url.searchParams.append(h,`ilike(all).{${d.join(",")}}`),this}ilikeAnyOf(h,d){return this.url.searchParams.append(h,`ilike(any).{${d.join(",")}}`),this}regexMatch(h,d){return this.url.searchParams.append(h,`match.${d}`),this}regexIMatch(h,d){return this.url.searchParams.append(h,`imatch.${d}`),this}is(h,d){return this.url.searchParams.append(h,`is.${d}`),this}isDistinct(h,d){return this.url.searchParams.append(h,`isdistinct.${d}`),this}in(h,d){const g=Array.from(new Set(d)).map(b=>typeof b=="string"&&PostgrestReservedCharsRegexp.test(b)?`"${b}"`:`${b}`).join(",");return this.url.searchParams.append(h,`in.(${g})`),this}notIn(h,d){const g=Array.from(new Set(d)).map(b=>typeof b=="string"&&PostgrestReservedCharsRegexp.test(b)?`"${b}"`:`${b}`).join(",");return this.url.searchParams.append(h,`not.in.(${g})`),this}contains(h,d){return typeof d=="string"?this.url.searchParams.append(h,`cs.${d}`):Array.isArray(d)?this.url.searchParams.append(h,`cs.{${d.join(",")}}`):this.url.searchParams.append(h,`cs.${JSON.stringify(d)}`),this}containedBy(h,d){return typeof d=="string"?this.url.searchParams.append(h,`cd.${d}`):Array.isArray(d)?this.url.searchParams.append(h,`cd.{${d.join(",")}}`):this.url.searchParams.append(h,`cd.${JSON.stringify(d)}`),this}rangeGt(h,d){return this.url.searchParams.append(h,`sr.${d}`),this}rangeGte(h,d){return this.url.searchParams.append(h,`nxl.${d}`),this}rangeLt(h,d){return this.url.searchParams.append(h,`sl.${d}`),this}rangeLte(h,d){return this.url.searchParams.append(h,`nxr.${d}`),this}rangeAdjacent(h,d){return this.url.searchParams.append(h,`adj.${d}`),this}overlaps(h,d){return typeof d=="string"?this.url.searchParams.append(h,`ov.${d}`):this.url.searchParams.append(h,`ov.{${d.join(",")}}`),this}textSearch(h,d,{config:g,type:b}={}){let _="";b==="plain"?_="pl":b==="phrase"?_="ph":b==="websearch"&&(_="w");const $=g===void 0?"":`(${g})`;return this.url.searchParams.append(h,`${_}fts${$}.${d}`),this}match(h){return Object.entries(h).forEach(([d,g])=>{this.url.searchParams.append(d,`eq.${g}`)}),this}not(h,d,g){return this.url.searchParams.append(h,`not.${d}.${g}`),this}or(h,{foreignTable:d,referencedTable:g=d}={}){const b=g?`${g}.or`:"or";return this.url.searchParams.append(b,`(${h})`),this}filter(h,d,g){return this.url.searchParams.append(h,`${d}.${g}`),this}},PostgrestQueryBuilder=class{constructor(h,{headers:d={},schema:g,fetch:b,urlLengthLimit:_=8e3}){this.url=h,this.headers=new Headers(d),this.schema=g,this.fetch=b,this.urlLengthLimit=_}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(h,d){const{head:g=!1,count:b}=d??{},_=g?"HEAD":"GET";let $=!1;const j=(h??"*").split("").map(rt=>/\s/.test(rt)&&!$?"":(rt==='"'&&($=!$),rt)).join(""),{url:_e,headers:et}=this.cloneRequestState();return _e.searchParams.set("select",j),b&&et.append("Prefer",`count=${b}`),new PostgrestFilterBuilder({method:_,url:_e,headers:et,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(h,{count:d,defaultToNull:g=!0}={}){var b;const _="POST",{url:$,headers:j}=this.cloneRequestState();if(d&&j.append("Prefer",`count=${d}`),g||j.append("Prefer","missing=default"),Array.isArray(h)){const _e=h.reduce((et,rt)=>et.concat(Object.keys(rt)),[]);if(_e.length>0){const et=[...new Set(_e)].map(rt=>`"${rt}"`);$.searchParams.set("columns",et.join(","))}}return new PostgrestFilterBuilder({method:_,url:$,headers:j,schema:this.schema,body:h,fetch:(b=this.fetch)!==null&&b!==void 0?b:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(h,{onConflict:d,ignoreDuplicates:g=!1,count:b,defaultToNull:_=!0}={}){var $;const j="POST",{url:_e,headers:et}=this.cloneRequestState();if(et.append("Prefer",`resolution=${g?"ignore":"merge"}-duplicates`),d!==void 0&&_e.searchParams.set("on_conflict",d),b&&et.append("Prefer",`count=${b}`),_||et.append("Prefer","missing=default"),Array.isArray(h)){const rt=h.reduce((nt,st)=>nt.concat(Object.keys(st)),[]);if(rt.length>0){const nt=[...new Set(rt)].map(st=>`"${st}"`);_e.searchParams.set("columns",nt.join(","))}}return new PostgrestFilterBuilder({method:j,url:_e,headers:et,schema:this.schema,body:h,fetch:($=this.fetch)!==null&&$!==void 0?$:fetch,urlLengthLimit:this.urlLengthLimit})}update(h,{count:d}={}){var g;const b="PATCH",{url:_,headers:$}=this.cloneRequestState();return d&&$.append("Prefer",`count=${d}`),new PostgrestFilterBuilder({method:b,url:_,headers:$,schema:this.schema,body:h,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:h}={}){var d;const g="DELETE",{url:b,headers:_}=this.cloneRequestState();return h&&_.append("Prefer",`count=${h}`),new PostgrestFilterBuilder({method:g,url:b,headers:_,schema:this.schema,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch,urlLengthLimit:this.urlLengthLimit})}};function _typeof$2(h){"@babel/helpers - typeof";return _typeof$2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},_typeof$2(h)}function toPrimitive$2(h,d){if(_typeof$2(h)!="object"||!h)return h;var g=h[Symbol.toPrimitive];if(g!==void 0){var b=g.call(h,d||"default");if(_typeof$2(b)!="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return(d==="string"?String:Number)(h)}function toPropertyKey$2(h){var d=toPrimitive$2(h,"string");return _typeof$2(d)=="symbol"?d:d+""}function _defineProperty$2(h,d,g){return(d=toPropertyKey$2(d))in h?Object.defineProperty(h,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):h[d]=g,h}function ownKeys$2(h,d){var g=Object.keys(h);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(h);d&&(b=b.filter(function(_){return Object.getOwnPropertyDescriptor(h,_).enumerable})),g.push.apply(g,b)}return g}function _objectSpread2$2(h){for(var d=1;d<arguments.length;d++){var g=arguments[d]!=null?arguments[d]:{};d%2?ownKeys$2(Object(g),!0).forEach(function(b){_defineProperty$2(h,b,g[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(g)):ownKeys$2(Object(g)).forEach(function(b){Object.defineProperty(h,b,Object.getOwnPropertyDescriptor(g,b))})}return h}var PostgrestClient=class Gn{constructor(d,{headers:g={},schema:b,fetch:_,timeout:$,urlLengthLimit:j=8e3}={}){this.url=d,this.headers=new Headers(g),this.schemaName=b,this.urlLengthLimit=j;const _e=_??globalThis.fetch;$!==void 0&&$>0?this.fetch=(et,rt)=>{const nt=new AbortController,st=setTimeout(()=>nt.abort(),$),at=rt==null?void 0:rt.signal;if(at){if(at.aborted)return clearTimeout(st),_e(et,rt);const it=()=>{clearTimeout(st),nt.abort()};return at.addEventListener("abort",it,{once:!0}),_e(et,_objectSpread2$2(_objectSpread2$2({},rt),{},{signal:nt.signal})).finally(()=>{clearTimeout(st),at.removeEventListener("abort",it)})}return _e(et,_objectSpread2$2(_objectSpread2$2({},rt),{},{signal:nt.signal})).finally(()=>clearTimeout(st))}:this.fetch=_e}from(d){if(!d||typeof d!="string"||d.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new PostgrestQueryBuilder(new URL(`${this.url}/${d}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(d){return new Gn(this.url,{headers:this.headers,schema:d,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(d,g={},{head:b=!1,get:_=!1,count:$}={}){var j;let _e;const et=new URL(`${this.url}/rpc/${d}`);let rt;const nt=it=>it!==null&&typeof it=="object"&&(!Array.isArray(it)||it.some(nt)),st=b&&Object.values(g).some(nt);st?(_e="POST",rt=g):b||_?(_e=b?"HEAD":"GET",Object.entries(g).filter(([it,dt])=>dt!==void 0).map(([it,dt])=>[it,Array.isArray(dt)?`{${dt.join(",")}}`:`${dt}`]).forEach(([it,dt])=>{et.searchParams.append(it,dt)})):(_e="POST",rt=g);const at=new Headers(this.headers);return st?at.set("Prefer",$?`count=${$},return=minimal`:"return=minimal"):$&&at.set("Prefer",`count=${$}`),new PostgrestFilterBuilder({method:_e,url:et,headers:at,schema:this.schemaName,body:rt,fetch:(j=this.fetch)!==null&&j!==void 0?j:fetch,urlLengthLimit:this.urlLengthLimit})}};class WebSocketFactory{constructor(){}static detectEnvironment(){var d;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((d=navigator.userAgent)===null||d===void 0)&&d.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const g=globalThis.process;if(g){const b=g.versions;if(b&&b.node){const _=b.node,$=parseInt(_.replace(/^v/,"").split(".")[0]);return $>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${$} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${$} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const d=this.detectEnvironment();if(d.constructor)return d.constructor;let g=d.error||"WebSocket not supported in this environment.";throw d.workaround&&(g+=`

Suggested solution: ${d.workaround}`),new Error(g)}static createWebSocket(d,g){const b=this.getWebSocketConstructor();return new b(d,g)}static isWebSocketSupported(){try{const d=this.detectEnvironment();return d.type==="native"||d.type==="ws"}catch{return!1}}}const version$3="2.95.2",DEFAULT_VERSION=`realtime-js/${version$3}`,VSN_1_0_0="1.0.0",VSN_2_0_0="2.0.0",DEFAULT_VSN=VSN_2_0_0,DEFAULT_TIMEOUT=1e4,WS_CLOSE_NORMAL=1e3,MAX_PUSH_BUFFER_SIZE=100;var SOCKET_STATES;(function(h){h[h.connecting=0]="connecting",h[h.open=1]="open",h[h.closing=2]="closing",h[h.closed=3]="closed"})(SOCKET_STATES||(SOCKET_STATES={}));var CHANNEL_STATES;(function(h){h.closed="closed",h.errored="errored",h.joined="joined",h.joining="joining",h.leaving="leaving"})(CHANNEL_STATES||(CHANNEL_STATES={}));var CHANNEL_EVENTS;(function(h){h.close="phx_close",h.error="phx_error",h.join="phx_join",h.reply="phx_reply",h.leave="phx_leave",h.access_token="access_token"})(CHANNEL_EVENTS||(CHANNEL_EVENTS={}));var TRANSPORTS;(function(h){h.websocket="websocket"})(TRANSPORTS||(TRANSPORTS={}));var CONNECTION_STATE;(function(h){h.Connecting="connecting",h.Open="open",h.Closing="closing",h.Closed="closed"})(CONNECTION_STATE||(CONNECTION_STATE={}));class Serializer{constructor(d){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=d??[]}encode(d,g){if(d.event===this.BROADCAST_EVENT&&!(d.payload instanceof ArrayBuffer)&&typeof d.payload.event=="string")return g(this._binaryEncodeUserBroadcastPush(d));let b=[d.join_ref,d.ref,d.topic,d.event,d.payload];return g(JSON.stringify(b))}_binaryEncodeUserBroadcastPush(d){var g;return this._isArrayBuffer((g=d.payload)===null||g===void 0?void 0:g.payload)?this._encodeBinaryUserBroadcastPush(d):this._encodeJsonUserBroadcastPush(d)}_encodeBinaryUserBroadcastPush(d){var g,b;const _=(b=(g=d.payload)===null||g===void 0?void 0:g.payload)!==null&&b!==void 0?b:new ArrayBuffer(0);return this._encodeUserBroadcastPush(d,this.BINARY_ENCODING,_)}_encodeJsonUserBroadcastPush(d){var g,b;const _=(b=(g=d.payload)===null||g===void 0?void 0:g.payload)!==null&&b!==void 0?b:{},j=new TextEncoder().encode(JSON.stringify(_)).buffer;return this._encodeUserBroadcastPush(d,this.JSON_ENCODING,j)}_encodeUserBroadcastPush(d,g,b){var _,$;const j=d.topic,_e=(_=d.ref)!==null&&_!==void 0?_:"",et=($=d.join_ref)!==null&&$!==void 0?$:"",rt=d.payload.event,nt=this.allowedMetadataKeys?this._pick(d.payload,this.allowedMetadataKeys):{},st=Object.keys(nt).length===0?"":JSON.stringify(nt);if(et.length>255)throw new Error(`joinRef length ${et.length} exceeds maximum of 255`);if(_e.length>255)throw new Error(`ref length ${_e.length} exceeds maximum of 255`);if(j.length>255)throw new Error(`topic length ${j.length} exceeds maximum of 255`);if(rt.length>255)throw new Error(`userEvent length ${rt.length} exceeds maximum of 255`);if(st.length>255)throw new Error(`metadata length ${st.length} exceeds maximum of 255`);const at=this.USER_BROADCAST_PUSH_META_LENGTH+et.length+_e.length+j.length+rt.length+st.length,it=new ArrayBuffer(this.HEADER_LENGTH+at);let dt=new DataView(it),ot=0;dt.setUint8(ot++,this.KINDS.userBroadcastPush),dt.setUint8(ot++,et.length),dt.setUint8(ot++,_e.length),dt.setUint8(ot++,j.length),dt.setUint8(ot++,rt.length),dt.setUint8(ot++,st.length),dt.setUint8(ot++,g),Array.from(et,lt=>dt.setUint8(ot++,lt.charCodeAt(0))),Array.from(_e,lt=>dt.setUint8(ot++,lt.charCodeAt(0))),Array.from(j,lt=>dt.setUint8(ot++,lt.charCodeAt(0))),Array.from(rt,lt=>dt.setUint8(ot++,lt.charCodeAt(0))),Array.from(st,lt=>dt.setUint8(ot++,lt.charCodeAt(0)));var ct=new Uint8Array(it.byteLength+b.byteLength);return ct.set(new Uint8Array(it),0),ct.set(new Uint8Array(b),it.byteLength),ct.buffer}decode(d,g){if(this._isArrayBuffer(d)){let b=this._binaryDecode(d);return g(b)}if(typeof d=="string"){const b=JSON.parse(d),[_,$,j,_e,et]=b;return g({join_ref:_,ref:$,topic:j,event:_e,payload:et})}return g({})}_binaryDecode(d){const g=new DataView(d),b=g.getUint8(0),_=new TextDecoder;switch(b){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(d,g,_)}}_decodeUserBroadcast(d,g,b){const _=g.getUint8(1),$=g.getUint8(2),j=g.getUint8(3),_e=g.getUint8(4);let et=this.HEADER_LENGTH+4;const rt=b.decode(d.slice(et,et+_));et=et+_;const nt=b.decode(d.slice(et,et+$));et=et+$;const st=b.decode(d.slice(et,et+j));et=et+j;const at=d.slice(et,d.byteLength),it=_e===this.JSON_ENCODING?JSON.parse(b.decode(at)):at,dt={type:this.BROADCAST_EVENT,event:nt,payload:it};return j>0&&(dt.meta=JSON.parse(st)),{join_ref:null,ref:null,topic:rt,event:this.BROADCAST_EVENT,payload:dt}}_isArrayBuffer(d){var g;return d instanceof ArrayBuffer||((g=d==null?void 0:d.constructor)===null||g===void 0?void 0:g.name)==="ArrayBuffer"}_pick(d,g){return!d||typeof d!="object"?{}:Object.fromEntries(Object.entries(d).filter(([b])=>g.includes(b)))}}class Timer{constructor(d,g){this.callback=d,this.timerCalc=g,this.timer=void 0,this.tries=0,this.callback=d,this.timerCalc=g}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var PostgresTypes;(function(h){h.abstime="abstime",h.bool="bool",h.date="date",h.daterange="daterange",h.float4="float4",h.float8="float8",h.int2="int2",h.int4="int4",h.int4range="int4range",h.int8="int8",h.int8range="int8range",h.json="json",h.jsonb="jsonb",h.money="money",h.numeric="numeric",h.oid="oid",h.reltime="reltime",h.text="text",h.time="time",h.timestamp="timestamp",h.timestamptz="timestamptz",h.timetz="timetz",h.tsrange="tsrange",h.tstzrange="tstzrange"})(PostgresTypes||(PostgresTypes={}));const convertChangeData=(h,d,g={})=>{var b;const _=(b=g.skipTypes)!==null&&b!==void 0?b:[];return d?Object.keys(d).reduce(($,j)=>($[j]=convertColumn(j,h,d,_),$),{}):{}},convertColumn=(h,d,g,b)=>{const _=d.find(_e=>_e.name===h),$=_==null?void 0:_.type,j=g[h];return $&&!b.includes($)?convertCell($,j):noop$2(j)},convertCell=(h,d)=>{if(h.charAt(0)==="_"){const g=h.slice(1,h.length);return toArray$1(d,g)}switch(h){case PostgresTypes.bool:return toBoolean(d);case PostgresTypes.float4:case PostgresTypes.float8:case PostgresTypes.int2:case PostgresTypes.int4:case PostgresTypes.int8:case PostgresTypes.numeric:case PostgresTypes.oid:return toNumber(d);case PostgresTypes.json:case PostgresTypes.jsonb:return toJson(d);case PostgresTypes.timestamp:return toTimestampString(d);case PostgresTypes.abstime:case PostgresTypes.date:case PostgresTypes.daterange:case PostgresTypes.int4range:case PostgresTypes.int8range:case PostgresTypes.money:case PostgresTypes.reltime:case PostgresTypes.text:case PostgresTypes.time:case PostgresTypes.timestamptz:case PostgresTypes.timetz:case PostgresTypes.tsrange:case PostgresTypes.tstzrange:return noop$2(d);default:return noop$2(d)}},noop$2=h=>h,toBoolean=h=>{switch(h){case"t":return!0;case"f":return!1;default:return h}},toNumber=h=>{if(typeof h=="string"){const d=parseFloat(h);if(!Number.isNaN(d))return d}return h},toJson=h=>{if(typeof h=="string")try{return JSON.parse(h)}catch{return h}return h},toArray$1=(h,d)=>{if(typeof h!="string")return h;const g=h.length-1,b=h[g];if(h[0]==="{"&&b==="}"){let $;const j=h.slice(1,g);try{$=JSON.parse("["+j+"]")}catch{$=j?j.split(","):[]}return $.map(_e=>convertCell(d,_e))}return h},toTimestampString=h=>typeof h=="string"?h.replace(" ","T"):h,httpEndpointURL=h=>{const d=new URL(h);return d.protocol=d.protocol.replace(/^ws/i,"http"),d.pathname=d.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),d.pathname===""||d.pathname==="/"?d.pathname="/api/broadcast":d.pathname=d.pathname+"/api/broadcast",d.href};class Push{constructor(d,g,b={},_=DEFAULT_TIMEOUT){this.channel=d,this.event=g,this.payload=b,this.timeout=_,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(d){this.timeout=d,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(d){this.payload=Object.assign(Object.assign({},this.payload),d)}receive(d,g){var b;return this._hasReceived(d)&&g((b=this.receivedResp)===null||b===void 0?void 0:b.response),this.recHooks.push({status:d,callback:g}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const d=g=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=g,this._matchReceive(g)};this.channel._on(this.refEvent,{},d),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(d,g){this.refEvent&&this.channel._trigger(this.refEvent,{status:d,response:g})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:d,response:g}){this.recHooks.filter(b=>b.status===d).forEach(b=>b.callback(g))}_hasReceived(d){return this.receivedResp&&this.receivedResp.status===d}}var REALTIME_PRESENCE_LISTEN_EVENTS;(function(h){h.SYNC="sync",h.JOIN="join",h.LEAVE="leave"})(REALTIME_PRESENCE_LISTEN_EVENTS||(REALTIME_PRESENCE_LISTEN_EVENTS={}));class RealtimePresence{constructor(d,g){this.channel=d,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const b=(g==null?void 0:g.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(b.state,{},_=>{const{onJoin:$,onLeave:j,onSync:_e}=this.caller;this.joinRef=this.channel._joinRef(),this.state=RealtimePresence.syncState(this.state,_,$,j),this.pendingDiffs.forEach(et=>{this.state=RealtimePresence.syncDiff(this.state,et,$,j)}),this.pendingDiffs=[],_e()}),this.channel._on(b.diff,{},_=>{const{onJoin:$,onLeave:j,onSync:_e}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(_):(this.state=RealtimePresence.syncDiff(this.state,_,$,j),_e())}),this.onJoin((_,$,j)=>{this.channel._trigger("presence",{event:"join",key:_,currentPresences:$,newPresences:j})}),this.onLeave((_,$,j)=>{this.channel._trigger("presence",{event:"leave",key:_,currentPresences:$,leftPresences:j})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(d,g,b,_){const $=this.cloneDeep(d),j=this.transformState(g),_e={},et={};return this.map($,(rt,nt)=>{j[rt]||(et[rt]=nt)}),this.map(j,(rt,nt)=>{const st=$[rt];if(st){const at=nt.map(ct=>ct.presence_ref),it=st.map(ct=>ct.presence_ref),dt=nt.filter(ct=>it.indexOf(ct.presence_ref)<0),ot=st.filter(ct=>at.indexOf(ct.presence_ref)<0);dt.length>0&&(_e[rt]=dt),ot.length>0&&(et[rt]=ot)}else _e[rt]=nt}),this.syncDiff($,{joins:_e,leaves:et},b,_)}static syncDiff(d,g,b,_){const{joins:$,leaves:j}={joins:this.transformState(g.joins),leaves:this.transformState(g.leaves)};return b||(b=()=>{}),_||(_=()=>{}),this.map($,(_e,et)=>{var rt;const nt=(rt=d[_e])!==null&&rt!==void 0?rt:[];if(d[_e]=this.cloneDeep(et),nt.length>0){const st=d[_e].map(it=>it.presence_ref),at=nt.filter(it=>st.indexOf(it.presence_ref)<0);d[_e].unshift(...at)}b(_e,nt,et)}),this.map(j,(_e,et)=>{let rt=d[_e];if(!rt)return;const nt=et.map(st=>st.presence_ref);rt=rt.filter(st=>nt.indexOf(st.presence_ref)<0),d[_e]=rt,_(_e,rt,et),rt.length===0&&delete d[_e]}),d}static map(d,g){return Object.getOwnPropertyNames(d).map(b=>g(b,d[b]))}static transformState(d){return d=this.cloneDeep(d),Object.getOwnPropertyNames(d).reduce((g,b)=>{const _=d[b];return"metas"in _?g[b]=_.metas.map($=>($.presence_ref=$.phx_ref,delete $.phx_ref,delete $.phx_ref_prev,$)):g[b]=_,g},{})}static cloneDeep(d){return JSON.parse(JSON.stringify(d))}onJoin(d){this.caller.onJoin=d}onLeave(d){this.caller.onLeave=d}onSync(d){this.caller.onSync=d}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var REALTIME_POSTGRES_CHANGES_LISTEN_EVENT;(function(h){h.ALL="*",h.INSERT="INSERT",h.UPDATE="UPDATE",h.DELETE="DELETE"})(REALTIME_POSTGRES_CHANGES_LISTEN_EVENT||(REALTIME_POSTGRES_CHANGES_LISTEN_EVENT={}));var REALTIME_LISTEN_TYPES;(function(h){h.BROADCAST="broadcast",h.PRESENCE="presence",h.POSTGRES_CHANGES="postgres_changes",h.SYSTEM="system"})(REALTIME_LISTEN_TYPES||(REALTIME_LISTEN_TYPES={}));var REALTIME_SUBSCRIBE_STATES;(function(h){h.SUBSCRIBED="SUBSCRIBED",h.TIMED_OUT="TIMED_OUT",h.CLOSED="CLOSED",h.CHANNEL_ERROR="CHANNEL_ERROR"})(REALTIME_SUBSCRIBE_STATES||(REALTIME_SUBSCRIBE_STATES={}));class RealtimeChannel{constructor(d,g={config:{}},b){var _,$;if(this.topic=d,this.params=g,this.socket=b,this.bindings={},this.state=CHANNEL_STATES.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=d.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},g.config),this.timeout=this.socket.timeout,this.joinPush=new Push(this,CHANNEL_EVENTS.join,this.params,this.timeout),this.rejoinTimer=new Timer(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=CHANNEL_STATES.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(j=>j.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=CHANNEL_STATES.closed,this.socket._remove(this)}),this._onError(j=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,j),this.state=CHANNEL_STATES.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=CHANNEL_STATES.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",j=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,j),this.state=CHANNEL_STATES.errored,this.rejoinTimer.scheduleTimeout())}),this._on(CHANNEL_EVENTS.reply,{},(j,_e)=>{this._trigger(this._replyEventName(_e),j)}),this.presence=new RealtimePresence(this),this.broadcastEndpointURL=httpEndpointURL(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!(($=(_=this.params.config)===null||_===void 0?void 0:_.broadcast)===null||$===void 0)&&$.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(d,g=this.timeout){var b,_,$;if(this.socket.isConnected()||this.socket.connect(),this.state==CHANNEL_STATES.closed){const{config:{broadcast:j,presence:_e,private:et}}=this.params,rt=(_=(b=this.bindings.postgres_changes)===null||b===void 0?void 0:b.map(it=>it.filter))!==null&&_!==void 0?_:[],nt=!!this.bindings[REALTIME_LISTEN_TYPES.PRESENCE]&&this.bindings[REALTIME_LISTEN_TYPES.PRESENCE].length>0||(($=this.params.config.presence)===null||$===void 0?void 0:$.enabled)===!0,st={},at={broadcast:j,presence:Object.assign(Object.assign({},_e),{enabled:nt}),postgres_changes:rt,private:et};this.socket.accessTokenValue&&(st.access_token=this.socket.accessTokenValue),this._onError(it=>d==null?void 0:d(REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR,it)),this._onClose(()=>d==null?void 0:d(REALTIME_SUBSCRIBE_STATES.CLOSED)),this.updateJoinPayload(Object.assign({config:at},st)),this.joinedOnce=!0,this._rejoin(g),this.joinPush.receive("ok",async({postgres_changes:it})=>{var dt;if(this.socket._isManualToken()||this.socket.setAuth(),it===void 0){d==null||d(REALTIME_SUBSCRIBE_STATES.SUBSCRIBED);return}else{const ot=this.bindings.postgres_changes,ct=(dt=ot==null?void 0:ot.length)!==null&&dt!==void 0?dt:0,lt=[];for(let ut=0;ut<ct;ut++){const ft=ot[ut],{filter:{event:Et,schema:Tt,table:St,filter:ht}}=ft,kt=it&&it[ut];if(kt&&kt.event===Et&&RealtimeChannel.isFilterValueEqual(kt.schema,Tt)&&RealtimeChannel.isFilterValueEqual(kt.table,St)&&RealtimeChannel.isFilterValueEqual(kt.filter,ht))lt.push(Object.assign(Object.assign({},ft),{id:kt.id}));else{this.unsubscribe(),this.state=CHANNEL_STATES.errored,d==null||d(REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=lt,d&&d(REALTIME_SUBSCRIBE_STATES.SUBSCRIBED);return}}).receive("error",it=>{this.state=CHANNEL_STATES.errored,d==null||d(REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(it).join(", ")||"error")))}).receive("timeout",()=>{d==null||d(REALTIME_SUBSCRIBE_STATES.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(d,g={}){return await this.send({type:"presence",event:"track",payload:d},g.timeout||this.timeout)}async untrack(d={}){return await this.send({type:"presence",event:"untrack"},d)}on(d,g,b){return this.state===CHANNEL_STATES.joined&&d===REALTIME_LISTEN_TYPES.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(d,g,b)}async httpSend(d,g,b={}){var _;if(g==null)return Promise.reject("Payload is required for httpSend()");const $={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&($.Authorization=`Bearer ${this.socket.accessTokenValue}`);const j={method:"POST",headers:$,body:JSON.stringify({messages:[{topic:this.subTopic,event:d,payload:g,private:this.private}]})},_e=await this._fetchWithTimeout(this.broadcastEndpointURL,j,(_=b.timeout)!==null&&_!==void 0?_:this.timeout);if(_e.status===202)return{success:!0};let et=_e.statusText;try{const rt=await _e.json();et=rt.error||rt.message||et}catch{}return Promise.reject(new Error(et))}async send(d,g={}){var b,_;if(!this._canPush()&&d.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:$,payload:j}=d,_e={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(_e.Authorization=`Bearer ${this.socket.accessTokenValue}`);const et={method:"POST",headers:_e,body:JSON.stringify({messages:[{topic:this.subTopic,event:$,payload:j,private:this.private}]})};try{const rt=await this._fetchWithTimeout(this.broadcastEndpointURL,et,(b=g.timeout)!==null&&b!==void 0?b:this.timeout);return await((_=rt.body)===null||_===void 0?void 0:_.cancel()),rt.ok?"ok":"error"}catch(rt){return rt.name==="AbortError"?"timed out":"error"}}else return new Promise($=>{var j,_e,et;const rt=this._push(d.type,d,g.timeout||this.timeout);d.type==="broadcast"&&!(!((et=(_e=(j=this.params)===null||j===void 0?void 0:j.config)===null||_e===void 0?void 0:_e.broadcast)===null||et===void 0)&&et.ack)&&$("ok"),rt.receive("ok",()=>$("ok")),rt.receive("error",()=>$("error")),rt.receive("timeout",()=>$("timed out"))})}updateJoinPayload(d){this.joinPush.updatePayload(d)}unsubscribe(d=this.timeout){this.state=CHANNEL_STATES.leaving;const g=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(CHANNEL_EVENTS.close,"leave",this._joinRef())};this.joinPush.destroy();let b=null;return new Promise(_=>{b=new Push(this,CHANNEL_EVENTS.leave,{},d),b.receive("ok",()=>{g(),_("ok")}).receive("timeout",()=>{g(),_("timed out")}).receive("error",()=>{_("error")}),b.send(),this._canPush()||b.trigger("ok",{})}).finally(()=>{b==null||b.destroy()})}teardown(){this.pushBuffer.forEach(d=>d.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=CHANNEL_STATES.closed,this.bindings={}}async _fetchWithTimeout(d,g,b){const _=new AbortController,$=setTimeout(()=>_.abort(),b),j=await this.socket.fetch(d,Object.assign(Object.assign({},g),{signal:_.signal}));return clearTimeout($),j}_push(d,g,b=this.timeout){if(!this.joinedOnce)throw`tried to push '${d}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let _=new Push(this,d,g,b);return this._canPush()?_.send():this._addToPushBuffer(_),_}_addToPushBuffer(d){if(d.startTimeout(),this.pushBuffer.push(d),this.pushBuffer.length>MAX_PUSH_BUFFER_SIZE){const g=this.pushBuffer.shift();g&&(g.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${g.event}`,g.payload))}}_onMessage(d,g,b){return g}_isMember(d){return this.topic===d}_joinRef(){return this.joinPush.ref}_trigger(d,g,b){var _,$;const j=d.toLocaleLowerCase(),{close:_e,error:et,leave:rt,join:nt}=CHANNEL_EVENTS;if(b&&[_e,et,rt,nt].indexOf(j)>=0&&b!==this._joinRef())return;let at=this._onMessage(j,g,b);if(g&&!at)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(j)?(_=this.bindings.postgres_changes)===null||_===void 0||_.filter(it=>{var dt,ot,ct;return((dt=it.filter)===null||dt===void 0?void 0:dt.event)==="*"||((ct=(ot=it.filter)===null||ot===void 0?void 0:ot.event)===null||ct===void 0?void 0:ct.toLocaleLowerCase())===j}).map(it=>it.callback(at,b)):($=this.bindings[j])===null||$===void 0||$.filter(it=>{var dt,ot,ct,lt,ut,ft;if(["broadcast","presence","postgres_changes"].includes(j))if("id"in it){const Et=it.id,Tt=(dt=it.filter)===null||dt===void 0?void 0:dt.event;return Et&&((ot=g.ids)===null||ot===void 0?void 0:ot.includes(Et))&&(Tt==="*"||(Tt==null?void 0:Tt.toLocaleLowerCase())===((ct=g.data)===null||ct===void 0?void 0:ct.type.toLocaleLowerCase()))}else{const Et=(ut=(lt=it==null?void 0:it.filter)===null||lt===void 0?void 0:lt.event)===null||ut===void 0?void 0:ut.toLocaleLowerCase();return Et==="*"||Et===((ft=g==null?void 0:g.event)===null||ft===void 0?void 0:ft.toLocaleLowerCase())}else return it.type.toLocaleLowerCase()===j}).map(it=>{if(typeof at=="object"&&"ids"in at){const dt=at.data,{schema:ot,table:ct,commit_timestamp:lt,type:ut,errors:ft}=dt;at=Object.assign(Object.assign({},{schema:ot,table:ct,commit_timestamp:lt,eventType:ut,new:{},old:{},errors:ft}),this._getPayloadRecords(dt))}it.callback(at,b)})}_isClosed(){return this.state===CHANNEL_STATES.closed}_isJoined(){return this.state===CHANNEL_STATES.joined}_isJoining(){return this.state===CHANNEL_STATES.joining}_isLeaving(){return this.state===CHANNEL_STATES.leaving}_replyEventName(d){return`chan_reply_${d}`}_on(d,g,b){const _=d.toLocaleLowerCase(),$={type:_,filter:g,callback:b};return this.bindings[_]?this.bindings[_].push($):this.bindings[_]=[$],this}_off(d,g){const b=d.toLocaleLowerCase();return this.bindings[b]&&(this.bindings[b]=this.bindings[b].filter(_=>{var $;return!((($=_.type)===null||$===void 0?void 0:$.toLocaleLowerCase())===b&&RealtimeChannel.isEqual(_.filter,g))})),this}static isEqual(d,g){if(Object.keys(d).length!==Object.keys(g).length)return!1;for(const b in d)if(d[b]!==g[b])return!1;return!0}static isFilterValueEqual(d,g){return(d??void 0)===(g??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(d){this._on(CHANNEL_EVENTS.close,{},d)}_onError(d){this._on(CHANNEL_EVENTS.error,{},g=>d(g))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(d=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=CHANNEL_STATES.joining,this.joinPush.resend(d))}_getPayloadRecords(d){const g={new:{},old:{}};return(d.type==="INSERT"||d.type==="UPDATE")&&(g.new=convertChangeData(d.columns,d.record)),(d.type==="UPDATE"||d.type==="DELETE")&&(g.old=convertChangeData(d.columns,d.old_record)),g}}const noop$1=()=>{},CONNECTION_TIMEOUTS={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},RECONNECT_INTERVALS=[1e3,2e3,5e3,1e4],DEFAULT_RECONNECT_FALLBACK=1e4,WORKER_SCRIPT=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class RealtimeClient{constructor(d,g){var b;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=DEFAULT_TIMEOUT,this.transport=null,this.heartbeatIntervalMs=CONNECTION_TIMEOUTS.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=noop$1,this.ref=0,this.reconnectTimer=null,this.vsn=DEFAULT_VSN,this.logger=noop$1,this.conn=null,this.sendBuffer=[],this.serializer=new Serializer,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=_=>_?(...$)=>_(...$):(...$)=>fetch(...$),!(!((b=g==null?void 0:g.params)===null||b===void 0)&&b.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=g.params.apikey,this.endPoint=`${d}/${TRANSPORTS.websocket}`,this.httpEndpoint=httpEndpointURL(d),this._initializeOptions(g),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(g==null?void 0:g.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=WebSocketFactory.createWebSocket(this.endpointURL())}catch(d){this._setConnectionState("disconnected");const g=d.message;throw g.includes("Node.js")?new Error(`${g}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${g}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(d,g){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const b=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(b),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(d?this.conn.close(d,g??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(d){const g=await d.unsubscribe();return this.channels.length===0&&this.disconnect(),g}async removeAllChannels(){const d=await Promise.all(this.channels.map(g=>g.unsubscribe()));return this.channels=[],this.disconnect(),d}log(d,g,b){this.logger(d,g,b)}connectionState(){switch(this.conn&&this.conn.readyState){case SOCKET_STATES.connecting:return CONNECTION_STATE.Connecting;case SOCKET_STATES.open:return CONNECTION_STATE.Open;case SOCKET_STATES.closing:return CONNECTION_STATE.Closing;default:return CONNECTION_STATE.Closed}}isConnected(){return this.connectionState()===CONNECTION_STATE.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(d,g={config:{}}){const b=`realtime:${d}`,_=this.getChannels().find($=>$.topic===b);if(_)return _;{const $=new RealtimeChannel(`realtime:${d}`,g,this);return this.channels.push($),$}}push(d){const{topic:g,event:b,payload:_,ref:$}=d,j=()=>{this.encode(d,_e=>{var et;(et=this.conn)===null||et===void 0||et.send(_e)})};this.log("push",`${g} ${b} (${$})`,_),this.isConnected()?j():this.sendBuffer.push(j)}async setAuth(d=null){this._authPromise=this._performAuth(d);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var d;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(g){this.log("error","error in heartbeat callback",g)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(g){this.log("error","error in heartbeat callback",g)}this._wasManualDisconnect=!1,(d=this.conn)===null||d===void 0||d.close(WS_CLOSE_NORMAL,"heartbeat timeout"),setTimeout(()=>{var g;this.isConnected()||(g=this.reconnectTimer)===null||g===void 0||g.scheduleTimeout()},CONNECTION_TIMEOUTS.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(g){this.log("error","error in heartbeat callback",g)}this._setAuthSafely("heartbeat")}onHeartbeat(d){this.heartbeatCallback=d}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(d=>d()),this.sendBuffer=[])}_makeRef(){let d=this.ref+1;return d===this.ref?this.ref=0:this.ref=d,this.ref.toString()}_leaveOpenTopic(d){let g=this.channels.find(b=>b.topic===d&&(b._isJoined()||b._isJoining()));g&&(this.log("transport",`leaving duplicate topic "${d}"`),g.unsubscribe())}_remove(d){this.channels=this.channels.filter(g=>g.topic!==d.topic)}_onConnMessage(d){this.decode(d.data,g=>{if(g.topic==="phoenix"&&g.event==="phx_reply"&&g.ref&&g.ref===this.pendingHeartbeatRef){const rt=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(g.payload.status==="ok"?"ok":"error",rt)}catch(nt){this.log("error","error in heartbeat callback",nt)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:b,event:_,payload:$,ref:j}=g,_e=j?`(${j})`:"",et=$.status||"";this.log("receive",`${et} ${b} ${_} ${_e}`.trim(),$),this.channels.filter(rt=>rt._isMember(b)).forEach(rt=>rt._trigger(_,$,j)),this._triggerStateCallbacks("message",g)})}_clearTimer(d){var g;d==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):d==="reconnect"&&((g=this.reconnectTimer)===null||g===void 0||g.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=d=>this._onConnError(d),this.conn.onmessage=d=>this._onConnMessage(d),this.conn.onclose=d=>this._onConnClose(d),this.conn.readyState===SOCKET_STATES.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===SOCKET_STATES.open||this.conn.readyState===SOCKET_STATES.connecting)try{this.conn.close()}catch(d){this.log("error","Error closing connection",d)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(d=>d.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(g=>{this.log("error","error waiting for auth on connect",g),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const d=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(d),this.workerRef.onerror=g=>{this.log("worker","worker error",g.message),this._terminateWorker()},this.workerRef.onmessage=g=>{g.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(d){var g;this._setConnectionState("disconnected"),this.log("transport","close",d),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(g=this.reconnectTimer)===null||g===void 0||g.scheduleTimeout(),this._triggerStateCallbacks("close",d)}_onConnError(d){this._setConnectionState("disconnected"),this.log("transport",`${d}`),this._triggerChanError(),this._triggerStateCallbacks("error",d);try{this.heartbeatCallback("error")}catch(g){this.log("error","error in heartbeat callback",g)}}_triggerChanError(){this.channels.forEach(d=>d._trigger(CHANNEL_EVENTS.error))}_appendParams(d,g){if(Object.keys(g).length===0)return d;const b=d.match(/\?/)?"&":"?",_=new URLSearchParams(g);return`${d}${b}${_}`}_workerObjectUrl(d){let g;if(d)g=d;else{const b=new Blob([WORKER_SCRIPT],{type:"application/javascript"});g=URL.createObjectURL(b)}return g}_setConnectionState(d,g=!1){this._connectionState=d,d==="connecting"?this._wasManualDisconnect=!1:d==="disconnecting"&&(this._wasManualDisconnect=g)}async _performAuth(d=null){let g,b=!1;if(d)g=d,b=!0;else if(this.accessToken)try{g=await this.accessToken()}catch(_){this.log("error","Error fetching access token from callback",_),g=this.accessTokenValue}else g=this.accessTokenValue;b?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=g&&(this.accessTokenValue=g,this.channels.forEach(_=>{const $={access_token:g,version:DEFAULT_VERSION};g&&_.updateJoinPayload($),_.joinedOnce&&_._isJoined()&&_._push(CHANNEL_EVENTS.access_token,{access_token:g})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(d="general"){this._isManualToken()||this.setAuth().catch(g=>{this.log("error",`Error setting auth in ${d}`,g)})}_triggerStateCallbacks(d,g){try{this.stateChangeCallbacks[d].forEach(b=>{try{b(g)}catch(_){this.log("error",`error in ${d} callback`,_)}})}catch(b){this.log("error",`error triggering ${d} callbacks`,b)}}_setupReconnectionTimer(){this.reconnectTimer=new Timer(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},CONNECTION_TIMEOUTS.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(d){var g,b,_,$,j,_e,et,rt,nt,st,at,it;switch(this.transport=(g=d==null?void 0:d.transport)!==null&&g!==void 0?g:null,this.timeout=(b=d==null?void 0:d.timeout)!==null&&b!==void 0?b:DEFAULT_TIMEOUT,this.heartbeatIntervalMs=(_=d==null?void 0:d.heartbeatIntervalMs)!==null&&_!==void 0?_:CONNECTION_TIMEOUTS.HEARTBEAT_INTERVAL,this.worker=($=d==null?void 0:d.worker)!==null&&$!==void 0?$:!1,this.accessToken=(j=d==null?void 0:d.accessToken)!==null&&j!==void 0?j:null,this.heartbeatCallback=(_e=d==null?void 0:d.heartbeatCallback)!==null&&_e!==void 0?_e:noop$1,this.vsn=(et=d==null?void 0:d.vsn)!==null&&et!==void 0?et:DEFAULT_VSN,d!=null&&d.params&&(this.params=d.params),d!=null&&d.logger&&(this.logger=d.logger),(d!=null&&d.logLevel||d!=null&&d.log_level)&&(this.logLevel=d.logLevel||d.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(rt=d==null?void 0:d.reconnectAfterMs)!==null&&rt!==void 0?rt:dt=>RECONNECT_INTERVALS[dt-1]||DEFAULT_RECONNECT_FALLBACK,this.vsn){case VSN_1_0_0:this.encode=(nt=d==null?void 0:d.encode)!==null&&nt!==void 0?nt:(dt,ot)=>ot(JSON.stringify(dt)),this.decode=(st=d==null?void 0:d.decode)!==null&&st!==void 0?st:(dt,ot)=>ot(JSON.parse(dt));break;case VSN_2_0_0:this.encode=(at=d==null?void 0:d.encode)!==null&&at!==void 0?at:this.serializer.encode.bind(this.serializer),this.decode=(it=d==null?void 0:d.decode)!==null&&it!==void 0?it:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=d==null?void 0:d.workerUrl}}}var IcebergError=class extends Error{constructor(h,d){var g;super(h),this.name="IcebergError",this.status=d.status,this.icebergType=d.icebergType,this.icebergCode=d.icebergCode,this.details=d.details,this.isCommitStateUnknown=d.icebergType==="CommitStateUnknownException"||[500,502,504].includes(d.status)&&((g=d.icebergType)==null?void 0:g.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function buildUrl(h,d,g){const b=new URL(d,h);if(g)for(const[_,$]of Object.entries(g))$!==void 0&&b.searchParams.set(_,$);return b.toString()}async function buildAuthHeaders(h){return!h||h.type==="none"?{}:h.type==="bearer"?{Authorization:`Bearer ${h.token}`}:h.type==="header"?{[h.name]:h.value}:h.type==="custom"?await h.getHeaders():{}}function createFetchClient(h){const d=h.fetchImpl??globalThis.fetch;return{async request({method:g,path:b,query:_,body:$,headers:j}){const _e=buildUrl(h.baseUrl,b,_),et=await buildAuthHeaders(h.auth),rt=await d(_e,{method:g,headers:{...$?{"Content-Type":"application/json"}:{},...et,...j},body:$?JSON.stringify($):void 0}),nt=await rt.text(),st=(rt.headers.get("content-type")||"").includes("application/json"),at=st&&nt?JSON.parse(nt):nt;if(!rt.ok){const it=st?at:void 0,dt=it==null?void 0:it.error;throw new IcebergError((dt==null?void 0:dt.message)??`Request failed with status ${rt.status}`,{status:rt.status,icebergType:dt==null?void 0:dt.type,icebergCode:dt==null?void 0:dt.code,details:it})}return{status:rt.status,headers:rt.headers,data:at}}}}function namespaceToPath(h){return h.join("")}var NamespaceOperations=class{constructor(h,d=""){this.client=h,this.prefix=d}async listNamespaces(h){const d=h?{parent:namespaceToPath(h.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:d})).data.namespaces.map(b=>({namespace:b}))}async createNamespace(h,d){const g={namespace:h.namespace,properties:d==null?void 0:d.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:g})).data}async dropNamespace(h){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${namespaceToPath(h.namespace)}`})}async loadNamespaceMetadata(h){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${namespaceToPath(h.namespace)}`})).data.properties}}async namespaceExists(h){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${namespaceToPath(h.namespace)}`}),!0}catch(d){if(d instanceof IcebergError&&d.status===404)return!1;throw d}}async createNamespaceIfNotExists(h,d){try{return await this.createNamespace(h,d)}catch(g){if(g instanceof IcebergError&&g.status===409)return;throw g}}};function namespaceToPath2(h){return h.join("")}var TableOperations=class{constructor(h,d="",g){this.client=h,this.prefix=d,this.accessDelegation=g}async listTables(h){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${namespaceToPath2(h.namespace)}/tables`})).data.identifiers}async createTable(h,d){const g={};return this.accessDelegation&&(g["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${namespaceToPath2(h.namespace)}/tables`,body:d,headers:g})).data.metadata}async updateTable(h,d){const g=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${namespaceToPath2(h.namespace)}/tables/${h.name}`,body:d});return{"metadata-location":g.data["metadata-location"],metadata:g.data.metadata}}async dropTable(h,d){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${namespaceToPath2(h.namespace)}/tables/${h.name}`,query:{purgeRequested:String((d==null?void 0:d.purge)??!1)}})}async loadTable(h){const d={};return this.accessDelegation&&(d["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${namespaceToPath2(h.namespace)}/tables/${h.name}`,headers:d})).data.metadata}async tableExists(h){const d={};this.accessDelegation&&(d["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${namespaceToPath2(h.namespace)}/tables/${h.name}`,headers:d}),!0}catch(g){if(g instanceof IcebergError&&g.status===404)return!1;throw g}}async createTableIfNotExists(h,d){try{return await this.createTable(h,d)}catch(g){if(g instanceof IcebergError&&g.status===409)return await this.loadTable({namespace:h.namespace,name:d.name});throw g}}},IcebergRestCatalog=class{constructor(h){var b;let d="v1";h.catalogName&&(d+=`/${h.catalogName}`);const g=h.baseUrl.endsWith("/")?h.baseUrl:`${h.baseUrl}/`;this.client=createFetchClient({baseUrl:g,auth:h.auth,fetchImpl:h.fetch}),this.accessDelegation=(b=h.accessDelegation)==null?void 0:b.join(","),this.namespaceOps=new NamespaceOperations(this.client,d),this.tableOps=new TableOperations(this.client,d,this.accessDelegation)}async listNamespaces(h){return this.namespaceOps.listNamespaces(h)}async createNamespace(h,d){return this.namespaceOps.createNamespace(h,d)}async dropNamespace(h){await this.namespaceOps.dropNamespace(h)}async loadNamespaceMetadata(h){return this.namespaceOps.loadNamespaceMetadata(h)}async listTables(h){return this.tableOps.listTables(h)}async createTable(h,d){return this.tableOps.createTable(h,d)}async updateTable(h,d){return this.tableOps.updateTable(h,d)}async dropTable(h,d){await this.tableOps.dropTable(h,d)}async loadTable(h){return this.tableOps.loadTable(h)}async namespaceExists(h){return this.namespaceOps.namespaceExists(h)}async tableExists(h){return this.tableOps.tableExists(h)}async createNamespaceIfNotExists(h,d){return this.namespaceOps.createNamespaceIfNotExists(h,d)}async createTableIfNotExists(h,d){return this.tableOps.createTableIfNotExists(h,d)}},StorageError=class extends Error{constructor(h,d="storage",g,b){super(h),this.__isStorageError=!0,this.namespace=d,this.name=d==="vectors"?"StorageVectorsError":"StorageError",this.status=g,this.statusCode=b}};function isStorageError(h){return typeof h=="object"&&h!==null&&"__isStorageError"in h}var StorageApiError=class extends StorageError{constructor(h,d,g,b="storage"){super(h,b,d,g),this.name=b==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=d,this.statusCode=g}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},StorageUnknownError=class extends StorageError{constructor(h,d,g="storage"){super(h,g),this.name=g==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=d}};const resolveFetch$2=h=>h?(...d)=>h(...d):(...d)=>fetch(...d),isPlainObject=h=>{if(typeof h!="object"||h===null)return!1;const d=Object.getPrototypeOf(h);return(d===null||d===Object.prototype||Object.getPrototypeOf(d)===null)&&!(Symbol.toStringTag in h)&&!(Symbol.iterator in h)},recursiveToCamel=h=>{if(Array.isArray(h))return h.map(g=>recursiveToCamel(g));if(typeof h=="function"||h!==Object(h))return h;const d={};return Object.entries(h).forEach(([g,b])=>{const _=g.replace(/([-_][a-z])/gi,$=>$.toUpperCase().replace(/[-_]/g,""));d[_]=recursiveToCamel(b)}),d},isValidBucketName=h=>!h||typeof h!="string"||h.length===0||h.length>100||h.trim()!==h||h.includes("/")||h.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(h);function _typeof$1(h){"@babel/helpers - typeof";return _typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},_typeof$1(h)}function toPrimitive$1(h,d){if(_typeof$1(h)!="object"||!h)return h;var g=h[Symbol.toPrimitive];if(g!==void 0){var b=g.call(h,d||"default");if(_typeof$1(b)!="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return(d==="string"?String:Number)(h)}function toPropertyKey$1(h){var d=toPrimitive$1(h,"string");return _typeof$1(d)=="symbol"?d:d+""}function _defineProperty$1(h,d,g){return(d=toPropertyKey$1(d))in h?Object.defineProperty(h,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):h[d]=g,h}function ownKeys$1(h,d){var g=Object.keys(h);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(h);d&&(b=b.filter(function(_){return Object.getOwnPropertyDescriptor(h,_).enumerable})),g.push.apply(g,b)}return g}function _objectSpread2$1(h){for(var d=1;d<arguments.length;d++){var g=arguments[d]!=null?arguments[d]:{};d%2?ownKeys$1(Object(g),!0).forEach(function(b){_defineProperty$1(h,b,g[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(g)):ownKeys$1(Object(g)).forEach(function(b){Object.defineProperty(h,b,Object.getOwnPropertyDescriptor(g,b))})}return h}const _getErrorMessage$1=h=>{var d;return h.msg||h.message||h.error_description||(typeof h.error=="string"?h.error:(d=h.error)===null||d===void 0?void 0:d.message)||JSON.stringify(h)},handleError$1=async(h,d,g,b)=>{if(h&&typeof h=="object"&&"status"in h&&"ok"in h&&typeof h.status=="number"&&!(g!=null&&g.noResolveJson)){const _=h,$=_.status||500;if(typeof _.json=="function")_.json().then(j=>{const _e=(j==null?void 0:j.statusCode)||(j==null?void 0:j.code)||$+"";d(new StorageApiError(_getErrorMessage$1(j),$,_e,b))}).catch(()=>{if(b==="vectors"){const j=$+"";d(new StorageApiError(_.statusText||`HTTP ${$} error`,$,j,b))}else{const j=$+"";d(new StorageApiError(_.statusText||`HTTP ${$} error`,$,j,b))}});else{const j=$+"";d(new StorageApiError(_.statusText||`HTTP ${$} error`,$,j,b))}}else d(new StorageUnknownError(_getErrorMessage$1(h),h,b))},_getRequestParams$1=(h,d,g,b)=>{const _={method:h,headers:(d==null?void 0:d.headers)||{}};return h==="GET"||h==="HEAD"||!b?_objectSpread2$1(_objectSpread2$1({},_),g):(isPlainObject(b)?(_.headers=_objectSpread2$1({"Content-Type":"application/json"},d==null?void 0:d.headers),_.body=JSON.stringify(b)):_.body=b,d!=null&&d.duplex&&(_.duplex=d.duplex),_objectSpread2$1(_objectSpread2$1({},_),g))};async function _handleRequest$1(h,d,g,b,_,$,j){return new Promise((_e,et)=>{h(g,_getRequestParams$1(d,b,_,$)).then(rt=>{if(!rt.ok)throw rt;if(b!=null&&b.noResolveJson)return rt;if(j==="vectors"){const nt=rt.headers.get("content-type");if(rt.headers.get("content-length")==="0"||rt.status===204)return{};if(!nt||!nt.includes("application/json"))return{}}return rt.json()}).then(rt=>_e(rt)).catch(rt=>handleError$1(rt,et,b,j))})}function createFetchApi(h="storage"){return{get:async(d,g,b,_)=>_handleRequest$1(d,"GET",g,b,_,void 0,h),post:async(d,g,b,_,$)=>_handleRequest$1(d,"POST",g,_,$,b,h),put:async(d,g,b,_,$)=>_handleRequest$1(d,"PUT",g,_,$,b,h),head:async(d,g,b,_)=>_handleRequest$1(d,"HEAD",g,_objectSpread2$1(_objectSpread2$1({},b),{},{noResolveJson:!0}),_,void 0,h),remove:async(d,g,b,_,$)=>_handleRequest$1(d,"DELETE",g,_,$,b,h)}}const defaultApi=createFetchApi("storage"),{get,post,put,head,remove}=defaultApi,vectorsApi=createFetchApi("vectors");var BaseApiClient=class{constructor(h,d={},g,b="storage"){this.shouldThrowOnError=!1,this.url=h,this.headers=d,this.fetch=resolveFetch$2(g),this.namespace=b}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(h){var d=this;try{return{data:await h(),error:null}}catch(g){if(d.shouldThrowOnError)throw g;if(isStorageError(g))return{data:null,error:g};throw g}}},StreamDownloadBuilder=class{constructor(h,d){this.downloadFn=h,this.shouldThrowOnError=d}then(h,d){return this.execute().then(h,d)}async execute(){var h=this;try{return{data:(await h.downloadFn()).body,error:null}}catch(d){if(h.shouldThrowOnError)throw d;if(isStorageError(d))return{data:null,error:d};throw d}}};let _Symbol$toStringTag;_Symbol$toStringTag=Symbol.toStringTag;var BlobDownloadBuilder=class{constructor(h,d){this.downloadFn=h,this.shouldThrowOnError=d,this[_Symbol$toStringTag]="BlobDownloadBuilder",this.promise=null}asStream(){return new StreamDownloadBuilder(this.downloadFn,this.shouldThrowOnError)}then(h,d){return this.getPromise().then(h,d)}catch(h){return this.getPromise().catch(h)}finally(h){return this.getPromise().finally(h)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var h=this;try{return{data:await(await h.downloadFn()).blob(),error:null}}catch(d){if(h.shouldThrowOnError)throw d;if(isStorageError(d))return{data:null,error:d};throw d}}};const DEFAULT_SEARCH_OPTIONS={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},DEFAULT_FILE_OPTIONS={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var StorageFileApi=class extends BaseApiClient{constructor(h,d={},g,b){super(h,d,b,"storage"),this.bucketId=g}async uploadOrUpdate(h,d,g,b){var _=this;return _.handleOperation(async()=>{let $;const j=_objectSpread2$1(_objectSpread2$1({},DEFAULT_FILE_OPTIONS),b);let _e=_objectSpread2$1(_objectSpread2$1({},_.headers),h==="POST"&&{"x-upsert":String(j.upsert)});const et=j.metadata;typeof Blob<"u"&&g instanceof Blob?($=new FormData,$.append("cacheControl",j.cacheControl),et&&$.append("metadata",_.encodeMetadata(et)),$.append("",g)):typeof FormData<"u"&&g instanceof FormData?($=g,$.has("cacheControl")||$.append("cacheControl",j.cacheControl),et&&!$.has("metadata")&&$.append("metadata",_.encodeMetadata(et))):($=g,_e["cache-control"]=`max-age=${j.cacheControl}`,_e["content-type"]=j.contentType,et&&(_e["x-metadata"]=_.toBase64(_.encodeMetadata(et))),(typeof ReadableStream<"u"&&$ instanceof ReadableStream||$&&typeof $=="object"&&"pipe"in $&&typeof $.pipe=="function")&&!j.duplex&&(j.duplex="half")),b!=null&&b.headers&&(_e=_objectSpread2$1(_objectSpread2$1({},_e),b.headers));const rt=_._removeEmptyFolders(d),nt=_._getFinalPath(rt),st=await(h=="PUT"?put:post)(_.fetch,`${_.url}/object/${nt}`,$,_objectSpread2$1({headers:_e},j!=null&&j.duplex?{duplex:j.duplex}:{}));return{path:rt,id:st.Id,fullPath:st.Key}})}async upload(h,d,g){return this.uploadOrUpdate("POST",h,d,g)}async uploadToSignedUrl(h,d,g,b){var _=this;const $=_._removeEmptyFolders(h),j=_._getFinalPath($),_e=new URL(_.url+`/object/upload/sign/${j}`);return _e.searchParams.set("token",d),_.handleOperation(async()=>{let et;const rt=_objectSpread2$1({upsert:DEFAULT_FILE_OPTIONS.upsert},b),nt=_objectSpread2$1(_objectSpread2$1({},_.headers),{"x-upsert":String(rt.upsert)});return typeof Blob<"u"&&g instanceof Blob?(et=new FormData,et.append("cacheControl",rt.cacheControl),et.append("",g)):typeof FormData<"u"&&g instanceof FormData?(et=g,et.append("cacheControl",rt.cacheControl)):(et=g,nt["cache-control"]=`max-age=${rt.cacheControl}`,nt["content-type"]=rt.contentType),{path:$,fullPath:(await put(_.fetch,_e.toString(),et,{headers:nt})).Key}})}async createSignedUploadUrl(h,d){var g=this;return g.handleOperation(async()=>{let b=g._getFinalPath(h);const _=_objectSpread2$1({},g.headers);d!=null&&d.upsert&&(_["x-upsert"]="true");const $=await post(g.fetch,`${g.url}/object/upload/sign/${b}`,{},{headers:_}),j=new URL(g.url+$.url),_e=j.searchParams.get("token");if(!_e)throw new StorageError("No token returned by API");return{signedUrl:j.toString(),path:h,token:_e}})}async update(h,d,g){return this.uploadOrUpdate("PUT",h,d,g)}async move(h,d,g){var b=this;return b.handleOperation(async()=>await post(b.fetch,`${b.url}/object/move`,{bucketId:b.bucketId,sourceKey:h,destinationKey:d,destinationBucket:g==null?void 0:g.destinationBucket},{headers:b.headers}))}async copy(h,d,g){var b=this;return b.handleOperation(async()=>({path:(await post(b.fetch,`${b.url}/object/copy`,{bucketId:b.bucketId,sourceKey:h,destinationKey:d,destinationBucket:g==null?void 0:g.destinationBucket},{headers:b.headers})).Key}))}async createSignedUrl(h,d,g){var b=this;return b.handleOperation(async()=>{let _=b._getFinalPath(h),$=await post(b.fetch,`${b.url}/object/sign/${_}`,_objectSpread2$1({expiresIn:d},g!=null&&g.transform?{transform:g.transform}:{}),{headers:b.headers});const j=g!=null&&g.download?`&download=${g.download===!0?"":g.download}`:"";return{signedUrl:encodeURI(`${b.url}${$.signedURL}${j}`)}})}async createSignedUrls(h,d,g){var b=this;return b.handleOperation(async()=>{const _=await post(b.fetch,`${b.url}/object/sign/${b.bucketId}`,{expiresIn:d,paths:h},{headers:b.headers}),$=g!=null&&g.download?`&download=${g.download===!0?"":g.download}`:"";return _.map(j=>_objectSpread2$1(_objectSpread2$1({},j),{},{signedUrl:j.signedURL?encodeURI(`${b.url}${j.signedURL}${$}`):null}))})}download(h,d){const g=typeof(d==null?void 0:d.transform)<"u"?"render/image/authenticated":"object",b=this.transformOptsToQueryString((d==null?void 0:d.transform)||{}),_=b?`?${b}`:"",$=this._getFinalPath(h),j=()=>get(this.fetch,`${this.url}/${g}/${$}${_}`,{headers:this.headers,noResolveJson:!0});return new BlobDownloadBuilder(j,this.shouldThrowOnError)}async info(h){var d=this;const g=d._getFinalPath(h);return d.handleOperation(async()=>recursiveToCamel(await get(d.fetch,`${d.url}/object/info/${g}`,{headers:d.headers})))}async exists(h){var d=this;const g=d._getFinalPath(h);try{return await head(d.fetch,`${d.url}/object/${g}`,{headers:d.headers}),{data:!0,error:null}}catch(b){if(d.shouldThrowOnError)throw b;if(isStorageError(b)&&b instanceof StorageUnknownError){const _=b.originalError;if([400,404].includes(_==null?void 0:_.status))return{data:!1,error:b}}throw b}}getPublicUrl(h,d){const g=this._getFinalPath(h),b=[],_=d!=null&&d.download?`download=${d.download===!0?"":d.download}`:"";_!==""&&b.push(_);const $=typeof(d==null?void 0:d.transform)<"u"?"render/image":"object",j=this.transformOptsToQueryString((d==null?void 0:d.transform)||{});j!==""&&b.push(j);let _e=b.join("&");return _e!==""&&(_e=`?${_e}`),{data:{publicUrl:encodeURI(`${this.url}/${$}/public/${g}${_e}`)}}}async remove(h){var d=this;return d.handleOperation(async()=>await remove(d.fetch,`${d.url}/object/${d.bucketId}`,{prefixes:h},{headers:d.headers}))}async list(h,d,g){var b=this;return b.handleOperation(async()=>{const _=_objectSpread2$1(_objectSpread2$1(_objectSpread2$1({},DEFAULT_SEARCH_OPTIONS),d),{},{prefix:h||""});return await post(b.fetch,`${b.url}/object/list/${b.bucketId}`,_,{headers:b.headers},g)})}async listV2(h,d){var g=this;return g.handleOperation(async()=>{const b=_objectSpread2$1({},h);return await post(g.fetch,`${g.url}/object/list-v2/${g.bucketId}`,b,{headers:g.headers},d)})}encodeMetadata(h){return JSON.stringify(h)}toBase64(h){return typeof Buffer<"u"?Buffer.from(h).toString("base64"):btoa(h)}_getFinalPath(h){return`${this.bucketId}/${h.replace(/^\/+/,"")}`}_removeEmptyFolders(h){return h.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(h){const d=[];return h.width&&d.push(`width=${h.width}`),h.height&&d.push(`height=${h.height}`),h.resize&&d.push(`resize=${h.resize}`),h.format&&d.push(`format=${h.format}`),h.quality&&d.push(`quality=${h.quality}`),d.join("&")}};const version$2="2.95.2",DEFAULT_HEADERS$2={"X-Client-Info":`storage-js/${version$2}`};var StorageBucketApi=class extends BaseApiClient{constructor(h,d={},g,b){const _=new URL(h);b!=null&&b.useNewHostname&&/supabase\.(co|in|red)$/.test(_.hostname)&&!_.hostname.includes("storage.supabase.")&&(_.hostname=_.hostname.replace("supabase.","storage.supabase."));const $=_.href.replace(/\/$/,""),j=_objectSpread2$1(_objectSpread2$1({},DEFAULT_HEADERS$2),d);super($,j,g,"storage")}async listBuckets(h){var d=this;return d.handleOperation(async()=>{const g=d.listBucketOptionsToQueryString(h);return await get(d.fetch,`${d.url}/bucket${g}`,{headers:d.headers})})}async getBucket(h){var d=this;return d.handleOperation(async()=>await get(d.fetch,`${d.url}/bucket/${h}`,{headers:d.headers}))}async createBucket(h,d={public:!1}){var g=this;return g.handleOperation(async()=>await post(g.fetch,`${g.url}/bucket`,{id:h,name:h,type:d.type,public:d.public,file_size_limit:d.fileSizeLimit,allowed_mime_types:d.allowedMimeTypes},{headers:g.headers}))}async updateBucket(h,d){var g=this;return g.handleOperation(async()=>await put(g.fetch,`${g.url}/bucket/${h}`,{id:h,name:h,public:d.public,file_size_limit:d.fileSizeLimit,allowed_mime_types:d.allowedMimeTypes},{headers:g.headers}))}async emptyBucket(h){var d=this;return d.handleOperation(async()=>await post(d.fetch,`${d.url}/bucket/${h}/empty`,{},{headers:d.headers}))}async deleteBucket(h){var d=this;return d.handleOperation(async()=>await remove(d.fetch,`${d.url}/bucket/${h}`,{},{headers:d.headers}))}listBucketOptionsToQueryString(h){const d={};return h&&("limit"in h&&(d.limit=String(h.limit)),"offset"in h&&(d.offset=String(h.offset)),h.search&&(d.search=h.search),h.sortColumn&&(d.sortColumn=h.sortColumn),h.sortOrder&&(d.sortOrder=h.sortOrder)),Object.keys(d).length>0?"?"+new URLSearchParams(d).toString():""}},StorageAnalyticsClient=class extends BaseApiClient{constructor(h,d={},g){const b=h.replace(/\/$/,""),_=_objectSpread2$1(_objectSpread2$1({},DEFAULT_HEADERS$2),d);super(b,_,g,"storage")}async createBucket(h){var d=this;return d.handleOperation(async()=>await post(d.fetch,`${d.url}/bucket`,{name:h},{headers:d.headers}))}async listBuckets(h){var d=this;return d.handleOperation(async()=>{const g=new URLSearchParams;(h==null?void 0:h.limit)!==void 0&&g.set("limit",h.limit.toString()),(h==null?void 0:h.offset)!==void 0&&g.set("offset",h.offset.toString()),h!=null&&h.sortColumn&&g.set("sortColumn",h.sortColumn),h!=null&&h.sortOrder&&g.set("sortOrder",h.sortOrder),h!=null&&h.search&&g.set("search",h.search);const b=g.toString(),_=b?`${d.url}/bucket?${b}`:`${d.url}/bucket`;return await get(d.fetch,_,{headers:d.headers})})}async deleteBucket(h){var d=this;return d.handleOperation(async()=>await remove(d.fetch,`${d.url}/bucket/${h}`,{},{headers:d.headers}))}from(h){var d=this;if(!isValidBucketName(h))throw new StorageError("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const g=new IcebergRestCatalog({baseUrl:this.url,catalogName:h,auth:{type:"custom",getHeaders:async()=>d.headers},fetch:this.fetch}),b=this.shouldThrowOnError;return new Proxy(g,{get(_,$){const j=_[$];return typeof j!="function"?j:async(..._e)=>{try{return{data:await j.apply(_,_e),error:null}}catch(et){if(b)throw et;return{data:null,error:et}}}}})}},VectorIndexApi=class extends BaseApiClient{constructor(h,d={},g){const b=h.replace(/\/$/,""),_=_objectSpread2$1(_objectSpread2$1({},DEFAULT_HEADERS$2),{},{"Content-Type":"application/json"},d);super(b,_,g,"vectors")}async createIndex(h){var d=this;return d.handleOperation(async()=>await vectorsApi.post(d.fetch,`${d.url}/CreateIndex`,h,{headers:d.headers})||{})}async getIndex(h,d){var g=this;return g.handleOperation(async()=>await vectorsApi.post(g.fetch,`${g.url}/GetIndex`,{vectorBucketName:h,indexName:d},{headers:g.headers}))}async listIndexes(h){var d=this;return d.handleOperation(async()=>await vectorsApi.post(d.fetch,`${d.url}/ListIndexes`,h,{headers:d.headers}))}async deleteIndex(h,d){var g=this;return g.handleOperation(async()=>await vectorsApi.post(g.fetch,`${g.url}/DeleteIndex`,{vectorBucketName:h,indexName:d},{headers:g.headers})||{})}},VectorDataApi=class extends BaseApiClient{constructor(h,d={},g){const b=h.replace(/\/$/,""),_=_objectSpread2$1(_objectSpread2$1({},DEFAULT_HEADERS$2),{},{"Content-Type":"application/json"},d);super(b,_,g,"vectors")}async putVectors(h){var d=this;if(h.vectors.length<1||h.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return d.handleOperation(async()=>await vectorsApi.post(d.fetch,`${d.url}/PutVectors`,h,{headers:d.headers})||{})}async getVectors(h){var d=this;return d.handleOperation(async()=>await vectorsApi.post(d.fetch,`${d.url}/GetVectors`,h,{headers:d.headers}))}async listVectors(h){var d=this;if(h.segmentCount!==void 0){if(h.segmentCount<1||h.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(h.segmentIndex!==void 0&&(h.segmentIndex<0||h.segmentIndex>=h.segmentCount))throw new Error(`segmentIndex must be between 0 and ${h.segmentCount-1}`)}return d.handleOperation(async()=>await vectorsApi.post(d.fetch,`${d.url}/ListVectors`,h,{headers:d.headers}))}async queryVectors(h){var d=this;return d.handleOperation(async()=>await vectorsApi.post(d.fetch,`${d.url}/QueryVectors`,h,{headers:d.headers}))}async deleteVectors(h){var d=this;if(h.keys.length<1||h.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return d.handleOperation(async()=>await vectorsApi.post(d.fetch,`${d.url}/DeleteVectors`,h,{headers:d.headers})||{})}},VectorBucketApi=class extends BaseApiClient{constructor(h,d={},g){const b=h.replace(/\/$/,""),_=_objectSpread2$1(_objectSpread2$1({},DEFAULT_HEADERS$2),{},{"Content-Type":"application/json"},d);super(b,_,g,"vectors")}async createBucket(h){var d=this;return d.handleOperation(async()=>await vectorsApi.post(d.fetch,`${d.url}/CreateVectorBucket`,{vectorBucketName:h},{headers:d.headers})||{})}async getBucket(h){var d=this;return d.handleOperation(async()=>await vectorsApi.post(d.fetch,`${d.url}/GetVectorBucket`,{vectorBucketName:h},{headers:d.headers}))}async listBuckets(h={}){var d=this;return d.handleOperation(async()=>await vectorsApi.post(d.fetch,`${d.url}/ListVectorBuckets`,h,{headers:d.headers}))}async deleteBucket(h){var d=this;return d.handleOperation(async()=>await vectorsApi.post(d.fetch,`${d.url}/DeleteVectorBucket`,{vectorBucketName:h},{headers:d.headers})||{})}},StorageVectorsClient=class extends VectorBucketApi{constructor(h,d={}){super(h,d.headers||{},d.fetch)}from(h){return new VectorBucketScope(this.url,this.headers,h,this.fetch)}async createBucket(h){var d=()=>super.createBucket,g=this;return d().call(g,h)}async getBucket(h){var d=()=>super.getBucket,g=this;return d().call(g,h)}async listBuckets(h={}){var d=()=>super.listBuckets,g=this;return d().call(g,h)}async deleteBucket(h){var d=()=>super.deleteBucket,g=this;return d().call(g,h)}},VectorBucketScope=class extends VectorIndexApi{constructor(h,d,g,b){super(h,d,b),this.vectorBucketName=g}async createIndex(h){var d=()=>super.createIndex,g=this;return d().call(g,_objectSpread2$1(_objectSpread2$1({},h),{},{vectorBucketName:g.vectorBucketName}))}async listIndexes(h={}){var d=()=>super.listIndexes,g=this;return d().call(g,_objectSpread2$1(_objectSpread2$1({},h),{},{vectorBucketName:g.vectorBucketName}))}async getIndex(h){var d=()=>super.getIndex,g=this;return d().call(g,g.vectorBucketName,h)}async deleteIndex(h){var d=()=>super.deleteIndex,g=this;return d().call(g,g.vectorBucketName,h)}index(h){return new VectorIndexScope(this.url,this.headers,this.vectorBucketName,h,this.fetch)}},VectorIndexScope=class extends VectorDataApi{constructor(h,d,g,b,_){super(h,d,_),this.vectorBucketName=g,this.indexName=b}async putVectors(h){var d=()=>super.putVectors,g=this;return d().call(g,_objectSpread2$1(_objectSpread2$1({},h),{},{vectorBucketName:g.vectorBucketName,indexName:g.indexName}))}async getVectors(h){var d=()=>super.getVectors,g=this;return d().call(g,_objectSpread2$1(_objectSpread2$1({},h),{},{vectorBucketName:g.vectorBucketName,indexName:g.indexName}))}async listVectors(h={}){var d=()=>super.listVectors,g=this;return d().call(g,_objectSpread2$1(_objectSpread2$1({},h),{},{vectorBucketName:g.vectorBucketName,indexName:g.indexName}))}async queryVectors(h){var d=()=>super.queryVectors,g=this;return d().call(g,_objectSpread2$1(_objectSpread2$1({},h),{},{vectorBucketName:g.vectorBucketName,indexName:g.indexName}))}async deleteVectors(h){var d=()=>super.deleteVectors,g=this;return d().call(g,_objectSpread2$1(_objectSpread2$1({},h),{},{vectorBucketName:g.vectorBucketName,indexName:g.indexName}))}},StorageClient=class extends StorageBucketApi{constructor(h,d={},g,b){super(h,d,g,b)}from(h){return new StorageFileApi(this.url,this.headers,h,this.fetch)}get vectors(){return new StorageVectorsClient(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new StorageAnalyticsClient(this.url+"/iceberg",this.headers,this.fetch)}};const version$1="2.95.2",AUTO_REFRESH_TICK_DURATION_MS=30*1e3,AUTO_REFRESH_TICK_THRESHOLD=3,EXPIRY_MARGIN_MS=AUTO_REFRESH_TICK_THRESHOLD*AUTO_REFRESH_TICK_DURATION_MS,GOTRUE_URL="http://localhost:9999",STORAGE_KEY="supabase.auth.token",DEFAULT_HEADERS$1={"X-Client-Info":`gotrue-js/${version$1}`},API_VERSION_HEADER_NAME="X-Supabase-Api-Version",API_VERSIONS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},BASE64URL_REGEX=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,JWKS_TTL=10*60*1e3;class AuthError extends Error{constructor(d,g,b){super(d),this.__isAuthError=!0,this.name="AuthError",this.status=g,this.code=b}}function isAuthError(h){return typeof h=="object"&&h!==null&&"__isAuthError"in h}class AuthApiError extends AuthError{constructor(d,g,b){super(d,g,b),this.name="AuthApiError",this.status=g,this.code=b}}function isAuthApiError(h){return isAuthError(h)&&h.name==="AuthApiError"}class AuthUnknownError extends AuthError{constructor(d,g){super(d),this.name="AuthUnknownError",this.originalError=g}}class CustomAuthError extends AuthError{constructor(d,g,b,_){super(d,b,_),this.name=g,this.status=b}}class AuthSessionMissingError extends CustomAuthError{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function isAuthSessionMissingError(h){return isAuthError(h)&&h.name==="AuthSessionMissingError"}class AuthInvalidTokenResponseError extends CustomAuthError{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class AuthInvalidCredentialsError extends CustomAuthError{constructor(d){super(d,"AuthInvalidCredentialsError",400,void 0)}}class AuthImplicitGrantRedirectError extends CustomAuthError{constructor(d,g=null){super(d,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=g}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function isAuthImplicitGrantRedirectError(h){return isAuthError(h)&&h.name==="AuthImplicitGrantRedirectError"}class AuthPKCEGrantCodeExchangeError extends CustomAuthError{constructor(d,g=null){super(d,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=g}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class AuthPKCECodeVerifierMissingError extends CustomAuthError{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class AuthRetryableFetchError extends CustomAuthError{constructor(d,g){super(d,"AuthRetryableFetchError",g,void 0)}}function isAuthRetryableFetchError(h){return isAuthError(h)&&h.name==="AuthRetryableFetchError"}class AuthWeakPasswordError extends CustomAuthError{constructor(d,g,b){super(d,"AuthWeakPasswordError",g,"weak_password"),this.reasons=b}}class AuthInvalidJwtError extends CustomAuthError{constructor(d){super(d,"AuthInvalidJwtError",400,"invalid_jwt")}}const TO_BASE64URL="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),IGNORE_BASE64URL=` 	
\r=`.split(""),FROM_BASE64URL=(()=>{const h=new Array(128);for(let d=0;d<h.length;d+=1)h[d]=-1;for(let d=0;d<IGNORE_BASE64URL.length;d+=1)h[IGNORE_BASE64URL[d].charCodeAt(0)]=-2;for(let d=0;d<TO_BASE64URL.length;d+=1)h[TO_BASE64URL[d].charCodeAt(0)]=d;return h})();function byteToBase64URL(h,d,g){if(h!==null)for(d.queue=d.queue<<8|h,d.queuedBits+=8;d.queuedBits>=6;){const b=d.queue>>d.queuedBits-6&63;g(TO_BASE64URL[b]),d.queuedBits-=6}else if(d.queuedBits>0)for(d.queue=d.queue<<6-d.queuedBits,d.queuedBits=6;d.queuedBits>=6;){const b=d.queue>>d.queuedBits-6&63;g(TO_BASE64URL[b]),d.queuedBits-=6}}function byteFromBase64URL(h,d,g){const b=FROM_BASE64URL[h];if(b>-1)for(d.queue=d.queue<<6|b,d.queuedBits+=6;d.queuedBits>=8;)g(d.queue>>d.queuedBits-8&255),d.queuedBits-=8;else{if(b===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(h)}"`)}}function stringFromBase64URL(h){const d=[],g=j=>{d.push(String.fromCodePoint(j))},b={utf8seq:0,codepoint:0},_={queue:0,queuedBits:0},$=j=>{stringFromUTF8(j,b,g)};for(let j=0;j<h.length;j+=1)byteFromBase64URL(h.charCodeAt(j),_,$);return d.join("")}function codepointToUTF8(h,d){if(h<=127){d(h);return}else if(h<=2047){d(192|h>>6),d(128|h&63);return}else if(h<=65535){d(224|h>>12),d(128|h>>6&63),d(128|h&63);return}else if(h<=1114111){d(240|h>>18),d(128|h>>12&63),d(128|h>>6&63),d(128|h&63);return}throw new Error(`Unrecognized Unicode codepoint: ${h.toString(16)}`)}function stringToUTF8(h,d){for(let g=0;g<h.length;g+=1){let b=h.charCodeAt(g);if(b>55295&&b<=56319){const _=(b-55296)*1024&65535;b=(h.charCodeAt(g+1)-56320&65535|_)+65536,g+=1}codepointToUTF8(b,d)}}function stringFromUTF8(h,d,g){if(d.utf8seq===0){if(h<=127){g(h);return}for(let b=1;b<6;b+=1)if(!(h>>7-b&1)){d.utf8seq=b;break}if(d.utf8seq===2)d.codepoint=h&31;else if(d.utf8seq===3)d.codepoint=h&15;else if(d.utf8seq===4)d.codepoint=h&7;else throw new Error("Invalid UTF-8 sequence");d.utf8seq-=1}else if(d.utf8seq>0){if(h<=127)throw new Error("Invalid UTF-8 sequence");d.codepoint=d.codepoint<<6|h&63,d.utf8seq-=1,d.utf8seq===0&&g(d.codepoint)}}function base64UrlToUint8Array(h){const d=[],g={queue:0,queuedBits:0},b=_=>{d.push(_)};for(let _=0;_<h.length;_+=1)byteFromBase64URL(h.charCodeAt(_),g,b);return new Uint8Array(d)}function stringToUint8Array(h){const d=[];return stringToUTF8(h,g=>d.push(g)),new Uint8Array(d)}function bytesToBase64URL(h){const d=[],g={queue:0,queuedBits:0},b=_=>{d.push(_)};return h.forEach(_=>byteToBase64URL(_,g,b)),byteToBase64URL(null,g,b),d.join("")}function expiresAt(h){return Math.round(Date.now()/1e3)+h}function generateCallbackId(){return Symbol("auth-callback")}const isBrowser=()=>typeof window<"u"&&typeof document<"u",localStorageWriteTests={tested:!1,writable:!1},supportsLocalStorage=()=>{if(!isBrowser())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(localStorageWriteTests.tested)return localStorageWriteTests.writable;const h=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(h,h),globalThis.localStorage.removeItem(h),localStorageWriteTests.tested=!0,localStorageWriteTests.writable=!0}catch{localStorageWriteTests.tested=!0,localStorageWriteTests.writable=!1}return localStorageWriteTests.writable};function parseParametersFromURL(h){const d={},g=new URL(h);if(g.hash&&g.hash[0]==="#")try{new URLSearchParams(g.hash.substring(1)).forEach((_,$)=>{d[$]=_})}catch{}return g.searchParams.forEach((b,_)=>{d[_]=b}),d}const resolveFetch$1=h=>h?(...d)=>h(...d):(...d)=>fetch(...d),looksLikeFetchResponse=h=>typeof h=="object"&&h!==null&&"status"in h&&"ok"in h&&"json"in h&&typeof h.json=="function",setItemAsync=async(h,d,g)=>{await h.setItem(d,JSON.stringify(g))},getItemAsync=async(h,d)=>{const g=await h.getItem(d);if(!g)return null;try{return JSON.parse(g)}catch{return g}},removeItemAsync=async(h,d)=>{await h.removeItem(d)};let Deferred$2=class qn{constructor(){this.promise=new qn.promiseConstructor((d,g)=>{this.resolve=d,this.reject=g})}};Deferred$2.promiseConstructor=Promise;function decodeJWT(h){const d=h.split(".");if(d.length!==3)throw new AuthInvalidJwtError("Invalid JWT structure");for(let b=0;b<d.length;b++)if(!BASE64URL_REGEX.test(d[b]))throw new AuthInvalidJwtError("JWT not in base64url format");return{header:JSON.parse(stringFromBase64URL(d[0])),payload:JSON.parse(stringFromBase64URL(d[1])),signature:base64UrlToUint8Array(d[2]),raw:{header:d[0],payload:d[1]}}}async function sleep(h){return await new Promise(d=>{setTimeout(()=>d(null),h)})}function retryable(h,d){return new Promise((b,_)=>{(async()=>{for(let $=0;$<1/0;$++)try{const j=await h($);if(!d($,null,j)){b(j);return}}catch(j){if(!d($,j)){_(j);return}}})()})}function dec2hex(h){return("0"+h.toString(16)).substr(-2)}function generatePKCEVerifier(){const d=new Uint32Array(56);if(typeof crypto>"u"){const g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",b=g.length;let _="";for(let $=0;$<56;$++)_+=g.charAt(Math.floor(Math.random()*b));return _}return crypto.getRandomValues(d),Array.from(d,dec2hex).join("")}async function sha256(h){const g=new TextEncoder().encode(h),b=await crypto.subtle.digest("SHA-256",g),_=new Uint8Array(b);return Array.from(_).map($=>String.fromCharCode($)).join("")}async function generatePKCEChallenge(h){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),h;const g=await sha256(h);return btoa(g).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function getCodeChallengeAndMethod(h,d,g=!1){const b=generatePKCEVerifier();let _=b;g&&(_+="/PASSWORD_RECOVERY"),await setItemAsync(h,`${d}-code-verifier`,_);const $=await generatePKCEChallenge(b);return[$,b===$?"plain":"s256"]}const API_VERSION_REGEX=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function parseResponseAPIVersion(h){const d=h.headers.get(API_VERSION_HEADER_NAME);if(!d||!d.match(API_VERSION_REGEX))return null;try{return new Date(`${d}T00:00:00.0Z`)}catch{return null}}function validateExp(h){if(!h)throw new Error("Missing exp claim");const d=Math.floor(Date.now()/1e3);if(h<=d)throw new Error("JWT has expired")}function getAlgorithm(h){switch(h){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const UUID_REGEX=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function validateUUID(h){if(!UUID_REGEX.test(h))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function userNotAvailableProxy(){const h={};return new Proxy(h,{get:(d,g)=>{if(g==="__isUserNotAvailableProxy")return!0;if(typeof g=="symbol"){const b=g.toString();if(b==="Symbol(Symbol.toPrimitive)"||b==="Symbol(Symbol.toStringTag)"||b==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${g}" property of the session object is not supported. Please use getUser() instead.`)},set:(d,g)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${g}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(d,g)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${g}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function insecureUserWarningProxy(h,d){return new Proxy(h,{get:(g,b,_)=>{if(b==="__isInsecureUserWarningProxy")return!0;if(typeof b=="symbol"){const $=b.toString();if($==="Symbol(Symbol.toPrimitive)"||$==="Symbol(Symbol.toStringTag)"||$==="Symbol(util.inspect.custom)"||$==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(g,b,_)}return!d.value&&typeof b=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),d.value=!0),Reflect.get(g,b,_)}})}function deepClone(h){return JSON.parse(JSON.stringify(h))}const _getErrorMessage=h=>h.msg||h.message||h.error_description||h.error||JSON.stringify(h),NETWORK_ERROR_CODES=[502,503,504];async function handleError(h){var d;if(!looksLikeFetchResponse(h))throw new AuthRetryableFetchError(_getErrorMessage(h),0);if(NETWORK_ERROR_CODES.includes(h.status))throw new AuthRetryableFetchError(_getErrorMessage(h),h.status);let g;try{g=await h.json()}catch($){throw new AuthUnknownError(_getErrorMessage($),$)}let b;const _=parseResponseAPIVersion(h);if(_&&_.getTime()>=API_VERSIONS["2024-01-01"].timestamp&&typeof g=="object"&&g&&typeof g.code=="string"?b=g.code:typeof g=="object"&&g&&typeof g.error_code=="string"&&(b=g.error_code),b){if(b==="weak_password")throw new AuthWeakPasswordError(_getErrorMessage(g),h.status,((d=g.weak_password)===null||d===void 0?void 0:d.reasons)||[]);if(b==="session_not_found")throw new AuthSessionMissingError}else if(typeof g=="object"&&g&&typeof g.weak_password=="object"&&g.weak_password&&Array.isArray(g.weak_password.reasons)&&g.weak_password.reasons.length&&g.weak_password.reasons.reduce(($,j)=>$&&typeof j=="string",!0))throw new AuthWeakPasswordError(_getErrorMessage(g),h.status,g.weak_password.reasons);throw new AuthApiError(_getErrorMessage(g),h.status||500,b)}const _getRequestParams=(h,d,g,b)=>{const _={method:h,headers:(d==null?void 0:d.headers)||{}};return h==="GET"?_:(_.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},d==null?void 0:d.headers),_.body=JSON.stringify(b),Object.assign(Object.assign({},_),g))};async function _request(h,d,g,b){var _;const $=Object.assign({},b==null?void 0:b.headers);$[API_VERSION_HEADER_NAME]||($[API_VERSION_HEADER_NAME]=API_VERSIONS["2024-01-01"].name),b!=null&&b.jwt&&($.Authorization=`Bearer ${b.jwt}`);const j=(_=b==null?void 0:b.query)!==null&&_!==void 0?_:{};b!=null&&b.redirectTo&&(j.redirect_to=b.redirectTo);const _e=Object.keys(j).length?"?"+new URLSearchParams(j).toString():"",et=await _handleRequest(h,d,g+_e,{headers:$,noResolveJson:b==null?void 0:b.noResolveJson},{},b==null?void 0:b.body);return b!=null&&b.xform?b==null?void 0:b.xform(et):{data:Object.assign({},et),error:null}}async function _handleRequest(h,d,g,b,_,$){const j=_getRequestParams(d,b,_,$);let _e;try{_e=await h(g,Object.assign({},j))}catch(et){throw console.error(et),new AuthRetryableFetchError(_getErrorMessage(et),0)}if(_e.ok||await handleError(_e),b!=null&&b.noResolveJson)return _e;try{return await _e.json()}catch(et){await handleError(et)}}function _sessionResponse(h){var d;let g=null;hasSession(h)&&(g=Object.assign({},h),h.expires_at||(g.expires_at=expiresAt(h.expires_in)));const b=(d=h.user)!==null&&d!==void 0?d:h;return{data:{session:g,user:b},error:null}}function _sessionResponsePassword(h){const d=_sessionResponse(h);return!d.error&&h.weak_password&&typeof h.weak_password=="object"&&Array.isArray(h.weak_password.reasons)&&h.weak_password.reasons.length&&h.weak_password.message&&typeof h.weak_password.message=="string"&&h.weak_password.reasons.reduce((g,b)=>g&&typeof b=="string",!0)&&(d.data.weak_password=h.weak_password),d}function _userResponse(h){var d;return{data:{user:(d=h.user)!==null&&d!==void 0?d:h},error:null}}function _ssoResponse(h){return{data:h,error:null}}function _generateLinkResponse(h){const{action_link:d,email_otp:g,hashed_token:b,redirect_to:_,verification_type:$}=h,j=__rest(h,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),_e={action_link:d,email_otp:g,hashed_token:b,redirect_to:_,verification_type:$},et=Object.assign({},j);return{data:{properties:_e,user:et},error:null}}function _noResolveJsonResponse(h){return h}function hasSession(h){return h.access_token&&h.refresh_token&&h.expires_in}const SIGN_OUT_SCOPES=["global","local","others"];class GoTrueAdminApi{constructor({url:d="",headers:g={},fetch:b}){this.url=d,this.headers=g,this.fetch=resolveFetch$1(b),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(d,g=SIGN_OUT_SCOPES[0]){if(SIGN_OUT_SCOPES.indexOf(g)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${SIGN_OUT_SCOPES.join(", ")}`);try{return await _request(this.fetch,"POST",`${this.url}/logout?scope=${g}`,{headers:this.headers,jwt:d,noResolveJson:!0}),{data:null,error:null}}catch(b){if(isAuthError(b))return{data:null,error:b};throw b}}async inviteUserByEmail(d,g={}){try{return await _request(this.fetch,"POST",`${this.url}/invite`,{body:{email:d,data:g.data},headers:this.headers,redirectTo:g.redirectTo,xform:_userResponse})}catch(b){if(isAuthError(b))return{data:{user:null},error:b};throw b}}async generateLink(d){try{const{options:g}=d,b=__rest(d,["options"]),_=Object.assign(Object.assign({},b),g);return"newEmail"in b&&(_.new_email=b==null?void 0:b.newEmail,delete _.newEmail),await _request(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:_,headers:this.headers,xform:_generateLinkResponse,redirectTo:g==null?void 0:g.redirectTo})}catch(g){if(isAuthError(g))return{data:{properties:null,user:null},error:g};throw g}}async createUser(d){try{return await _request(this.fetch,"POST",`${this.url}/admin/users`,{body:d,headers:this.headers,xform:_userResponse})}catch(g){if(isAuthError(g))return{data:{user:null},error:g};throw g}}async listUsers(d){var g,b,_,$,j,_e,et;try{const rt={nextPage:null,lastPage:0,total:0},nt=await _request(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(b=(g=d==null?void 0:d.page)===null||g===void 0?void 0:g.toString())!==null&&b!==void 0?b:"",per_page:($=(_=d==null?void 0:d.perPage)===null||_===void 0?void 0:_.toString())!==null&&$!==void 0?$:""},xform:_noResolveJsonResponse});if(nt.error)throw nt.error;const st=await nt.json(),at=(j=nt.headers.get("x-total-count"))!==null&&j!==void 0?j:0,it=(et=(_e=nt.headers.get("link"))===null||_e===void 0?void 0:_e.split(","))!==null&&et!==void 0?et:[];return it.length>0&&(it.forEach(dt=>{const ot=parseInt(dt.split(";")[0].split("=")[1].substring(0,1)),ct=JSON.parse(dt.split(";")[1].split("=")[1]);rt[`${ct}Page`]=ot}),rt.total=parseInt(at)),{data:Object.assign(Object.assign({},st),rt),error:null}}catch(rt){if(isAuthError(rt))return{data:{users:[]},error:rt};throw rt}}async getUserById(d){validateUUID(d);try{return await _request(this.fetch,"GET",`${this.url}/admin/users/${d}`,{headers:this.headers,xform:_userResponse})}catch(g){if(isAuthError(g))return{data:{user:null},error:g};throw g}}async updateUserById(d,g){validateUUID(d);try{return await _request(this.fetch,"PUT",`${this.url}/admin/users/${d}`,{body:g,headers:this.headers,xform:_userResponse})}catch(b){if(isAuthError(b))return{data:{user:null},error:b};throw b}}async deleteUser(d,g=!1){validateUUID(d);try{return await _request(this.fetch,"DELETE",`${this.url}/admin/users/${d}`,{headers:this.headers,body:{should_soft_delete:g},xform:_userResponse})}catch(b){if(isAuthError(b))return{data:{user:null},error:b};throw b}}async _listFactors(d){validateUUID(d.userId);try{const{data:g,error:b}=await _request(this.fetch,"GET",`${this.url}/admin/users/${d.userId}/factors`,{headers:this.headers,xform:_=>({data:{factors:_},error:null})});return{data:g,error:b}}catch(g){if(isAuthError(g))return{data:null,error:g};throw g}}async _deleteFactor(d){validateUUID(d.userId),validateUUID(d.id);try{return{data:await _request(this.fetch,"DELETE",`${this.url}/admin/users/${d.userId}/factors/${d.id}`,{headers:this.headers}),error:null}}catch(g){if(isAuthError(g))return{data:null,error:g};throw g}}async _listOAuthClients(d){var g,b,_,$,j,_e,et;try{const rt={nextPage:null,lastPage:0,total:0},nt=await _request(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(b=(g=d==null?void 0:d.page)===null||g===void 0?void 0:g.toString())!==null&&b!==void 0?b:"",per_page:($=(_=d==null?void 0:d.perPage)===null||_===void 0?void 0:_.toString())!==null&&$!==void 0?$:""},xform:_noResolveJsonResponse});if(nt.error)throw nt.error;const st=await nt.json(),at=(j=nt.headers.get("x-total-count"))!==null&&j!==void 0?j:0,it=(et=(_e=nt.headers.get("link"))===null||_e===void 0?void 0:_e.split(","))!==null&&et!==void 0?et:[];return it.length>0&&(it.forEach(dt=>{const ot=parseInt(dt.split(";")[0].split("=")[1].substring(0,1)),ct=JSON.parse(dt.split(";")[1].split("=")[1]);rt[`${ct}Page`]=ot}),rt.total=parseInt(at)),{data:Object.assign(Object.assign({},st),rt),error:null}}catch(rt){if(isAuthError(rt))return{data:{clients:[]},error:rt};throw rt}}async _createOAuthClient(d){try{return await _request(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:d,headers:this.headers,xform:g=>({data:g,error:null})})}catch(g){if(isAuthError(g))return{data:null,error:g};throw g}}async _getOAuthClient(d){try{return await _request(this.fetch,"GET",`${this.url}/admin/oauth/clients/${d}`,{headers:this.headers,xform:g=>({data:g,error:null})})}catch(g){if(isAuthError(g))return{data:null,error:g};throw g}}async _updateOAuthClient(d,g){try{return await _request(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${d}`,{body:g,headers:this.headers,xform:b=>({data:b,error:null})})}catch(b){if(isAuthError(b))return{data:null,error:b};throw b}}async _deleteOAuthClient(d){try{return await _request(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${d}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(g){if(isAuthError(g))return{data:null,error:g};throw g}}async _regenerateOAuthClientSecret(d){try{return await _request(this.fetch,"POST",`${this.url}/admin/oauth/clients/${d}/regenerate_secret`,{headers:this.headers,xform:g=>({data:g,error:null})})}catch(g){if(isAuthError(g))return{data:null,error:g};throw g}}}function memoryLocalStorageAdapter(h={}){return{getItem:d=>h[d]||null,setItem:(d,g)=>{h[d]=g},removeItem:d=>{delete h[d]}}}const internals={debug:!!(globalThis&&supportsLocalStorage()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class LockAcquireTimeoutError extends Error{constructor(d){super(d),this.isAcquireTimeout=!0}}class NavigatorLockAcquireTimeoutError extends LockAcquireTimeoutError{}async function navigatorLock(h,d,g){internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",h,d);const b=new globalThis.AbortController;return d>0&&setTimeout(()=>{b.abort(),internals.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",h)},d),await Promise.resolve().then(()=>globalThis.navigator.locks.request(h,d===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:b.signal},async _=>{if(_){internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",h,_.name);try{return await g()}finally{internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",h,_.name)}}else{if(d===0)throw internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",h),new NavigatorLockAcquireTimeoutError(`Acquiring an exclusive Navigator LockManager lock "${h}" immediately failed`);if(internals.debug)try{const $=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify($,null,"  "))}catch($){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",$)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await g()}}))}function polyfillGlobalThis(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function getAddress(h){if(!/^0x[a-fA-F0-9]{40}$/.test(h))throw new Error(`@supabase/auth-js: Address "${h}" is invalid.`);return h.toLowerCase()}function fromHex(h){return parseInt(h,16)}function toHex(h){const d=new TextEncoder().encode(h);return"0x"+Array.from(d,b=>b.toString(16).padStart(2,"0")).join("")}function createSiweMessage(h){var d;const{chainId:g,domain:b,expirationTime:_,issuedAt:$=new Date,nonce:j,notBefore:_e,requestId:et,resources:rt,scheme:nt,uri:st,version:at}=h;{if(!Number.isInteger(g))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${g}`);if(!b)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(j&&j.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${j}`);if(!st)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(at!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${at}`);if(!((d=h.statement)===null||d===void 0)&&d.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${h.statement}`)}const it=getAddress(h.address),dt=nt?`${nt}://${b}`:b,ot=h.statement?`${h.statement}
`:"",ct=`${dt} wants you to sign in with your Ethereum account:
${it}

${ot}`;let lt=`URI: ${st}
Version: ${at}
Chain ID: ${g}${j?`
Nonce: ${j}`:""}
Issued At: ${$.toISOString()}`;if(_&&(lt+=`
Expiration Time: ${_.toISOString()}`),_e&&(lt+=`
Not Before: ${_e.toISOString()}`),et&&(lt+=`
Request ID: ${et}`),rt){let ut=`
Resources:`;for(const ft of rt){if(!ft||typeof ft!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${ft}`);ut+=`
- ${ft}`}lt+=ut}return`${ct}
${lt}`}class WebAuthnError extends Error{constructor({message:d,code:g,cause:b,name:_}){var $;super(d,{cause:b}),this.__isWebAuthnError=!0,this.name=($=_??(b instanceof Error?b.name:void 0))!==null&&$!==void 0?$:"Unknown Error",this.code=g}}class WebAuthnUnknownError extends WebAuthnError{constructor(d,g){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:g,message:d}),this.name="WebAuthnUnknownError",this.originalError=g}}function identifyRegistrationError({error:h,options:d}){var g,b,_;const{publicKey:$}=d;if(!$)throw Error("options was missing required publicKey property");if(h.name==="AbortError"){if(d.signal instanceof AbortSignal)return new WebAuthnError({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:h})}else if(h.name==="ConstraintError"){if(((g=$.authenticatorSelection)===null||g===void 0?void 0:g.requireResidentKey)===!0)return new WebAuthnError({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:h});if(d.mediation==="conditional"&&((b=$.authenticatorSelection)===null||b===void 0?void 0:b.userVerification)==="required")return new WebAuthnError({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:h});if(((_=$.authenticatorSelection)===null||_===void 0?void 0:_.userVerification)==="required")return new WebAuthnError({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:h})}else{if(h.name==="InvalidStateError")return new WebAuthnError({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:h});if(h.name==="NotAllowedError")return new WebAuthnError({message:h.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:h});if(h.name==="NotSupportedError")return $.pubKeyCredParams.filter(_e=>_e.type==="public-key").length===0?new WebAuthnError({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:h}):new WebAuthnError({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:h});if(h.name==="SecurityError"){const j=window.location.hostname;if(isValidDomain(j)){if($.rp.id!==j)return new WebAuthnError({message:`The RP ID "${$.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:h})}else return new WebAuthnError({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:h})}else if(h.name==="TypeError"){if($.user.id.byteLength<1||$.user.id.byteLength>64)return new WebAuthnError({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:h})}else if(h.name==="UnknownError")return new WebAuthnError({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:h})}return new WebAuthnError({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:h})}function identifyAuthenticationError({error:h,options:d}){const{publicKey:g}=d;if(!g)throw Error("options was missing required publicKey property");if(h.name==="AbortError"){if(d.signal instanceof AbortSignal)return new WebAuthnError({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:h})}else{if(h.name==="NotAllowedError")return new WebAuthnError({message:h.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:h});if(h.name==="SecurityError"){const b=window.location.hostname;if(isValidDomain(b)){if(g.rpId!==b)return new WebAuthnError({message:`The RP ID "${g.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:h})}else return new WebAuthnError({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:h})}else if(h.name==="UnknownError")return new WebAuthnError({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:h})}return new WebAuthnError({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:h})}class WebAuthnAbortService{createNewAbortSignal(){if(this.controller){const g=new Error("Cancelling existing WebAuthn API call for new one");g.name="AbortError",this.controller.abort(g)}const d=new AbortController;return this.controller=d,d.signal}cancelCeremony(){if(this.controller){const d=new Error("Manually cancelling existing WebAuthn API call");d.name="AbortError",this.controller.abort(d),this.controller=void 0}}}const webAuthnAbortService=new WebAuthnAbortService;function deserializeCredentialCreationOptions(h){if(!h)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(h);const{challenge:d,user:g,excludeCredentials:b}=h,_=__rest(h,["challenge","user","excludeCredentials"]),$=base64UrlToUint8Array(d).buffer,j=Object.assign(Object.assign({},g),{id:base64UrlToUint8Array(g.id).buffer}),_e=Object.assign(Object.assign({},_),{challenge:$,user:j});if(b&&b.length>0){_e.excludeCredentials=new Array(b.length);for(let et=0;et<b.length;et++){const rt=b[et];_e.excludeCredentials[et]=Object.assign(Object.assign({},rt),{id:base64UrlToUint8Array(rt.id).buffer,type:rt.type||"public-key",transports:rt.transports})}}return _e}function deserializeCredentialRequestOptions(h){if(!h)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(h);const{challenge:d,allowCredentials:g}=h,b=__rest(h,["challenge","allowCredentials"]),_=base64UrlToUint8Array(d).buffer,$=Object.assign(Object.assign({},b),{challenge:_});if(g&&g.length>0){$.allowCredentials=new Array(g.length);for(let j=0;j<g.length;j++){const _e=g[j];$.allowCredentials[j]=Object.assign(Object.assign({},_e),{id:base64UrlToUint8Array(_e.id).buffer,type:_e.type||"public-key",transports:_e.transports})}}return $}function serializeCredentialCreationResponse(h){var d;if("toJSON"in h&&typeof h.toJSON=="function")return h.toJSON();const g=h;return{id:h.id,rawId:h.id,response:{attestationObject:bytesToBase64URL(new Uint8Array(h.response.attestationObject)),clientDataJSON:bytesToBase64URL(new Uint8Array(h.response.clientDataJSON))},type:"public-key",clientExtensionResults:h.getClientExtensionResults(),authenticatorAttachment:(d=g.authenticatorAttachment)!==null&&d!==void 0?d:void 0}}function serializeCredentialRequestResponse(h){var d;if("toJSON"in h&&typeof h.toJSON=="function")return h.toJSON();const g=h,b=h.getClientExtensionResults(),_=h.response;return{id:h.id,rawId:h.id,response:{authenticatorData:bytesToBase64URL(new Uint8Array(_.authenticatorData)),clientDataJSON:bytesToBase64URL(new Uint8Array(_.clientDataJSON)),signature:bytesToBase64URL(new Uint8Array(_.signature)),userHandle:_.userHandle?bytesToBase64URL(new Uint8Array(_.userHandle)):void 0},type:"public-key",clientExtensionResults:b,authenticatorAttachment:(d=g.authenticatorAttachment)!==null&&d!==void 0?d:void 0}}function isValidDomain(h){return h==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(h)}function browserSupportsWebAuthn(){var h,d;return!!(isBrowser()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((h=navigator==null?void 0:navigator.credentials)===null||h===void 0?void 0:h.create)=="function"&&typeof((d=navigator==null?void 0:navigator.credentials)===null||d===void 0?void 0:d.get)=="function")}async function createCredential(h){try{const d=await navigator.credentials.create(h);return d?d instanceof PublicKeyCredential?{data:d,error:null}:{data:null,error:new WebAuthnUnknownError("Browser returned unexpected credential type",d)}:{data:null,error:new WebAuthnUnknownError("Empty credential response",d)}}catch(d){return{data:null,error:identifyRegistrationError({error:d,options:h})}}}async function getCredential(h){try{const d=await navigator.credentials.get(h);return d?d instanceof PublicKeyCredential?{data:d,error:null}:{data:null,error:new WebAuthnUnknownError("Browser returned unexpected credential type",d)}:{data:null,error:new WebAuthnUnknownError("Empty credential response",d)}}catch(d){return{data:null,error:identifyAuthenticationError({error:d,options:h})}}}const DEFAULT_CREATION_OPTIONS={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},DEFAULT_REQUEST_OPTIONS={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function deepMerge(...h){const d=_=>_!==null&&typeof _=="object"&&!Array.isArray(_),g=_=>_ instanceof ArrayBuffer||ArrayBuffer.isView(_),b={};for(const _ of h)if(_)for(const $ in _){const j=_[$];if(j!==void 0)if(Array.isArray(j))b[$]=j;else if(g(j))b[$]=j;else if(d(j)){const _e=b[$];d(_e)?b[$]=deepMerge(_e,j):b[$]=deepMerge(j)}else b[$]=j}return b}function mergeCredentialCreationOptions(h,d){return deepMerge(DEFAULT_CREATION_OPTIONS,h,d||{})}function mergeCredentialRequestOptions(h,d){return deepMerge(DEFAULT_REQUEST_OPTIONS,h,d||{})}class WebAuthnApi{constructor(d){this.client=d,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(d){return this.client.mfa.enroll(Object.assign(Object.assign({},d),{factorType:"webauthn"}))}async _challenge({factorId:d,webauthn:g,friendlyName:b,signal:_},$){var j;try{const{data:_e,error:et}=await this.client.mfa.challenge({factorId:d,webauthn:g});if(!_e)return{data:null,error:et};const rt=_??webAuthnAbortService.createNewAbortSignal();if(_e.webauthn.type==="create"){const{user:nt}=_e.webauthn.credential_options.publicKey;if(!nt.name){const st=b;if(st)nt.name=`${nt.id}:${st}`;else{const it=(await this.client.getUser()).data.user,dt=((j=it==null?void 0:it.user_metadata)===null||j===void 0?void 0:j.name)||(it==null?void 0:it.email)||(it==null?void 0:it.id)||"User";nt.name=`${nt.id}:${dt}`}}nt.displayName||(nt.displayName=nt.name)}switch(_e.webauthn.type){case"create":{const nt=mergeCredentialCreationOptions(_e.webauthn.credential_options.publicKey,$==null?void 0:$.create),{data:st,error:at}=await createCredential({publicKey:nt,signal:rt});return st?{data:{factorId:d,challengeId:_e.id,webauthn:{type:_e.webauthn.type,credential_response:st}},error:null}:{data:null,error:at}}case"request":{const nt=mergeCredentialRequestOptions(_e.webauthn.credential_options.publicKey,$==null?void 0:$.request),{data:st,error:at}=await getCredential(Object.assign(Object.assign({},_e.webauthn.credential_options),{publicKey:nt,signal:rt}));return st?{data:{factorId:d,challengeId:_e.id,webauthn:{type:_e.webauthn.type,credential_response:st}},error:null}:{data:null,error:at}}}}catch(_e){return isAuthError(_e)?{data:null,error:_e}:{data:null,error:new AuthUnknownError("Unexpected error in challenge",_e)}}}async _verify({challengeId:d,factorId:g,webauthn:b}){return this.client.mfa.verify({factorId:g,challengeId:d,webauthn:b})}async _authenticate({factorId:d,webauthn:{rpId:g=typeof window<"u"?window.location.hostname:void 0,rpOrigins:b=typeof window<"u"?[window.location.origin]:void 0,signal:_}={}},$){if(!g)return{data:null,error:new AuthError("rpId is required for WebAuthn authentication")};try{if(!browserSupportsWebAuthn())return{data:null,error:new AuthUnknownError("Browser does not support WebAuthn",null)};const{data:j,error:_e}=await this.challenge({factorId:d,webauthn:{rpId:g,rpOrigins:b},signal:_},{request:$});if(!j)return{data:null,error:_e};const{webauthn:et}=j;return this._verify({factorId:d,challengeId:j.challengeId,webauthn:{type:et.type,rpId:g,rpOrigins:b,credential_response:et.credential_response}})}catch(j){return isAuthError(j)?{data:null,error:j}:{data:null,error:new AuthUnknownError("Unexpected error in authenticate",j)}}}async _register({friendlyName:d,webauthn:{rpId:g=typeof window<"u"?window.location.hostname:void 0,rpOrigins:b=typeof window<"u"?[window.location.origin]:void 0,signal:_}={}},$){if(!g)return{data:null,error:new AuthError("rpId is required for WebAuthn registration")};try{if(!browserSupportsWebAuthn())return{data:null,error:new AuthUnknownError("Browser does not support WebAuthn",null)};const{data:j,error:_e}=await this._enroll({friendlyName:d});if(!j)return await this.client.mfa.listFactors().then(nt=>{var st;return(st=nt.data)===null||st===void 0?void 0:st.all.find(at=>at.factor_type==="webauthn"&&at.friendly_name===d&&at.status!=="unverified")}).then(nt=>nt?this.client.mfa.unenroll({factorId:nt==null?void 0:nt.id}):void 0),{data:null,error:_e};const{data:et,error:rt}=await this._challenge({factorId:j.id,friendlyName:j.friendly_name,webauthn:{rpId:g,rpOrigins:b},signal:_},{create:$});return et?this._verify({factorId:j.id,challengeId:et.challengeId,webauthn:{rpId:g,rpOrigins:b,type:et.webauthn.type,credential_response:et.webauthn.credential_response}}):{data:null,error:rt}}catch(j){return isAuthError(j)?{data:null,error:j}:{data:null,error:new AuthUnknownError("Unexpected error in register",j)}}}}polyfillGlobalThis();const DEFAULT_OPTIONS={url:GOTRUE_URL,storageKey:STORAGE_KEY,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:DEFAULT_HEADERS$1,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function lockNoOp(h,d,g){return await g()}const GLOBAL_JWKS={};class GoTrueClient{get jwks(){var d,g;return(g=(d=GLOBAL_JWKS[this.storageKey])===null||d===void 0?void 0:d.jwks)!==null&&g!==void 0?g:{keys:[]}}set jwks(d){GLOBAL_JWKS[this.storageKey]=Object.assign(Object.assign({},GLOBAL_JWKS[this.storageKey]),{jwks:d})}get jwks_cached_at(){var d,g;return(g=(d=GLOBAL_JWKS[this.storageKey])===null||d===void 0?void 0:d.cachedAt)!==null&&g!==void 0?g:Number.MIN_SAFE_INTEGER}set jwks_cached_at(d){GLOBAL_JWKS[this.storageKey]=Object.assign(Object.assign({},GLOBAL_JWKS[this.storageKey]),{cachedAt:d})}constructor(d){var g,b,_;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const $=Object.assign(Object.assign({},DEFAULT_OPTIONS),d);if(this.storageKey=$.storageKey,this.instanceID=(g=GoTrueClient.nextInstanceID[this.storageKey])!==null&&g!==void 0?g:0,GoTrueClient.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!$.debug,typeof $.debug=="function"&&(this.logger=$.debug),this.instanceID>0&&isBrowser()){const j=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(j),this.logDebugMessages&&console.trace(j)}if(this.persistSession=$.persistSession,this.autoRefreshToken=$.autoRefreshToken,this.admin=new GoTrueAdminApi({url:$.url,headers:$.headers,fetch:$.fetch}),this.url=$.url,this.headers=$.headers,this.fetch=resolveFetch$1($.fetch),this.lock=$.lock||lockNoOp,this.detectSessionInUrl=$.detectSessionInUrl,this.flowType=$.flowType,this.hasCustomAuthorizationHeader=$.hasCustomAuthorizationHeader,this.throwOnError=$.throwOnError,this.lockAcquireTimeout=$.lockAcquireTimeout,$.lock?this.lock=$.lock:this.persistSession&&isBrowser()&&(!((b=globalThis==null?void 0:globalThis.navigator)===null||b===void 0)&&b.locks)?this.lock=navigatorLock:this.lock=lockNoOp,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new WebAuthnApi(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?($.storage?this.storage=$.storage:supportsLocalStorage()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=memoryLocalStorageAdapter(this.memoryStorage)),$.userStorage&&(this.userStorage=$.userStorage)):(this.memoryStorage={},this.storage=memoryLocalStorageAdapter(this.memoryStorage)),isBrowser()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(j){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",j)}(_=this.broadcastChannel)===null||_===void 0||_.addEventListener("message",async j=>{this._debug("received broadcast notification from other tab or client",j);try{await this._notifyAllSubscribers(j.data.event,j.data.session,!1)}catch(_e){this._debug("#broadcastChannel","error",_e)}})}this.initialize().catch(j=>{this._debug("#initialize()","error",j)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(d){if(this.throwOnError&&d&&d.error)throw d.error;return d}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${version$1}) ${new Date().toISOString()}`}_debug(...d){return this.logDebugMessages&&this.logger(this._logPrefix(),...d),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var d;try{let g={},b="none";if(isBrowser()&&(g=parseParametersFromURL(window.location.href),this._isImplicitGrantCallback(g)?b="implicit":await this._isPKCECallback(g)&&(b="pkce")),isBrowser()&&this.detectSessionInUrl&&b!=="none"){const{data:_,error:$}=await this._getSessionFromURL(g,b);if($){if(this._debug("#_initialize()","error detecting session from URL",$),isAuthImplicitGrantRedirectError($)){const et=(d=$.details)===null||d===void 0?void 0:d.code;if(et==="identity_already_exists"||et==="identity_not_found"||et==="single_identity_not_deletable")return{error:$}}return{error:$}}const{session:j,redirectType:_e}=_;return this._debug("#_initialize()","detected session in URL",j,"redirect type",_e),await this._saveSession(j),setTimeout(async()=>{_e==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",j):await this._notifyAllSubscribers("SIGNED_IN",j)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(g){return isAuthError(g)?this._returnResult({error:g}):this._returnResult({error:new AuthUnknownError("Unexpected error during initialization",g)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(d){var g,b,_;try{const $=await _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(b=(g=d==null?void 0:d.options)===null||g===void 0?void 0:g.data)!==null&&b!==void 0?b:{},gotrue_meta_security:{captcha_token:(_=d==null?void 0:d.options)===null||_===void 0?void 0:_.captchaToken}},xform:_sessionResponse}),{data:j,error:_e}=$;if(_e||!j)return this._returnResult({data:{user:null,session:null},error:_e});const et=j.session,rt=j.user;return j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",et)),this._returnResult({data:{user:rt,session:et},error:null})}catch($){if(isAuthError($))return this._returnResult({data:{user:null,session:null},error:$});throw $}}async signUp(d){var g,b,_;try{let $;if("email"in d){const{email:nt,password:st,options:at}=d;let it=null,dt=null;this.flowType==="pkce"&&([it,dt]=await getCodeChallengeAndMethod(this.storage,this.storageKey)),$=await _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:at==null?void 0:at.emailRedirectTo,body:{email:nt,password:st,data:(g=at==null?void 0:at.data)!==null&&g!==void 0?g:{},gotrue_meta_security:{captcha_token:at==null?void 0:at.captchaToken},code_challenge:it,code_challenge_method:dt},xform:_sessionResponse})}else if("phone"in d){const{phone:nt,password:st,options:at}=d;$=await _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:nt,password:st,data:(b=at==null?void 0:at.data)!==null&&b!==void 0?b:{},channel:(_=at==null?void 0:at.channel)!==null&&_!==void 0?_:"sms",gotrue_meta_security:{captcha_token:at==null?void 0:at.captchaToken}},xform:_sessionResponse})}else throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a password");const{data:j,error:_e}=$;if(_e||!j)return await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:_e});const et=j.session,rt=j.user;return j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",et)),this._returnResult({data:{user:rt,session:et},error:null})}catch($){if(await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),isAuthError($))return this._returnResult({data:{user:null,session:null},error:$});throw $}}async signInWithPassword(d){try{let g;if("email"in d){const{email:$,password:j,options:_e}=d;g=await _request(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:$,password:j,gotrue_meta_security:{captcha_token:_e==null?void 0:_e.captchaToken}},xform:_sessionResponsePassword})}else if("phone"in d){const{phone:$,password:j,options:_e}=d;g=await _request(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:$,password:j,gotrue_meta_security:{captcha_token:_e==null?void 0:_e.captchaToken}},xform:_sessionResponsePassword})}else throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a password");const{data:b,error:_}=g;if(_)return this._returnResult({data:{user:null,session:null},error:_});if(!b||!b.session||!b.user){const $=new AuthInvalidTokenResponseError;return this._returnResult({data:{user:null,session:null},error:$})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({user:b.user,session:b.session},b.weak_password?{weakPassword:b.weak_password}:null),error:_})}catch(g){if(isAuthError(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signInWithOAuth(d){var g,b,_,$;return await this._handleProviderSignIn(d.provider,{redirectTo:(g=d.options)===null||g===void 0?void 0:g.redirectTo,scopes:(b=d.options)===null||b===void 0?void 0:b.scopes,queryParams:(_=d.options)===null||_===void 0?void 0:_.queryParams,skipBrowserRedirect:($=d.options)===null||$===void 0?void 0:$.skipBrowserRedirect})}async exchangeCodeForSession(d){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(d))}async signInWithWeb3(d){const{chain:g}=d;switch(g){case"ethereum":return await this.signInWithEthereum(d);case"solana":return await this.signInWithSolana(d);default:throw new Error(`@supabase/auth-js: Unsupported chain "${g}"`)}}async signInWithEthereum(d){var g,b,_,$,j,_e,et,rt,nt,st,at;let it,dt;if("message"in d)it=d.message,dt=d.signature;else{const{chain:ot,wallet:ct,statement:lt,options:ut}=d;let ft;if(isBrowser())if(typeof ct=="object")ft=ct;else{const Rt=window;if("ethereum"in Rt&&typeof Rt.ethereum=="object"&&"request"in Rt.ethereum&&typeof Rt.ethereum.request=="function")ft=Rt.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof ct!="object"||!(ut!=null&&ut.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");ft=ct}const Et=new URL((g=ut==null?void 0:ut.url)!==null&&g!==void 0?g:window.location.href),Tt=await ft.request({method:"eth_requestAccounts"}).then(Rt=>Rt).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Tt||Tt.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const St=getAddress(Tt[0]);let ht=(b=ut==null?void 0:ut.signInWithEthereum)===null||b===void 0?void 0:b.chainId;if(!ht){const Rt=await ft.request({method:"eth_chainId"});ht=fromHex(Rt)}const kt={domain:Et.host,address:St,statement:lt,uri:Et.href,version:"1",chainId:ht,nonce:(_=ut==null?void 0:ut.signInWithEthereum)===null||_===void 0?void 0:_.nonce,issuedAt:(j=($=ut==null?void 0:ut.signInWithEthereum)===null||$===void 0?void 0:$.issuedAt)!==null&&j!==void 0?j:new Date,expirationTime:(_e=ut==null?void 0:ut.signInWithEthereum)===null||_e===void 0?void 0:_e.expirationTime,notBefore:(et=ut==null?void 0:ut.signInWithEthereum)===null||et===void 0?void 0:et.notBefore,requestId:(rt=ut==null?void 0:ut.signInWithEthereum)===null||rt===void 0?void 0:rt.requestId,resources:(nt=ut==null?void 0:ut.signInWithEthereum)===null||nt===void 0?void 0:nt.resources};it=createSiweMessage(kt),dt=await ft.request({method:"personal_sign",params:[toHex(it),St]})}try{const{data:ot,error:ct}=await _request(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:it,signature:dt},!((st=d.options)===null||st===void 0)&&st.captchaToken?{gotrue_meta_security:{captcha_token:(at=d.options)===null||at===void 0?void 0:at.captchaToken}}:null),xform:_sessionResponse});if(ct)throw ct;if(!ot||!ot.session||!ot.user){const lt=new AuthInvalidTokenResponseError;return this._returnResult({data:{user:null,session:null},error:lt})}return ot.session&&(await this._saveSession(ot.session),await this._notifyAllSubscribers("SIGNED_IN",ot.session)),this._returnResult({data:Object.assign({},ot),error:ct})}catch(ot){if(isAuthError(ot))return this._returnResult({data:{user:null,session:null},error:ot});throw ot}}async signInWithSolana(d){var g,b,_,$,j,_e,et,rt,nt,st,at,it;let dt,ot;if("message"in d)dt=d.message,ot=d.signature;else{const{chain:ct,wallet:lt,statement:ut,options:ft}=d;let Et;if(isBrowser())if(typeof lt=="object")Et=lt;else{const St=window;if("solana"in St&&typeof St.solana=="object"&&("signIn"in St.solana&&typeof St.solana.signIn=="function"||"signMessage"in St.solana&&typeof St.solana.signMessage=="function"))Et=St.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof lt!="object"||!(ft!=null&&ft.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");Et=lt}const Tt=new URL((g=ft==null?void 0:ft.url)!==null&&g!==void 0?g:window.location.href);if("signIn"in Et&&Et.signIn){const St=await Et.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},ft==null?void 0:ft.signInWithSolana),{version:"1",domain:Tt.host,uri:Tt.href}),ut?{statement:ut}:null));let ht;if(Array.isArray(St)&&St[0]&&typeof St[0]=="object")ht=St[0];else if(St&&typeof St=="object"&&"signedMessage"in St&&"signature"in St)ht=St;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in ht&&"signature"in ht&&(typeof ht.signedMessage=="string"||ht.signedMessage instanceof Uint8Array)&&ht.signature instanceof Uint8Array)dt=typeof ht.signedMessage=="string"?ht.signedMessage:new TextDecoder().decode(ht.signedMessage),ot=ht.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in Et)||typeof Et.signMessage!="function"||!("publicKey"in Et)||typeof Et!="object"||!Et.publicKey||!("toBase58"in Et.publicKey)||typeof Et.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");dt=[`${Tt.host} wants you to sign in with your Solana account:`,Et.publicKey.toBase58(),...ut?["",ut,""]:[""],"Version: 1",`URI: ${Tt.href}`,`Issued At: ${(_=(b=ft==null?void 0:ft.signInWithSolana)===null||b===void 0?void 0:b.issuedAt)!==null&&_!==void 0?_:new Date().toISOString()}`,...!(($=ft==null?void 0:ft.signInWithSolana)===null||$===void 0)&&$.notBefore?[`Not Before: ${ft.signInWithSolana.notBefore}`]:[],...!((j=ft==null?void 0:ft.signInWithSolana)===null||j===void 0)&&j.expirationTime?[`Expiration Time: ${ft.signInWithSolana.expirationTime}`]:[],...!((_e=ft==null?void 0:ft.signInWithSolana)===null||_e===void 0)&&_e.chainId?[`Chain ID: ${ft.signInWithSolana.chainId}`]:[],...!((et=ft==null?void 0:ft.signInWithSolana)===null||et===void 0)&&et.nonce?[`Nonce: ${ft.signInWithSolana.nonce}`]:[],...!((rt=ft==null?void 0:ft.signInWithSolana)===null||rt===void 0)&&rt.requestId?[`Request ID: ${ft.signInWithSolana.requestId}`]:[],...!((st=(nt=ft==null?void 0:ft.signInWithSolana)===null||nt===void 0?void 0:nt.resources)===null||st===void 0)&&st.length?["Resources",...ft.signInWithSolana.resources.map(ht=>`- ${ht}`)]:[]].join(`
`);const St=await Et.signMessage(new TextEncoder().encode(dt),"utf8");if(!St||!(St instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");ot=St}}try{const{data:ct,error:lt}=await _request(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:dt,signature:bytesToBase64URL(ot)},!((at=d.options)===null||at===void 0)&&at.captchaToken?{gotrue_meta_security:{captcha_token:(it=d.options)===null||it===void 0?void 0:it.captchaToken}}:null),xform:_sessionResponse});if(lt)throw lt;if(!ct||!ct.session||!ct.user){const ut=new AuthInvalidTokenResponseError;return this._returnResult({data:{user:null,session:null},error:ut})}return ct.session&&(await this._saveSession(ct.session),await this._notifyAllSubscribers("SIGNED_IN",ct.session)),this._returnResult({data:Object.assign({},ct),error:lt})}catch(ct){if(isAuthError(ct))return this._returnResult({data:{user:null,session:null},error:ct});throw ct}}async _exchangeCodeForSession(d){const g=await getItemAsync(this.storage,`${this.storageKey}-code-verifier`),[b,_]=(g??"").split("/");try{if(!b&&this.flowType==="pkce")throw new AuthPKCECodeVerifierMissingError;const{data:$,error:j}=await _request(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:d,code_verifier:b},xform:_sessionResponse});if(await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),j)throw j;if(!$||!$.session||!$.user){const _e=new AuthInvalidTokenResponseError;return this._returnResult({data:{user:null,session:null,redirectType:null},error:_e})}return $.session&&(await this._saveSession($.session),await this._notifyAllSubscribers("SIGNED_IN",$.session)),this._returnResult({data:Object.assign(Object.assign({},$),{redirectType:_??null}),error:j})}catch($){if(await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),isAuthError($))return this._returnResult({data:{user:null,session:null,redirectType:null},error:$});throw $}}async signInWithIdToken(d){try{const{options:g,provider:b,token:_,access_token:$,nonce:j}=d,_e=await _request(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:b,id_token:_,access_token:$,nonce:j,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:_sessionResponse}),{data:et,error:rt}=_e;if(rt)return this._returnResult({data:{user:null,session:null},error:rt});if(!et||!et.session||!et.user){const nt=new AuthInvalidTokenResponseError;return this._returnResult({data:{user:null,session:null},error:nt})}return et.session&&(await this._saveSession(et.session),await this._notifyAllSubscribers("SIGNED_IN",et.session)),this._returnResult({data:et,error:rt})}catch(g){if(isAuthError(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signInWithOtp(d){var g,b,_,$,j;try{if("email"in d){const{email:_e,options:et}=d;let rt=null,nt=null;this.flowType==="pkce"&&([rt,nt]=await getCodeChallengeAndMethod(this.storage,this.storageKey));const{error:st}=await _request(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:_e,data:(g=et==null?void 0:et.data)!==null&&g!==void 0?g:{},create_user:(b=et==null?void 0:et.shouldCreateUser)!==null&&b!==void 0?b:!0,gotrue_meta_security:{captcha_token:et==null?void 0:et.captchaToken},code_challenge:rt,code_challenge_method:nt},redirectTo:et==null?void 0:et.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:st})}if("phone"in d){const{phone:_e,options:et}=d,{data:rt,error:nt}=await _request(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:_e,data:(_=et==null?void 0:et.data)!==null&&_!==void 0?_:{},create_user:($=et==null?void 0:et.shouldCreateUser)!==null&&$!==void 0?$:!0,gotrue_meta_security:{captcha_token:et==null?void 0:et.captchaToken},channel:(j=et==null?void 0:et.channel)!==null&&j!==void 0?j:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:rt==null?void 0:rt.message_id},error:nt})}throw new AuthInvalidCredentialsError("You must provide either an email or phone number.")}catch(_e){if(await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),isAuthError(_e))return this._returnResult({data:{user:null,session:null},error:_e});throw _e}}async verifyOtp(d){var g,b;try{let _,$;"options"in d&&(_=(g=d.options)===null||g===void 0?void 0:g.redirectTo,$=(b=d.options)===null||b===void 0?void 0:b.captchaToken);const{data:j,error:_e}=await _request(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},d),{gotrue_meta_security:{captcha_token:$}}),redirectTo:_,xform:_sessionResponse});if(_e)throw _e;if(!j)throw new Error("An error occurred on token verification.");const et=j.session,rt=j.user;return et!=null&&et.access_token&&(await this._saveSession(et),await this._notifyAllSubscribers(d.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",et)),this._returnResult({data:{user:rt,session:et},error:null})}catch(_){if(isAuthError(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async signInWithSSO(d){var g,b,_,$,j;try{let _e=null,et=null;this.flowType==="pkce"&&([_e,et]=await getCodeChallengeAndMethod(this.storage,this.storageKey));const rt=await _request(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in d?{provider_id:d.providerId}:null),"domain"in d?{domain:d.domain}:null),{redirect_to:(b=(g=d.options)===null||g===void 0?void 0:g.redirectTo)!==null&&b!==void 0?b:void 0}),!((_=d==null?void 0:d.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:d.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:_e,code_challenge_method:et}),headers:this.headers,xform:_ssoResponse});return!(($=rt.data)===null||$===void 0)&&$.url&&isBrowser()&&!(!((j=d.options)===null||j===void 0)&&j.skipBrowserRedirect)&&window.location.assign(rt.data.url),this._returnResult(rt)}catch(_e){if(await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),isAuthError(_e))return this._returnResult({data:null,error:_e});throw _e}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async d=>{const{data:{session:g},error:b}=d;if(b)throw b;if(!g)throw new AuthSessionMissingError;const{error:_}=await _request(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:g.access_token});return this._returnResult({data:{user:null,session:null},error:_})})}catch(d){if(isAuthError(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async resend(d){try{const g=`${this.url}/resend`;if("email"in d){const{email:b,type:_,options:$}=d,{error:j}=await _request(this.fetch,"POST",g,{headers:this.headers,body:{email:b,type:_,gotrue_meta_security:{captcha_token:$==null?void 0:$.captchaToken}},redirectTo:$==null?void 0:$.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:j})}else if("phone"in d){const{phone:b,type:_,options:$}=d,{data:j,error:_e}=await _request(this.fetch,"POST",g,{headers:this.headers,body:{phone:b,type:_,gotrue_meta_security:{captcha_token:$==null?void 0:$.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:j==null?void 0:j.message_id},error:_e})}throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a type")}catch(g){if(isAuthError(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async g=>g))}async _acquireLock(d,g){this._debug("#_acquireLock","begin",d);try{if(this.lockAcquired){const b=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),_=(async()=>(await b,await g()))();return this.pendingInLock.push((async()=>{try{await _}catch{}})()),_}return await this.lock(`lock:${this.storageKey}`,d,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const b=g();for(this.pendingInLock.push((async()=>{try{await b}catch{}})()),await b;this.pendingInLock.length;){const _=[...this.pendingInLock];await Promise.all(_),this.pendingInLock.splice(0,_.length)}return await b}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(d){this._debug("#_useSession","begin");try{const g=await this.__loadSession();return await d(g)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let d=null;const g=await getItemAsync(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",g),g!==null&&(this._isValidSession(g)?d=g:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!d)return{data:{session:null},error:null};const b=d.expires_at?d.expires_at*1e3-Date.now()<EXPIRY_MARGIN_MS:!1;if(this._debug("#__loadSession()",`session has${b?"":" not"} expired`,"expires_at",d.expires_at),!b){if(this.userStorage){const j=await getItemAsync(this.userStorage,this.storageKey+"-user");j!=null&&j.user?d.user=j.user:d.user=userNotAvailableProxy()}if(this.storage.isServer&&d.user&&!d.user.__isUserNotAvailableProxy){const j={value:this.suppressGetSessionWarning};d.user=insecureUserWarningProxy(d.user,j),j.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:d},error:null}}const{data:_,error:$}=await this._callRefreshToken(d.refresh_token);return $?this._returnResult({data:{session:null},error:$}):this._returnResult({data:{session:_},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(d){if(d)return await this._getUser(d);await this.initializePromise;const g=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return g.data.user&&(this.suppressGetSessionWarning=!0),g}async _getUser(d){try{return d?await _request(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:d,xform:_userResponse}):await this._useSession(async g=>{var b,_,$;const{data:j,error:_e}=g;if(_e)throw _e;return!(!((b=j.session)===null||b===void 0)&&b.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new AuthSessionMissingError}:await _request(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:($=(_=j.session)===null||_===void 0?void 0:_.access_token)!==null&&$!==void 0?$:void 0,xform:_userResponse})})}catch(g){if(isAuthError(g))return isAuthSessionMissingError(g)&&(await this._removeSession(),await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:g});throw g}}async updateUser(d,g={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(d,g))}async _updateUser(d,g={}){try{return await this._useSession(async b=>{const{data:_,error:$}=b;if($)throw $;if(!_.session)throw new AuthSessionMissingError;const j=_.session;let _e=null,et=null;this.flowType==="pkce"&&d.email!=null&&([_e,et]=await getCodeChallengeAndMethod(this.storage,this.storageKey));const{data:rt,error:nt}=await _request(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:g==null?void 0:g.emailRedirectTo,body:Object.assign(Object.assign({},d),{code_challenge:_e,code_challenge_method:et}),jwt:j.access_token,xform:_userResponse});if(nt)throw nt;return j.user=rt.user,await this._saveSession(j),await this._notifyAllSubscribers("USER_UPDATED",j),this._returnResult({data:{user:j.user},error:null})})}catch(b){if(await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),isAuthError(b))return this._returnResult({data:{user:null},error:b});throw b}}async setSession(d){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(d))}async _setSession(d){try{if(!d.access_token||!d.refresh_token)throw new AuthSessionMissingError;const g=Date.now()/1e3;let b=g,_=!0,$=null;const{payload:j}=decodeJWT(d.access_token);if(j.exp&&(b=j.exp,_=b<=g),_){const{data:_e,error:et}=await this._callRefreshToken(d.refresh_token);if(et)return this._returnResult({data:{user:null,session:null},error:et});if(!_e)return{data:{user:null,session:null},error:null};$=_e}else{const{data:_e,error:et}=await this._getUser(d.access_token);if(et)return this._returnResult({data:{user:null,session:null},error:et});$={access_token:d.access_token,refresh_token:d.refresh_token,user:_e.user,token_type:"bearer",expires_in:b-g,expires_at:b},await this._saveSession($),await this._notifyAllSubscribers("SIGNED_IN",$)}return this._returnResult({data:{user:$.user,session:$},error:null})}catch(g){if(isAuthError(g))return this._returnResult({data:{session:null,user:null},error:g});throw g}}async refreshSession(d){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(d))}async _refreshSession(d){try{return await this._useSession(async g=>{var b;if(!d){const{data:j,error:_e}=g;if(_e)throw _e;d=(b=j.session)!==null&&b!==void 0?b:void 0}if(!(d!=null&&d.refresh_token))throw new AuthSessionMissingError;const{data:_,error:$}=await this._callRefreshToken(d.refresh_token);return $?this._returnResult({data:{user:null,session:null},error:$}):_?this._returnResult({data:{user:_.user,session:_},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(g){if(isAuthError(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async _getSessionFromURL(d,g){try{if(!isBrowser())throw new AuthImplicitGrantRedirectError("No browser detected.");if(d.error||d.error_description||d.error_code)throw new AuthImplicitGrantRedirectError(d.error_description||"Error in URL with unspecified error_description",{error:d.error||"unspecified_error",code:d.error_code||"unspecified_code"});switch(g){case"implicit":if(this.flowType==="pkce")throw new AuthPKCEGrantCodeExchangeError("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new AuthImplicitGrantRedirectError("Not a valid implicit grant flow url.");break;default:}if(g==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!d.code)throw new AuthPKCEGrantCodeExchangeError("No code detected.");const{data:ut,error:ft}=await this._exchangeCodeForSession(d.code);if(ft)throw ft;const Et=new URL(window.location.href);return Et.searchParams.delete("code"),window.history.replaceState(window.history.state,"",Et.toString()),{data:{session:ut.session,redirectType:null},error:null}}const{provider_token:b,provider_refresh_token:_,access_token:$,refresh_token:j,expires_in:_e,expires_at:et,token_type:rt}=d;if(!$||!_e||!j||!rt)throw new AuthImplicitGrantRedirectError("No session defined in URL");const nt=Math.round(Date.now()/1e3),st=parseInt(_e);let at=nt+st;et&&(at=parseInt(et));const it=at-nt;it*1e3<=AUTO_REFRESH_TICK_DURATION_MS&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${it}s, should have been closer to ${st}s`);const dt=at-st;nt-dt>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",dt,at,nt):nt-dt<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",dt,at,nt);const{data:ot,error:ct}=await this._getUser($);if(ct)throw ct;const lt={provider_token:b,provider_refresh_token:_,access_token:$,expires_in:st,expires_at:at,refresh_token:j,token_type:rt,user:ot.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:lt,redirectType:d.type},error:null})}catch(b){if(isAuthError(b))return this._returnResult({data:{session:null,redirectType:null},error:b});throw b}}_isImplicitGrantCallback(d){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),d):!!(d.access_token||d.error_description)}async _isPKCECallback(d){const g=await getItemAsync(this.storage,`${this.storageKey}-code-verifier`);return!!(d.code&&g)}async signOut(d={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(d))}async _signOut({scope:d}={scope:"global"}){return await this._useSession(async g=>{var b;const{data:_,error:$}=g;if($&&!isAuthSessionMissingError($))return this._returnResult({error:$});const j=(b=_.session)===null||b===void 0?void 0:b.access_token;if(j){const{error:_e}=await this.admin.signOut(j,d);if(_e&&!(isAuthApiError(_e)&&(_e.status===404||_e.status===401||_e.status===403)||isAuthSessionMissingError(_e)))return this._returnResult({error:_e})}return d!=="others"&&(await this._removeSession(),await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(d){const g=generateCallbackId(),b={id:g,callback:d,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",g),this.stateChangeEmitters.delete(g)}};return this._debug("#onAuthStateChange()","registered callback with id",g),this.stateChangeEmitters.set(g,b),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(g)})))(),{data:{subscription:b}}}async _emitInitialSession(d){return await this._useSession(async g=>{var b,_;try{const{data:{session:$},error:j}=g;if(j)throw j;await((b=this.stateChangeEmitters.get(d))===null||b===void 0?void 0:b.callback("INITIAL_SESSION",$)),this._debug("INITIAL_SESSION","callback id",d,"session",$)}catch($){await((_=this.stateChangeEmitters.get(d))===null||_===void 0?void 0:_.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",d,"error",$),console.error($)}})}async resetPasswordForEmail(d,g={}){let b=null,_=null;this.flowType==="pkce"&&([b,_]=await getCodeChallengeAndMethod(this.storage,this.storageKey,!0));try{return await _request(this.fetch,"POST",`${this.url}/recover`,{body:{email:d,code_challenge:b,code_challenge_method:_,gotrue_meta_security:{captcha_token:g.captchaToken}},headers:this.headers,redirectTo:g.redirectTo})}catch($){if(await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),isAuthError($))return this._returnResult({data:null,error:$});throw $}}async getUserIdentities(){var d;try{const{data:g,error:b}=await this.getUser();if(b)throw b;return this._returnResult({data:{identities:(d=g.user.identities)!==null&&d!==void 0?d:[]},error:null})}catch(g){if(isAuthError(g))return this._returnResult({data:null,error:g});throw g}}async linkIdentity(d){return"token"in d?this.linkIdentityIdToken(d):this.linkIdentityOAuth(d)}async linkIdentityOAuth(d){var g;try{const{data:b,error:_}=await this._useSession(async $=>{var j,_e,et,rt,nt;const{data:st,error:at}=$;if(at)throw at;const it=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,d.provider,{redirectTo:(j=d.options)===null||j===void 0?void 0:j.redirectTo,scopes:(_e=d.options)===null||_e===void 0?void 0:_e.scopes,queryParams:(et=d.options)===null||et===void 0?void 0:et.queryParams,skipBrowserRedirect:!0});return await _request(this.fetch,"GET",it,{headers:this.headers,jwt:(nt=(rt=st.session)===null||rt===void 0?void 0:rt.access_token)!==null&&nt!==void 0?nt:void 0})});if(_)throw _;return isBrowser()&&!(!((g=d.options)===null||g===void 0)&&g.skipBrowserRedirect)&&window.location.assign(b==null?void 0:b.url),this._returnResult({data:{provider:d.provider,url:b==null?void 0:b.url},error:null})}catch(b){if(isAuthError(b))return this._returnResult({data:{provider:d.provider,url:null},error:b});throw b}}async linkIdentityIdToken(d){return await this._useSession(async g=>{var b;try{const{error:_,data:{session:$}}=g;if(_)throw _;const{options:j,provider:_e,token:et,access_token:rt,nonce:nt}=d,st=await _request(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(b=$==null?void 0:$.access_token)!==null&&b!==void 0?b:void 0,body:{provider:_e,id_token:et,access_token:rt,nonce:nt,link_identity:!0,gotrue_meta_security:{captcha_token:j==null?void 0:j.captchaToken}},xform:_sessionResponse}),{data:at,error:it}=st;return it?this._returnResult({data:{user:null,session:null},error:it}):!at||!at.session||!at.user?this._returnResult({data:{user:null,session:null},error:new AuthInvalidTokenResponseError}):(at.session&&(await this._saveSession(at.session),await this._notifyAllSubscribers("USER_UPDATED",at.session)),this._returnResult({data:at,error:it}))}catch(_){if(await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),isAuthError(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}})}async unlinkIdentity(d){try{return await this._useSession(async g=>{var b,_;const{data:$,error:j}=g;if(j)throw j;return await _request(this.fetch,"DELETE",`${this.url}/user/identities/${d.identity_id}`,{headers:this.headers,jwt:(_=(b=$.session)===null||b===void 0?void 0:b.access_token)!==null&&_!==void 0?_:void 0})})}catch(g){if(isAuthError(g))return this._returnResult({data:null,error:g});throw g}}async _refreshAccessToken(d){const g=`#_refreshAccessToken(${d.substring(0,5)}...)`;this._debug(g,"begin");try{const b=Date.now();return await retryable(async _=>(_>0&&await sleep(200*Math.pow(2,_-1)),this._debug(g,"refreshing attempt",_),await _request(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:d},headers:this.headers,xform:_sessionResponse})),(_,$)=>{const j=200*Math.pow(2,_);return $&&isAuthRetryableFetchError($)&&Date.now()+j-b<AUTO_REFRESH_TICK_DURATION_MS})}catch(b){if(this._debug(g,"error",b),isAuthError(b))return this._returnResult({data:{session:null,user:null},error:b});throw b}finally{this._debug(g,"end")}}_isValidSession(d){return typeof d=="object"&&d!==null&&"access_token"in d&&"refresh_token"in d&&"expires_at"in d}async _handleProviderSignIn(d,g){const b=await this._getUrlForProvider(`${this.url}/authorize`,d,{redirectTo:g.redirectTo,scopes:g.scopes,queryParams:g.queryParams});return this._debug("#_handleProviderSignIn()","provider",d,"options",g,"url",b),isBrowser()&&!g.skipBrowserRedirect&&window.location.assign(b),{data:{provider:d,url:b},error:null}}async _recoverAndRefresh(){var d,g;const b="#_recoverAndRefresh()";this._debug(b,"begin");try{const _=await getItemAsync(this.storage,this.storageKey);if(_&&this.userStorage){let j=await getItemAsync(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!j&&(j={user:_.user},await setItemAsync(this.userStorage,this.storageKey+"-user",j)),_.user=(d=j==null?void 0:j.user)!==null&&d!==void 0?d:userNotAvailableProxy()}else if(_&&!_.user&&!_.user){const j=await getItemAsync(this.storage,this.storageKey+"-user");j&&(j!=null&&j.user)?(_.user=j.user,await removeItemAsync(this.storage,this.storageKey+"-user"),await setItemAsync(this.storage,this.storageKey,_)):_.user=userNotAvailableProxy()}if(this._debug(b,"session from storage",_),!this._isValidSession(_)){this._debug(b,"session is not valid"),_!==null&&await this._removeSession();return}const $=((g=_.expires_at)!==null&&g!==void 0?g:1/0)*1e3-Date.now()<EXPIRY_MARGIN_MS;if(this._debug(b,`session has${$?"":" not"} expired with margin of ${EXPIRY_MARGIN_MS}s`),$){if(this.autoRefreshToken&&_.refresh_token){const{error:j}=await this._callRefreshToken(_.refresh_token);j&&(console.error(j),isAuthRetryableFetchError(j)||(this._debug(b,"refresh failed with a non-retryable error, removing the session",j),await this._removeSession()))}}else if(_.user&&_.user.__isUserNotAvailableProxy===!0)try{const{data:j,error:_e}=await this._getUser(_.access_token);!_e&&(j!=null&&j.user)?(_.user=j.user,await this._saveSession(_),await this._notifyAllSubscribers("SIGNED_IN",_)):this._debug(b,"could not get user data, skipping SIGNED_IN notification")}catch(j){console.error("Error getting user data:",j),this._debug(b,"error getting user data, skipping SIGNED_IN notification",j)}else await this._notifyAllSubscribers("SIGNED_IN",_)}catch(_){this._debug(b,"error",_),console.error(_);return}finally{this._debug(b,"end")}}async _callRefreshToken(d){var g,b;if(!d)throw new AuthSessionMissingError;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const _=`#_callRefreshToken(${d.substring(0,5)}...)`;this._debug(_,"begin");try{this.refreshingDeferred=new Deferred$2;const{data:$,error:j}=await this._refreshAccessToken(d);if(j)throw j;if(!$.session)throw new AuthSessionMissingError;await this._saveSession($.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",$.session);const _e={data:$.session,error:null};return this.refreshingDeferred.resolve(_e),_e}catch($){if(this._debug(_,"error",$),isAuthError($)){const j={data:null,error:$};return isAuthRetryableFetchError($)||await this._removeSession(),(g=this.refreshingDeferred)===null||g===void 0||g.resolve(j),j}throw(b=this.refreshingDeferred)===null||b===void 0||b.reject($),$}finally{this.refreshingDeferred=null,this._debug(_,"end")}}async _notifyAllSubscribers(d,g,b=!0){const _=`#_notifyAllSubscribers(${d})`;this._debug(_,"begin",g,`broadcast = ${b}`);try{this.broadcastChannel&&b&&this.broadcastChannel.postMessage({event:d,session:g});const $=[],j=Array.from(this.stateChangeEmitters.values()).map(async _e=>{try{await _e.callback(d,g)}catch(et){$.push(et)}});if(await Promise.all(j),$.length>0){for(let _e=0;_e<$.length;_e+=1)console.error($[_e]);throw $[0]}}finally{this._debug(_,"end")}}async _saveSession(d){this._debug("#_saveSession()",d),this.suppressGetSessionWarning=!0,await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`);const g=Object.assign({},d),b=g.user&&g.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!b&&g.user&&await setItemAsync(this.userStorage,this.storageKey+"-user",{user:g.user});const _=Object.assign({},g);delete _.user;const $=deepClone(_);await setItemAsync(this.storage,this.storageKey,$)}else{const _=deepClone(g);await setItemAsync(this.storage,this.storageKey,_)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await removeItemAsync(this.storage,this.storageKey),await removeItemAsync(this.storage,this.storageKey+"-code-verifier"),await removeItemAsync(this.storage,this.storageKey+"-user"),this.userStorage&&await removeItemAsync(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const d=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{d&&isBrowser()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",d)}catch(g){console.error("removing visibilitychange callback failed",g)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const d=setInterval(()=>this._autoRefreshTokenTick(),AUTO_REFRESH_TICK_DURATION_MS);this.autoRefreshTicker=d,d&&typeof d=="object"&&typeof d.unref=="function"?d.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(d);const g=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=g,g&&typeof g=="object"&&typeof g.unref=="function"?g.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(g)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const d=this.autoRefreshTicker;this.autoRefreshTicker=null,d&&clearInterval(d);const g=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,g&&clearTimeout(g)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const d=Date.now();try{return await this._useSession(async g=>{const{data:{session:b}}=g;if(!b||!b.refresh_token||!b.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const _=Math.floor((b.expires_at*1e3-d)/AUTO_REFRESH_TICK_DURATION_MS);this._debug("#_autoRefreshTokenTick()",`access token expires in ${_} ticks, a tick lasts ${AUTO_REFRESH_TICK_DURATION_MS}ms, refresh threshold is ${AUTO_REFRESH_TICK_THRESHOLD} ticks`),_<=AUTO_REFRESH_TICK_THRESHOLD&&await this._callRefreshToken(b.refresh_token)})}catch(g){console.error("Auto refresh tick failed with error. This is likely a transient error.",g)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(d){if(d.isAcquireTimeout||d instanceof LockAcquireTimeoutError)this._debug("auto refresh token tick lock not available");else throw d}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!isBrowser()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(d){this._debug("#visibilityChangedCallback","error",d)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(d){console.error("_handleVisibilityChange",d)}}async _onVisibilityChanged(d){const g=`#_onVisibilityChanged(${d})`;this._debug(g,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),d||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(g,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(d,g,b){const _=[`provider=${encodeURIComponent(g)}`];if(b!=null&&b.redirectTo&&_.push(`redirect_to=${encodeURIComponent(b.redirectTo)}`),b!=null&&b.scopes&&_.push(`scopes=${encodeURIComponent(b.scopes)}`),this.flowType==="pkce"){const[$,j]=await getCodeChallengeAndMethod(this.storage,this.storageKey),_e=new URLSearchParams({code_challenge:`${encodeURIComponent($)}`,code_challenge_method:`${encodeURIComponent(j)}`});_.push(_e.toString())}if(b!=null&&b.queryParams){const $=new URLSearchParams(b.queryParams);_.push($.toString())}return b!=null&&b.skipBrowserRedirect&&_.push(`skip_http_redirect=${b.skipBrowserRedirect}`),`${d}?${_.join("&")}`}async _unenroll(d){try{return await this._useSession(async g=>{var b;const{data:_,error:$}=g;return $?this._returnResult({data:null,error:$}):await _request(this.fetch,"DELETE",`${this.url}/factors/${d.factorId}`,{headers:this.headers,jwt:(b=_==null?void 0:_.session)===null||b===void 0?void 0:b.access_token})})}catch(g){if(isAuthError(g))return this._returnResult({data:null,error:g});throw g}}async _enroll(d){try{return await this._useSession(async g=>{var b,_;const{data:$,error:j}=g;if(j)return this._returnResult({data:null,error:j});const _e=Object.assign({friendly_name:d.friendlyName,factor_type:d.factorType},d.factorType==="phone"?{phone:d.phone}:d.factorType==="totp"?{issuer:d.issuer}:{}),{data:et,error:rt}=await _request(this.fetch,"POST",`${this.url}/factors`,{body:_e,headers:this.headers,jwt:(b=$==null?void 0:$.session)===null||b===void 0?void 0:b.access_token});return rt?this._returnResult({data:null,error:rt}):(d.factorType==="totp"&&et.type==="totp"&&(!((_=et==null?void 0:et.totp)===null||_===void 0)&&_.qr_code)&&(et.totp.qr_code=`data:image/svg+xml;utf-8,${et.totp.qr_code}`),this._returnResult({data:et,error:null}))})}catch(g){if(isAuthError(g))return this._returnResult({data:null,error:g});throw g}}async _verify(d){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async g=>{var b;const{data:_,error:$}=g;if($)return this._returnResult({data:null,error:$});const j=Object.assign({challenge_id:d.challengeId},"webauthn"in d?{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_response:d.webauthn.type==="create"?serializeCredentialCreationResponse(d.webauthn.credential_response):serializeCredentialRequestResponse(d.webauthn.credential_response)})}:{code:d.code}),{data:_e,error:et}=await _request(this.fetch,"POST",`${this.url}/factors/${d.factorId}/verify`,{body:j,headers:this.headers,jwt:(b=_==null?void 0:_.session)===null||b===void 0?void 0:b.access_token});return et?this._returnResult({data:null,error:et}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+_e.expires_in},_e)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",_e),this._returnResult({data:_e,error:et}))})}catch(g){if(isAuthError(g))return this._returnResult({data:null,error:g});throw g}})}async _challenge(d){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async g=>{var b;const{data:_,error:$}=g;if($)return this._returnResult({data:null,error:$});const j=await _request(this.fetch,"POST",`${this.url}/factors/${d.factorId}/challenge`,{body:d,headers:this.headers,jwt:(b=_==null?void 0:_.session)===null||b===void 0?void 0:b.access_token});if(j.error)return j;const{data:_e}=j;if(_e.type!=="webauthn")return{data:_e,error:null};switch(_e.webauthn.type){case"create":return{data:Object.assign(Object.assign({},_e),{webauthn:Object.assign(Object.assign({},_e.webauthn),{credential_options:Object.assign(Object.assign({},_e.webauthn.credential_options),{publicKey:deserializeCredentialCreationOptions(_e.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},_e),{webauthn:Object.assign(Object.assign({},_e.webauthn),{credential_options:Object.assign(Object.assign({},_e.webauthn.credential_options),{publicKey:deserializeCredentialRequestOptions(_e.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(g){if(isAuthError(g))return this._returnResult({data:null,error:g});throw g}})}async _challengeAndVerify(d){const{data:g,error:b}=await this._challenge({factorId:d.factorId});return b?this._returnResult({data:null,error:b}):await this._verify({factorId:d.factorId,challengeId:g.id,code:d.code})}async _listFactors(){var d;const{data:{user:g},error:b}=await this.getUser();if(b)return{data:null,error:b};const _={all:[],phone:[],totp:[],webauthn:[]};for(const $ of(d=g==null?void 0:g.factors)!==null&&d!==void 0?d:[])_.all.push($),$.status==="verified"&&_[$.factor_type].push($);return{data:_,error:null}}async _getAuthenticatorAssuranceLevel(d){var g,b,_,$;if(d)try{const{payload:it}=decodeJWT(d);let dt=null;it.aal&&(dt=it.aal);let ot=dt;const{data:{user:ct},error:lt}=await this.getUser(d);if(lt)return this._returnResult({data:null,error:lt});((b=(g=ct==null?void 0:ct.factors)===null||g===void 0?void 0:g.filter(Et=>Et.status==="verified"))!==null&&b!==void 0?b:[]).length>0&&(ot="aal2");const ft=it.amr||[];return{data:{currentLevel:dt,nextLevel:ot,currentAuthenticationMethods:ft},error:null}}catch(it){if(isAuthError(it))return this._returnResult({data:null,error:it});throw it}const{data:{session:j},error:_e}=await this.getSession();if(_e)return this._returnResult({data:null,error:_e});if(!j)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:et}=decodeJWT(j.access_token);let rt=null;et.aal&&(rt=et.aal);let nt=rt;(($=(_=j.user.factors)===null||_===void 0?void 0:_.filter(it=>it.status==="verified"))!==null&&$!==void 0?$:[]).length>0&&(nt="aal2");const at=et.amr||[];return{data:{currentLevel:rt,nextLevel:nt,currentAuthenticationMethods:at},error:null}}async _getAuthorizationDetails(d){try{return await this._useSession(async g=>{const{data:{session:b},error:_}=g;return _?this._returnResult({data:null,error:_}):b?await _request(this.fetch,"GET",`${this.url}/oauth/authorizations/${d}`,{headers:this.headers,jwt:b.access_token,xform:$=>({data:$,error:null})}):this._returnResult({data:null,error:new AuthSessionMissingError})})}catch(g){if(isAuthError(g))return this._returnResult({data:null,error:g});throw g}}async _approveAuthorization(d,g){try{return await this._useSession(async b=>{const{data:{session:_},error:$}=b;if($)return this._returnResult({data:null,error:$});if(!_)return this._returnResult({data:null,error:new AuthSessionMissingError});const j=await _request(this.fetch,"POST",`${this.url}/oauth/authorizations/${d}/consent`,{headers:this.headers,jwt:_.access_token,body:{action:"approve"},xform:_e=>({data:_e,error:null})});return j.data&&j.data.redirect_url&&isBrowser()&&!(g!=null&&g.skipBrowserRedirect)&&window.location.assign(j.data.redirect_url),j})}catch(b){if(isAuthError(b))return this._returnResult({data:null,error:b});throw b}}async _denyAuthorization(d,g){try{return await this._useSession(async b=>{const{data:{session:_},error:$}=b;if($)return this._returnResult({data:null,error:$});if(!_)return this._returnResult({data:null,error:new AuthSessionMissingError});const j=await _request(this.fetch,"POST",`${this.url}/oauth/authorizations/${d}/consent`,{headers:this.headers,jwt:_.access_token,body:{action:"deny"},xform:_e=>({data:_e,error:null})});return j.data&&j.data.redirect_url&&isBrowser()&&!(g!=null&&g.skipBrowserRedirect)&&window.location.assign(j.data.redirect_url),j})}catch(b){if(isAuthError(b))return this._returnResult({data:null,error:b});throw b}}async _listOAuthGrants(){try{return await this._useSession(async d=>{const{data:{session:g},error:b}=d;return b?this._returnResult({data:null,error:b}):g?await _request(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:g.access_token,xform:_=>({data:_,error:null})}):this._returnResult({data:null,error:new AuthSessionMissingError})})}catch(d){if(isAuthError(d))return this._returnResult({data:null,error:d});throw d}}async _revokeOAuthGrant(d){try{return await this._useSession(async g=>{const{data:{session:b},error:_}=g;return _?this._returnResult({data:null,error:_}):b?(await _request(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:b.access_token,query:{client_id:d.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new AuthSessionMissingError})})}catch(g){if(isAuthError(g))return this._returnResult({data:null,error:g});throw g}}async fetchJwk(d,g={keys:[]}){let b=g.keys.find(_e=>_e.kid===d);if(b)return b;const _=Date.now();if(b=this.jwks.keys.find(_e=>_e.kid===d),b&&this.jwks_cached_at+JWKS_TTL>_)return b;const{data:$,error:j}=await _request(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(j)throw j;return!$.keys||$.keys.length===0||(this.jwks=$,this.jwks_cached_at=_,b=$.keys.find(_e=>_e.kid===d),!b)?null:b}async getClaims(d,g={}){try{let b=d;if(!b){const{data:it,error:dt}=await this.getSession();if(dt||!it.session)return this._returnResult({data:null,error:dt});b=it.session.access_token}const{header:_,payload:$,signature:j,raw:{header:_e,payload:et}}=decodeJWT(b);g!=null&&g.allowExpired||validateExp($.exp);const rt=!_.alg||_.alg.startsWith("HS")||!_.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(_.kid,g!=null&&g.keys?{keys:g.keys}:g==null?void 0:g.jwks);if(!rt){const{error:it}=await this.getUser(b);if(it)throw it;return{data:{claims:$,header:_,signature:j},error:null}}const nt=getAlgorithm(_.alg),st=await crypto.subtle.importKey("jwk",rt,nt,!0,["verify"]);if(!await crypto.subtle.verify(nt,st,j,stringToUint8Array(`${_e}.${et}`)))throw new AuthInvalidJwtError("Invalid JWT signature");return{data:{claims:$,header:_,signature:j},error:null}}catch(b){if(isAuthError(b))return this._returnResult({data:null,error:b});throw b}}}GoTrueClient.nextInstanceID={};const AuthClient=GoTrueClient,version="2.95.2";let JS_ENV="";typeof Deno<"u"?JS_ENV="deno":typeof document<"u"?JS_ENV="web":typeof navigator<"u"&&navigator.product==="ReactNative"?JS_ENV="react-native":JS_ENV="node";const DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${JS_ENV}/${version}`},DEFAULT_GLOBAL_OPTIONS={headers:DEFAULT_HEADERS},DEFAULT_DB_OPTIONS={schema:"public"},DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},DEFAULT_REALTIME_OPTIONS={};function _typeof(h){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},_typeof(h)}function toPrimitive(h,d){if(_typeof(h)!="object"||!h)return h;var g=h[Symbol.toPrimitive];if(g!==void 0){var b=g.call(h,d||"default");if(_typeof(b)!="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return(d==="string"?String:Number)(h)}function toPropertyKey(h){var d=toPrimitive(h,"string");return _typeof(d)=="symbol"?d:d+""}function _defineProperty(h,d,g){return(d=toPropertyKey(d))in h?Object.defineProperty(h,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):h[d]=g,h}function ownKeys(h,d){var g=Object.keys(h);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(h);d&&(b=b.filter(function(_){return Object.getOwnPropertyDescriptor(h,_).enumerable})),g.push.apply(g,b)}return g}function _objectSpread2(h){for(var d=1;d<arguments.length;d++){var g=arguments[d]!=null?arguments[d]:{};d%2?ownKeys(Object(g),!0).forEach(function(b){_defineProperty(h,b,g[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(g)):ownKeys(Object(g)).forEach(function(b){Object.defineProperty(h,b,Object.getOwnPropertyDescriptor(g,b))})}return h}const resolveFetch=h=>h?(...d)=>h(...d):(...d)=>fetch(...d),resolveHeadersConstructor=()=>Headers,fetchWithAuth=(h,d,g)=>{const b=resolveFetch(g),_=resolveHeadersConstructor();return async($,j)=>{var _e;const et=(_e=await d())!==null&&_e!==void 0?_e:h;let rt=new _(j==null?void 0:j.headers);return rt.has("apikey")||rt.set("apikey",h),rt.has("Authorization")||rt.set("Authorization",`Bearer ${et}`),b($,_objectSpread2(_objectSpread2({},j),{},{headers:rt}))}};function ensureTrailingSlash(h){return h.endsWith("/")?h:h+"/"}function applySettingDefaults(h,d){var g,b;const{db:_,auth:$,realtime:j,global:_e}=h,{db:et,auth:rt,realtime:nt,global:st}=d,at={db:_objectSpread2(_objectSpread2({},et),_),auth:_objectSpread2(_objectSpread2({},rt),$),realtime:_objectSpread2(_objectSpread2({},nt),j),storage:{},global:_objectSpread2(_objectSpread2(_objectSpread2({},st),_e),{},{headers:_objectSpread2(_objectSpread2({},(g=st==null?void 0:st.headers)!==null&&g!==void 0?g:{}),(b=_e==null?void 0:_e.headers)!==null&&b!==void 0?b:{})}),accessToken:async()=>""};return h.accessToken?at.accessToken=h.accessToken:delete at.accessToken,at}function validateSupabaseUrl(h){const d=h==null?void 0:h.trim();if(!d)throw new Error("supabaseUrl is required.");if(!d.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(ensureTrailingSlash(d))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var SupabaseAuthClient=class extends AuthClient{constructor(h){super(h)}},SupabaseClient=class{constructor(h,d,g){var b,_;this.supabaseUrl=h,this.supabaseKey=d;const $=validateSupabaseUrl(h);if(!d)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",$),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",$),this.storageUrl=new URL("storage/v1",$),this.functionsUrl=new URL("functions/v1",$);const j=`sb-${$.hostname.split(".")[0]}-auth-token`,_e={db:DEFAULT_DB_OPTIONS,realtime:DEFAULT_REALTIME_OPTIONS,auth:_objectSpread2(_objectSpread2({},DEFAULT_AUTH_OPTIONS),{},{storageKey:j}),global:DEFAULT_GLOBAL_OPTIONS},et=applySettingDefaults(g??{},_e);if(this.storageKey=(b=et.auth.storageKey)!==null&&b!==void 0?b:"",this.headers=(_=et.global.headers)!==null&&_!==void 0?_:{},et.accessToken)this.accessToken=et.accessToken,this.auth=new Proxy({},{get:(nt,st)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(st)} is not possible`)}});else{var rt;this.auth=this._initSupabaseAuthClient((rt=et.auth)!==null&&rt!==void 0?rt:{},this.headers,et.global.fetch)}this.fetch=fetchWithAuth(d,this._getAccessToken.bind(this),et.global.fetch),this.realtime=this._initRealtimeClient(_objectSpread2({headers:this.headers,accessToken:this._getAccessToken.bind(this)},et.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(nt=>this.realtime.setAuth(nt)).catch(nt=>console.warn("Failed to set initial Realtime auth token:",nt)),this.rest=new PostgrestClient(new URL("rest/v1",$).href,{headers:this.headers,schema:et.db.schema,fetch:this.fetch,timeout:et.db.timeout,urlLengthLimit:et.db.urlLengthLimit}),this.storage=new StorageClient(this.storageUrl.href,this.headers,this.fetch,g==null?void 0:g.storage),et.accessToken||this._listenForAuthEvents()}get functions(){return new FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(h){return this.rest.from(h)}schema(h){return this.rest.schema(h)}rpc(h,d={},g={head:!1,get:!1,count:void 0}){return this.rest.rpc(h,d,g)}channel(h,d={config:{}}){return this.realtime.channel(h,d)}getChannels(){return this.realtime.getChannels()}removeChannel(h){return this.realtime.removeChannel(h)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var h=this,d,g;if(h.accessToken)return await h.accessToken();const{data:b}=await h.auth.getSession();return(d=(g=b.session)===null||g===void 0?void 0:g.access_token)!==null&&d!==void 0?d:h.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:h,persistSession:d,detectSessionInUrl:g,storage:b,userStorage:_,storageKey:$,flowType:j,lock:_e,debug:et,throwOnError:rt},nt,st){const at={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new SupabaseAuthClient({url:this.authUrl.href,headers:_objectSpread2(_objectSpread2({},at),nt),storageKey:$,autoRefreshToken:h,persistSession:d,detectSessionInUrl:g,storage:b,userStorage:_,flowType:j,lock:_e,debug:et,throwOnError:rt,fetch:st,hasCustomAuthorizationHeader:Object.keys(this.headers).some(it=>it.toLowerCase()==="authorization")})}_initRealtimeClient(h){return new RealtimeClient(this.realtimeUrl.href,_objectSpread2(_objectSpread2({},h),{},{params:_objectSpread2(_objectSpread2({},{apikey:this.supabaseKey}),h==null?void 0:h.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((h,d)=>{this._handleTokenChanged(h,"CLIENT",d==null?void 0:d.access_token)})}_handleTokenChanged(h,d,g){(h==="TOKEN_REFRESHED"||h==="SIGNED_IN")&&this.changedAccessToken!==g?(this.changedAccessToken=g,this.realtime.setAuth(g)):h==="SIGNED_OUT"&&(this.realtime.setAuth(),d=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const createClient=(h,d,g)=>new SupabaseClient(h,d,g);function shouldShowDeprecationWarning(){if(typeof window<"u")return!1;const h=globalThis.process;if(!h)return!1;const d=h.version;if(d==null)return!1;const g=d.match(/^v(\d+)\./);return g?parseInt(g[1],10)<=18:!1}shouldShowDeprecationWarning()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const SUPABASE_URL="https://pcogfqujarujfbinhfgx.supabase.co",SUPABASE_PUBLISHABLE_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBjb2dmcXVqYXJ1amZiaW5oZmd4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAzNTQ5OTEsImV4cCI6MjA4NTkzMDk5MX0.-W1psmpY4Cvgui573Z68NbHunK77i9onb8yNTnmr34w",supabase=createClient(SUPABASE_URL,SUPABASE_PUBLISHABLE_KEY,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),ContributeKeyDialog=()=>{const[h,d]=reactExports.useState(!1),[g,b]=reactExports.useState(""),[_,$]=reactExports.useState("idle"),[j,_e]=reactExports.useState(""),[et,rt]=reactExports.useState(null),nt=async()=>{if(!g.trim()||g.trim().length<20){_e("Please enter a valid YouTube Data API v3 key"),$("error");return}$("validating"),_e("");try{const{data:at,error:it}=await supabase.functions.invoke("validate-api-key",{body:{apiKey:g.trim()}});if(it)throw new Error(it.message||"Validation failed");at!=null&&at.success?($("success"),rt(at.poolSize),b("")):($("error"),_e((at==null?void 0:at.error)||"Key validation failed"))}catch(at){$("error"),_e(at.message||"Something went wrong")}},st=at=>{d(at),at||setTimeout(()=>{$("idle"),_e(""),b(""),rt(null)},200)};return jsxRuntimeExports.jsxs(Dialog,{open:h,onOpenChange:st,children:[jsxRuntimeExports.jsx(DialogTrigger,{asChild:!0,children:jsxRuntimeExports.jsx("button",{className:"flex items-center h-8 px-2 rounded-full text-muted-foreground hover:text-primary transition-colors",title:"Contribute API Key",children:jsxRuntimeExports.jsx(Key,{className:"w-4 h-4"})})}),jsxRuntimeExports.jsxs(DialogContent,{className:"sm:max-w-md bg-card border-border",children:[jsxRuntimeExports.jsxs(DialogHeader,{children:[jsxRuntimeExports.jsxs(DialogTitle,{className:"flex items-center gap-2 text-foreground",children:[jsxRuntimeExports.jsx(Key,{className:"w-5 h-5 text-primary"}),"Contribute an API Key"]}),jsxRuntimeExports.jsx(DialogDescription,{className:"text-muted-foreground",children:"Help keep this service running for everyone."})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4 pt-2",children:[jsxRuntimeExports.jsxs("div",{className:"rounded-xl bg-accent/50 border border-accent-foreground/10 p-3.5 space-y-2.5",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-accent-foreground",children:[jsxRuntimeExports.jsx(Users,{className:"w-4 h-4"}),"Community-Powered"]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-muted-foreground leading-relaxed",children:["This service relies on API keys contributed by users like you. Each key provides ",jsxRuntimeExports.jsx("strong",{className:"text-foreground",children:"~100 lookups/day"}),". Together, thousands of us keep the project running."]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[jsxRuntimeExports.jsx(Shield,{className:"w-3.5 h-3.5 text-success"}),"Your key is encrypted and can never be viewed again after submission."]}),_==="success"?jsxRuntimeExports.jsxs("div",{className:"rounded-xl bg-success/10 border border-success/20 p-4 text-center space-y-2",children:[jsxRuntimeExports.jsx(CircleCheck,{className:"w-8 h-8 text-success mx-auto"}),jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-foreground",children:"Thank you!"}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-muted-foreground",children:["Your key has been added to the community pool.",et&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[" We now have ",jsxRuntimeExports.jsx("strong",{className:"text-foreground",children:et})," active keys."]})]})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Input,{type:"password",placeholder:"AIzaSy...",value:g,onChange:at=>{b(at.target.value),_==="error"&&($("idle"),_e(""))},className:"font-mono text-sm bg-background",disabled:_==="validating"}),_==="error"&&j&&jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-1.5 text-xs text-destructive",children:[jsxRuntimeExports.jsx(CircleAlert,{className:"w-3.5 h-3.5 mt-0.5 shrink-0"}),j]})]}),jsxRuntimeExports.jsx("button",{onClick:nt,disabled:_==="validating"||!g.trim(),className:"w-full ios-pill flex items-center justify-center gap-2 bg-primary text-primary-foreground text-sm font-medium disabled:opacity-40",children:_==="validating"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"w-4 h-4 animate-spin"}),"Validating key"]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Key,{className:"w-4 h-4"}),"Contribute Key"]})}),jsxRuntimeExports.jsxs("details",{className:"text-xs text-muted-foreground group",children:[jsxRuntimeExports.jsx("summary",{className:"cursor-pointer hover:text-foreground transition-colors font-medium",children:"How do I get a YouTube API key?"}),jsxRuntimeExports.jsxs("ol",{className:"mt-2 space-y-1.5 pl-4 list-decimal leading-relaxed",children:[jsxRuntimeExports.jsxs("li",{children:["Go to"," ",jsxRuntimeExports.jsxs("a",{href:"https://console.cloud.google.com/apis/credentials",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline inline-flex items-center gap-0.5",children:["Google Cloud Console",jsxRuntimeExports.jsx(ExternalLink,{className:"w-2.5 h-2.5"})]})]}),jsxRuntimeExports.jsx("li",{children:"Create a new project (or select an existing one)"}),jsxRuntimeExports.jsxs("li",{children:["Enable the ",jsxRuntimeExports.jsx("strong",{children:"YouTube Data API v3"})]}),jsxRuntimeExports.jsxs("li",{children:["Go to ",jsxRuntimeExports.jsx("strong",{children:"Credentials  Create Credentials  API Key"})]}),jsxRuntimeExports.jsx("li",{children:"Copy and paste the key above"})]}),jsxRuntimeExports.jsx("p",{className:"mt-2 text-muted-foreground/70",children:"Each Google account gets 10,000 free units/day (100 searches)."})]})]})]})]})]})};var PROGRESS_NAME="Progress",DEFAULT_MAX=100,[createProgressContext,createProgressScope]=createContextScope(PROGRESS_NAME),[ProgressProvider,useProgressContext]=createProgressContext(PROGRESS_NAME),Progress$1=reactExports.forwardRef((h,d)=>{const{__scopeProgress:g,value:b=null,max:_,getValueLabel:$=defaultGetValueLabel,...j}=h;(_||_===0)&&!isValidMaxNumber(_)&&console.error(getInvalidMaxError(`${_}`,"Progress"));const _e=isValidMaxNumber(_)?_:DEFAULT_MAX;b!==null&&!isValidValueNumber(b,_e)&&console.error(getInvalidValueError(`${b}`,"Progress"));const et=isValidValueNumber(b,_e)?b:null,rt=isNumber(et)?$(et,_e):void 0;return jsxRuntimeExports.jsx(ProgressProvider,{scope:g,value:et,max:_e,children:jsxRuntimeExports.jsx(Primitive.div,{"aria-valuemax":_e,"aria-valuemin":0,"aria-valuenow":isNumber(et)?et:void 0,"aria-valuetext":rt,role:"progressbar","data-state":getProgressState(et,_e),"data-value":et??void 0,"data-max":_e,...j,ref:d})})});Progress$1.displayName=PROGRESS_NAME;var INDICATOR_NAME="ProgressIndicator",ProgressIndicator=reactExports.forwardRef((h,d)=>{const{__scopeProgress:g,...b}=h,_=useProgressContext(INDICATOR_NAME,g);return jsxRuntimeExports.jsx(Primitive.div,{"data-state":getProgressState(_.value,_.max),"data-value":_.value??void 0,"data-max":_.max,...b,ref:d})});ProgressIndicator.displayName=INDICATOR_NAME;function defaultGetValueLabel(h,d){return`${Math.round(h/d*100)}%`}function getProgressState(h,d){return h==null?"indeterminate":h===d?"complete":"loading"}function isNumber(h){return typeof h=="number"}function isValidMaxNumber(h){return isNumber(h)&&!isNaN(h)&&h>0}function isValidValueNumber(h,d){return isNumber(h)&&!isNaN(h)&&h<=d&&h>=0}function getInvalidMaxError(h,d){return`Invalid prop \`max\` of value \`${h}\` supplied to \`${d}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${DEFAULT_MAX}\`.`}function getInvalidValueError(h,d){return`Invalid prop \`value\` of value \`${h}\` supplied to \`${d}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${DEFAULT_MAX} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Root=Progress$1,Indicator=ProgressIndicator;const Progress=reactExports.forwardRef(({className:h,value:d,...g},b)=>jsxRuntimeExports.jsx(Root,{ref:b,className:cn("relative h-4 w-full overflow-hidden rounded-full bg-secondary",h),...g,children:jsxRuntimeExports.jsx(Indicator,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(d||0)}%)`}})}));Progress.displayName=Root.displayName;function DropZone({onFilesAdded:h,compact:d=!1,isProcessing:g}){const[b,_]=reactExports.useState(!1),$=reactExports.useRef(null),j=reactExports.useCallback(st=>{st.preventDefault(),st.stopPropagation()},[]),_e=reactExports.useCallback(st=>{st.preventDefault(),st.stopPropagation(),_(!0)},[]),et=reactExports.useCallback(st=>{st.preventDefault(),st.stopPropagation(),_(!1)},[]),rt=reactExports.useCallback(st=>{st.preventDefault(),st.stopPropagation(),_(!1);const at=Array.from(st.dataTransfer.files);at.length>0&&h(at)},[h]),nt=reactExports.useCallback(st=>{const at=Array.from(st.target.files||[]);at.length>0&&h(at),st.target.value=""},[h]);return d?jsxRuntimeExports.jsxs("button",{onClick:()=>{var st;return(st=$.current)==null?void 0:st.click()},disabled:g,className:cn("w-full flex items-center justify-center gap-2 py-3 rounded-2xl","glass-button","text-muted-foreground active:text-foreground","transition-all text-sm",g&&"opacity-40 pointer-events-none"),children:[jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4"}),"Add more files",jsxRuntimeExports.jsx("input",{ref:$,type:"file",multiple:!0,accept:".mp3,audio/mpeg",onChange:nt,className:"hidden"})]}):jsxRuntimeExports.jsxs("div",{onDragOver:j,onDragEnter:_e,onDragLeave:et,onDrop:rt,onClick:()=>{var st;return(st=$.current)==null?void 0:st.click()},className:cn("relative cursor-pointer rounded-2xl","glass transition-all duration-300",b&&"ring-2 ring-primary/40 bg-primary/[0.06]",!b&&"active:scale-[0.99]"),children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center py-16 sm:py-24 px-6",children:[jsxRuntimeExports.jsx("div",{className:cn("w-14 h-14 rounded-2xl flex items-center justify-center mb-5","glass-inset",b&&"bg-primary/10"),children:jsxRuntimeExports.jsx(Upload,{className:cn("w-6 h-6",b?"text-primary":"text-muted-foreground/60")})}),jsxRuntimeExports.jsx("p",{className:"font-semibold text-foreground mb-1 text-2xl",children:b?"Drop your files":"Drop MP3s here"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground mb-4 text-base",children:"or tap to browse"}),jsxRuntimeExports.jsx("span",{className:"text-muted-foreground/30 font-mono text-xl",children:".mp3"})]}),jsxRuntimeExports.jsx("input",{ref:$,type:"file",multiple:!0,accept:".mp3,audio/mpeg",onChange:nt,className:"hidden"})]})}function memo(h,d,g){let b=g.initialDeps??[],_,$=!0;function j(){var _e,et,rt;let nt;g.key&&((_e=g.debug)!=null&&_e.call(g))&&(nt=Date.now());const st=h();if(!(st.length!==b.length||st.some((dt,ot)=>b[ot]!==dt)))return _;b=st;let it;if(g.key&&((et=g.debug)!=null&&et.call(g))&&(it=Date.now()),_=d(...st),g.key&&((rt=g.debug)!=null&&rt.call(g))){const dt=Math.round((Date.now()-nt)*100)/100,ot=Math.round((Date.now()-it)*100)/100,ct=ot/16,lt=(ut,ft)=>{for(ut=String(ut);ut.length<ft;)ut=" "+ut;return ut};console.info(`%c ${lt(ot,5)} /${lt(dt,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*ct,120))}deg 100% 31%);`,g==null?void 0:g.key)}return g!=null&&g.onChange&&!($&&g.skipInitialOnChange)&&g.onChange(_),$=!1,_}return j.updateDeps=_e=>{b=_e},j}function notUndefined(h,d){if(h===void 0)throw new Error("Unexpected undefined");return h}const approxEqual=(h,d)=>Math.abs(h-d)<1.01,debounce=(h,d,g)=>{let b;return function(..._){h.clearTimeout(b),b=h.setTimeout(()=>d.apply(this,_),g)}},getRect=h=>{const{offsetWidth:d,offsetHeight:g}=h;return{width:d,height:g}},defaultKeyExtractor=h=>h,defaultRangeExtractor=h=>{const d=Math.max(h.startIndex-h.overscan,0),g=Math.min(h.endIndex+h.overscan,h.count-1),b=[];for(let _=d;_<=g;_++)b.push(_);return b},observeElementRect=(h,d)=>{const g=h.scrollElement;if(!g)return;const b=h.targetWindow;if(!b)return;const _=j=>{const{width:_e,height:et}=j;d({width:Math.round(_e),height:Math.round(et)})};if(_(getRect(g)),!b.ResizeObserver)return()=>{};const $=new b.ResizeObserver(j=>{const _e=()=>{const et=j[0];if(et!=null&&et.borderBoxSize){const rt=et.borderBoxSize[0];if(rt){_({width:rt.inlineSize,height:rt.blockSize});return}}_(getRect(g))};h.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(_e):_e()});return $.observe(g,{box:"border-box"}),()=>{$.unobserve(g)}},addEventListenerOptions={passive:!0},supportsScrollend=typeof window>"u"?!0:"onscrollend"in window,observeElementOffset=(h,d)=>{const g=h.scrollElement;if(!g)return;const b=h.targetWindow;if(!b)return;let _=0;const $=h.options.useScrollendEvent&&supportsScrollend?()=>{}:debounce(b,()=>{d(_,!1)},h.options.isScrollingResetDelay),j=nt=>()=>{const{horizontal:st,isRtl:at}=h.options;_=st?g.scrollLeft*(at&&-1||1):g.scrollTop,$(),d(_,nt)},_e=j(!0),et=j(!1);g.addEventListener("scroll",_e,addEventListenerOptions);const rt=h.options.useScrollendEvent&&supportsScrollend;return rt&&g.addEventListener("scrollend",et,addEventListenerOptions),()=>{g.removeEventListener("scroll",_e),rt&&g.removeEventListener("scrollend",et)}},measureElement=(h,d,g)=>{if(d!=null&&d.borderBoxSize){const b=d.borderBoxSize[0];if(b)return Math.round(b[g.options.horizontal?"inlineSize":"blockSize"])}return h[g.options.horizontal?"offsetWidth":"offsetHeight"]},elementScroll=(h,{adjustments:d=0,behavior:g},b)=>{var _,$;const j=h+d;($=(_=b.scrollElement)==null?void 0:_.scrollTo)==null||$.call(_,{[b.options.horizontal?"left":"top"]:j,behavior:g})};class Virtualizer{constructor(d){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.currentScrollToIndex=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.laneAssignments=new Map,this.pendingMeasuredCacheIndexes=[],this.prevLanes=void 0,this.lanesChangedFlag=!1,this.lanesSettling=!1,this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let g=null;const b=()=>g||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:g=new this.targetWindow.ResizeObserver(_=>{_.forEach($=>{const j=()=>{this._measureElement($.target,$)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(j):j()})}));return{disconnect:()=>{var _;(_=b())==null||_.disconnect(),g=null},observe:_=>{var $;return($=b())==null?void 0:$.observe(_,{box:"border-box"})},unobserve:_=>{var $;return($=b())==null?void 0:$.unobserve(_)}}})(),this.range=null,this.setOptions=g=>{Object.entries(g).forEach(([b,_])=>{typeof _>"u"&&delete g[b]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:defaultKeyExtractor,rangeExtractor:defaultRangeExtractor,onChange:()=>{},measureElement,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...g}},this.notify=g=>{var b,_;(_=(b=this.options).onChange)==null||_.call(b,this,g)},this.maybeNotify=memo(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),g=>{this.notify(g)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(g=>g()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var g;const b=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==b){if(this.cleanup(),!b){this.maybeNotify();return}this.scrollElement=b,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((g=this.scrollElement)==null?void 0:g.window)??null,this.elementsCache.forEach(_=>{this.observer.observe(_)}),this.unsubs.push(this.options.observeElementRect(this,_=>{this.scrollRect=_,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(_,$)=>{this.scrollAdjustments=0,this.scrollDirection=$?this.getScrollOffset()<_?"forward":"backward":null,this.scrollOffset=_,this.isScrolling=$,this.maybeNotify()})),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0})}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(g,b)=>{const _=new Map,$=new Map;for(let j=b-1;j>=0;j--){const _e=g[j];if(_.has(_e.lane))continue;const et=$.get(_e.lane);if(et==null||_e.end>et.end?$.set(_e.lane,_e):_e.end<et.end&&_.set(_e.lane,!0),_.size===this.options.lanes)break}return $.size===this.options.lanes?Array.from($.values()).sort((j,_e)=>j.end===_e.end?j.index-_e.index:j.end-_e.end)[0]:void 0},this.getMeasurementOptions=memo(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled,this.options.lanes],(g,b,_,$,j,_e)=>(this.prevLanes!==void 0&&this.prevLanes!==_e&&(this.lanesChangedFlag=!0),this.prevLanes=_e,this.pendingMeasuredCacheIndexes=[],{count:g,paddingStart:b,scrollMargin:_,getItemKey:$,enabled:j,lanes:_e}),{key:!1}),this.getMeasurements=memo(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:g,paddingStart:b,scrollMargin:_,getItemKey:$,enabled:j,lanes:_e},et)=>{if(!j)return this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),[];if(this.laneAssignments.size>g)for(const at of this.laneAssignments.keys())at>=g&&this.laneAssignments.delete(at);this.lanesChangedFlag&&(this.lanesChangedFlag=!1,this.lanesSettling=!0,this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),this.pendingMeasuredCacheIndexes=[]),this.measurementsCache.length===0&&!this.lanesSettling&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(at=>{this.itemSizeCache.set(at.key,at.size)}));const rt=this.lanesSettling?0:this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[],this.lanesSettling&&this.measurementsCache.length===g&&(this.lanesSettling=!1);const nt=this.measurementsCache.slice(0,rt),st=new Array(_e).fill(void 0);for(let at=0;at<rt;at++){const it=nt[at];it&&(st[it.lane]=at)}for(let at=rt;at<g;at++){const it=$(at),dt=this.laneAssignments.get(at);let ot,ct;if(dt!==void 0&&this.options.lanes>1){ot=dt;const Et=st[ot],Tt=Et!==void 0?nt[Et]:void 0;ct=Tt?Tt.end+this.options.gap:b+_}else{const Et=this.options.lanes===1?nt[at-1]:this.getFurthestMeasurement(nt,at);ct=Et?Et.end+this.options.gap:b+_,ot=Et?Et.lane:at%this.options.lanes,this.options.lanes>1&&this.laneAssignments.set(at,ot)}const lt=et.get(it),ut=typeof lt=="number"?lt:this.options.estimateSize(at),ft=ct+ut;nt[at]={index:at,start:ct,size:ut,end:ft,key:it,lane:ot},st[ot]=at}return this.measurementsCache=nt,nt},{key:!1,debug:()=>this.options.debug}),this.calculateRange=memo(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(g,b,_,$)=>this.range=g.length>0&&b>0?calculateRange({measurements:g,outerSize:b,scrollOffset:_,lanes:$}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=memo(()=>{let g=null,b=null;const _=this.calculateRange();return _&&(g=_.startIndex,b=_.endIndex),this.maybeNotify.updateDeps([this.isScrolling,g,b]),[this.options.rangeExtractor,this.options.overscan,this.options.count,g,b]},(g,b,_,$,j)=>$===null||j===null?[]:g({startIndex:$,endIndex:j,overscan:b,count:_}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=g=>{const b=this.options.indexAttribute,_=g.getAttribute(b);return _?parseInt(_,10):(console.warn(`Missing attribute name '${b}={index}' on measured element.`),-1)},this._measureElement=(g,b)=>{const _=this.indexFromElement(g),$=this.measurementsCache[_];if(!$)return;const j=$.key,_e=this.elementsCache.get(j);_e!==g&&(_e&&this.observer.unobserve(_e),this.observer.observe(g),this.elementsCache.set(j,g)),g.isConnected&&this.resizeItem(_,this.options.measureElement(g,b,this))},this.resizeItem=(g,b)=>{const _=this.measurementsCache[g];if(!_)return;const $=this.itemSizeCache.get(_.key)??_.size,j=b-$;j!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(_,j,this):_.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=j,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(_.index),this.itemSizeCache=new Map(this.itemSizeCache.set(_.key,b)),this.notify(!1))},this.measureElement=g=>{if(!g){this.elementsCache.forEach((b,_)=>{b.isConnected||(this.observer.unobserve(b),this.elementsCache.delete(_))});return}this._measureElement(g,void 0)},this.getVirtualItems=memo(()=>[this.getVirtualIndexes(),this.getMeasurements()],(g,b)=>{const _=[];for(let $=0,j=g.length;$<j;$++){const _e=g[$],et=b[_e];_.push(et)}return _},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=g=>{const b=this.getMeasurements();if(b.length!==0)return notUndefined(b[findNearestBinarySearch(0,b.length-1,_=>notUndefined(b[_]).start,g)])},this.getMaxScrollOffset=()=>{if(!this.scrollElement)return 0;if("scrollHeight"in this.scrollElement)return this.options.horizontal?this.scrollElement.scrollWidth-this.scrollElement.clientWidth:this.scrollElement.scrollHeight-this.scrollElement.clientHeight;{const g=this.scrollElement.document.documentElement;return this.options.horizontal?g.scrollWidth-this.scrollElement.innerWidth:g.scrollHeight-this.scrollElement.innerHeight}},this.getOffsetForAlignment=(g,b,_=0)=>{if(!this.scrollElement)return 0;const $=this.getSize(),j=this.getScrollOffset();b==="auto"&&(b=g>=j+$?"end":"start"),b==="center"?g+=(_-$)/2:b==="end"&&(g-=$);const _e=this.getMaxScrollOffset();return Math.max(Math.min(_e,g),0)},this.getOffsetForIndex=(g,b="auto")=>{g=Math.max(0,Math.min(g,this.options.count-1));const _=this.measurementsCache[g];if(!_)return;const $=this.getSize(),j=this.getScrollOffset();if(b==="auto")if(_.end>=j+$-this.options.scrollPaddingEnd)b="end";else if(_.start<=j+this.options.scrollPaddingStart)b="start";else return[j,b];if(b==="end"&&g===this.options.count-1)return[this.getMaxScrollOffset(),b];const _e=b==="end"?_.end+this.options.scrollPaddingEnd:_.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(_e,b,_.size),b]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(g,{align:b="start",behavior:_}={})=>{_==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(g,b),{adjustments:void 0,behavior:_})},this.scrollToIndex=(g,{align:b="auto",behavior:_}={})=>{_==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),g=Math.max(0,Math.min(g,this.options.count-1)),this.currentScrollToIndex=g;let $=0;const j=10,_e=rt=>{if(!this.targetWindow)return;const nt=this.getOffsetForIndex(g,rt);if(!nt){console.warn("Failed to get offset for index:",g);return}const[st,at]=nt;this._scrollToOffset(st,{adjustments:void 0,behavior:_}),this.targetWindow.requestAnimationFrame(()=>{const it=()=>{if(this.currentScrollToIndex!==g)return;const dt=this.getScrollOffset(),ot=this.getOffsetForIndex(g,at);if(!ot){console.warn("Failed to get offset for index:",g);return}approxEqual(ot[0],dt)||et(at)};this.isDynamicMode()?this.targetWindow.requestAnimationFrame(it):it()})},et=rt=>{this.targetWindow&&this.currentScrollToIndex===g&&($++,$<j?this.targetWindow.requestAnimationFrame(()=>_e(rt)):console.warn(`Failed to scroll to index ${g} after ${j} attempts.`))};_e(b)},this.scrollBy=(g,{behavior:b}={})=>{b==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+g,{adjustments:void 0,behavior:b})},this.getTotalSize=()=>{var g;const b=this.getMeasurements();let _;if(b.length===0)_=this.options.paddingStart;else if(this.options.lanes===1)_=((g=b[b.length-1])==null?void 0:g.end)??0;else{const $=Array(this.options.lanes).fill(null);let j=b.length-1;for(;j>=0&&$.some(_e=>_e===null);){const _e=b[j];$[_e.lane]===null&&($[_e.lane]=_e.end),j--}_=Math.max(...$.filter(_e=>_e!==null))}return Math.max(_-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(g,{adjustments:b,behavior:_})=>{this.options.scrollToFn(g,{behavior:_,adjustments:b},this)},this.measure=()=>{this.itemSizeCache=new Map,this.laneAssignments=new Map,this.notify(!1)},this.setOptions(d)}}const findNearestBinarySearch=(h,d,g,b)=>{for(;h<=d;){const _=(h+d)/2|0,$=g(_);if($<b)h=_+1;else if($>b)d=_-1;else return _}return h>0?h-1:0};function calculateRange({measurements:h,outerSize:d,scrollOffset:g,lanes:b}){const _=h.length-1,$=et=>h[et].start;if(h.length<=b)return{startIndex:0,endIndex:_};let j=findNearestBinarySearch(0,_,$,g),_e=j;if(b===1)for(;_e<_&&h[_e].end<g+d;)_e++;else if(b>1){const et=Array(b).fill(0);for(;_e<_&&et.some(nt=>nt<g+d);){const nt=h[_e];et[nt.lane]=nt.end,_e++}const rt=Array(b).fill(g+d);for(;j>=0&&rt.some(nt=>nt>=g);){const nt=h[j];rt[nt.lane]=nt.start,j--}j=Math.max(0,j-j%b),_e=Math.min(_,_e+(b-1-_e%b))}return{startIndex:j,endIndex:_e}}const useIsomorphicLayoutEffect=typeof document<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function useVirtualizerBase({useFlushSync:h=!0,...d}){const g=reactExports.useReducer(()=>({}),{})[1],b={...d,onChange:($,j)=>{var _e;h&&j?reactDomExports.flushSync(g):g(),(_e=d.onChange)==null||_e.call(d,$,j)}},[_]=reactExports.useState(()=>new Virtualizer(b));return _.setOptions(b),useIsomorphicLayoutEffect(()=>_._didMount(),[]),useIsomorphicLayoutEffect(()=>_._willUpdate()),_}function useVirtualizer(h){return useVirtualizerBase({observeElementRect,observeElementOffset,scrollToFn:elementScroll,...h})}function AudioPreview({file:h,label:d,className:g}){var Et;const b=reactExports.useRef(null),[_,$]=reactExports.useState(!1),[j,_e]=reactExports.useState(0),[et,rt]=reactExports.useState(0),[nt,st]=reactExports.useState(null),[at,it]=reactExports.useState(!1),dt=reactExports.useCallback(()=>{if(!nt){const Tt=URL.createObjectURL(h);return st(Tt),it(!0),Tt}return nt},[h,nt]),ot=reactExports.useCallback(()=>{dt(),requestAnimationFrame(()=>{const Tt=b.current;Tt&&(_?Tt.pause():Tt.play())})},[_,dt]),ct=reactExports.useCallback(()=>{const Tt=b.current;!Tt||!Tt.duration||_e(Tt.currentTime/Tt.duration*100)},[]),lt=reactExports.useCallback(()=>{const Tt=b.current;Tt&&rt(Tt.duration)},[]),ut=reactExports.useCallback(Tt=>{const St=b.current;if(!St||!St.duration)return;const ht=Tt.currentTarget.getBoundingClientRect(),kt=(Tt.clientX-ht.left)/ht.width;St.currentTime=kt*St.duration},[]),ft=Tt=>{const St=Math.floor(Tt/60),ht=Math.floor(Tt%60);return`${St}:${ht.toString().padStart(2,"0")}`};return jsxRuntimeExports.jsxs("div",{className:cn("flex items-center gap-2.5",g),children:[at&&nt&&jsxRuntimeExports.jsx("audio",{ref:b,src:nt,preload:"metadata",onTimeUpdate:ct,onLoadedMetadata:lt,onPlay:()=>$(!0),onPause:()=>$(!1),onEnded:()=>{$(!1),_e(0)}}),jsxRuntimeExports.jsx("button",{onClick:ot,className:cn("h-8 w-8 rounded-full flex items-center justify-center shrink-0","glass-button",_&&"bg-primary/20 border-primary/30"),children:_?jsxRuntimeExports.jsx(Pause,{className:"w-3.5 h-3.5 text-foreground"}):jsxRuntimeExports.jsx(Play,{className:"w-3.5 h-3.5 text-foreground ml-0.5"})}),jsxRuntimeExports.jsx("div",{className:"flex-1 h-1.5 glass-inset rounded-full cursor-pointer relative overflow-hidden",onClick:ut,children:jsxRuntimeExports.jsx("div",{className:"h-full bg-primary/80 rounded-full transition-[width] duration-100",style:{width:`${j}%`}})}),et>0&&jsxRuntimeExports.jsx("span",{className:"text-[11px] font-mono text-muted-foreground/60 tabular-nums shrink-0",children:ft(((Et=b.current)==null?void 0:Et.currentTime)??0)})]})}function DiffRow({label:h,oldVal:d,newVal:g,isAccepted:b}){const _=g!=null&&g!==d;return jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-[11px] font-mono text-muted-foreground/30 uppercase w-11 shrink-0 pt-px",children:h}),jsxRuntimeExports.jsx("div",{className:"flex-1 min-w-0",children:_?jsxRuntimeExports.jsxs("div",{className:"space-y-0.5",children:[jsxRuntimeExports.jsx("p",{className:cn("text-sm break-words",b?"line-through text-muted-foreground/30":"text-muted-foreground/60"),children:d||""}),jsxRuntimeExports.jsx("p",{className:cn("text-sm font-medium break-words",b?"text-success":"text-primary"),children:g})]}):jsxRuntimeExports.jsx("p",{className:"text-sm text-foreground/80 break-words",children:d||""})})]})}function MetadataDiff({current:h,suggested:d,isAccepted:g}){return jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(DiffRow,{label:"Title",oldVal:h.title,newVal:d==null?void 0:d.title,isAccepted:g}),jsxRuntimeExports.jsx(DiffRow,{label:"Artist",oldVal:h.artist,newVal:d==null?void 0:d.artist,isAccepted:g}),jsxRuntimeExports.jsx(DiffRow,{label:"Album",oldVal:h.album,newVal:d==null?void 0:d.album,isAccepted:g}),((d==null?void 0:d.year)||h.year)&&jsxRuntimeExports.jsx(DiffRow,{label:"Year",oldVal:h.year?String(h.year):"",newVal:d!=null&&d.year?String(d.year):void 0,isAccepted:g}),((d==null?void 0:d.genre)||h.genre)&&jsxRuntimeExports.jsx(DiffRow,{label:"Genre",oldVal:h.genre||"",newVal:d==null?void 0:d.genre,isAccepted:g})]})}const SOURCE_CONFIG={itunes:{label:"iTunes",className:"glass-subtle text-foreground/80"},youtube:{label:"YouTube",className:"bg-red-500/20 text-red-400 border border-red-500/20"},deezer:{label:"Deezer",className:"bg-purple-500/20 text-purple-400 border border-purple-500/20"},musicbrainz:{label:"MB",className:"bg-amber-500/20 text-amber-400 border border-amber-500/20"},piped:{label:"Piped",className:"bg-sky-500/20 text-sky-400 border border-sky-500/20"}};function SourceBadge({source:h,variant:d="inline"}){const g=SOURCE_CONFIG[h];return g?d==="overlay"?jsxRuntimeExports.jsx("span",{className:cn("absolute top-0.5 right-0.5 text-[8px] font-mono px-1 rounded-md backdrop-blur-sm",g.className),children:g.label}):jsxRuntimeExports.jsx("span",{className:cn("text-[9px] font-mono px-1.5 py-0.5 rounded-md",g.className),children:g.label}):null}function ResultPicker({results:h,currentSelection:d,onSelect:g}){const[b,_]=reactExports.useState(!1);return h.length<=1?null:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("button",{onClick:()=>_(!b),className:"flex items-center gap-1 text-xs text-muted-foreground/60 active:text-foreground transition-colors py-1",children:[b?jsxRuntimeExports.jsx(ChevronUp,{className:"w-3.5 h-3.5"}):jsxRuntimeExports.jsx(ChevronDown,{className:"w-3.5 h-3.5"}),h.length," results  pick one"]}),b&&jsxRuntimeExports.jsx("div",{className:"mt-2 flex gap-2 overflow-x-auto pb-2 -mx-1 px-1",children:h.map(($,j)=>{const _e=(d==null?void 0:d.title)===$.title&&(d==null?void 0:d.artist)===$.artist&&(d==null?void 0:d.artworkUrl)===$.artworkUrl;return jsxRuntimeExports.jsxs("button",{onClick:()=>g($),className:cn("flex-shrink-0 w-24 rounded-xl p-1.5 text-left transition-all duration-200",_e?"glass ring-1 ring-success/30":"glass-subtle active:scale-[0.97]"),children:[jsxRuntimeExports.jsxs("div",{className:"w-full aspect-square rounded-lg glass-inset overflow-hidden mb-1 relative",children:[$.artworkUrl?jsxRuntimeExports.jsx("img",{src:$.artworkUrl,alt:$.title,className:"w-full h-full object-cover",loading:"lazy"}):jsxRuntimeExports.jsx("div",{className:"w-full h-full flex items-center justify-center",children:jsxRuntimeExports.jsx(Music,{className:"w-4 h-4 text-muted-foreground/40"})}),$.source&&jsxRuntimeExports.jsx(SourceBadge,{source:$.source,variant:"overlay"})]}),jsxRuntimeExports.jsx("p",{className:"text-[10px] font-medium text-foreground truncate",children:$.title}),jsxRuntimeExports.jsx("p",{className:"text-[9px] text-muted-foreground/60 truncate",children:$.artist}),_e&&jsxRuntimeExports.jsx("span",{className:"text-[8px] text-success mt-0.5 block",children:" selected"})]},`${$.title}-${$.artist}-${j}`)})})]})}function MetadataEditor({currentMetadata:h,onSave:d}){const[g,b]=reactExports.useState(!1),[_,$]=reactExports.useState(h.title),[j,_e]=reactExports.useState(h.artist),[et,rt]=reactExports.useState(h.album),[nt,st]=reactExports.useState(h.year?String(h.year):""),[at,it]=reactExports.useState(h.genre||""),[dt,ot]=reactExports.useState(h.artworkUrl||""),[ct,lt]=reactExports.useState(h.artworkUrl||""),ut=reactExports.useRef(null),ft=St=>{var Rt;const ht=(Rt=St.target.files)==null?void 0:Rt[0];if(!ht||!ht.type.startsWith("image/"))return;const kt=new FileReader;kt.onload=Mt=>{var Ct;const Zt=(Ct=Mt.target)==null?void 0:Ct.result;ot(Zt),lt(Zt)},kt.readAsDataURL(ht)},Et=()=>{const St={...h,title:_.trim()||h.title,artist:j.trim()||h.artist,album:et.trim()||h.album,year:nt&&parseInt(nt,10)||void 0,genre:at.trim()||void 0,artworkUrl:dt||h.artworkUrl,source:void 0};d(St),b(!1)},Tt=()=>{$(h.title),_e(h.artist),rt(h.album),st(h.year?String(h.year):""),it(h.genre||""),ot(h.artworkUrl||""),lt(h.artworkUrl||""),b(!1)};return g?jsxRuntimeExports.jsxs("div",{className:"mt-2 space-y-3 p-3.5 rounded-xl glass-subtle",children:[jsxRuntimeExports.jsx("p",{className:"text-[11px] font-mono text-muted-foreground/50 uppercase tracking-wider",children:"Manual Edit"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"shrink-0",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{var St;return(St=ut.current)==null?void 0:St.click()},className:cn("w-[72px] h-[72px] rounded-xl","flex items-center justify-center overflow-hidden","glass-inset active:opacity-80 transition-opacity"),children:ct?jsxRuntimeExports.jsx("img",{src:ct,alt:"Art",className:"w-full h-full object-cover"}):jsxRuntimeExports.jsx(ImagePlus,{className:"w-5 h-5 text-muted-foreground/40"})}),jsxRuntimeExports.jsx("input",{ref:ut,type:"file",accept:"image/*",onChange:ft,className:"hidden"}),ct&&jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{ot(""),lt("")},className:"text-[9px] text-destructive/70 w-full text-center mt-1",children:"Remove"})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 space-y-2 min-w-0",children:[jsxRuntimeExports.jsx(Input,{value:_,onChange:St=>$(St.target.value),className:"h-8 text-sm glass-inset border-0 rounded-lg focus-visible:ring-primary/30",placeholder:"Title"}),jsxRuntimeExports.jsx(Input,{value:j,onChange:St=>_e(St.target.value),className:"h-8 text-sm glass-inset border-0 rounded-lg focus-visible:ring-primary/30",placeholder:"Artist"}),jsxRuntimeExports.jsx(Input,{value:et,onChange:St=>rt(St.target.value),className:"h-8 text-sm glass-inset border-0 rounded-lg focus-visible:ring-primary/30",placeholder:"Album"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx(Input,{value:nt,onChange:St=>st(St.target.value.replace(/\D/g,"").slice(0,4)),className:"h-8 text-sm glass-inset border-0 rounded-lg flex-1 focus-visible:ring-primary/30",placeholder:"Year"}),jsxRuntimeExports.jsx(Input,{value:at,onChange:St=>it(St.target.value),className:"h-8 text-sm glass-inset border-0 rounded-lg flex-1 focus-visible:ring-primary/30",placeholder:"Genre"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs("button",{onClick:Et,className:"flex-1 ios-pill flex items-center justify-center gap-1.5 h-9 bg-primary text-primary-foreground text-sm font-medium",children:[jsxRuntimeExports.jsx(Check,{className:"w-3.5 h-3.5"}),"Apply"]}),jsxRuntimeExports.jsx("button",{onClick:Tt,className:"glass-button ios-pill flex items-center justify-center gap-1.5 h-9 px-4 text-foreground text-sm",children:jsxRuntimeExports.jsx(X,{className:"w-3.5 h-3.5"})})]})]}):jsxRuntimeExports.jsxs("button",{onClick:()=>b(!0),className:"flex items-center gap-1.5 text-xs text-muted-foreground/60 active:text-foreground transition-colors py-1",children:[jsxRuntimeExports.jsx(Pencil,{className:"w-3 h-3"}),"Edit manually"]})}const statusLabels={pending:"Queued",searching:"Searching",found:"Match","not-found":"No match",fixed:"Done",error:"Error"},statusColors={searching:"text-primary",found:"text-success","not-found":"text-muted-foreground",fixed:"text-success",error:"text-destructive",pending:"text-muted-foreground"};function TrackCard({track:h,index:d,isExpanded:g,isFocused:b,onToggle:_,onAccept:$,onRevert:j,onRemove:_e,onDownload:et,onSelectResult:rt}){const nt=!!h.selectedMetadata,st=h.suggestedMetadata,at=h.selectedMetadata||h.suggestedMetadata;return jsxRuntimeExports.jsxs("div",{className:cn("glass rounded-2xl transition-all duration-300","animate-slide-up",nt&&"ring-1 ring-success/20",b&&"ring-2 ring-primary/40",h.status==="fixed"&&"opacity-50"),style:{animationDelay:`${Math.min(d*50,300)}ms`},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 p-3.5",children:[jsxRuntimeExports.jsxs("button",{onClick:it=>{it.stopPropagation(),st&&!nt&&h.status==="found"?$(h.id):_()},className:cn("w-11 h-11 rounded-xl glass-inset overflow-hidden flex items-center justify-center shrink-0 transition-all duration-200 relative",st&&!nt&&h.status==="found"&&"ring-2 ring-primary/40 active:scale-95"),title:st&&!nt&&h.status==="found"?"Tap to accept":void 0,children:[at!=null&&at.artworkUrl||h.currentMetadata.artworkUrl?jsxRuntimeExports.jsx("img",{src:(at==null?void 0:at.artworkUrl)||h.currentMetadata.artworkUrl,alt:"Art",className:"w-full h-full object-cover",loading:"lazy"}):jsxRuntimeExports.jsx(Music,{className:"w-4 h-4 text-muted-foreground/40"}),st&&!nt&&h.status==="found"&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-primary/20 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity",children:jsxRuntimeExports.jsx(Check,{className:"w-4 h-4 text-primary-foreground"})})]}),jsxRuntimeExports.jsxs("button",{onClick:_,className:"flex-1 min-w-0 text-left",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:(at==null?void 0:at.title)||h.currentMetadata.title}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground/60 truncate",children:(at==null?void 0:at.artist)||h.currentMetadata.artist})]}),jsxRuntimeExports.jsxs("button",{onClick:_,className:"flex items-center gap-1.5 shrink-0",children:[nt&&jsxRuntimeExports.jsxs("span",{className:"text-[10px] font-mono px-2 py-0.5 rounded-full glass-subtle text-success flex items-center gap-0.5",children:[jsxRuntimeExports.jsx(Check,{className:"w-2.5 h-2.5"}),"Saved"]}),(at==null?void 0:at.source)&&jsxRuntimeExports.jsx(SourceBadge,{source:at.source}),!nt&&jsxRuntimeExports.jsxs("span",{className:cn("text-[10px] font-mono px-2 py-0.5 rounded-full glass-subtle",statusColors[h.status]),children:[h.status==="searching"&&jsxRuntimeExports.jsx(LoaderCircle,{className:"w-3 h-3 inline mr-0.5 animate-spin"}),statusLabels[h.status]]}),jsxRuntimeExports.jsx(ChevronDown,{className:cn("w-3.5 h-3.5 text-muted-foreground/30 transition-transform duration-200",g&&"rotate-180")})]})]}),g&&jsxRuntimeExports.jsxs("div",{className:"px-3.5 pb-3.5 space-y-3 animate-fade-in",children:[jsxRuntimeExports.jsx("div",{className:"h-px bg-border/30"}),at?jsxRuntimeExports.jsx(MetadataDiff,{current:h.currentMetadata,suggested:at,isAccepted:nt}):h.status==="not-found"?jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-foreground",children:h.currentMetadata.title}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground",children:h.currentMetadata.artist}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground/50 mt-1",children:"No results found"})]}):h.status!=="searching"&&h.status!=="pending"?jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-foreground",children:h.currentMetadata.title}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground",children:h.currentMetadata.artist})]}):null,h.allResults.length>1&&h.status!=="fixed"&&jsxRuntimeExports.jsx(ResultPicker,{results:h.allResults,currentSelection:at,onSelect:it=>rt(h.id,it)}),h.status!=="fixed"&&h.status!=="searching"&&h.status!=="pending"&&jsxRuntimeExports.jsxs("div",{children:[nt&&jsxRuntimeExports.jsxs("p",{className:"text-[10px] text-muted-foreground/40 mb-1 flex items-center gap-1",children:[jsxRuntimeExports.jsx(Pencil,{className:"w-2.5 h-2.5"}),"Saved  still editable"]}),jsxRuntimeExports.jsx(MetadataEditor,{currentMetadata:h.selectedMetadata||h.suggestedMetadata||h.currentMetadata,onSave:it=>rt(h.id,it)})]}),h.file&&jsxRuntimeExports.jsx(AudioPreview,{file:h.file}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[st&&!nt&&h.status==="found"&&jsxRuntimeExports.jsxs("button",{onClick:it=>{it.stopPropagation(),$(h.id)},className:"flex-1 ios-pill flex items-center justify-center gap-1.5 h-10 bg-primary text-primary-foreground text-sm font-medium",children:[jsxRuntimeExports.jsx(Check,{className:"w-4 h-4"}),"Accept"]}),nt&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("button",{onClick:it=>{it.stopPropagation(),et(h.id)},className:"flex-1 ios-pill flex items-center justify-center gap-1.5 h-10 bg-success text-success-foreground text-sm font-medium",children:[jsxRuntimeExports.jsx(Download,{className:"w-4 h-4"}),"Download"]}),jsxRuntimeExports.jsx("button",{onClick:it=>{it.stopPropagation(),j(h.id)},className:"glass-button ios-pill flex items-center justify-center h-10 px-3 text-foreground text-sm",children:jsxRuntimeExports.jsx(RotateCcw,{className:"w-3.5 h-3.5"})})]}),jsxRuntimeExports.jsx("button",{onClick:it=>{it.stopPropagation(),_e(h.id)},className:"glass-button ios-pill flex items-center justify-center h-10 px-3 text-muted-foreground/60 active:text-destructive",children:jsxRuntimeExports.jsx(X,{className:"w-3.5 h-3.5"})})]})]})]})}const FILTERS=[{key:"all",label:"All"},{key:"matched",label:"Matched"},{key:"accepted",label:"Accepted"},{key:"no-match",label:"No Match"},{key:"done",label:"Done"}];function filterTracks(h,d){switch(d){case"matched":return h.filter(g=>g.status==="found");case"accepted":return h.filter(g=>!!g.selectedMetadata);case"no-match":return h.filter(g=>g.status==="not-found"||g.status==="error");case"done":return h.filter(g=>g.status==="fixed");default:return h}}function getFilterCount(h,d){return filterTracks(h,d).length}const MemoizedTrackCard=reactExports.memo(TrackCard),TrackList=reactExports.forwardRef(function({tracks:d,onAccept:g,onRevert:b,onRemove:_,onDownload:$,onSelectResult:j},_e){const et=reactExports.useRef(null);reactExports.useImperativeHandle(_e,()=>et.current);const[rt,nt]=reactExports.useState("all"),[st,at]=reactExports.useState(new Set),[it,dt]=reactExports.useState(-1),ot=filterTracks(d,rt),ct=reactExports.useCallback(ft=>{at(Et=>{const Tt=new Set(Et);return Tt.has(ft)?Tt.delete(ft):Tt.add(ft),Tt})},[]),lt=useVirtualizer({count:ot.length,getScrollElement:()=>et.current,estimateSize:ft=>{var Et;return st.has((Et=ot[ft])==null?void 0:Et.id)?400:72},overscan:5});if(reactExports.useEffect(()=>{const ft=Et=>{if(Et.target instanceof HTMLInputElement||Et.target instanceof HTMLTextAreaElement)return;const Tt=it>=0&&it<ot.length?ot[it]:null;switch(Et.key){case"ArrowDown":case"j":Et.preventDefault(),dt(St=>Math.min(St+1,ot.length-1));break;case"ArrowUp":case"k":Et.preventDefault(),dt(St=>Math.max(St-1,0));break;case"Enter":case" ":Tt&&(Et.preventDefault(),ct(Tt.id));break;case"a":Tt&&Tt.suggestedMetadata&&!Tt.selectedMetadata&&Tt.status==="found"&&(Et.preventDefault(),g(Tt.id));break;case"d":Tt&&Tt.selectedMetadata&&(Et.preventDefault(),$(Tt.id));break;case"r":Tt&&Tt.selectedMetadata&&(Et.preventDefault(),b(Tt.id));break;case"Escape":dt(-1);break}};return window.addEventListener("keydown",ft),()=>window.removeEventListener("keydown",ft)},[ot,it,ct,g,$,b]),reactExports.useEffect(()=>{it>=0&&lt.scrollToIndex(it,{align:"auto"})},[it,lt]),d.length===0)return null;const ut={total:d.length,searching:d.filter(ft=>ft.status==="searching"||ft.status==="pending").length};return jsxRuntimeExports.jsxs("section",{children:[jsxRuntimeExports.jsx("div",{className:"glass rounded-xl p-1 flex gap-0.5 mb-4 overflow-x-auto",children:FILTERS.map(ft=>{const Et=getFilterCount(d,ft.key),Tt=rt===ft.key;return jsxRuntimeExports.jsxs("button",{onClick:()=>{nt(ft.key),dt(-1)},className:cn("flex-1 min-w-0 px-3 py-1.5 rounded-lg text-xs font-medium transition-all duration-200 whitespace-nowrap",Tt?"glass bg-primary/10 text-foreground shadow-sm":"text-muted-foreground/60 active:text-foreground"),children:[ft.label,Et>0&&jsxRuntimeExports.jsx("span",{className:cn("ml-1 text-[10px] font-mono",Tt?"text-primary":"text-muted-foreground/40"),children:Et})]},ft.key)})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-3 text-[11px] text-muted-foreground/40",children:[jsxRuntimeExports.jsxs("span",{className:"font-mono",children:[ot.length," shown"]}),ut.searching>0&&jsxRuntimeExports.jsxs("span",{className:"text-primary/60",children:[ut.searching," scanning"]}),jsxRuntimeExports.jsx("span",{className:"ml-auto font-mono text-[10px]",children:" navigate  Enter expand  A accept  D download"})]}),jsxRuntimeExports.jsx("div",{ref:et,className:"overflow-auto",style:{maxHeight:"calc(100vh - 280px)"},children:jsxRuntimeExports.jsx("div",{style:{height:`${lt.getTotalSize()}px`,width:"100%",position:"relative"},children:lt.getVirtualItems().map(ft=>{const Et=ot[ft.index];return jsxRuntimeExports.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${ft.start}px)`},ref:lt.measureElement,"data-index":ft.index,children:jsxRuntimeExports.jsx("div",{className:"pb-2",children:jsxRuntimeExports.jsx(MemoizedTrackCard,{track:Et,index:ft.index,isExpanded:st.has(Et.id),isFocused:it===ft.index,onToggle:()=>ct(Et.id),onAccept:g,onRevert:b,onRemove:_,onDownload:$,onSelectResult:j})})},Et.id)})})}),ot.length===0&&jsxRuntimeExports.jsx("div",{className:"text-center py-12 text-sm text-muted-foreground/40",children:"No tracks match this filter"})]})});var lib$3={},browser$3={exports:{}},ms,hasRequiredMs;function requireMs(){if(hasRequiredMs)return ms;hasRequiredMs=1;var h=1e3,d=h*60,g=d*60,b=g*24,_=b*7,$=b*365.25;ms=function(nt,st){st=st||{};var at=typeof nt;if(at==="string"&&nt.length>0)return j(nt);if(at==="number"&&isFinite(nt))return st.long?et(nt):_e(nt);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(nt))};function j(nt){if(nt=String(nt),!(nt.length>100)){var st=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(nt);if(st){var at=parseFloat(st[1]),it=(st[2]||"ms").toLowerCase();switch(it){case"years":case"year":case"yrs":case"yr":case"y":return at*$;case"weeks":case"week":case"w":return at*_;case"days":case"day":case"d":return at*b;case"hours":case"hour":case"hrs":case"hr":case"h":return at*g;case"minutes":case"minute":case"mins":case"min":case"m":return at*d;case"seconds":case"second":case"secs":case"sec":case"s":return at*h;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return at;default:return}}}}function _e(nt){var st=Math.abs(nt);return st>=b?Math.round(nt/b)+"d":st>=g?Math.round(nt/g)+"h":st>=d?Math.round(nt/d)+"m":st>=h?Math.round(nt/h)+"s":nt+"ms"}function et(nt){var st=Math.abs(nt);return st>=b?rt(nt,st,b,"day"):st>=g?rt(nt,st,g,"hour"):st>=d?rt(nt,st,d,"minute"):st>=h?rt(nt,st,h,"second"):nt+" ms"}function rt(nt,st,at,it){var dt=st>=at*1.5;return Math.round(nt/at)+" "+it+(dt?"s":"")}return ms}function setup(h){g.debug=g,g.default=g,g.coerce=et,g.disable=j,g.enable=_,g.enabled=_e,g.humanize=requireMs(),g.destroy=rt,Object.keys(h).forEach(nt=>{g[nt]=h[nt]}),g.names=[],g.skips=[],g.formatters={};function d(nt){let st=0;for(let at=0;at<nt.length;at++)st=(st<<5)-st+nt.charCodeAt(at),st|=0;return g.colors[Math.abs(st)%g.colors.length]}g.selectColor=d;function g(nt){let st,at=null,it,dt;function ot(...ct){if(!ot.enabled)return;const lt=ot,ut=Number(new Date),ft=ut-(st||ut);lt.diff=ft,lt.prev=st,lt.curr=ut,st=ut,ct[0]=g.coerce(ct[0]),typeof ct[0]!="string"&&ct.unshift("%O");let Et=0;ct[0]=ct[0].replace(/%([a-zA-Z%])/g,(St,ht)=>{if(St==="%%")return"%";Et++;const kt=g.formatters[ht];if(typeof kt=="function"){const Rt=ct[Et];St=kt.call(lt,Rt),ct.splice(Et,1),Et--}return St}),g.formatArgs.call(lt,ct),(lt.log||g.log).apply(lt,ct)}return ot.namespace=nt,ot.useColors=g.useColors(),ot.color=g.selectColor(nt),ot.extend=b,ot.destroy=g.destroy,Object.defineProperty(ot,"enabled",{enumerable:!0,configurable:!1,get:()=>at!==null?at:(it!==g.namespaces&&(it=g.namespaces,dt=g.enabled(nt)),dt),set:ct=>{at=ct}}),typeof g.init=="function"&&g.init(ot),ot}function b(nt,st){const at=g(this.namespace+(typeof st>"u"?":":st)+nt);return at.log=this.log,at}function _(nt){g.save(nt),g.namespaces=nt,g.names=[],g.skips=[];const st=(typeof nt=="string"?nt:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const at of st)at[0]==="-"?g.skips.push(at.slice(1)):g.names.push(at)}function $(nt,st){let at=0,it=0,dt=-1,ot=0;for(;at<nt.length;)if(it<st.length&&(st[it]===nt[at]||st[it]==="*"))st[it]==="*"?(dt=it,ot=at,it++):(at++,it++);else if(dt!==-1)it=dt+1,ot++,at=ot;else return!1;for(;it<st.length&&st[it]==="*";)it++;return it===st.length}function j(){const nt=[...g.names,...g.skips.map(st=>"-"+st)].join(",");return g.enable(""),nt}function _e(nt){for(const st of g.skips)if($(nt,st))return!1;for(const st of g.names)if($(nt,st))return!0;return!1}function et(nt){return nt instanceof Error?nt.stack||nt.message:nt}function rt(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return g.enable(g.load()),g}var common$3=setup;(function(h,d){var g={};d.formatArgs=_,d.save=$,d.load=j,d.useColors=b,d.storage=_e(),d.destroy=(()=>{let rt=!1;return()=>{rt||(rt=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),d.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function b(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let rt;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(rt=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(rt[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function _(rt){if(rt[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+rt[0]+(this.useColors?"%c ":" ")+"+"+h.exports.humanize(this.diff),!this.useColors)return;const nt="color: "+this.color;rt.splice(1,0,nt,"color: inherit");let st=0,at=0;rt[0].replace(/%[a-zA-Z%]/g,it=>{it!=="%%"&&(st++,it==="%c"&&(at=st))}),rt.splice(at,0,nt)}d.log=console.debug||console.log||(()=>{});function $(rt){try{rt?d.storage.setItem("debug",rt):d.storage.removeItem("debug")}catch{}}function j(){let rt;try{rt=d.storage.getItem("debug")||d.storage.getItem("DEBUG")}catch{}return!rt&&typeof process<"u"&&"env"in process&&(rt=g.DEBUG),rt}function _e(){try{return localStorage}catch{}}h.exports=common$3(d);const{formatters:et}=h.exports;et.j=function(rt){try{return JSON.stringify(rt)}catch(nt){return"[UnexpectedJSONParseError]: "+nt.message}}})(browser$3,browser$3.exports);var browserExports$2=browser$3.exports,core$2={},core$1={},ReadStreamTokenizer$1={},AbstractTokenizer$1={},lib$2={},EndOfFileStream={};(function(h){Object.defineProperty(h,"__esModule",{value:!0}),h.EndOfStreamError=h.defaultMessages=void 0,h.defaultMessages="End-Of-Stream";class d extends Error{constructor(){super(h.defaultMessages)}}h.EndOfStreamError=d})(EndOfFileStream);var StreamReader$1={},Deferred$1={};Object.defineProperty(Deferred$1,"__esModule",{value:!0});Deferred$1.Deferred=void 0;class Deferred{constructor(){this.resolve=()=>null,this.reject=()=>null,this.promise=new Promise((d,g)=>{this.reject=g,this.resolve=d})}}Deferred$1.Deferred=Deferred;(function(h){Object.defineProperty(h,"__esModule",{value:!0}),h.StreamReader=h.EndOfStreamError=void 0;const d=EndOfFileStream,g=Deferred$1;var b=EndOfFileStream;Object.defineProperty(h,"EndOfStreamError",{enumerable:!0,get:function(){return b.EndOfStreamError}});const _=1*1024*1024;class ${constructor(_e){if(this.s=_e,this.deferred=null,this.endOfStream=!1,this.peekQueue=[],!_e.read||!_e.once)throw new Error("Expected an instance of stream.Readable");this.s.once("end",()=>this.reject(new d.EndOfStreamError)),this.s.once("error",et=>this.reject(et)),this.s.once("close",()=>this.reject(new Error("Stream closed")))}async peek(_e,et,rt){const nt=await this.read(_e,et,rt);return this.peekQueue.push(_e.subarray(et,et+nt)),nt}async read(_e,et,rt){if(rt===0)return 0;if(this.peekQueue.length===0&&this.endOfStream)throw new d.EndOfStreamError;let nt=rt,st=0;for(;this.peekQueue.length>0&&nt>0;){const at=this.peekQueue.pop();if(!at)throw new Error("peekData should be defined");const it=Math.min(at.length,nt);_e.set(at.subarray(0,it),et+st),st+=it,nt-=it,it<at.length&&this.peekQueue.push(at.subarray(it))}for(;nt>0&&!this.endOfStream;){const at=Math.min(nt,_),it=await this.readFromStream(_e,et+st,at);if(st+=it,it<at)break;nt-=it}return st}async readFromStream(_e,et,rt){const nt=this.s.read(rt);if(nt)return _e.set(nt,et),nt.length;{const st={buffer:_e,offset:et,length:rt,deferred:new g.Deferred};return this.deferred=st.deferred,this.s.once("readable",()=>{this.readDeferred(st)}),st.deferred.promise}}readDeferred(_e){const et=this.s.read(_e.length);et?(_e.buffer.set(et,_e.offset),_e.deferred.resolve(et.length),this.deferred=null):this.s.once("readable",()=>{this.readDeferred(_e)})}reject(_e){this.endOfStream=!0,this.deferred&&(this.deferred.reject(_e),this.deferred=null)}}h.StreamReader=$})(StreamReader$1);(function(h){Object.defineProperty(h,"__esModule",{value:!0}),h.StreamReader=h.EndOfStreamError=void 0;var d=EndOfFileStream;Object.defineProperty(h,"EndOfStreamError",{enumerable:!0,get:function(){return d.EndOfStreamError}});var g=StreamReader$1;Object.defineProperty(h,"StreamReader",{enumerable:!0,get:function(){return g.StreamReader}})})(lib$2);Object.defineProperty(AbstractTokenizer$1,"__esModule",{value:!0});AbstractTokenizer$1.AbstractTokenizer=void 0;const peek_readable_1$2=lib$2;class AbstractTokenizer{constructor(d){this.position=0,this.numBuffer=new Uint8Array(8),this.fileInfo=d||{}}async readToken(d,g=this.position){const b=Buffer.alloc(d.len);if(await this.readBuffer(b,{position:g})<d.len)throw new peek_readable_1$2.EndOfStreamError;return d.get(b,0)}async peekToken(d,g=this.position){const b=Buffer.alloc(d.len);if(await this.peekBuffer(b,{position:g})<d.len)throw new peek_readable_1$2.EndOfStreamError;return d.get(b,0)}async readNumber(d){if(await this.readBuffer(this.numBuffer,{length:d.len})<d.len)throw new peek_readable_1$2.EndOfStreamError;return d.get(this.numBuffer,0)}async peekNumber(d){if(await this.peekBuffer(this.numBuffer,{length:d.len})<d.len)throw new peek_readable_1$2.EndOfStreamError;return d.get(this.numBuffer,0)}async ignore(d){if(this.fileInfo.size!==void 0){const g=this.fileInfo.size-this.position;if(d>g)return this.position+=g,g}return this.position+=d,d}async close(){}normalizeOptions(d,g){if(g&&g.position!==void 0&&g.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");return g?{mayBeLess:g.mayBeLess===!0,offset:g.offset?g.offset:0,length:g.length?g.length:d.length-(g.offset?g.offset:0),position:g.position?g.position:this.position}:{mayBeLess:!1,offset:0,length:d.length,position:this.position}}}AbstractTokenizer$1.AbstractTokenizer=AbstractTokenizer;Object.defineProperty(ReadStreamTokenizer$1,"__esModule",{value:!0});ReadStreamTokenizer$1.ReadStreamTokenizer=void 0;const AbstractTokenizer_1$1=AbstractTokenizer$1,peek_readable_1$1=lib$2,maxBufferSize=256e3;class ReadStreamTokenizer extends AbstractTokenizer_1$1.AbstractTokenizer{constructor(d,g){super(g),this.streamReader=new peek_readable_1$1.StreamReader(d)}async getFileInfo(){return this.fileInfo}async readBuffer(d,g){const b=this.normalizeOptions(d,g),_=b.position-this.position;if(_>0)return await this.ignore(_),this.readBuffer(d,g);if(_<0)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");if(b.length===0)return 0;const $=await this.streamReader.read(d,b.offset,b.length);if(this.position+=$,(!g||!g.mayBeLess)&&$<b.length)throw new peek_readable_1$1.EndOfStreamError;return $}async peekBuffer(d,g){const b=this.normalizeOptions(d,g);let _=0;if(b.position){const $=b.position-this.position;if($>0){const j=new Uint8Array(b.length+$);return _=await this.peekBuffer(j,{mayBeLess:b.mayBeLess}),d.set(j.subarray($),b.offset),_-$}else if($<0)throw new Error("Cannot peek from a negative offset in a stream")}if(b.length>0){try{_=await this.streamReader.peek(d,b.offset,b.length)}catch($){if(g&&g.mayBeLess&&$ instanceof peek_readable_1$1.EndOfStreamError)return 0;throw $}if(!b.mayBeLess&&_<b.length)throw new peek_readable_1$1.EndOfStreamError}return _}async ignore(d){const g=Math.min(maxBufferSize,d),b=new Uint8Array(g);let _=0;for(;_<d;){const $=d-_,j=await this.readBuffer(b,{length:Math.min(g,$)});if(j<0)return j;_+=j}return _}}ReadStreamTokenizer$1.ReadStreamTokenizer=ReadStreamTokenizer;var BufferTokenizer$1={};Object.defineProperty(BufferTokenizer$1,"__esModule",{value:!0});BufferTokenizer$1.BufferTokenizer=void 0;const peek_readable_1=lib$2,AbstractTokenizer_1=AbstractTokenizer$1;class BufferTokenizer extends AbstractTokenizer_1.AbstractTokenizer{constructor(d,g){super(g),this.uint8Array=d,this.fileInfo.size=this.fileInfo.size?this.fileInfo.size:d.length}async readBuffer(d,g){if(g&&g.position){if(g.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");this.position=g.position}const b=await this.peekBuffer(d,g);return this.position+=b,b}async peekBuffer(d,g){const b=this.normalizeOptions(d,g),_=Math.min(this.uint8Array.length-b.position,b.length);if(!b.mayBeLess&&_<b.length)throw new peek_readable_1.EndOfStreamError;return d.set(this.uint8Array.subarray(b.position,b.position+_),b.offset),_}async close(){}}BufferTokenizer$1.BufferTokenizer=BufferTokenizer;(function(h){Object.defineProperty(h,"__esModule",{value:!0}),h.fromBuffer=h.fromStream=h.EndOfStreamError=void 0;const d=ReadStreamTokenizer$1,g=BufferTokenizer$1;var b=lib$2;Object.defineProperty(h,"EndOfStreamError",{enumerable:!0,get:function(){return b.EndOfStreamError}});function _(j,_e){return _e=_e||{},new d.ReadStreamTokenizer(j,_e)}h.fromStream=_;function $(j,_e){return new g.BufferTokenizer(j,_e)}h.fromBuffer=$})(core$1);var ParserFactory$1={},lib$1={},ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754.read=function(h,d,g,b,_){var $,j,_e=_*8-b-1,et=(1<<_e)-1,rt=et>>1,nt=-7,st=g?_-1:0,at=g?-1:1,it=h[d+st];for(st+=at,$=it&(1<<-nt)-1,it>>=-nt,nt+=_e;nt>0;$=$*256+h[d+st],st+=at,nt-=8);for(j=$&(1<<-nt)-1,$>>=-nt,nt+=b;nt>0;j=j*256+h[d+st],st+=at,nt-=8);if($===0)$=1-rt;else{if($===et)return j?NaN:(it?-1:1)*(1/0);j=j+Math.pow(2,b),$=$-rt}return(it?-1:1)*j*Math.pow(2,$-b)};ieee754.write=function(h,d,g,b,_,$){var j,_e,et,rt=$*8-_-1,nt=(1<<rt)-1,st=nt>>1,at=_===23?Math.pow(2,-24)-Math.pow(2,-77):0,it=b?0:$-1,dt=b?1:-1,ot=d<0||d===0&&1/d<0?1:0;for(d=Math.abs(d),isNaN(d)||d===1/0?(_e=isNaN(d)?1:0,j=nt):(j=Math.floor(Math.log(d)/Math.LN2),d*(et=Math.pow(2,-j))<1&&(j--,et*=2),j+st>=1?d+=at/et:d+=at*Math.pow(2,1-st),d*et>=2&&(j++,et/=2),j+st>=nt?(_e=0,j=nt):j+st>=1?(_e=(d*et-1)*Math.pow(2,_),j=j+st):(_e=d*Math.pow(2,st-1)*Math.pow(2,_),j=0));_>=8;h[g+it]=_e&255,it+=dt,_e/=256,_-=8);for(j=j<<_|_e,rt+=_;rt>0;h[g+it]=j&255,it+=dt,j/=256,rt-=8);h[g+it-dt]|=ot*128};(function(h){Object.defineProperty(h,"__esModule",{value:!0}),h.AnsiStringType=h.StringType=h.BufferType=h.Uint8ArrayType=h.IgnoreType=h.Float80_LE=h.Float80_BE=h.Float64_LE=h.Float64_BE=h.Float32_LE=h.Float32_BE=h.Float16_LE=h.Float16_BE=h.INT64_BE=h.UINT64_BE=h.INT64_LE=h.UINT64_LE=h.INT32_LE=h.INT32_BE=h.INT24_BE=h.INT24_LE=h.INT16_LE=h.INT16_BE=h.INT8=h.UINT32_BE=h.UINT32_LE=h.UINT24_BE=h.UINT24_LE=h.UINT16_BE=h.UINT16_LE=h.UINT8=void 0;const d=ieee754;function g(et){return new DataView(et.buffer,et.byteOffset)}h.UINT8={len:1,get(et,rt){return g(et).getUint8(rt)},put(et,rt,nt){return g(et).setUint8(rt,nt),rt+1}},h.UINT16_LE={len:2,get(et,rt){return g(et).getUint16(rt,!0)},put(et,rt,nt){return g(et).setUint16(rt,nt,!0),rt+2}},h.UINT16_BE={len:2,get(et,rt){return g(et).getUint16(rt)},put(et,rt,nt){return g(et).setUint16(rt,nt),rt+2}},h.UINT24_LE={len:3,get(et,rt){const nt=g(et);return nt.getUint8(rt)+(nt.getUint16(rt+1,!0)<<8)},put(et,rt,nt){const st=g(et);return st.setUint8(rt,nt&255),st.setUint16(rt+1,nt>>8,!0),rt+3}},h.UINT24_BE={len:3,get(et,rt){const nt=g(et);return(nt.getUint16(rt)<<8)+nt.getUint8(rt+2)},put(et,rt,nt){const st=g(et);return st.setUint16(rt,nt>>8),st.setUint8(rt+2,nt&255),rt+3}},h.UINT32_LE={len:4,get(et,rt){return g(et).getUint32(rt,!0)},put(et,rt,nt){return g(et).setUint32(rt,nt,!0),rt+4}},h.UINT32_BE={len:4,get(et,rt){return g(et).getUint32(rt)},put(et,rt,nt){return g(et).setUint32(rt,nt),rt+4}},h.INT8={len:1,get(et,rt){return g(et).getInt8(rt)},put(et,rt,nt){return g(et).setInt8(rt,nt),rt+1}},h.INT16_BE={len:2,get(et,rt){return g(et).getInt16(rt)},put(et,rt,nt){return g(et).setInt16(rt,nt),rt+2}},h.INT16_LE={len:2,get(et,rt){return g(et).getInt16(rt,!0)},put(et,rt,nt){return g(et).setInt16(rt,nt,!0),rt+2}},h.INT24_LE={len:3,get(et,rt){const nt=h.UINT24_LE.get(et,rt);return nt>8388607?nt-16777216:nt},put(et,rt,nt){const st=g(et);return st.setUint8(rt,nt&255),st.setUint16(rt+1,nt>>8,!0),rt+3}},h.INT24_BE={len:3,get(et,rt){const nt=h.UINT24_BE.get(et,rt);return nt>8388607?nt-16777216:nt},put(et,rt,nt){const st=g(et);return st.setUint16(rt,nt>>8),st.setUint8(rt+2,nt&255),rt+3}},h.INT32_BE={len:4,get(et,rt){return g(et).getInt32(rt)},put(et,rt,nt){return g(et).setInt32(rt,nt),rt+4}},h.INT32_LE={len:4,get(et,rt){return g(et).getInt32(rt,!0)},put(et,rt,nt){return g(et).setInt32(rt,nt,!0),rt+4}},h.UINT64_LE={len:8,get(et,rt){return g(et).getBigUint64(rt,!0)},put(et,rt,nt){return g(et).setBigUint64(rt,nt,!0),rt+8}},h.INT64_LE={len:8,get(et,rt){return g(et).getBigInt64(rt,!0)},put(et,rt,nt){return g(et).setBigInt64(rt,nt,!0),rt+8}},h.UINT64_BE={len:8,get(et,rt){return g(et).getBigUint64(rt)},put(et,rt,nt){return g(et).setBigUint64(rt,nt),rt+8}},h.INT64_BE={len:8,get(et,rt){return g(et).getBigInt64(rt)},put(et,rt,nt){return g(et).setBigInt64(rt,nt),rt+8}},h.Float16_BE={len:2,get(et,rt){return d.read(et,rt,!1,10,this.len)},put(et,rt,nt){return d.write(et,nt,rt,!1,10,this.len),rt+this.len}},h.Float16_LE={len:2,get(et,rt){return d.read(et,rt,!0,10,this.len)},put(et,rt,nt){return d.write(et,nt,rt,!0,10,this.len),rt+this.len}},h.Float32_BE={len:4,get(et,rt){return g(et).getFloat32(rt)},put(et,rt,nt){return g(et).setFloat32(rt,nt),rt+4}},h.Float32_LE={len:4,get(et,rt){return g(et).getFloat32(rt,!0)},put(et,rt,nt){return g(et).setFloat32(rt,nt,!0),rt+4}},h.Float64_BE={len:8,get(et,rt){return g(et).getFloat64(rt)},put(et,rt,nt){return g(et).setFloat64(rt,nt),rt+8}},h.Float64_LE={len:8,get(et,rt){return g(et).getFloat64(rt,!0)},put(et,rt,nt){return g(et).setFloat64(rt,nt,!0),rt+8}},h.Float80_BE={len:10,get(et,rt){return d.read(et,rt,!1,63,this.len)},put(et,rt,nt){return d.write(et,nt,rt,!1,63,this.len),rt+this.len}},h.Float80_LE={len:10,get(et,rt){return d.read(et,rt,!0,63,this.len)},put(et,rt,nt){return d.write(et,nt,rt,!0,63,this.len),rt+this.len}};class b{constructor(rt){this.len=rt}get(rt,nt){}}h.IgnoreType=b;class _{constructor(rt){this.len=rt}get(rt,nt){return rt.subarray(nt,nt+this.len)}}h.Uint8ArrayType=_;class ${constructor(rt){this.len=rt}get(rt,nt){return Buffer.from(rt.subarray(nt,nt+this.len))}}h.BufferType=$;class j{constructor(rt,nt){this.len=rt,this.encoding=nt}get(rt,nt){return Buffer.from(rt).toString(this.encoding,nt,nt+this.len)}}h.StringType=j;class _e{constructor(rt){this.len=rt}static decode(rt,nt,st){let at="";for(let it=nt;it<st;++it)at+=_e.codePointToString(_e.singleByteDecoder(rt[it]));return at}static inRange(rt,nt,st){return nt<=rt&&rt<=st}static codePointToString(rt){return rt<=65535?String.fromCharCode(rt):(rt-=65536,String.fromCharCode((rt>>10)+55296,(rt&1023)+56320))}static singleByteDecoder(rt){if(_e.inRange(rt,0,127))return rt;const nt=_e.windows1252[rt-128];if(nt===null)throw Error("invaliding encoding");return nt}get(rt,nt=0){return _e.decode(rt,nt,nt+this.len)}}h.AnsiStringType=_e,_e.windows1252=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]})(lib$1);var util$c={};util$c.stringToBytes=h=>[...h].map(d=>d.charCodeAt(0));util$c.tarHeaderChecksumMatches=(h,d=0)=>{const g=parseInt(h.toString("utf8",148,154).replace(/\0.*$/,"").trim(),8);if(isNaN(g))return!1;let b=8*32;for(let _=d;_<d+148;_++)b+=h[_];for(let _=d+156;_<d+512;_++)b+=h[_];return g===b};util$c.uint32SyncSafeToken={get:(h,d)=>h[d+3]&127|h[d+2]<<7|h[d+1]<<14|h[d]<<21,len:4};var supported$1={extensions:["jpg","png","apng","gif","webp","flif","xcf","cr2","cr3","orf","arw","dng","nef","rw2","raf","tif","bmp","icns","jxr","psd","indd","zip","tar","rar","gz","bz2","7z","dmg","mp4","mid","mkv","webm","mov","avi","mpg","mp2","mp3","m4a","oga","ogg","ogv","opus","flac","wav","spx","amr","pdf","epub","exe","swf","rtf","wasm","woff","woff2","eot","ttf","otf","ico","flv","ps","xz","sqlite","nes","crx","xpi","cab","deb","ar","rpm","Z","lz","cfb","mxf","mts","blend","bpg","docx","pptx","xlsx","3gp","3g2","jp2","jpm","jpx","mj2","aif","qcp","odt","ods","odp","xml","mobi","heic","cur","ktx","ape","wv","dcm","ics","glb","pcap","dsf","lnk","alias","voc","ac3","m4v","m4p","m4b","f4v","f4p","f4b","f4a","mie","asf","ogm","ogx","mpc","arrow","shp","aac","mp1","it","s3m","xm","ai","skp","avif","eps","lzh","pgp","asar","stl","chm","3mf","zst","jxl","vcf"],mimeTypes:["image/jpeg","image/png","image/gif","image/webp","image/flif","image/x-xcf","image/x-canon-cr2","image/x-canon-cr3","image/tiff","image/bmp","image/vnd.ms-photo","image/vnd.adobe.photoshop","application/x-indesign","application/epub+zip","application/x-xpinstall","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/zip","application/x-tar","application/x-rar-compressed","application/gzip","application/x-bzip2","application/x-7z-compressed","application/x-apple-diskimage","application/x-apache-arrow","video/mp4","audio/midi","video/x-matroska","video/webm","video/quicktime","video/vnd.avi","audio/vnd.wave","audio/qcelp","audio/x-ms-asf","video/x-ms-asf","application/vnd.ms-asf","video/mpeg","video/3gpp","audio/mpeg","audio/mp4","audio/opus","video/ogg","audio/ogg","application/ogg","audio/x-flac","audio/ape","audio/wavpack","audio/amr","application/pdf","application/x-msdownload","application/x-shockwave-flash","application/rtf","application/wasm","font/woff","font/woff2","application/vnd.ms-fontobject","font/ttf","font/otf","image/x-icon","video/x-flv","application/postscript","application/eps","application/x-xz","application/x-sqlite3","application/x-nintendo-nes-rom","application/x-google-chrome-extension","application/vnd.ms-cab-compressed","application/x-deb","application/x-unix-archive","application/x-rpm","application/x-compress","application/x-lzip","application/x-cfb","application/x-mie","application/mxf","video/mp2t","application/x-blender","image/bpg","image/jp2","image/jpx","image/jpm","image/mj2","audio/aiff","application/xml","application/x-mobipocket-ebook","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/icns","image/ktx","application/dicom","audio/x-musepack","text/calendar","text/vcard","model/gltf-binary","application/vnd.tcpdump.pcap","audio/x-dsf","application/x.ms.shortcut","application/x.apple.alias","audio/x-voc","audio/vnd.dolby.dd-raw","audio/x-m4a","image/apng","image/x-olympus-orf","image/x-sony-arw","image/x-adobe-dng","image/x-nikon-nef","image/x-panasonic-rw2","image/x-fujifilm-raf","video/x-m4v","video/3gpp2","application/x-esri-shape","audio/aac","audio/x-it","audio/x-s3m","audio/x-xm","video/MP1S","video/MP2P","application/vnd.sketchup.skp","image/avif","application/x-lzh-compressed","application/pgp-encrypted","application/x-asar","model/stl","application/vnd.ms-htmlhelp","model/3mf","image/jxl","application/zstd"]};const Token$s=lib$1,strtok3$5=core$1,{stringToBytes,tarHeaderChecksumMatches,uint32SyncSafeToken}=util$c,supported=supported$1,minimumBytes=4100;async function fromStream(h){const d=await strtok3$5.fromStream(h);try{return await fromTokenizer(d)}finally{await d.close()}}async function fromBuffer(h){if(!(h instanceof Uint8Array||h instanceof ArrayBuffer||Buffer.isBuffer(h)))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`Buffer\` or \`ArrayBuffer\`, got \`${typeof h}\``);const d=h instanceof Buffer?h:Buffer.from(h);if(!(d&&d.length>1))return;const g=strtok3$5.fromBuffer(d);return fromTokenizer(g)}function _check(h,d,g){g={offset:0,...g};for(const[b,_]of d.entries())if(g.mask){if(_!==(g.mask[b]&h[b+g.offset]))return!1}else if(_!==h[b+g.offset])return!1;return!0}async function fromTokenizer(h){try{return _fromTokenizer(h)}catch(d){if(!(d instanceof strtok3$5.EndOfStreamError))throw d}}async function _fromTokenizer(h){let d=Buffer.alloc(minimumBytes);const g=12,b=($,j)=>_check(d,$,j),_=($,j)=>b(stringToBytes($),j);if(h.fileInfo.size||(h.fileInfo.size=Number.MAX_SAFE_INTEGER),await h.peekBuffer(d,{length:g,mayBeLess:!0}),b([66,77]))return{ext:"bmp",mime:"image/bmp"};if(b([11,119]))return{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"};if(b([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(b([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if(b([37,33]))return await h.peekBuffer(d,{length:24,mayBeLess:!0}),_("PS-Adobe-",{offset:2})&&_(" EPSF-",{offset:14})?{ext:"eps",mime:"application/eps"}:{ext:"ps",mime:"application/postscript"};if(b([31,160])||b([31,157]))return{ext:"Z",mime:"application/x-compress"};if(b([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(b([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(b([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(b([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(_("ID3")){await h.ignore(6);const $=await h.readToken(uint32SyncSafeToken);return h.position+$>h.fileInfo.size?{ext:"mp3",mime:"audio/mpeg"}:(await h.ignore($),fromTokenizer(h))}if(_("MP+"))return{ext:"mpc",mime:"audio/x-musepack"};if((d[0]===67||d[0]===70)&&b([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(b([71,73,70]))return{ext:"gif",mime:"image/gif"};if(_("FLIF"))return{ext:"flif",mime:"image/flif"};if(_("8BPS"))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(_("WEBP",{offset:8}))return{ext:"webp",mime:"image/webp"};if(_("MPCK"))return{ext:"mpc",mime:"audio/x-musepack"};if(_("FORM"))return{ext:"aif",mime:"audio/aiff"};if(_("icns",{offset:0}))return{ext:"icns",mime:"image/icns"};if(b([80,75,3,4])){try{for(;h.position+30<h.fileInfo.size;){await h.readBuffer(d,{length:30});const $={compressedSize:d.readUInt32LE(18),uncompressedSize:d.readUInt32LE(22),filenameLength:d.readUInt16LE(26),extraFieldLength:d.readUInt16LE(28)};if($.filename=await h.readToken(new Token$s.StringType($.filenameLength,"utf-8")),await h.ignore($.extraFieldLength),$.filename==="META-INF/mozilla.rsa")return{ext:"xpi",mime:"application/x-xpinstall"};if($.filename.endsWith(".rels")||$.filename.endsWith(".xml"))switch($.filename.split("/")[0]){case"_rels":break;case"word":return{ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"};case"ppt":return{ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"};case"xl":return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};default:break}if($.filename.startsWith("xl/"))return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};if($.filename.startsWith("3D/")&&$.filename.endsWith(".model"))return{ext:"3mf",mime:"model/3mf"};if($.filename==="mimetype"&&$.compressedSize===$.uncompressedSize)switch(await h.readToken(new Token$s.StringType($.compressedSize,"utf-8"))){case"application/epub+zip":return{ext:"epub",mime:"application/epub+zip"};case"application/vnd.oasis.opendocument.text":return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};case"application/vnd.oasis.opendocument.spreadsheet":return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};case"application/vnd.oasis.opendocument.presentation":return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};default:}if($.compressedSize===0){let j=-1;for(;j<0&&h.position<h.fileInfo.size;)await h.peekBuffer(d,{mayBeLess:!0}),j=d.indexOf("504B0304",0,"hex"),await h.ignore(j>=0?j:d.length)}else await h.ignore($.compressedSize)}}catch($){if(!($ instanceof strtok3$5.EndOfStreamError))throw $}return{ext:"zip",mime:"application/zip"}}if(_("OggS")){await h.ignore(28);const $=Buffer.alloc(8);return await h.readBuffer($),_check($,[79,112,117,115,72,101,97,100])?{ext:"opus",mime:"audio/opus"}:_check($,[128,116,104,101,111,114,97])?{ext:"ogv",mime:"video/ogg"}:_check($,[1,118,105,100,101,111,0])?{ext:"ogm",mime:"video/ogg"}:_check($,[127,70,76,65,67])?{ext:"oga",mime:"audio/ogg"}:_check($,[83,112,101,101,120,32,32])?{ext:"spx",mime:"audio/ogg"}:_check($,[1,118,111,114,98,105,115])?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"}}if(b([80,75])&&(d[2]===3||d[2]===5||d[2]===7)&&(d[3]===4||d[3]===6||d[3]===8))return{ext:"zip",mime:"application/zip"};if(_("ftyp",{offset:4})&&d[8]&96){const $=d.toString("binary",8,12).replace("\0"," ").trim();switch($){case"avif":return{ext:"avif",mime:"image/avif"};case"mif1":return{ext:"heic",mime:"image/heif"};case"msf1":return{ext:"heic",mime:"image/heif-sequence"};case"heic":case"heix":return{ext:"heic",mime:"image/heic"};case"hevc":case"hevx":return{ext:"heic",mime:"image/heic-sequence"};case"qt":return{ext:"mov",mime:"video/quicktime"};case"M4V":case"M4VH":case"M4VP":return{ext:"m4v",mime:"video/x-m4v"};case"M4P":return{ext:"m4p",mime:"video/mp4"};case"M4B":return{ext:"m4b",mime:"audio/mp4"};case"M4A":return{ext:"m4a",mime:"audio/x-m4a"};case"F4V":return{ext:"f4v",mime:"video/mp4"};case"F4P":return{ext:"f4p",mime:"video/mp4"};case"F4A":return{ext:"f4a",mime:"audio/mp4"};case"F4B":return{ext:"f4b",mime:"audio/mp4"};case"crx":return{ext:"cr3",mime:"image/x-canon-cr3"};default:return $.startsWith("3g")?$.startsWith("3g2")?{ext:"3g2",mime:"video/3gpp2"}:{ext:"3gp",mime:"video/3gpp"}:{ext:"mp4",mime:"video/mp4"}}}if(_("MThd"))return{ext:"mid",mime:"audio/midi"};if(_("wOFF")&&(b([0,1,0,0],{offset:4})||_("OTTO",{offset:4})))return{ext:"woff",mime:"font/woff"};if(_("wOF2")&&(b([0,1,0,0],{offset:4})||_("OTTO",{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(b([212,195,178,161])||b([161,178,195,212]))return{ext:"pcap",mime:"application/vnd.tcpdump.pcap"};if(_("DSD "))return{ext:"dsf",mime:"audio/x-dsf"};if(_("LZIP"))return{ext:"lz",mime:"application/x-lzip"};if(_("fLaC"))return{ext:"flac",mime:"audio/x-flac"};if(b([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(_("wvpk"))return{ext:"wv",mime:"audio/wavpack"};if(_("%PDF")){await h.ignore(1350);const $=10*1024*1024,j=Buffer.alloc(Math.min($,h.fileInfo.size));return await h.readBuffer(j,{mayBeLess:!0}),j.includes(Buffer.from("AIPrivateData"))?{ext:"ai",mime:"application/postscript"}:{ext:"pdf",mime:"application/pdf"}}if(b([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(b([73,73,42,0]))return _("CR",{offset:8})?{ext:"cr2",mime:"image/x-canon-cr2"}:b([28,0,254,0],{offset:8})||b([31,0,11,0],{offset:8})?{ext:"nef",mime:"image/x-nikon-nef"}:b([8,0,0,0],{offset:4})&&(b([45,0,254,0],{offset:8})||b([39,0,254,0],{offset:8}))?{ext:"dng",mime:"image/x-adobe-dng"}:(d=Buffer.alloc(24),await h.peekBuffer(d),(b([16,251,134,1],{offset:4})||b([8,0,0,0],{offset:4}))&&b([0,254,0,4,0,1,0,0,0,1,0,0,0,3,1],{offset:9})?{ext:"arw",mime:"image/x-sony-arw"}:{ext:"tif",mime:"image/tiff"});if(b([77,77,0,42]))return{ext:"tif",mime:"image/tiff"};if(_("MAC "))return{ext:"ape",mime:"audio/ape"};if(b([26,69,223,163])){async function $(){const nt=await h.peekNumber(Token$s.UINT8);let st=128,at=0;for(;!(nt&st)&&st!==0;)++at,st>>=1;const it=Buffer.alloc(at+1);return await h.readBuffer(it),it}async function j(){const nt=await $(),st=await $();st[0]^=128>>st.length-1;const at=Math.min(6,st.length);return{id:nt.readUIntBE(0,nt.length),len:st.readUIntBE(st.length-at,at)}}async function _e(nt,st){for(;st>0;){const at=await j();if(at.id===17026)return h.readToken(new Token$s.StringType(at.len,"utf-8"));await h.ignore(at.len),--st}}const et=await j();switch(await _e(1,et.len)){case"webm":return{ext:"webm",mime:"video/webm"};case"matroska":return{ext:"mkv",mime:"video/x-matroska"};default:return}}if(b([82,73,70,70])){if(b([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(b([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/vnd.wave"};if(b([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(_("SQLi"))return{ext:"sqlite",mime:"application/x-sqlite3"};if(b([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(_("Cr24"))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(_("MSCF")||_("ISc("))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(b([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(b([197,208,211,198]))return{ext:"eps",mime:"application/eps"};if(b([40,181,47,253]))return{ext:"zst",mime:"application/zstd"};if(b([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(_("#!AMR"))return{ext:"amr",mime:"audio/amr"};if(_("{\\rtf"))return{ext:"rtf",mime:"application/rtf"};if(b([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(_("IMPM"))return{ext:"it",mime:"audio/x-it"};if(_("-lh0-",{offset:2})||_("-lh1-",{offset:2})||_("-lh2-",{offset:2})||_("-lh3-",{offset:2})||_("-lh4-",{offset:2})||_("-lh5-",{offset:2})||_("-lh6-",{offset:2})||_("-lh7-",{offset:2})||_("-lzs-",{offset:2})||_("-lz4-",{offset:2})||_("-lz5-",{offset:2})||_("-lhd-",{offset:2}))return{ext:"lzh",mime:"application/x-lzh-compressed"};if(b([0,0,1,186])){if(b([33],{offset:4,mask:[241]}))return{ext:"mpg",mime:"video/MP1S"};if(b([68],{offset:4,mask:[196]}))return{ext:"mpg",mime:"video/MP2P"}}if(_("ITSF"))return{ext:"chm",mime:"application/vnd.ms-htmlhelp"};if(b([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(_("<?xml "))return{ext:"xml",mime:"application/xml"};if(b([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(b([82,97,114,33,26,7])&&(d[6]===0||d[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(_("solid "))return{ext:"stl",mime:"model/stl"};if(_("BLENDER"))return{ext:"blend",mime:"application/x-blender"};if(_("!<arch>"))return await h.ignore(8),await h.readToken(new Token$s.StringType(13,"ascii"))==="debian-binary"?{ext:"deb",mime:"application/x-deb"}:{ext:"ar",mime:"application/x-unix-archive"};if(b([137,80,78,71,13,10,26,10])){await h.ignore(8);async function $(){return{length:await h.readToken(Token$s.INT32_BE),type:await h.readToken(new Token$s.StringType(4,"binary"))}}do{const j=await $();if(j.length<0)return;switch(j.type){case"IDAT":return{ext:"png",mime:"image/png"};case"acTL":return{ext:"apng",mime:"image/apng"};default:await h.ignore(j.length+4)}}while(h.position+8<h.fileInfo.size);return{ext:"png",mime:"image/png"}}if(b([65,82,82,79,87,49,0,0]))return{ext:"arrow",mime:"application/x-apache-arrow"};if(b([103,108,84,70,2,0,0,0]))return{ext:"glb",mime:"model/gltf-binary"};if(b([102,114,101,101],{offset:4})||b([109,100,97,116],{offset:4})||b([109,111,111,118],{offset:4})||b([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(b([73,73,82,79,8,0,0,0,24]))return{ext:"orf",mime:"image/x-olympus-orf"};if(_("gimp xcf "))return{ext:"xcf",mime:"image/x-xcf"};if(b([73,73,85,0,24,0,0,0,136,231,116,216]))return{ext:"rw2",mime:"image/x-panasonic-rw2"};if(b([48,38,178,117,142,102,207,17,166,217])){async function $(){const j=Buffer.alloc(16);return await h.readBuffer(j),{id:j,size:Number(await h.readToken(Token$s.UINT64_LE))}}for(await h.ignore(30);h.position+24<h.fileInfo.size;){const j=await $();let _e=j.size-24;if(_check(j.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){const et=Buffer.alloc(16);if(_e-=await h.readBuffer(et),_check(et,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"audio/x-ms-asf"};if(_check(et,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"video/x-ms-asf"};break}await h.ignore(_e)}return{ext:"asf",mime:"application/vnd.ms-asf"}}if(b([171,75,84,88,32,49,49,187,13,10,26,10]))return{ext:"ktx",mime:"image/ktx"};if((b([126,16,4])||b([126,24,4]))&&b([48,77,73,69],{offset:4}))return{ext:"mie",mime:"application/x-mie"};if(b([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2}))return{ext:"shp",mime:"application/x-esri-shape"};if(b([0,0,0,12,106,80,32,32,13,10,135,10]))switch(await h.ignore(20),await h.readToken(new Token$s.StringType(4,"ascii"))){case"jp2 ":return{ext:"jp2",mime:"image/jp2"};case"jpx ":return{ext:"jpx",mime:"image/jpx"};case"jpm ":return{ext:"jpm",mime:"image/jpm"};case"mjp2":return{ext:"mj2",mime:"image/mj2"};default:return}if(b([255,10])||b([0,0,0,12,74,88,76,32,13,10,135,10]))return{ext:"jxl",mime:"image/jxl"};if(b([0,0,1,186])||b([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(b([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(b([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(b([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(b([208,207,17,224,161,177,26,225]))return{ext:"cfb",mime:"application/x-cfb"};if(await h.peekBuffer(d,{length:Math.min(256,h.fileInfo.size),mayBeLess:!0}),_("BEGIN:")){if(_("VCARD",{offset:6}))return{ext:"vcf",mime:"text/vcard"};if(_("VCALENDAR",{offset:6}))return{ext:"ics",mime:"text/calendar"}}if(_("FUJIFILMCCD-RAW"))return{ext:"raf",mime:"image/x-fujifilm-raf"};if(_("Extended Module:"))return{ext:"xm",mime:"audio/x-xm"};if(_("Creative Voice File"))return{ext:"voc",mime:"audio/x-voc"};if(b([4,0,0,0])&&d.length>=16){const $=d.readUInt32LE(12);if($>12&&d.length>=$+16)try{const j=d.slice(16,$+16).toString();if(JSON.parse(j).files)return{ext:"asar",mime:"application/x-asar"}}catch{}}if(b([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(_("SCRM",{offset:44}))return{ext:"s3m",mime:"audio/x-s3m"};if(b([71],{offset:4})&&(b([71],{offset:192})||b([71],{offset:196})))return{ext:"mts",mime:"video/mp2t"};if(b([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(b([68,73,67,77],{offset:128}))return{ext:"dcm",mime:"application/dicom"};if(b([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70]))return{ext:"lnk",mime:"application/x.ms.shortcut"};if(b([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0]))return{ext:"alias",mime:"application/x.apple.alias"};if(b([76,80],{offset:34})&&(b([0,0,1],{offset:8})||b([1,0,2],{offset:8})||b([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(b([6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29]))return{ext:"indd",mime:"application/x-indesign"};if(await h.peekBuffer(d,{length:Math.min(512,h.fileInfo.size),mayBeLess:!0}),tarHeaderChecksumMatches(d))return{ext:"tar",mime:"application/x-tar"};if(b([255,254,255,14,83,0,107,0,101,0,116,0,99,0,104,0,85,0,112,0,32,0,77,0,111,0,100,0,101,0,108,0]))return{ext:"skp",mime:"application/vnd.sketchup.skp"};if(_("-----BEGIN PGP MESSAGE-----"))return{ext:"pgp",mime:"application/pgp-encrypted"};if(d.length>=2&&b([255,224],{offset:0,mask:[255,224]})){if(b([16],{offset:1,mask:[22]}))return b([8],{offset:1,mask:[8]})?{ext:"aac",mime:"audio/aac"}:{ext:"aac",mime:"audio/aac"};if(b([2],{offset:1,mask:[6]}))return{ext:"mp3",mime:"audio/mpeg"};if(b([4],{offset:1,mask:[6]}))return{ext:"mp2",mime:"audio/mpeg"};if(b([6],{offset:1,mask:[6]}))return{ext:"mp1",mime:"audio/mpeg"}}}const stream$1=readableStream=>new Promise((resolve,reject)=>{const stream=eval("require")("stream");readableStream.on("error",reject),readableStream.once("readable",async()=>{const h=new stream.PassThrough;let d;stream.pipeline?d=stream.pipeline(readableStream,h,()=>{}):d=readableStream.pipe(h);const g=readableStream.read(minimumBytes)||readableStream.read()||Buffer.alloc(0);try{const b=await fromBuffer(g);h.fileType=b}catch(b){reject(b)}resolve(d)})}),fileType={fromStream,fromTokenizer,fromBuffer,stream:stream$1};Object.defineProperty(fileType,"extensions",{get(){return new Set(supported.extensions)}});Object.defineProperty(fileType,"mimeTypes",{get(){return new Set(supported.mimeTypes)}});var core=fileType,contentType={};/*!
 * content-type
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var PARAM_REGEXP=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,TEXT_REGEXP=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,TOKEN_REGEXP=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,QESC_REGEXP=/\\([\u000b\u0020-\u00ff])/g,QUOTE_REGEXP=/([\\"])/g,TYPE_REGEXP$1=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;contentType.format=format$2;contentType.parse=parse$2;function format$2(h){if(!h||typeof h!="object")throw new TypeError("argument obj is required");var d=h.parameters,g=h.type;if(!g||!TYPE_REGEXP$1.test(g))throw new TypeError("invalid type");var b=g;if(d&&typeof d=="object")for(var _,$=Object.keys(d).sort(),j=0;j<$.length;j++){if(_=$[j],!TOKEN_REGEXP.test(_))throw new TypeError("invalid parameter name");b+="; "+_+"="+qstring(d[_])}return b}function parse$2(h){if(!h)throw new TypeError("argument string is required");var d=typeof h=="object"?getcontenttype(h):h;if(typeof d!="string")throw new TypeError("argument string is required to be a string");var g=d.indexOf(";"),b=g!==-1?d.slice(0,g).trim():d.trim();if(!TYPE_REGEXP$1.test(b))throw new TypeError("invalid media type");var _=new ContentType$1(b.toLowerCase());if(g!==-1){var $,j,_e;for(PARAM_REGEXP.lastIndex=g;j=PARAM_REGEXP.exec(d);){if(j.index!==g)throw new TypeError("invalid parameter format");g+=j[0].length,$=j[1].toLowerCase(),_e=j[2],_e.charCodeAt(0)===34&&(_e=_e.slice(1,-1),_e.indexOf("\\")!==-1&&(_e=_e.replace(QESC_REGEXP,"$1"))),_.parameters[$]=_e}if(g!==d.length)throw new TypeError("invalid parameter format")}return _}function getcontenttype(h){var d;if(typeof h.getHeader=="function"?d=h.getHeader("content-type"):typeof h.headers=="object"&&(d=h.headers&&h.headers["content-type"]),typeof d!="string")throw new TypeError("content-type header is missing from object");return d}function qstring(h){var d=String(h);if(TOKEN_REGEXP.test(d))return d;if(d.length>0&&!TEXT_REGEXP.test(d))throw new TypeError("invalid parameter value");return'"'+d.replace(QUOTE_REGEXP,"\\$1")+'"'}function ContentType$1(h){this.parameters=Object.create(null),this.type=h}var mediaTyper={};/*!
 * media-typer
 * Copyright(c) 2014-2017 Douglas Christopher Wilson
 * MIT Licensed
 */var SUBTYPE_NAME_REGEXP=/^[A-Za-z0-9][A-Za-z0-9!#$&^_.-]{0,126}$/,TYPE_NAME_REGEXP=/^[A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126}$/,TYPE_REGEXP=/^ *([A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126})\/([A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126}) *$/;mediaTyper.format=format$1;mediaTyper.parse=parse$1;mediaTyper.test=test;function format$1(h){if(!h||typeof h!="object")throw new TypeError("argument obj is required");var d=h.subtype,g=h.suffix,b=h.type;if(!b||!TYPE_NAME_REGEXP.test(b))throw new TypeError("invalid type");if(!d||!SUBTYPE_NAME_REGEXP.test(d))throw new TypeError("invalid subtype");var _=b+"/"+d;if(g){if(!TYPE_NAME_REGEXP.test(g))throw new TypeError("invalid suffix");_+="+"+g}return _}function test(h){if(!h)throw new TypeError("argument string is required");if(typeof h!="string")throw new TypeError("argument string is required to be a string");return TYPE_REGEXP.test(h.toLowerCase())}function parse$1(h){if(!h)throw new TypeError("argument string is required");if(typeof h!="string")throw new TypeError("argument string is required to be a string");var d=TYPE_REGEXP.exec(h.toLowerCase());if(!d)throw new TypeError("invalid media type");var g=d[1],b=d[2],_,$=b.lastIndexOf("+");return $!==-1&&(_=b.substr($+1),b=b.substr(0,$)),new MediaType(g,b,_)}function MediaType(h,d,g){this.type=h,this.subtype=d,this.suffix=g}var MetadataCollector$1={},type={},types={};(function(h){Object.defineProperty(h,"__esModule",{value:!0}),h.TrackType=h.TargetType=h.DataType=void 0,function(d){d[d.string=0]="string",d[d.uint=1]="uint",d[d.uid=2]="uid",d[d.bool=3]="bool",d[d.binary=4]="binary",d[d.float=5]="float"}(h.DataType||(h.DataType={})),function(d){d[d.shot=10]="shot",d[d.scene=20]="scene",d[d.track=30]="track",d[d.part=40]="part",d[d.album=50]="album",d[d.edition=60]="edition",d[d.collection=70]="collection"}(h.TargetType||(h.TargetType={})),function(d){d[d.video=1]="video",d[d.audio=2]="audio",d[d.complex=3]="complex",d[d.logo=4]="logo",d[d.subtitle=17]="subtitle",d[d.button=18]="button",d[d.control=32]="control"}(h.TrackType||(h.TrackType={}))})(types);(function(h){Object.defineProperty(h,"__esModule",{value:!0}),h.TrackType=void 0;var d=types;Object.defineProperty(h,"TrackType",{enumerable:!0,get:function(){return d.TrackType}})})(type);var GenericTagTypes={};(function(h){Object.defineProperty(h,"__esModule",{value:!0}),h.isUnique=h.isSingleton=h.commonTags=void 0,h.commonTags={year:{multiple:!1},track:{multiple:!1},disk:{multiple:!1},title:{multiple:!1},artist:{multiple:!1},artists:{multiple:!0,unique:!0},albumartist:{multiple:!1},album:{multiple:!1},date:{multiple:!1},originaldate:{multiple:!1},originalyear:{multiple:!1},comment:{multiple:!0,unique:!1},genre:{multiple:!0,unique:!0},picture:{multiple:!0,unique:!0},composer:{multiple:!0,unique:!0},lyrics:{multiple:!0,unique:!1},albumsort:{multiple:!1,unique:!0},titlesort:{multiple:!1,unique:!0},work:{multiple:!1,unique:!0},artistsort:{multiple:!1,unique:!0},albumartistsort:{multiple:!1,unique:!0},composersort:{multiple:!1,unique:!0},lyricist:{multiple:!0,unique:!0},writer:{multiple:!0,unique:!0},conductor:{multiple:!0,unique:!0},remixer:{multiple:!0,unique:!0},arranger:{multiple:!0,unique:!0},engineer:{multiple:!0,unique:!0},producer:{multiple:!0,unique:!0},technician:{multiple:!0,unique:!0},djmixer:{multiple:!0,unique:!0},mixer:{multiple:!0,unique:!0},label:{multiple:!0,unique:!0},grouping:{multiple:!1},subtitle:{multiple:!0},discsubtitle:{multiple:!1},totaltracks:{multiple:!1},totaldiscs:{multiple:!1},compilation:{multiple:!1},rating:{multiple:!0},bpm:{multiple:!1},mood:{multiple:!1},media:{multiple:!1},catalognumber:{multiple:!0,unique:!0},tvShow:{multiple:!1},tvShowSort:{multiple:!1},tvSeason:{multiple:!1},tvEpisode:{multiple:!1},tvEpisodeId:{multiple:!1},tvNetwork:{multiple:!1},podcast:{multiple:!1},podcasturl:{multiple:!1},releasestatus:{multiple:!1},releasetype:{multiple:!0},releasecountry:{multiple:!1},script:{multiple:!1},language:{multiple:!1},copyright:{multiple:!1},license:{multiple:!1},encodedby:{multiple:!1},encodersettings:{multiple:!1},gapless:{multiple:!1},barcode:{multiple:!1},isrc:{multiple:!0},asin:{multiple:!1},musicbrainz_recordingid:{multiple:!1},musicbrainz_trackid:{multiple:!1},musicbrainz_albumid:{multiple:!1},musicbrainz_artistid:{multiple:!0},musicbrainz_albumartistid:{multiple:!0},musicbrainz_releasegroupid:{multiple:!1},musicbrainz_workid:{multiple:!1},musicbrainz_trmid:{multiple:!1},musicbrainz_discid:{multiple:!1},acoustid_id:{multiple:!1},acoustid_fingerprint:{multiple:!1},musicip_puid:{multiple:!1},musicip_fingerprint:{multiple:!1},website:{multiple:!1},"performer:instrument":{multiple:!0,unique:!0},averageLevel:{multiple:!1},peakLevel:{multiple:!1},notes:{multiple:!0,unique:!1},key:{multiple:!1},originalalbum:{multiple:!1},originalartist:{multiple:!1},discogs_artist_id:{multiple:!0,unique:!0},discogs_release_id:{multiple:!1},discogs_label_id:{multiple:!1},discogs_master_release_id:{multiple:!1},discogs_votes:{multiple:!1},discogs_rating:{multiple:!1},replaygain_track_peak:{multiple:!1},replaygain_track_gain:{multiple:!1},replaygain_album_peak:{multiple:!1},replaygain_album_gain:{multiple:!1},replaygain_track_minmax:{multiple:!1},replaygain_album_minmax:{multiple:!1},replaygain_undo:{multiple:!1},description:{multiple:!0},longDescription:{multiple:!1},category:{multiple:!0},hdVideo:{multiple:!1},keywords:{multiple:!0},movement:{multiple:!1},movementIndex:{multiple:!1},movementTotal:{multiple:!1},podcastId:{multiple:!1},showMovement:{multiple:!1},stik:{multiple:!1}};function d(b){return h.commonTags.hasOwnProperty(b)&&!h.commonTags[b].multiple}h.isSingleton=d;function g(b){return!h.commonTags[b].multiple||h.commonTags[b].unique}h.isUnique=g})(GenericTagTypes);var CombinedTagMapper$1={},ID3v1TagMap={},GenericTagMapper={};Object.defineProperty(GenericTagMapper,"__esModule",{value:!0});GenericTagMapper.CommonTagMapper=void 0;class CommonTagMapper{static toIntOrNull(d){const g=parseInt(d,10);return isNaN(g)?null:g}static normalizeTrack(d){const g=d.toString().split("/");return{no:parseInt(g[0],10)||null,of:parseInt(g[1],10)||null}}constructor(d,g){this.tagTypes=d,this.tagMap=g}mapGenericTag(d,g){d={id:d.id,value:d.value},this.postMap(d,g);const b=this.getCommonName(d.id);return b?{id:b,value:d.value}:null}getCommonName(d){return this.tagMap[d]}postMap(d,g){}}CommonTagMapper.maxRatingScore=1;GenericTagMapper.CommonTagMapper=CommonTagMapper;Object.defineProperty(ID3v1TagMap,"__esModule",{value:!0});ID3v1TagMap.ID3v1TagMapper=void 0;const GenericTagMapper_1$6=GenericTagMapper,id3v1TagMap={title:"title",artist:"artist",album:"album",year:"year",comment:"comment",track:"track",genre:"genre"};class ID3v1TagMapper extends GenericTagMapper_1$6.CommonTagMapper{constructor(){super(["ID3v1"],id3v1TagMap)}}ID3v1TagMap.ID3v1TagMapper=ID3v1TagMapper;var ID3v24TagMapper$1={},CaseInsensitiveTagMap$1={};Object.defineProperty(CaseInsensitiveTagMap$1,"__esModule",{value:!0});CaseInsensitiveTagMap$1.CaseInsensitiveTagMap=void 0;const GenericTagMapper_1$5=GenericTagMapper;class CaseInsensitiveTagMap extends GenericTagMapper_1$5.CommonTagMapper{constructor(d,g){const b={};for(const _ of Object.keys(g))b[_.toUpperCase()]=g[_];super(d,b)}getCommonName(d){return this.tagMap[d.toUpperCase()]}}CaseInsensitiveTagMap$1.CaseInsensitiveTagMap=CaseInsensitiveTagMap;var Util={};Object.defineProperty(Util,"__esModule",{value:!0});Util.toRatio=Util.dbToRatio=Util.ratioToDb=Util.a2hex=Util.isBitSet=Util.getBitAllignedNumber=Util.stripNulls=Util.decodeString=Util.trimRightNull=Util.findZero=Util.getBit=void 0;function getBit(h,d,g){return(h[d]&1<<g)!==0}Util.getBit=getBit;function findZero(h,d,g,b){let _=d;if(b==="utf16le"){for(;h[_]!==0||h[_+1]!==0;){if(_>=g)return g;_+=2}return _}else{for(;h[_]!==0;){if(_>=g)return g;_++}return _}}Util.findZero=findZero;function trimRightNull(h){const d=h.indexOf("\0");return d===-1?h:h.substr(0,d)}Util.trimRightNull=trimRightNull;function swapBytes(h){const d=h.length;if(d&1)throw new Error("Buffer length must be even");for(let g=0;g<d;g+=2){const b=h[g];h[g]=h[g+1],h[g+1]=b}return h}function decodeString(h,d){if(h[0]===255&&h[1]===254)return decodeString(h.subarray(2),d);if(d==="utf16le"&&h[0]===254&&h[1]===255){if(h.length&1)throw new Error("Expected even number of octets for 16-bit unicode string");return decodeString(swapBytes(h),d)}return Buffer.from(h).toString(d)}Util.decodeString=decodeString;function stripNulls(h){return h=h.replace(/^\x00+/g,""),h=h.replace(/\x00+$/g,""),h}Util.stripNulls=stripNulls;function getBitAllignedNumber(h,d,g,b){const _=d+~~(g/8),$=g%8;let j=h[_];j&=255>>$;const _e=8-$,et=b-_e;return et<0?j>>=8-$-b:et>0&&(j<<=et,j|=getBitAllignedNumber(h,d,g+_e,et)),j}Util.getBitAllignedNumber=getBitAllignedNumber;function isBitSet(h,d,g){return getBitAllignedNumber(h,d,g,1)===1}Util.isBitSet=isBitSet;function a2hex(h){const d=[];for(let g=0,b=h.length;g<b;g++){const _=Number(h.charCodeAt(g)).toString(16);d.push(_.length===1?"0"+_:_)}return d.join(" ")}Util.a2hex=a2hex;function ratioToDb(h){return 10*Math.log10(h)}Util.ratioToDb=ratioToDb;function dbToRatio(h){return Math.pow(10,h/10)}Util.dbToRatio=dbToRatio;function toRatio(h){const d=h.split(" ").map(g=>g.trim().toLowerCase());if(d.length>=1){const g=parseFloat(d[0]);return d.length===2&&d[1]==="db"?{dB:g,ratio:dbToRatio(g)}:{dB:ratioToDb(g),ratio:g}}}Util.toRatio=toRatio;Object.defineProperty(ID3v24TagMapper$1,"__esModule",{value:!0});ID3v24TagMapper$1.ID3v24TagMapper=void 0;const GenericTagMapper_1$4=GenericTagMapper,CaseInsensitiveTagMap_1$2=CaseInsensitiveTagMap$1,util$b=Util,id3v24TagMap={TIT2:"title",TPE1:"artist","TXXX:Artists":"artists",TPE2:"albumartist",TALB:"album",TDRV:"date",TORY:"originalyear",TPOS:"disk",TCON:"genre",APIC:"picture",TCOM:"composer","USLT:description":"lyrics",TSOA:"albumsort",TSOT:"titlesort",TOAL:"originalalbum",TSOP:"artistsort",TSO2:"albumartistsort",TSOC:"composersort",TEXT:"lyricist","TXXX:Writer":"writer",TPE3:"conductor",TPE4:"remixer","IPLS:arranger":"arranger","IPLS:engineer":"engineer","IPLS:producer":"producer","IPLS:DJ-mix":"djmixer","IPLS:mix":"mixer",TPUB:"label",TIT1:"grouping",TIT3:"subtitle",TRCK:"track",TCMP:"compilation",POPM:"rating",TBPM:"bpm",TMED:"media","TXXX:CATALOGNUMBER":"catalognumber","TXXX:MusicBrainz Album Status":"releasestatus","TXXX:MusicBrainz Album Type":"releasetype","TXXX:MusicBrainz Album Release Country":"releasecountry","TXXX:RELEASECOUNTRY":"releasecountry","TXXX:SCRIPT":"script",TLAN:"language",TCOP:"copyright",WCOP:"license",TENC:"encodedby",TSSE:"encodersettings","TXXX:BARCODE":"barcode","TXXX:ISRC":"isrc",TSRC:"isrc","TXXX:ASIN":"asin","TXXX:originalyear":"originalyear","UFID:http://musicbrainz.org":"musicbrainz_recordingid","TXXX:MusicBrainz Release Track Id":"musicbrainz_trackid","TXXX:MusicBrainz Album Id":"musicbrainz_albumid","TXXX:MusicBrainz Artist Id":"musicbrainz_artistid","TXXX:MusicBrainz Album Artist Id":"musicbrainz_albumartistid","TXXX:MusicBrainz Release Group Id":"musicbrainz_releasegroupid","TXXX:MusicBrainz Work Id":"musicbrainz_workid","TXXX:MusicBrainz TRM Id":"musicbrainz_trmid","TXXX:MusicBrainz Disc Id":"musicbrainz_discid","TXXX:ACOUSTID_ID":"acoustid_id","TXXX:Acoustid Id":"acoustid_id","TXXX:Acoustid Fingerprint":"acoustid_fingerprint","TXXX:MusicIP PUID":"musicip_puid","TXXX:MusicMagic Fingerprint":"musicip_fingerprint",WOAR:"website",TDRC:"date",TYER:"year",TDOR:"originaldate","TIPL:arranger":"arranger","TIPL:engineer":"engineer","TIPL:producer":"producer","TIPL:DJ-mix":"djmixer","TIPL:mix":"mixer",TMOO:"mood",SYLT:"lyrics",TSST:"discsubtitle",TKEY:"key",COMM:"comment",TOPE:"originalartist","PRIV:AverageLevel":"averageLevel","PRIV:PeakLevel":"peakLevel","TXXX:DISCOGS_ARTIST_ID":"discogs_artist_id","TXXX:DISCOGS_ARTISTS":"artists","TXXX:DISCOGS_ARTIST_NAME":"artists","TXXX:DISCOGS_ALBUM_ARTISTS":"albumartist","TXXX:DISCOGS_CATALOG":"catalognumber","TXXX:DISCOGS_COUNTRY":"releasecountry","TXXX:DISCOGS_DATE":"originaldate","TXXX:DISCOGS_LABEL":"label","TXXX:DISCOGS_LABEL_ID":"discogs_label_id","TXXX:DISCOGS_MASTER_RELEASE_ID":"discogs_master_release_id","TXXX:DISCOGS_RATING":"discogs_rating","TXXX:DISCOGS_RELEASED":"date","TXXX:DISCOGS_RELEASE_ID":"discogs_release_id","TXXX:DISCOGS_VOTES":"discogs_votes","TXXX:CATALOGID":"catalognumber","TXXX:STYLE":"genre","TXXX:REPLAYGAIN_TRACK_PEAK":"replaygain_track_peak","TXXX:REPLAYGAIN_TRACK_GAIN":"replaygain_track_gain","TXXX:REPLAYGAIN_ALBUM_PEAK":"replaygain_album_peak","TXXX:REPLAYGAIN_ALBUM_GAIN":"replaygain_album_gain","TXXX:MP3GAIN_MINMAX":"replaygain_track_minmax","TXXX:MP3GAIN_ALBUM_MINMAX":"replaygain_album_minmax","TXXX:MP3GAIN_UNDO":"replaygain_undo",MVNM:"movement",MVIN:"movementIndex",PCST:"podcast",TCAT:"category",TDES:"description",TDRL:"date",TGID:"podcastId",TKWD:"keywords",WFED:"podcasturl"};class ID3v24TagMapper extends CaseInsensitiveTagMap_1$2.CaseInsensitiveTagMap{static toRating(d){return{source:d.email,rating:d.rating>0?(d.rating-1)/254*GenericTagMapper_1$4.CommonTagMapper.maxRatingScore:void 0}}constructor(){super(["ID3v2.3","ID3v2.4"],id3v24TagMap)}postMap(d,g){switch(d.id){case"UFID":d.value.owner_identifier==="http://musicbrainz.org"&&(d.id+=":"+d.value.owner_identifier,d.value=util$b.decodeString(d.value.identifier,"latin1"));break;case"PRIV":switch(d.value.owner_identifier){case"AverageLevel":case"PeakValue":d.id+=":"+d.value.owner_identifier,d.value=d.value.data.length===4?d.value.data.readUInt32LE(0):null,d.value===null&&g.addWarning("Failed to parse PRIV:PeakValue");break;default:g.addWarning(`Unknown PRIV owner-identifier: ${d.value.owner_identifier}`)}break;case"COMM":d.value=d.value?d.value.text:null;break;case"POPM":d.value=ID3v24TagMapper.toRating(d.value);break}}}ID3v24TagMapper$1.ID3v24TagMapper=ID3v24TagMapper;var AsfTagMapper$1={};Object.defineProperty(AsfTagMapper$1,"__esModule",{value:!0});AsfTagMapper$1.AsfTagMapper=void 0;const GenericTagMapper_1$3=GenericTagMapper,asfTagMap={Title:"title",Author:"artist","WM/AlbumArtist":"albumartist","WM/AlbumTitle":"album","WM/Year":"date","WM/OriginalReleaseTime":"originaldate","WM/OriginalReleaseYear":"originalyear",Description:"comment","WM/TrackNumber":"track","WM/PartOfSet":"disk","WM/Genre":"genre","WM/Composer":"composer","WM/Lyrics":"lyrics","WM/AlbumSortOrder":"albumsort","WM/TitleSortOrder":"titlesort","WM/ArtistSortOrder":"artistsort","WM/AlbumArtistSortOrder":"albumartistsort","WM/ComposerSortOrder":"composersort","WM/Writer":"lyricist","WM/Conductor":"conductor","WM/ModifiedBy":"remixer","WM/Engineer":"engineer","WM/Producer":"producer","WM/DJMixer":"djmixer","WM/Mixer":"mixer","WM/Publisher":"label","WM/ContentGroupDescription":"grouping","WM/SubTitle":"subtitle","WM/SetSubTitle":"discsubtitle","WM/IsCompilation":"compilation","WM/SharedUserRating":"rating","WM/BeatsPerMinute":"bpm","WM/Mood":"mood","WM/Media":"media","WM/CatalogNo":"catalognumber","MusicBrainz/Album Status":"releasestatus","MusicBrainz/Album Type":"releasetype","MusicBrainz/Album Release Country":"releasecountry","WM/Script":"script","WM/Language":"language",Copyright:"copyright",LICENSE:"license","WM/EncodedBy":"encodedby","WM/EncodingSettings":"encodersettings","WM/Barcode":"barcode","WM/ISRC":"isrc","MusicBrainz/Track Id":"musicbrainz_recordingid","MusicBrainz/Release Track Id":"musicbrainz_trackid","MusicBrainz/Album Id":"musicbrainz_albumid","MusicBrainz/Artist Id":"musicbrainz_artistid","MusicBrainz/Album Artist Id":"musicbrainz_albumartistid","MusicBrainz/Release Group Id":"musicbrainz_releasegroupid","MusicBrainz/Work Id":"musicbrainz_workid","MusicBrainz/TRM Id":"musicbrainz_trmid","MusicBrainz/Disc Id":"musicbrainz_discid","Acoustid/Id":"acoustid_id","Acoustid/Fingerprint":"acoustid_fingerprint","MusicIP/PUID":"musicip_puid","WM/ARTISTS":"artists","WM/InitialKey":"key",ASIN:"asin","WM/Work":"work","WM/AuthorURL":"website","WM/Picture":"picture"};class AsfTagMapper extends GenericTagMapper_1$3.CommonTagMapper{static toRating(d){return{rating:parseFloat(d+1)/5}}constructor(){super(["asf"],asfTagMap)}postMap(d){switch(d.id){case"WM/SharedUserRating":const g=d.id.split(":");d.value=AsfTagMapper.toRating(d.value),d.id=g[0];break}}}AsfTagMapper$1.AsfTagMapper=AsfTagMapper;var ID3v22TagMapper={};(function(h){Object.defineProperty(h,"__esModule",{value:!0}),h.ID3v22TagMapper=h.id3v22TagMap=void 0;const d=CaseInsensitiveTagMap$1;h.id3v22TagMap={TT2:"title",TP1:"artist",TP2:"albumartist",TAL:"album",TYE:"year",COM:"comment",TRK:"track",TPA:"disk",TCO:"genre",PIC:"picture",TCM:"composer",TOR:"originaldate",TOT:"originalalbum",TXT:"lyricist",TP3:"conductor",TPB:"label",TT1:"grouping",TT3:"subtitle",TLA:"language",TCR:"copyright",WCP:"license",TEN:"encodedby",TSS:"encodersettings",WAR:"website","COM:iTunPGAP":"gapless",PCS:"podcast",TCP:"compilation",TDR:"date",TS2:"albumartistsort",TSA:"albumsort",TSC:"composersort",TSP:"artistsort",TST:"titlesort",WFD:"podcasturl",TBP:"bpm"};class g extends d.CaseInsensitiveTagMap{constructor(){super(["ID3v2.2"],h.id3v22TagMap)}}h.ID3v22TagMapper=g})(ID3v22TagMapper);var APEv2TagMapper$1={};Object.defineProperty(APEv2TagMapper$1,"__esModule",{value:!0});APEv2TagMapper$1.APEv2TagMapper=void 0;const CaseInsensitiveTagMap_1$1=CaseInsensitiveTagMap$1,apev2TagMap={Title:"title",Artist:"artist",Artists:"artists","Album Artist":"albumartist",Album:"album",Year:"date",Originalyear:"originalyear",Originaldate:"originaldate",Comment:"comment",Track:"track",Disc:"disk",DISCNUMBER:"disk",Genre:"genre","Cover Art (Front)":"picture","Cover Art (Back)":"picture",Composer:"composer",Lyrics:"lyrics",ALBUMSORT:"albumsort",TITLESORT:"titlesort",WORK:"work",ARTISTSORT:"artistsort",ALBUMARTISTSORT:"albumartistsort",COMPOSERSORT:"composersort",Lyricist:"lyricist",Writer:"writer",Conductor:"conductor",MixArtist:"remixer",Arranger:"arranger",Engineer:"engineer",Producer:"producer",DJMixer:"djmixer",Mixer:"mixer",Label:"label",Grouping:"grouping",Subtitle:"subtitle",DiscSubtitle:"discsubtitle",Compilation:"compilation",BPM:"bpm",Mood:"mood",Media:"media",CatalogNumber:"catalognumber",MUSICBRAINZ_ALBUMSTATUS:"releasestatus",MUSICBRAINZ_ALBUMTYPE:"releasetype",RELEASECOUNTRY:"releasecountry",Script:"script",Language:"language",Copyright:"copyright",LICENSE:"license",EncodedBy:"encodedby",EncoderSettings:"encodersettings",Barcode:"barcode",ISRC:"isrc",ASIN:"asin",musicbrainz_trackid:"musicbrainz_recordingid",musicbrainz_releasetrackid:"musicbrainz_trackid",MUSICBRAINZ_ALBUMID:"musicbrainz_albumid",MUSICBRAINZ_ARTISTID:"musicbrainz_artistid",MUSICBRAINZ_ALBUMARTISTID:"musicbrainz_albumartistid",MUSICBRAINZ_RELEASEGROUPID:"musicbrainz_releasegroupid",MUSICBRAINZ_WORKID:"musicbrainz_workid",MUSICBRAINZ_TRMID:"musicbrainz_trmid",MUSICBRAINZ_DISCID:"musicbrainz_discid",Acoustid_Id:"acoustid_id",ACOUSTID_FINGERPRINT:"acoustid_fingerprint",MUSICIP_PUID:"musicip_puid",Weblink:"website",REPLAYGAIN_TRACK_GAIN:"replaygain_track_gain",REPLAYGAIN_TRACK_PEAK:"replaygain_track_peak",MP3GAIN_MINMAX:"replaygain_track_minmax",MP3GAIN_UNDO:"replaygain_undo"};class APEv2TagMapper extends CaseInsensitiveTagMap_1$1.CaseInsensitiveTagMap{constructor(){super(["APEv2"],apev2TagMap)}}APEv2TagMapper$1.APEv2TagMapper=APEv2TagMapper;var MP4TagMapper={};(function(h){Object.defineProperty(h,"__esModule",{value:!0}),h.MP4TagMapper=h.tagType=void 0;const d=CaseInsensitiveTagMap$1,g={"nam":"title","ART":"artist",aART:"albumartist","----:com.apple.iTunes:Band":"albumartist","alb":"album","day":"date","cmt":"comment","com":"comment",trkn:"track",disk:"disk","gen":"genre",covr:"picture","wrt":"composer","lyr":"lyrics",soal:"albumsort",sonm:"titlesort",soar:"artistsort",soaa:"albumartistsort",soco:"composersort","----:com.apple.iTunes:LYRICIST":"lyricist","----:com.apple.iTunes:CONDUCTOR":"conductor","----:com.apple.iTunes:REMIXER":"remixer","----:com.apple.iTunes:ENGINEER":"engineer","----:com.apple.iTunes:PRODUCER":"producer","----:com.apple.iTunes:DJMIXER":"djmixer","----:com.apple.iTunes:MIXER":"mixer","----:com.apple.iTunes:LABEL":"label","grp":"grouping","----:com.apple.iTunes:SUBTITLE":"subtitle","----:com.apple.iTunes:DISCSUBTITLE":"discsubtitle",cpil:"compilation",tmpo:"bpm","----:com.apple.iTunes:MOOD":"mood","----:com.apple.iTunes:MEDIA":"media","----:com.apple.iTunes:CATALOGNUMBER":"catalognumber",tvsh:"tvShow",tvsn:"tvSeason",tves:"tvEpisode",sosn:"tvShowSort",tven:"tvEpisodeId",tvnn:"tvNetwork",pcst:"podcast",purl:"podcasturl","----:com.apple.iTunes:MusicBrainz Album Status":"releasestatus","----:com.apple.iTunes:MusicBrainz Album Type":"releasetype","----:com.apple.iTunes:MusicBrainz Album Release Country":"releasecountry","----:com.apple.iTunes:SCRIPT":"script","----:com.apple.iTunes:LANGUAGE":"language",cprt:"copyright","cpy":"copyright","----:com.apple.iTunes:LICENSE":"license","too":"encodedby",pgap:"gapless","----:com.apple.iTunes:BARCODE":"barcode","----:com.apple.iTunes:ISRC":"isrc","----:com.apple.iTunes:ASIN":"asin","----:com.apple.iTunes:NOTES":"comment","----:com.apple.iTunes:MusicBrainz Track Id":"musicbrainz_recordingid","----:com.apple.iTunes:MusicBrainz Release Track Id":"musicbrainz_trackid","----:com.apple.iTunes:MusicBrainz Album Id":"musicbrainz_albumid","----:com.apple.iTunes:MusicBrainz Artist Id":"musicbrainz_artistid","----:com.apple.iTunes:MusicBrainz Album Artist Id":"musicbrainz_albumartistid","----:com.apple.iTunes:MusicBrainz Release Group Id":"musicbrainz_releasegroupid","----:com.apple.iTunes:MusicBrainz Work Id":"musicbrainz_workid","----:com.apple.iTunes:MusicBrainz TRM Id":"musicbrainz_trmid","----:com.apple.iTunes:MusicBrainz Disc Id":"musicbrainz_discid","----:com.apple.iTunes:Acoustid Id":"acoustid_id","----:com.apple.iTunes:Acoustid Fingerprint":"acoustid_fingerprint","----:com.apple.iTunes:MusicIP PUID":"musicip_puid","----:com.apple.iTunes:fingerprint":"musicip_fingerprint","----:com.apple.iTunes:replaygain_track_gain":"replaygain_track_gain","----:com.apple.iTunes:replaygain_track_peak":"replaygain_track_peak","----:com.apple.iTunes:replaygain_album_gain":"replaygain_album_gain","----:com.apple.iTunes:replaygain_album_peak":"replaygain_album_peak","----:com.apple.iTunes:replaygain_track_minmax":"replaygain_track_minmax","----:com.apple.iTunes:replaygain_album_minmax":"replaygain_album_minmax","----:com.apple.iTunes:replaygain_undo":"replaygain_undo",gnre:"genre","----:com.apple.iTunes:ALBUMARTISTSORT":"albumartistsort","----:com.apple.iTunes:ARTISTS":"artists","----:com.apple.iTunes:ORIGINALDATE":"originaldate","----:com.apple.iTunes:ORIGINALYEAR":"originalyear",desc:"description",ldes:"longDescription","mvn":"movement","mvi":"movementIndex","mvc":"movementTotal","wrk":"work",catg:"category",egid:"podcastId",hdvd:"hdVideo",keyw:"keywords",shwm:"showMovement",stik:"stik",rate:"rating"};h.tagType="iTunes";class b extends d.CaseInsensitiveTagMap{constructor(){super([h.tagType],g)}postMap($,j){switch($.id){case"rate":$.value={source:void 0,rating:parseFloat($.value)/100};break}}}h.MP4TagMapper=b})(MP4TagMapper);var VorbisTagMapper$1={};Object.defineProperty(VorbisTagMapper$1,"__esModule",{value:!0});VorbisTagMapper$1.VorbisTagMapper=void 0;const GenericTagMapper_1$2=GenericTagMapper,vorbisTagMap={TITLE:"title",ARTIST:"artist",ARTISTS:"artists",ALBUMARTIST:"albumartist","ALBUM ARTIST":"albumartist",ALBUM:"album",DATE:"date",ORIGINALDATE:"originaldate",ORIGINALYEAR:"originalyear",COMMENT:"comment",TRACKNUMBER:"track",DISCNUMBER:"disk",GENRE:"genre",METADATA_BLOCK_PICTURE:"picture",COMPOSER:"composer",LYRICS:"lyrics",ALBUMSORT:"albumsort",TITLESORT:"titlesort",WORK:"work",ARTISTSORT:"artistsort",ALBUMARTISTSORT:"albumartistsort",COMPOSERSORT:"composersort",LYRICIST:"lyricist",WRITER:"writer",CONDUCTOR:"conductor",REMIXER:"remixer",ARRANGER:"arranger",ENGINEER:"engineer",PRODUCER:"producer",DJMIXER:"djmixer",MIXER:"mixer",LABEL:"label",GROUPING:"grouping",SUBTITLE:"subtitle",DISCSUBTITLE:"discsubtitle",TRACKTOTAL:"totaltracks",DISCTOTAL:"totaldiscs",COMPILATION:"compilation",RATING:"rating",BPM:"bpm",KEY:"key",MOOD:"mood",MEDIA:"media",CATALOGNUMBER:"catalognumber",RELEASESTATUS:"releasestatus",RELEASETYPE:"releasetype",RELEASECOUNTRY:"releasecountry",SCRIPT:"script",LANGUAGE:"language",COPYRIGHT:"copyright",LICENSE:"license",ENCODEDBY:"encodedby",ENCODERSETTINGS:"encodersettings",BARCODE:"barcode",ISRC:"isrc",ASIN:"asin",MUSICBRAINZ_TRACKID:"musicbrainz_recordingid",MUSICBRAINZ_RELEASETRACKID:"musicbrainz_trackid",MUSICBRAINZ_ALBUMID:"musicbrainz_albumid",MUSICBRAINZ_ARTISTID:"musicbrainz_artistid",MUSICBRAINZ_ALBUMARTISTID:"musicbrainz_albumartistid",MUSICBRAINZ_RELEASEGROUPID:"musicbrainz_releasegroupid",MUSICBRAINZ_WORKID:"musicbrainz_workid",MUSICBRAINZ_TRMID:"musicbrainz_trmid",MUSICBRAINZ_DISCID:"musicbrainz_discid",ACOUSTID_ID:"acoustid_id",ACOUSTID_ID_FINGERPRINT:"acoustid_fingerprint",MUSICIP_PUID:"musicip_puid",WEBSITE:"website",NOTES:"notes",TOTALTRACKS:"totaltracks",TOTALDISCS:"totaldiscs",DISCOGS_ARTIST_ID:"discogs_artist_id",DISCOGS_ARTISTS:"artists",DISCOGS_ARTIST_NAME:"artists",DISCOGS_ALBUM_ARTISTS:"albumartist",DISCOGS_CATALOG:"catalognumber",DISCOGS_COUNTRY:"releasecountry",DISCOGS_DATE:"originaldate",DISCOGS_LABEL:"label",DISCOGS_LABEL_ID:"discogs_label_id",DISCOGS_MASTER_RELEASE_ID:"discogs_master_release_id",DISCOGS_RATING:"discogs_rating",DISCOGS_RELEASED:"date",DISCOGS_RELEASE_ID:"discogs_release_id",DISCOGS_VOTES:"discogs_votes",CATALOGID:"catalognumber",STYLE:"genre",REPLAYGAIN_TRACK_GAIN:"replaygain_track_gain",REPLAYGAIN_TRACK_PEAK:"replaygain_track_peak",REPLAYGAIN_ALBUM_GAIN:"replaygain_album_gain",REPLAYGAIN_ALBUM_PEAK:"replaygain_album_peak",REPLAYGAIN_MINMAX:"replaygain_track_minmax",REPLAYGAIN_ALBUM_MINMAX:"replaygain_album_minmax",REPLAYGAIN_UNDO:"replaygain_undo"};class VorbisTagMapper extends GenericTagMapper_1$2.CommonTagMapper{static toRating(d,g,b){return{source:d&&d.toLowerCase(),rating:parseFloat(g)/b*GenericTagMapper_1$2.CommonTagMapper.maxRatingScore}}constructor(){super(["vorbis"],vorbisTagMap)}postMap(d){if(d.id==="RATING")d.value=VorbisTagMapper.toRating(void 0,d.value,100);else if(d.id.indexOf("RATING:")===0){const g=d.id.split(":");d.value=VorbisTagMapper.toRating(g[1],d.value,1),d.id=g[0]}}}VorbisTagMapper$1.VorbisTagMapper=VorbisTagMapper;var RiffInfoTagMap={};(function(h){Object.defineProperty(h,"__esModule",{value:!0}),h.RiffInfoTagMapper=h.riffInfoTagMap=void 0;const d=GenericTagMapper;h.riffInfoTagMap={IART:"artist",ICRD:"date",INAM:"title",TITL:"title",IPRD:"album",ITRK:"track",IPRT:"track",COMM:"comment",ICMT:"comment",ICNT:"releasecountry",GNRE:"genre",IWRI:"writer",RATE:"rating",YEAR:"year",ISFT:"encodedby",CODE:"encodedby",TURL:"website",IGNR:"genre",IENG:"engineer",ITCH:"technician",IMED:"media",IRPD:"album"};class g extends d.CommonTagMapper{constructor(){super(["exif"],h.riffInfoTagMap)}}h.RiffInfoTagMapper=g})(RiffInfoTagMap);var MatroskaTagMapper$1={};Object.defineProperty(MatroskaTagMapper$1,"__esModule",{value:!0});MatroskaTagMapper$1.MatroskaTagMapper=void 0;const CaseInsensitiveTagMap_1=CaseInsensitiveTagMap$1,ebmlTagMap={"segment:title":"title","album:ARTIST":"albumartist","album:ARTISTSORT":"albumartistsort","album:TITLE":"album","album:DATE_RECORDED":"originaldate","album:PART_NUMBER":"disk","album:TOTAL_PARTS":"totaltracks","track:ARTIST":"artist","track:ARTISTSORT":"artistsort","track:TITLE":"title","track:PART_NUMBER":"track","track:MUSICBRAINZ_TRACKID":"musicbrainz_recordingid","track:MUSICBRAINZ_ALBUMID":"musicbrainz_albumid","track:MUSICBRAINZ_ARTISTID":"musicbrainz_artistid","track:PUBLISHER":"label","track:GENRE":"genre","track:ENCODER":"encodedby","track:ENCODER_OPTIONS":"encodersettings","edition:TOTAL_PARTS":"totaldiscs",picture:"picture"};class MatroskaTagMapper extends CaseInsensitiveTagMap_1.CaseInsensitiveTagMap{constructor(){super(["matroska"],ebmlTagMap)}}MatroskaTagMapper$1.MatroskaTagMapper=MatroskaTagMapper;var AiffTagMap={};Object.defineProperty(AiffTagMap,"__esModule",{value:!0});AiffTagMap.AiffTagMapper=void 0;const GenericTagMapper_1$1=GenericTagMapper,tagMap={NAME:"title",AUTH:"artist","(c) ":"copyright",ANNO:"comment"};class AiffTagMapper extends GenericTagMapper_1$1.CommonTagMapper{constructor(){super(["AIFF"],tagMap)}}AiffTagMap.AiffTagMapper=AiffTagMapper;Object.defineProperty(CombinedTagMapper$1,"__esModule",{value:!0});CombinedTagMapper$1.CombinedTagMapper=void 0;const ID3v1TagMap_1=ID3v1TagMap,ID3v24TagMapper_1=ID3v24TagMapper$1,AsfTagMapper_1=AsfTagMapper$1,ID3v22TagMapper_1=ID3v22TagMapper,APEv2TagMapper_1=APEv2TagMapper$1,MP4TagMapper_1=MP4TagMapper,VorbisTagMapper_1=VorbisTagMapper$1,RiffInfoTagMap_1=RiffInfoTagMap,MatroskaTagMapper_1=MatroskaTagMapper$1,AiffTagMap_1=AiffTagMap;class CombinedTagMapper{constructor(){this.tagMappers={},[new ID3v1TagMap_1.ID3v1TagMapper,new ID3v22TagMapper_1.ID3v22TagMapper,new ID3v24TagMapper_1.ID3v24TagMapper,new MP4TagMapper_1.MP4TagMapper,new MP4TagMapper_1.MP4TagMapper,new VorbisTagMapper_1.VorbisTagMapper,new APEv2TagMapper_1.APEv2TagMapper,new AsfTagMapper_1.AsfTagMapper,new RiffInfoTagMap_1.RiffInfoTagMapper,new MatroskaTagMapper_1.MatroskaTagMapper,new AiffTagMap_1.AiffTagMapper].forEach(d=>{this.registerTagMapper(d)})}mapTag(d,g,b){if(this.tagMappers[d])return this.tagMappers[d].mapGenericTag(g,b);throw new Error("No generic tag mapper defined for tag-format: "+d)}registerTagMapper(d){for(const g of d.tagTypes)this.tagMappers[g]=d}}CombinedTagMapper$1.CombinedTagMapper=CombinedTagMapper;Object.defineProperty(MetadataCollector$1,"__esModule",{value:!0});MetadataCollector$1.joinArtists=MetadataCollector$1.MetadataCollector=void 0;const type_1$2=type,debug_1$n=browserExports$2,GenericTagTypes_1=GenericTagTypes,CombinedTagMapper_1=CombinedTagMapper$1,GenericTagMapper_1=GenericTagMapper,Util_1$1=Util,FileType$1=core,debug$n=(0,debug_1$n.default)("music-metadata:collector"),TagPriority=["matroska","APEv2","vorbis","ID3v2.4","ID3v2.3","ID3v2.2","exif","asf","iTunes","AIFF","ID3v1"];class MetadataCollector{constructor(d){this.opts=d,this.format={tagTypes:[],trackInfo:[]},this.native={},this.common={track:{no:null,of:null},disk:{no:null,of:null},movementIndex:{}},this.quality={warnings:[]},this.commonOrigin={},this.originPriority={},this.tagMapper=new CombinedTagMapper_1.CombinedTagMapper;let g=1;for(const b of TagPriority)this.originPriority[b]=g++;this.originPriority.artificial=500,this.originPriority.id3v1=600}hasAny(){return Object.keys(this.native).length>0}addStreamInfo(d){debug$n(`streamInfo: type=${type_1$2.TrackType[d.type]}, codec=${d.codecName}`),this.format.trackInfo.push(d)}setFormat(d,g){debug$n(`format: ${d} = ${g}`),this.format[d]=g,this.opts.observer&&this.opts.observer({metadata:this,tag:{type:"format",id:d,value:g}})}addTag(d,g,b){debug$n(`tag ${d}.${g} = ${b}`),this.native[d]||(this.format.tagTypes.push(d),this.native[d]=[]),this.native[d].push({id:g,value:b}),this.toCommon(d,g,b)}addWarning(d){this.quality.warnings.push({message:d})}postMap(d,g){switch(g.id){case"artist":if(this.commonOrigin.artist===this.originPriority[d])return this.postMap("artificial",{id:"artists",value:g.value});this.common.artists||this.setGenericTag("artificial",{id:"artists",value:g.value});break;case"artists":if((!this.common.artist||this.commonOrigin.artist===this.originPriority.artificial)&&(!this.common.artists||this.common.artists.indexOf(g.value)===-1)){const j=(this.common.artists||[]).concat([g.value]),et={id:"artist",value:joinArtists(j)};this.setGenericTag("artificial",et)}break;case"picture":this.postFixPicture(g.value).then(j=>{j!==null&&(g.value=j,this.setGenericTag(d,g))});return;case"totaltracks":this.common.track.of=GenericTagMapper_1.CommonTagMapper.toIntOrNull(g.value);return;case"totaldiscs":this.common.disk.of=GenericTagMapper_1.CommonTagMapper.toIntOrNull(g.value);return;case"movementTotal":this.common.movementIndex.of=GenericTagMapper_1.CommonTagMapper.toIntOrNull(g.value);return;case"track":case"disk":case"movementIndex":const b=this.common[g.id].of;this.common[g.id]=GenericTagMapper_1.CommonTagMapper.normalizeTrack(g.value),this.common[g.id].of=b??this.common[g.id].of;return;case"bpm":case"year":case"originalyear":g.value=parseInt(g.value,10);break;case"date":const _=parseInt(g.value.substr(0,4),10);isNaN(_)||(this.common.year=_);break;case"discogs_label_id":case"discogs_release_id":case"discogs_master_release_id":case"discogs_artist_id":case"discogs_votes":g.value=typeof g.value=="string"?parseInt(g.value,10):g.value;break;case"replaygain_track_gain":case"replaygain_track_peak":case"replaygain_album_gain":case"replaygain_album_peak":g.value=(0,Util_1$1.toRatio)(g.value);break;case"replaygain_track_minmax":g.value=g.value.split(",").map(j=>parseInt(j,10));break;case"replaygain_undo":const $=g.value.split(",").map(j=>parseInt(j,10));g.value={leftChannel:$[0],rightChannel:$[1]};break;case"gapless":case"compilation":case"podcast":case"showMovement":g.value=g.value==="1"||g.value===1;break;case"isrc":if(this.common[g.id]&&this.common[g.id].indexOf(g.value)!==-1)return;break}g.value!==null&&this.setGenericTag(d,g)}toCommonMetadata(){return{format:this.format,native:this.native,quality:this.quality,common:this.common}}async postFixPicture(d){if(d.data&&d.data.length>0){if(!d.format){const g=await FileType$1.fromBuffer(d.data);if(g)d.format=g.mime;else return null}switch(d.format=d.format.toLocaleLowerCase(),d.format){case"image/jpg":d.format="image/jpeg"}return d}return this.addWarning("Empty picture tag found"),null}toCommon(d,g,b){const _={id:g,value:b},$=this.tagMapper.mapTag(d,_,this);$&&this.postMap(d,$)}setGenericTag(d,g){debug$n(`common.${g.id} = ${g.value}`);const b=this.commonOrigin[g.id]||1e3,_=this.originPriority[d];if((0,GenericTagTypes_1.isSingleton)(g.id))if(_<=b)this.common[g.id]=g.value,this.commonOrigin[g.id]=_;else return debug$n(`Ignore native tag (singleton): ${d}.${g.id} = ${g.value}`);else if(_===b)!(0,GenericTagTypes_1.isUnique)(g.id)||this.common[g.id].indexOf(g.value)===-1?this.common[g.id].push(g.value):debug$n(`Ignore duplicate value: ${d}.${g.id} = ${g.value}`);else if(_<b)this.common[g.id]=[g.value],this.commonOrigin[g.id]=_;else return debug$n(`Ignore native tag (list): ${d}.${g.id} = ${g.value}`);this.opts.observer&&this.opts.observer({metadata:this,tag:{type:"common",id:g.id,value:g.value}})}}MetadataCollector$1.MetadataCollector=MetadataCollector;function joinArtists(h){return h.length>2?h.slice(0,h.length-1).join(", ")+" & "+h[h.length-1]:h.join(" & ")}MetadataCollector$1.joinArtists=joinArtists;var AiffParser={},ID3v2Parser$1={},FrameParser$1={},ID3v2Token={};(function(h){Object.defineProperty(h,"__esModule",{value:!0}),h.TextEncodingToken=h.ExtendedHeader=h.ID3v2Header=h.UINT32SYNCSAFE=h.AttachedPictureType=void 0;const d=lib$1,g=Util;(function(b){b[b.Other=0]="Other",b[b["32x32 pixels 'file icon' (PNG only)"]=1]="32x32 pixels 'file icon' (PNG only)",b[b["Other file icon"]=2]="Other file icon",b[b["Cover (front)"]=3]="Cover (front)",b[b["Cover (back)"]=4]="Cover (back)",b[b["Leaflet page"]=5]="Leaflet page",b[b["Media (e.g. label side of CD)"]=6]="Media (e.g. label side of CD)",b[b["Lead artist/lead performer/soloist"]=7]="Lead artist/lead performer/soloist",b[b["Artist/performer"]=8]="Artist/performer",b[b.Conductor=9]="Conductor",b[b["Band/Orchestra"]=10]="Band/Orchestra",b[b.Composer=11]="Composer",b[b["Lyricist/text writer"]=12]="Lyricist/text writer",b[b["Recording Location"]=13]="Recording Location",b[b["During recording"]=14]="During recording",b[b["During performance"]=15]="During performance",b[b["Movie/video screen capture"]=16]="Movie/video screen capture",b[b["A bright coloured fish"]=17]="A bright coloured fish",b[b.Illustration=18]="Illustration",b[b["Band/artist logotype"]=19]="Band/artist logotype",b[b["Publisher/Studio logotype"]=20]="Publisher/Studio logotype"})(h.AttachedPictureType||(h.AttachedPictureType={})),h.UINT32SYNCSAFE={get:(b,_)=>b[_+3]&127|b[_+2]<<7|b[_+1]<<14|b[_]<<21,len:4},h.ID3v2Header={len:10,get:(b,_)=>({fileIdentifier:new d.StringType(3,"ascii").get(b,_),version:{major:d.INT8.get(b,_+3),revision:d.INT8.get(b,_+4)},flags:{unsynchronisation:g.getBit(b,_+5,7),isExtendedHeader:g.getBit(b,_+5,6),expIndicator:g.getBit(b,_+5,5),footer:g.getBit(b,_+5,4)},size:h.UINT32SYNCSAFE.get(b,_+6)})},h.ExtendedHeader={len:10,get:(b,_)=>({size:d.UINT32_BE.get(b,_),extendedFlags:d.UINT16_BE.get(b,_+4),sizeOfPadding:d.UINT32_BE.get(b,_+6),crcDataPresent:g.getBit(b,_+4,31)})},h.TextEncodingToken={len:1,get:(b,_)=>{switch(b[_]){case 0:return{encoding:"latin1"};case 1:return{encoding:"utf16le",bom:!0};case 2:return{encoding:"utf16le",bom:!1};case 3:return{encoding:"utf8",bom:!1};default:return{encoding:"utf8",bom:!1}}}}})(ID3v2Token);var ID3v1Parser={},BasicParser$1={};Object.defineProperty(BasicParser$1,"__esModule",{value:!0});BasicParser$1.BasicParser=void 0;class BasicParser{init(d,g,b){return this.metadata=d,this.tokenizer=g,this.options=b,this}}BasicParser$1.BasicParser=BasicParser;var APEv2Parser$1={},APEv2Token={},FourCC={};(function(h){Object.defineProperty(h,"__esModule",{value:!0}),h.FourCcToken=void 0;const d=Util,g=/^[\x21-\x7e][\x20-\x7e\x00()]{3}/;h.FourCcToken={len:4,get:(b,_)=>{const $=b.toString("binary",_,_+h.FourCcToken.len);if(!$.match(g))throw new Error(`FourCC contains invalid characters: ${d.a2hex($)} "${$}"`);return $},put:(b,_,$)=>{const j=Buffer.from($,"binary");if(j.length!==4)throw new Error("Invalid length");return j.copy(b,_)}}})(FourCC);(function(h){Object.defineProperty(h,"__esModule",{value:!0}),h.isBitSet=h.parseTagFlags=h.TagField=h.TagItemHeader=h.TagFooter=h.Header=h.DescriptorParser=h.DataType=void 0;const d=lib$1,g=FourCC;(function(j){j[j.text_utf8=0]="text_utf8",j[j.binary=1]="binary",j[j.external_info=2]="external_info",j[j.reserved=3]="reserved"})(h.DataType||(h.DataType={})),h.DescriptorParser={len:52,get:(j,_e)=>({ID:g.FourCcToken.get(j,_e),version:d.UINT32_LE.get(j,_e+4)/1e3,descriptorBytes:d.UINT32_LE.get(j,_e+8),headerBytes:d.UINT32_LE.get(j,_e+12),seekTableBytes:d.UINT32_LE.get(j,_e+16),headerDataBytes:d.UINT32_LE.get(j,_e+20),apeFrameDataBytes:d.UINT32_LE.get(j,_e+24),apeFrameDataBytesHigh:d.UINT32_LE.get(j,_e+28),terminatingDataBytes:d.UINT32_LE.get(j,_e+32),fileMD5:new d.Uint8ArrayType(16).get(j,_e+36)})},h.Header={len:24,get:(j,_e)=>({compressionLevel:d.UINT16_LE.get(j,_e),formatFlags:d.UINT16_LE.get(j,_e+2),blocksPerFrame:d.UINT32_LE.get(j,_e+4),finalFrameBlocks:d.UINT32_LE.get(j,_e+8),totalFrames:d.UINT32_LE.get(j,_e+12),bitsPerSample:d.UINT16_LE.get(j,_e+16),channel:d.UINT16_LE.get(j,_e+18),sampleRate:d.UINT32_LE.get(j,_e+20)})},h.TagFooter={len:32,get:(j,_e)=>({ID:new d.StringType(8,"ascii").get(j,_e),version:d.UINT32_LE.get(j,_e+8),size:d.UINT32_LE.get(j,_e+12),fields:d.UINT32_LE.get(j,_e+16),flags:_(d.UINT32_LE.get(j,_e+20))})},h.TagItemHeader={len:8,get:(j,_e)=>({size:d.UINT32_LE.get(j,_e),flags:_(d.UINT32_LE.get(j,_e+4))})};const b=j=>new d.Uint8ArrayType(j.size-h.TagFooter.len);h.TagField=b;function _(j){return{containsHeader:$(j,31),containsFooter:$(j,30),isHeader:$(j,31),readOnly:$(j,0),dataType:(j&6)>>1}}h.parseTagFlags=_;function $(j,_e){return(j&1<<_e)!==0}h.isBitSet=$})(APEv2Token);Object.defineProperty(APEv2Parser$1,"__esModule",{value:!0});APEv2Parser$1.APEv2Parser=void 0;const debug_1$m=browserExports$2,strtok3$4=core$1,token_types_1$2=lib$1,util$a=Util,BasicParser_1$b=BasicParser$1,APEv2Token_1=APEv2Token,debug$m=(0,debug_1$m.default)("music-metadata:parser:APEv2"),tagFormat$1="APEv2",preamble="APETAGEX";class APEv2Parser extends BasicParser_1$b.BasicParser{constructor(){super(...arguments),this.ape={}}static tryParseApeHeader(d,g,b){const _=new APEv2Parser;return _.init(d,g,b),_.tryParseApeHeader()}static calculateDuration(d){let g=d.totalFrames>1?d.blocksPerFrame*(d.totalFrames-1):0;return g+=d.finalFrameBlocks,g/d.sampleRate}static async findApeFooterOffset(d,g){const b=Buffer.alloc(APEv2Token_1.TagFooter.len);await d.randomRead(b,0,APEv2Token_1.TagFooter.len,g-APEv2Token_1.TagFooter.len);const _=APEv2Token_1.TagFooter.get(b,0);if(_.ID==="APETAGEX")return debug$m(`APE footer header at offset=${g}`),{footer:_,offset:g-_.size}}static parseTagFooter(d,g,b){const _=APEv2Token_1.TagFooter.get(g,g.length-APEv2Token_1.TagFooter.len);if(_.ID!==preamble)throw new Error("Unexpected APEv2 Footer ID preamble value.");strtok3$4.fromBuffer(g);const $=new APEv2Parser;return $.init(d,strtok3$4.fromBuffer(g),b),$.parseTags(_)}async tryParseApeHeader(){if(this.tokenizer.fileInfo.size&&this.tokenizer.fileInfo.size-this.tokenizer.position<APEv2Token_1.TagFooter.len){debug$m("No APEv2 header found, end-of-file reached");return}const d=await this.tokenizer.peekToken(APEv2Token_1.TagFooter);if(d.ID===preamble)return await this.tokenizer.ignore(APEv2Token_1.TagFooter.len),this.parseTags(d);if(debug$m(`APEv2 header not found at offset=${this.tokenizer.position}`),this.tokenizer.fileInfo.size){const g=this.tokenizer.fileInfo.size-this.tokenizer.position,b=Buffer.alloc(g);return await this.tokenizer.readBuffer(b),APEv2Parser.parseTagFooter(this.metadata,b,this.options)}}async parse(){const d=await this.tokenizer.readToken(APEv2Token_1.DescriptorParser);if(d.ID!=="MAC ")throw new Error("Unexpected descriptor ID");this.ape.descriptor=d;const g=d.descriptorBytes-APEv2Token_1.DescriptorParser.len,b=await(g>0?this.parseDescriptorExpansion(g):this.parseHeader());return await this.tokenizer.ignore(b.forwardBytes),this.tryParseApeHeader()}async parseTags(d){const g=Buffer.alloc(256);let b=d.size-APEv2Token_1.TagFooter.len;debug$m(`Parse APE tags at offset=${this.tokenizer.position}, size=${b}`);for(let _=0;_<d.fields;_++){if(b<APEv2Token_1.TagItemHeader.len){this.metadata.addWarning(`APEv2 Tag-header: ${d.fields-_} items remaining, but no more tag data to read.`);break}const $=await this.tokenizer.readToken(APEv2Token_1.TagItemHeader);b-=APEv2Token_1.TagItemHeader.len+$.size,await this.tokenizer.peekBuffer(g,{length:Math.min(g.length,b)});let j=util$a.findZero(g,0,g.length);const _e=await this.tokenizer.readToken(new token_types_1$2.StringType(j,"ascii"));switch(await this.tokenizer.ignore(1),b-=_e.length+1,$.flags.dataType){case APEv2Token_1.DataType.text_utf8:{const rt=(await this.tokenizer.readToken(new token_types_1$2.StringType($.size,"utf8"))).split(/\x00/g);for(const nt of rt)this.metadata.addTag(tagFormat$1,_e,nt);break}case APEv2Token_1.DataType.binary:if(this.options.skipCovers)await this.tokenizer.ignore($.size);else{const et=Buffer.alloc($.size);await this.tokenizer.readBuffer(et),j=util$a.findZero(et,0,et.length);const rt=et.toString("utf8",0,j),nt=Buffer.from(et.slice(j+1));this.metadata.addTag(tagFormat$1,_e,{description:rt,data:nt})}break;case APEv2Token_1.DataType.external_info:debug$m(`Ignore external info ${_e}`),await this.tokenizer.ignore($.size);break;case APEv2Token_1.DataType.reserved:debug$m(`Ignore external info ${_e}`),this.metadata.addWarning(`APEv2 header declares a reserved datatype for "${_e}"`),await this.tokenizer.ignore($.size);break}}}async parseDescriptorExpansion(d){return await this.tokenizer.ignore(d),this.parseHeader()}async parseHeader(){const d=await this.tokenizer.readToken(APEv2Token_1.Header);return this.metadata.setFormat("lossless",!0),this.metadata.setFormat("container","Monkey's Audio"),this.metadata.setFormat("bitsPerSample",d.bitsPerSample),this.metadata.setFormat("sampleRate",d.sampleRate),this.metadata.setFormat("numberOfChannels",d.channel),this.metadata.setFormat("duration",APEv2Parser.calculateDuration(d)),{forwardBytes:this.ape.descriptor.seekTableBytes+this.ape.descriptor.headerDataBytes+this.ape.descriptor.apeFrameDataBytes+this.ape.descriptor.terminatingDataBytes}}}APEv2Parser$1.APEv2Parser=APEv2Parser;(function(h){Object.defineProperty(h,"__esModule",{value:!0}),h.hasID3v1Header=h.ID3v1Parser=h.Genres=void 0;const d=browserExports$2,g=lib$1,b=Util,_=BasicParser$1,$=APEv2Parser$1,j=(0,d.default)("music-metadata:parser:ID3v1");h.Genres=["Blues","Classic Rock","Country","Dance","Disco","Funk","Grunge","Hip-Hop","Jazz","Metal","New Age","Oldies","Other","Pop","R&B","Rap","Reggae","Rock","Techno","Industrial","Alternative","Ska","Death Metal","Pranks","Soundtrack","Euro-Techno","Ambient","Trip-Hop","Vocal","Jazz+Funk","Fusion","Trance","Classical","Instrumental","Acid","House","Game","Sound Clip","Gospel","Noise","Alt. Rock","Bass","Soul","Punk","Space","Meditative","Instrumental Pop","Instrumental Rock","Ethnic","Gothic","Darkwave","Techno-Industrial","Electronic","Pop-Folk","Eurodance","Dream","Southern Rock","Comedy","Cult","Gangsta Rap","Top 40","Christian Rap","Pop/Funk","Jungle","Native American","Cabaret","New Wave","Psychedelic","Rave","Showtunes","Trailer","Lo-Fi","Tribal","Acid Punk","Acid Jazz","Polka","Retro","Musical","Rock & Roll","Hard Rock","Folk","Folk/Rock","National Folk","Swing","Fast-Fusion","Bebob","Latin","Revival","Celtic","Bluegrass","Avantgarde","Gothic Rock","Progressive Rock","Psychedelic Rock","Symphonic Rock","Slow Rock","Big Band","Chorus","Easy Listening","Acoustic","Humour","Speech","Chanson","Opera","Chamber Music","Sonata","Symphony","Booty Bass","Primus","Porn Groove","Satire","Slow Jam","Club","Tango","Samba","Folklore","Ballad","Power Ballad","Rhythmic Soul","Freestyle","Duet","Punk Rock","Drum Solo","A Cappella","Euro-House","Dance Hall","Goa","Drum & Bass","Club-House","Hardcore","Terror","Indie","BritPop","Negerpunk","Polsk Punk","Beat","Christian Gangsta Rap","Heavy Metal","Black Metal","Crossover","Contemporary Christian","Christian Rock","Merengue","Salsa","Thrash Metal","Anime","JPop","Synthpop","Abstract","Art Rock","Baroque","Bhangra","Big Beat","Breakbeat","Chillout","Downtempo","Dub","EBM","Eclectic","Electro","Electroclash","Emo","Experimental","Garage","Global","IDM","Illbient","Industro-Goth","Jam Band","Krautrock","Leftfield","Lounge","Math Rock","New Romantic","Nu-Breakz","Post-Punk","Post-Rock","Psytrance","Shoegaze","Space Rock","Trop Rock","World Music","Neoclassical","Audiobook","Audio Theatre","Neue Deutsche Welle","Podcast","Indie Rock","G-Funk","Dubstep","Garage Rock","Psybient"];const _e={len:128,get:(st,at)=>{const it=new et(3).get(st,at);return it==="TAG"?{header:it,title:new et(30).get(st,at+3),artist:new et(30).get(st,at+33),album:new et(30).get(st,at+63),year:new et(4).get(st,at+93),comment:new et(28).get(st,at+97),zeroByte:g.UINT8.get(st,at+127),track:g.UINT8.get(st,at+126),genre:g.UINT8.get(st,at+127)}:null}};class et extends g.StringType{constructor(at){super(at,"binary")}get(at,it){let dt=super.get(at,it);return dt=b.trimRightNull(dt),dt=dt.trim(),dt.length>0?dt:void 0}}class rt extends _.BasicParser{static getGenre(at){if(at<h.Genres.length)return h.Genres[at]}async parse(){if(!this.tokenizer.fileInfo.size){j("Skip checking for ID3v1 because the file-size is unknown");return}if(this.options.apeHeader){this.tokenizer.ignore(this.options.apeHeader.offset-this.tokenizer.position);const dt=new $.APEv2Parser;dt.init(this.metadata,this.tokenizer,this.options),await dt.parseTags(this.options.apeHeader.footer)}const at=this.tokenizer.fileInfo.size-_e.len;if(this.tokenizer.position>at){j("Already consumed the last 128 bytes");return}const it=await this.tokenizer.readToken(_e,at);if(it){j("ID3v1 header found at: pos=%s",this.tokenizer.fileInfo.size-_e.len);for(const ot of["title","artist","album","comment","track","year"])it[ot]&&it[ot]!==""&&this.addTag(ot,it[ot]);const dt=rt.getGenre(it.genre);dt&&this.addTag("genre",dt)}else j("ID3v1 header not found at: pos=%s",this.tokenizer.fileInfo.size-_e.len)}addTag(at,it){this.metadata.addTag("ID3v1",at,it)}}h.ID3v1Parser=rt;async function nt(st){if(st.fileSize>=128){const at=Buffer.alloc(3);return await st.randomRead(at,0,at.length,st.fileSize-128),at.toString("binary")==="TAG"}return!1}h.hasID3v1Header=nt})(ID3v1Parser);Object.defineProperty(FrameParser$1,"__esModule",{value:!0});FrameParser$1.FrameParser=FrameParser$1.parseGenre=void 0;const debug_1$l=browserExports$2,Token$r=lib$1,util$9=Util,ID3v2Token_1$3=ID3v2Token,ID3v1Parser_1$3=ID3v1Parser,debug$l=(0,debug_1$l.default)("music-metadata:id3v2:frame-parser"),defaultEnc="latin1";function parseGenre(h){const d=[];let g,b="";for(const _ of h)if(typeof g=="string")if(_==="("&&g==="")b+="(",g=void 0;else if(_===")"){b!==""&&(d.push(b),b="");const $=parseGenreCode(g);$&&d.push($),g=void 0}else g+=_;else _==="("?g="":b+=_;return b&&(d.length===0&&b.match(/^\d*$/)&&(b=ID3v1Parser_1$3.Genres[b]),d.push(b)),d}FrameParser$1.parseGenre=parseGenre;function parseGenreCode(h){if(h==="RX")return"Remix";if(h==="CR")return"Cover";if(h.match(/^\d*$/))return ID3v1Parser_1$3.Genres[h]}class FrameParser{constructor(d,g){this.major=d,this.warningCollector=g}readData(d,g,b){if(d.length===0){this.warningCollector.addWarning(`id3v2.${this.major} header has empty tag type=${g}`);return}const{encoding:_,bom:$}=ID3v2Token_1$3.TextEncodingToken.get(d,0),j=d.length;let _e=0,et=[];const rt=FrameParser.getNullTerminatorLength(_);let nt;const st={};switch(debug$l(`Parsing tag type=${g}, encoding=${_}, bom=${$}`),g!=="TXXX"&&g[0]==="T"?"T*":g){case"T*":case"IPLS":case"MVIN":case"MVNM":case"PCS":case"PCST":let at;try{at=util$9.decodeString(d.slice(1),_).replace(/\x00+$/,"")}catch(ot){this.warningCollector.addWarning(`id3v2.${this.major} type=${g} header has invalid string value: ${ot.message}`)}switch(g){case"TMCL":case"TIPL":case"IPLS":et=this.splitValue(g,at),et=FrameParser.functionList(et);break;case"TRK":case"TRCK":case"TPOS":et=at;break;case"TCOM":case"TEXT":case"TOLY":case"TOPE":case"TPE1":case"TSRC":et=this.splitValue(g,at);break;case"TCO":case"TCON":et=this.splitValue(g,at).map(ot=>parseGenre(ot)).reduce((ot,ct)=>ot.concat(ct),[]);break;case"PCS":case"PCST":et=this.major>=4?this.splitValue(g,at):[at],et=Array.isArray(et)&&et[0]===""?1:0;break;default:et=this.major>=4?this.splitValue(g,at):[at]}break;case"TXXX":et=FrameParser.readIdentifierAndData(d,_e+1,j,_),et={description:et.id,text:this.splitValue(g,util$9.decodeString(et.data,_).replace(/\x00+$/,""))};break;case"PIC":case"APIC":if(b){const ot={};switch(_e+=1,this.major){case 2:ot.format=util$9.decodeString(d.slice(_e,_e+3),"latin1"),_e+=3;break;case 3:case 4:nt=util$9.findZero(d,_e,j,defaultEnc),ot.format=util$9.decodeString(d.slice(_e,nt),defaultEnc),_e=nt+1;break;default:throw new Error("Warning: unexpected major versionIndex: "+this.major)}ot.format=FrameParser.fixPictureMimeType(ot.format),ot.type=ID3v2Token_1$3.AttachedPictureType[d[_e]],_e+=1,nt=util$9.findZero(d,_e,j,_),ot.description=util$9.decodeString(d.slice(_e,nt),_),_e=nt+rt,ot.data=Buffer.from(d.slice(_e,j)),et=ot}break;case"CNT":case"PCNT":et=Token$r.UINT32_BE.get(d,0);break;case"SYLT":for(_e+=7,et=[];_e<j;){const ot=d.slice(_e,_e=util$9.findZero(d,_e,j,_));_e+=5,et.push(util$9.decodeString(ot,_))}break;case"ULT":case"USLT":case"COM":case"COMM":_e+=1,st.language=util$9.decodeString(d.slice(_e,_e+3),defaultEnc),_e+=3,nt=util$9.findZero(d,_e,j,_),st.description=util$9.decodeString(d.slice(_e,nt),_),_e=nt+rt,st.text=util$9.decodeString(d.slice(_e,j),_).replace(/\x00+$/,""),et=[st];break;case"UFID":et=FrameParser.readIdentifierAndData(d,_e,j,defaultEnc),et={owner_identifier:et.id,identifier:et.data};break;case"PRIV":et=FrameParser.readIdentifierAndData(d,_e,j,defaultEnc),et={owner_identifier:et.id,data:et.data};break;case"POPM":nt=util$9.findZero(d,_e,j,defaultEnc);const it=util$9.decodeString(d.slice(_e,nt),defaultEnc);_e=nt+1;const dt=j-_e;et={email:it,rating:Token$r.UINT8.get(d,_e),counter:dt>=5?Token$r.UINT32_BE.get(d,_e+1):void 0};break;case"GEOB":{nt=util$9.findZero(d,_e+1,j,_);const ot=util$9.decodeString(d.slice(_e+1,nt),defaultEnc);_e=nt+1,nt=util$9.findZero(d,_e,j-_e,_);const ct=util$9.decodeString(d.slice(_e,nt),defaultEnc);_e=nt+1,nt=util$9.findZero(d,_e,j-_e,_);const lt=util$9.decodeString(d.slice(_e,nt),defaultEnc);et={type:ot,filename:ct,description:lt,data:d.slice(_e+1,j)};break}case"WCOM":case"WCOP":case"WOAF":case"WOAR":case"WOAS":case"WORS":case"WPAY":case"WPUB":et=util$9.decodeString(d.slice(_e,nt),defaultEnc);break;case"WXXX":{nt=util$9.findZero(d,_e+1,j,_);const ot=util$9.decodeString(d.slice(_e+1,nt),_);_e=nt+(_==="utf16le"?2:1),et={description:ot,url:util$9.decodeString(d.slice(_e,j),defaultEnc)};break}case"WFD":case"WFED":et=util$9.decodeString(d.slice(_e+1,util$9.findZero(d,_e+1,j,_)),_);break;case"MCDI":{et=d.slice(0,j);break}default:debug$l("Warning: unsupported id3v2-tag-type: "+g);break}return et}static fixPictureMimeType(d){switch(d=d.toLocaleLowerCase(),d){case"jpg":return"image/jpeg";case"png":return"image/png"}return d}static functionList(d){const g={};for(let b=0;b+1<d.length;b+=2){const _=d[b+1].split(",");g[d[b]]=g.hasOwnProperty(d[b])?g[d[b]].concat(_):_}return g}splitValue(d,g){let b;return this.major<4?(b=g.split(/\x00/g),b.length>1?this.warningCollector.addWarning(`ID3v2.${this.major} ${d} uses non standard null-separator.`):b=g.split(/\//g)):b=g.split(/\x00/g),FrameParser.trimArray(b)}static trimArray(d){return d.map(g=>g.replace(/\x00+$/,"").trim())}static readIdentifierAndData(d,g,b,_){const $=util$9.findZero(d,g,b,_),j=util$9.decodeString(d.slice(g,$),_);return g=$+FrameParser.getNullTerminatorLength(_),{id:j,data:d.slice(g,b)}}static getNullTerminatorLength(d){return d==="utf16le"?2:1}}FrameParser$1.FrameParser=FrameParser;Object.defineProperty(ID3v2Parser$1,"__esModule",{value:!0});ID3v2Parser$1.ID3v2Parser=void 0;const Token$q=lib$1,util$8=Util,FrameParser_1=FrameParser$1,ID3v2Token_1$2=ID3v2Token;class ID3v2Parser{static removeUnsyncBytes(d){let g=0,b=0;for(;g<d.length-1;)g!==b&&(d[b]=d[g]),g+=d[g]===255&&d[g+1]===0?2:1,b++;return g<d.length&&(d[b++]=d[g]),d.slice(0,b)}static getFrameHeaderLength(d){switch(d){case 2:return 6;case 3:case 4:return 10;default:throw new Error("header versionIndex is incorrect")}}static readFrameFlags(d){return{status:{tag_alter_preservation:util$8.getBit(d,0,6),file_alter_preservation:util$8.getBit(d,0,5),read_only:util$8.getBit(d,0,4)},format:{grouping_identity:util$8.getBit(d,1,7),compression:util$8.getBit(d,1,3),encryption:util$8.getBit(d,1,2),unsynchronisation:util$8.getBit(d,1,1),data_length_indicator:util$8.getBit(d,1,0)}}}static readFrameData(d,g,b,_,$){const j=new FrameParser_1.FrameParser(b,$);switch(b){case 2:return j.readData(d,g.id,_);case 3:case 4:return g.flags.format.unsynchronisation&&(d=ID3v2Parser.removeUnsyncBytes(d)),g.flags.format.data_length_indicator&&(d=d.slice(4,d.length)),j.readData(d,g.id,_);default:throw new Error("Unexpected majorVer: "+b)}}static makeDescriptionTagName(d,g){return d+(g?":"+g:"")}async parse(d,g,b){this.tokenizer=g,this.metadata=d,this.options=b;const _=await this.tokenizer.readToken(ID3v2Token_1$2.ID3v2Header);if(_.fileIdentifier!=="ID3")throw new Error("expected ID3-header file-identifier 'ID3' was not found");return this.id3Header=_,this.headerType="ID3v2."+_.version.major,_.flags.isExtendedHeader?this.parseExtendedHeader():this.parseId3Data(_.size)}async parseExtendedHeader(){const d=await this.tokenizer.readToken(ID3v2Token_1$2.ExtendedHeader),g=d.size-ID3v2Token_1$2.ExtendedHeader.len;return g>0?this.parseExtendedHeaderData(g,d.size):this.parseId3Data(this.id3Header.size-d.size)}async parseExtendedHeaderData(d,g){return await this.tokenizer.ignore(d),this.parseId3Data(this.id3Header.size-g)}async parseId3Data(d){const g=await this.tokenizer.readToken(new Token$q.Uint8ArrayType(d));for(const b of this.parseMetadata(g))if(b.id==="TXXX"){if(b.value)for(const _ of b.value.text)this.addTag(ID3v2Parser.makeDescriptionTagName(b.id,b.value.description),_)}else if(b.id==="COM")for(const _ of b.value)this.addTag(ID3v2Parser.makeDescriptionTagName(b.id,_.description),_.text);else if(b.id==="COMM")for(const _ of b.value)this.addTag(ID3v2Parser.makeDescriptionTagName(b.id,_.description),_);else if(Array.isArray(b.value))for(const _ of b.value)this.addTag(b.id,_);else this.addTag(b.id,b.value)}addTag(d,g){this.metadata.addTag(this.headerType,d,g)}parseMetadata(d){let g=0;const b=[];for(;g!==d.length;){const _=ID3v2Parser.getFrameHeaderLength(this.id3Header.version.major);if(g+_>d.length){this.metadata.addWarning("Illegal ID3v2 tag length");break}const $=d.slice(g,g+=_),j=this.readFrameHeader($,this.id3Header.version.major),_e=d.slice(g,g+=j.length),et=ID3v2Parser.readFrameData(_e,j,this.id3Header.version.major,!this.options.skipCovers,this.metadata);et&&b.push({id:j.id,value:et})}return b}readFrameHeader(d,g){let b;switch(g){case 2:b={id:Buffer.from(d.slice(0,3)).toString("ascii"),length:Token$q.UINT24_BE.get(d,3)},b.id.match(/[A-Z0-9]{3}/g)||this.metadata.addWarning(`Invalid ID3v2.${this.id3Header.version.major} frame-header-ID: ${b.id}`);break;case 3:case 4:b={id:Buffer.from(d.slice(0,4)).toString("ascii"),length:(g===4?ID3v2Token_1$2.UINT32SYNCSAFE:Token$q.UINT32_BE).get(d,4),flags:ID3v2Parser.readFrameFlags(d.slice(8,10))},b.id.match(/[A-Z0-9]{4}/g)||this.metadata.addWarning(`Invalid ID3v2.${this.id3Header.version.major} frame-header-ID: ${b.id}`);break;default:throw new Error("Unexpected majorVer: "+g)}return b}}ID3v2Parser$1.ID3v2Parser=ID3v2Parser;var AiffToken$1={};Object.defineProperty(AiffToken$1,"__esModule",{value:!0});AiffToken$1.Common=void 0;const Token$p=lib$1,FourCC_1$a=FourCC;class Common{constructor(d,g){this.isAifc=g;const b=g?22:18;if(d.chunkSize<b)throw new Error(`COMMON CHUNK size should always be at least ${b}`);this.len=d.chunkSize}get(d,g){const b=d.readUInt16BE(g+8)-16398,_=d.readUInt16BE(g+8+2),$={numChannels:d.readUInt16BE(g),numSampleFrames:d.readUInt32BE(g+2),sampleSize:d.readUInt16BE(g+6),sampleRate:b<0?_>>Math.abs(b):_<<b};if(this.isAifc){if($.compressionType=FourCC_1$a.FourCcToken.get(d,g+18),this.len>22){const j=d.readInt8(g+22);if(j>0){const _e=(j+1)%2;if(23+j+_e===this.len)$.compressionName=new Token$p.StringType(j,"binary").get(d,g+23);else throw new Error("Illegal pstring length")}else $.compressionName=void 0}}else $.compressionName="PCM";return $}}AiffToken$1.Common=Common;var iff$1={};Object.defineProperty(iff$1,"__esModule",{value:!0});iff$1.Header=void 0;const Token$o=lib$1,FourCC_1$9=FourCC;iff$1.Header={len:8,get:(h,d)=>({chunkID:FourCC_1$9.FourCcToken.get(h,d),chunkSize:Number(BigInt(Token$o.UINT32_BE.get(h,d+4)))})};Object.defineProperty(AiffParser,"__esModule",{value:!0});AiffParser.AIFFParser=void 0;const Token$n=lib$1,debug_1$k=browserExports$2,strtok3$3=core$1,ID3v2Parser_1$4=ID3v2Parser$1,FourCC_1$8=FourCC,BasicParser_1$a=BasicParser$1,AiffToken=AiffToken$1,iff=iff$1,debug$k=(0,debug_1$k.default)("music-metadata:parser:aiff"),compressionTypes={NONE:"not compressed	PCM	Apple Computer",sowt:"PCM (byte swapped)",fl32:"32-bit floating point IEEE 32-bit float",fl64:"64-bit floating point IEEE 64-bit float	Apple Computer",alaw:"ALaw 2:1	8-bit ITU-T G.711 A-law",ulaw:"Law 2:1	8-bit ITU-T G.711 -law	Apple Computer",ULAW:"CCITT G.711 u-law 8-bit ITU-T G.711 -law",ALAW:"CCITT G.711 A-law 8-bit ITU-T G.711 A-law",FL32:"Float 32	IEEE 32-bit float "};class AIFFParser extends BasicParser_1$a.BasicParser{async parse(){if((await this.tokenizer.readToken(iff.Header)).chunkID!=="FORM")throw new Error("Invalid Chunk-ID, expected 'FORM'");const g=await this.tokenizer.readToken(FourCC_1$8.FourCcToken);switch(g){case"AIFF":this.metadata.setFormat("container",g),this.isCompressed=!1;break;case"AIFC":this.metadata.setFormat("container","AIFF-C"),this.isCompressed=!0;break;default:throw Error("Unsupported AIFF type: "+g)}this.metadata.setFormat("lossless",!this.isCompressed);try{for(;!this.tokenizer.fileInfo.size||this.tokenizer.fileInfo.size-this.tokenizer.position>=iff.Header.len;){debug$k("Reading AIFF chunk at offset="+this.tokenizer.position);const b=await this.tokenizer.readToken(iff.Header),_=2*Math.round(b.chunkSize/2),$=await this.readData(b);await this.tokenizer.ignore(_-$)}}catch(b){if(b instanceof strtok3$3.EndOfStreamError)debug$k("End-of-stream");else throw b}}async readData(d){var g;switch(d.chunkID){case"COMM":const b=await this.tokenizer.readToken(new AiffToken.Common(d,this.isCompressed));return this.metadata.setFormat("bitsPerSample",b.sampleSize),this.metadata.setFormat("sampleRate",b.sampleRate),this.metadata.setFormat("numberOfChannels",b.numChannels),this.metadata.setFormat("numberOfSamples",b.numSampleFrames),this.metadata.setFormat("duration",b.numSampleFrames/b.sampleRate),this.metadata.setFormat("codec",(g=b.compressionName)!==null&&g!==void 0?g:compressionTypes[b.compressionType]),d.chunkSize;case"ID3 ":const _=await this.tokenizer.readToken(new Token$n.Uint8ArrayType(d.chunkSize)),$=strtok3$3.fromBuffer(_);return await new ID3v2Parser_1$4.ID3v2Parser().parse(this.metadata,$,this.options),d.chunkSize;case"SSND":return this.metadata.format.duration&&this.metadata.setFormat("bitrate",8*d.chunkSize/this.metadata.format.duration),0;case"NAME":case"AUTH":case"(c) ":case"ANNO":return this.readTextChunk(d);default:return debug$k(`Ignore chunk id=${d.chunkID}, size=${d.chunkSize}`),0}}async readTextChunk(d){return(await this.tokenizer.readToken(new Token$n.StringType(d.chunkSize,"ascii"))).split("\0").map(b=>b.trim()).filter(b=>b&&b.length>0).forEach(b=>{this.metadata.addTag("AIFF",d.chunkID,b.trim())}),d.chunkSize}}AiffParser.AIFFParser=AIFFParser;var AsfParser$1={},GUID$1={};Object.defineProperty(GUID$1,"__esModule",{value:!0});class GUID{static fromBin(d,g=0){return new GUID(this.decode(d,g))}static decode(d,g=0){return(d.readUInt32LE(g).toString(16)+"-"+d.readUInt16LE(g+4).toString(16)+"-"+d.readUInt16LE(g+6).toString(16)+"-"+d.readUInt16BE(g+8).toString(16)+"-"+d.slice(g+10,g+16).toString("hex")).toUpperCase()}static decodeMediaType(d){switch(d.str){case GUID.AudioMedia.str:return"audio";case GUID.VideoMedia.str:return"video";case GUID.CommandMedia.str:return"command";case GUID.Degradable_JPEG_Media.str:return"degradable-jpeg";case GUID.FileTransferMedia.str:return"file-transfer";case GUID.BinaryMedia.str:return"binary"}}static encode(d){const g=Buffer.alloc(16);return g.writeUInt32LE(parseInt(d.slice(0,8),16),0),g.writeUInt16LE(parseInt(d.slice(9,13),16),4),g.writeUInt16LE(parseInt(d.slice(14,18),16),6),Buffer.from(d.slice(19,23),"hex").copy(g,8),Buffer.from(d.slice(24),"hex").copy(g,10),g}constructor(d){this.str=d}equals(d){return this.str===d.str}toBin(){return GUID.encode(this.str)}}GUID.HeaderObject=new GUID("75B22630-668E-11CF-A6D9-00AA0062CE6C");GUID.DataObject=new GUID("75B22636-668E-11CF-A6D9-00AA0062CE6C");GUID.SimpleIndexObject=new GUID("33000890-E5B1-11CF-89F4-00A0C90349CB");GUID.IndexObject=new GUID("D6E229D3-35DA-11D1-9034-00A0C90349BE");GUID.MediaObjectIndexObject=new GUID("FEB103F8-12AD-4C64-840F-2A1D2F7AD48C");GUID.TimecodeIndexObject=new GUID("3CB73FD0-0C4A-4803-953D-EDF7B6228F0C");GUID.FilePropertiesObject=new GUID("8CABDCA1-A947-11CF-8EE4-00C00C205365");GUID.StreamPropertiesObject=new GUID("B7DC0791-A9B7-11CF-8EE6-00C00C205365");GUID.HeaderExtensionObject=new GUID("5FBF03B5-A92E-11CF-8EE3-00C00C205365");GUID.CodecListObject=new GUID("86D15240-311D-11D0-A3A4-00A0C90348F6");GUID.ScriptCommandObject=new GUID("1EFB1A30-0B62-11D0-A39B-00A0C90348F6");GUID.MarkerObject=new GUID("F487CD01-A951-11CF-8EE6-00C00C205365");GUID.BitrateMutualExclusionObject=new GUID("D6E229DC-35DA-11D1-9034-00A0C90349BE");GUID.ErrorCorrectionObject=new GUID("75B22635-668E-11CF-A6D9-00AA0062CE6C");GUID.ContentDescriptionObject=new GUID("75B22633-668E-11CF-A6D9-00AA0062CE6C");GUID.ExtendedContentDescriptionObject=new GUID("D2D0A440-E307-11D2-97F0-00A0C95EA850");GUID.ContentBrandingObject=new GUID("2211B3FA-BD23-11D2-B4B7-00A0C955FC6E");GUID.StreamBitratePropertiesObject=new GUID("7BF875CE-468D-11D1-8D82-006097C9A2B2");GUID.ContentEncryptionObject=new GUID("2211B3FB-BD23-11D2-B4B7-00A0C955FC6E");GUID.ExtendedContentEncryptionObject=new GUID("298AE614-2622-4C17-B935-DAE07EE9289C");GUID.DigitalSignatureObject=new GUID("2211B3FC-BD23-11D2-B4B7-00A0C955FC6E");GUID.PaddingObject=new GUID("1806D474-CADF-4509-A4BA-9AABCB96AAE8");GUID.ExtendedStreamPropertiesObject=new GUID("14E6A5CB-C672-4332-8399-A96952065B5A");GUID.AdvancedMutualExclusionObject=new GUID("A08649CF-4775-4670-8A16-6E35357566CD");GUID.GroupMutualExclusionObject=new GUID("D1465A40-5A79-4338-B71B-E36B8FD6C249");GUID.StreamPrioritizationObject=new GUID("D4FED15B-88D3-454F-81F0-ED5C45999E24");GUID.BandwidthSharingObject=new GUID("A69609E6-517B-11D2-B6AF-00C04FD908E9");GUID.LanguageListObject=new GUID("7C4346A9-EFE0-4BFC-B229-393EDE415C85");GUID.MetadataObject=new GUID("C5F8CBEA-5BAF-4877-8467-AA8C44FA4CCA");GUID.MetadataLibraryObject=new GUID("44231C94-9498-49D1-A141-1D134E457054");GUID.IndexParametersObject=new GUID("D6E229DF-35DA-11D1-9034-00A0C90349BE");GUID.MediaObjectIndexParametersObject=new GUID("6B203BAD-3F11-48E4-ACA8-D7613DE2CFA7");GUID.TimecodeIndexParametersObject=new GUID("F55E496D-9797-4B5D-8C8B-604DFE9BFB24");GUID.CompatibilityObject=new GUID("26F18B5D-4584-47EC-9F5F-0E651F0452C9");GUID.AdvancedContentEncryptionObject=new GUID("43058533-6981-49E6-9B74-AD12CB86D58C");GUID.AudioMedia=new GUID("F8699E40-5B4D-11CF-A8FD-00805F5C442B");GUID.VideoMedia=new GUID("BC19EFC0-5B4D-11CF-A8FD-00805F5C442B");GUID.CommandMedia=new GUID("59DACFC0-59E6-11D0-A3AC-00A0C90348F6");GUID.JFIF_Media=new GUID("B61BE100-5B4E-11CF-A8FD-00805F5C442B");GUID.Degradable_JPEG_Media=new GUID("35907DE0-E415-11CF-A917-00805F5C442B");GUID.FileTransferMedia=new GUID("91BD222C-F21C-497A-8B6D-5AA86BFC0185");GUID.BinaryMedia=new GUID("3AFB65E2-47EF-40F2-AC2C-70A90D71D343");GUID.ASF_Index_Placeholder_Object=new GUID("D9AADE20-7C17-4F9C-BC28-8555DD98E2A2");GUID$1.default=GUID;var AsfObject$1={},AsfUtil$1={};Object.defineProperty(AsfUtil$1,"__esModule",{value:!0});AsfUtil$1.AsfUtil=void 0;const Token$m=lib$1,util$7=Util;class AsfUtil{static getParserForAttr(d){return AsfUtil.attributeParsers[d]}static parseUnicodeAttr(d){return util$7.stripNulls(util$7.decodeString(d,"utf16le"))}static parseByteArrayAttr(d){return Buffer.from(d)}static parseBoolAttr(d,g=0){return AsfUtil.parseWordAttr(d,g)===1}static parseDWordAttr(d,g=0){return d.readUInt32LE(g)}static parseQWordAttr(d,g=0){return Token$m.UINT64_LE.get(d,g)}static parseWordAttr(d,g=0){return d.readUInt16LE(g)}}AsfUtil.attributeParsers=[AsfUtil.parseUnicodeAttr,AsfUtil.parseByteArrayAttr,AsfUtil.parseBoolAttr,AsfUtil.parseDWordAttr,AsfUtil.parseQWordAttr,AsfUtil.parseWordAttr,AsfUtil.parseByteArrayAttr];AsfUtil$1.AsfUtil=AsfUtil;(function(h){Object.defineProperty(h,"__esModule",{value:!0}),h.WmPictureToken=h.MetadataLibraryObjectState=h.MetadataObjectState=h.ExtendedStreamPropertiesObjectState=h.ExtendedContentDescriptionObjectState=h.ContentDescriptionObjectState=h.readCodecEntries=h.HeaderExtensionObject=h.StreamPropertiesObject=h.FilePropertiesObject=h.IgnoreObjectState=h.State=h.HeaderObjectToken=h.TopLevelHeaderObjectToken=h.DataType=void 0;const d=Util,g=lib$1,b=GUID$1,_=AsfUtil$1,$=ID3v2Token;(function(St){St[St.UnicodeString=0]="UnicodeString",St[St.ByteArray=1]="ByteArray",St[St.Bool=2]="Bool",St[St.DWord=3]="DWord",St[St.QWord=4]="QWord",St[St.Word=5]="Word"})(h.DataType||(h.DataType={})),h.TopLevelHeaderObjectToken={len:30,get:(St,ht)=>({objectId:b.default.fromBin(new g.BufferType(16).get(St,ht)),objectSize:Number(g.UINT64_LE.get(St,ht+16)),numberOfHeaderObjects:g.UINT32_LE.get(St,ht+24)})},h.HeaderObjectToken={len:24,get:(St,ht)=>({objectId:b.default.fromBin(new g.BufferType(16).get(St,ht)),objectSize:Number(g.UINT64_LE.get(St,ht+16))})};class j{constructor(ht){this.len=Number(ht.objectSize)-h.HeaderObjectToken.len}postProcessTag(ht,kt,Rt,Mt){if(kt==="WM/Picture")ht.push({id:kt,value:Tt.fromBuffer(Mt)});else{const Zt=_.AsfUtil.getParserForAttr(Rt);if(!Zt)throw new Error("unexpected value headerType: "+Rt);ht.push({id:kt,value:Zt(Mt)})}}}h.State=j;class _e extends j{constructor(ht){super(ht)}get(ht,kt){return null}}h.IgnoreObjectState=_e;class et extends j{constructor(ht){super(ht)}get(ht,kt){return{fileId:b.default.fromBin(ht,kt),fileSize:g.UINT64_LE.get(ht,kt+16),creationDate:g.UINT64_LE.get(ht,kt+24),dataPacketsCount:g.UINT64_LE.get(ht,kt+32),playDuration:g.UINT64_LE.get(ht,kt+40),sendDuration:g.UINT64_LE.get(ht,kt+48),preroll:g.UINT64_LE.get(ht,kt+56),flags:{broadcast:d.getBit(ht,kt+64,24),seekable:d.getBit(ht,kt+64,25)},minimumDataPacketSize:g.UINT32_LE.get(ht,kt+68),maximumDataPacketSize:g.UINT32_LE.get(ht,kt+72),maximumBitrate:g.UINT32_LE.get(ht,kt+76)}}}et.guid=b.default.FilePropertiesObject,h.FilePropertiesObject=et;class rt extends j{constructor(ht){super(ht)}get(ht,kt){return{streamType:b.default.decodeMediaType(b.default.fromBin(ht,kt)),errorCorrectionType:b.default.fromBin(ht,kt+8)}}}rt.guid=b.default.StreamPropertiesObject,h.StreamPropertiesObject=rt;class nt{constructor(){this.len=22}get(ht,kt){return{reserved1:b.default.fromBin(ht,kt),reserved2:ht.readUInt16LE(kt+16),extensionDataSize:ht.readUInt32LE(kt+18)}}}nt.guid=b.default.HeaderExtensionObject,h.HeaderExtensionObject=nt;const st={len:20,get:(St,ht)=>({entryCount:St.readUInt16LE(ht+16)})};async function at(St){const ht=await St.readNumber(g.UINT16_LE);return(await St.readToken(new g.StringType(ht*2,"utf16le"))).replace("\0","")}async function it(St){const ht=await St.readToken(st),kt=[];for(let Rt=0;Rt<ht.entryCount;++Rt)kt.push(await ot(St));return kt}h.readCodecEntries=it;async function dt(St){const ht=await St.readNumber(g.UINT16_LE),kt=Buffer.alloc(ht);return await St.readBuffer(kt),kt}async function ot(St){const ht=await St.readNumber(g.UINT16_LE);return{type:{videoCodec:(ht&1)===1,audioCodec:(ht&2)===2},codecName:await at(St),description:await at(St),information:await dt(St)}}class ct extends j{constructor(ht){super(ht)}get(ht,kt){const Rt=[];let Mt=kt+10;for(let Zt=0;Zt<ct.contentDescTags.length;++Zt){const Ct=ht.readUInt16LE(kt+Zt*2);if(Ct>0){const Pt=ct.contentDescTags[Zt],xt=Mt+Ct;Rt.push({id:Pt,value:_.AsfUtil.parseUnicodeAttr(ht.slice(Mt,xt))}),Mt=xt}}return Rt}}ct.guid=b.default.ContentDescriptionObject,ct.contentDescTags=["Title","Author","Copyright","Description","Rating"],h.ContentDescriptionObjectState=ct;class lt extends j{constructor(ht){super(ht)}get(ht,kt){const Rt=[],Mt=ht.readUInt16LE(kt);let Zt=kt+2;for(let Ct=0;Ct<Mt;Ct+=1){const Pt=ht.readUInt16LE(Zt);Zt+=2;const xt=_.AsfUtil.parseUnicodeAttr(ht.slice(Zt,Zt+Pt));Zt+=Pt;const Ht=ht.readUInt16LE(Zt);Zt+=2;const tr=ht.readUInt16LE(Zt);Zt+=2;const er=ht.slice(Zt,Zt+tr);Zt+=tr,this.postProcessTag(Rt,xt,Ht,er)}return Rt}}lt.guid=b.default.ExtendedContentDescriptionObject,h.ExtendedContentDescriptionObjectState=lt;class ut extends j{constructor(ht){super(ht)}get(ht,kt){return{startTime:g.UINT64_LE.get(ht,kt),endTime:g.UINT64_LE.get(ht,kt+8),dataBitrate:ht.readInt32LE(kt+12),bufferSize:ht.readInt32LE(kt+16),initialBufferFullness:ht.readInt32LE(kt+20),alternateDataBitrate:ht.readInt32LE(kt+24),alternateBufferSize:ht.readInt32LE(kt+28),alternateInitialBufferFullness:ht.readInt32LE(kt+32),maximumObjectSize:ht.readInt32LE(kt+36),flags:{reliableFlag:d.getBit(ht,kt+40,0),seekableFlag:d.getBit(ht,kt+40,1),resendLiveCleanpointsFlag:d.getBit(ht,kt+40,2)},streamNumber:ht.readInt16LE(kt+42),streamLanguageId:ht.readInt16LE(kt+44),averageTimePerFrame:ht.readInt32LE(kt+52),streamNameCount:ht.readInt32LE(kt+54),payloadExtensionSystems:ht.readInt32LE(kt+56),streamNames:[],streamPropertiesObject:null}}}ut.guid=b.default.ExtendedStreamPropertiesObject,h.ExtendedStreamPropertiesObjectState=ut;class ft extends j{constructor(ht){super(ht)}get(ht,kt){const Rt=[],Mt=Buffer.from(ht),Zt=Mt.readUInt16LE(kt);let Ct=kt+2;for(let Pt=0;Pt<Zt;Pt+=1){Ct+=4;const xt=Mt.readUInt16LE(Ct);Ct+=2;const Ht=Mt.readUInt16LE(Ct);Ct+=2;const tr=Mt.readUInt32LE(Ct);Ct+=4;const er=_.AsfUtil.parseUnicodeAttr(Mt.slice(Ct,Ct+xt));Ct+=xt;const Kt=Mt.slice(Ct,Ct+tr);Ct+=tr,this.postProcessTag(Rt,er,Ht,Kt)}return Rt}}ft.guid=b.default.MetadataObject,h.MetadataObjectState=ft;class Et extends ft{constructor(ht){super(ht)}}Et.guid=b.default.MetadataLibraryObject,h.MetadataLibraryObjectState=Et;class Tt{static fromBase64(ht){return this.fromBuffer(Buffer.from(ht,"base64"))}static fromBuffer(ht){return new Tt(ht.length).get(ht,0)}constructor(ht){this.len=ht}get(ht,kt){const Rt=ht.readUInt8(kt++),Mt=ht.readInt32LE(kt);let Zt=5;for(;ht.readUInt16BE(Zt)!==0;)Zt+=2;const Ct=ht.slice(5,Zt).toString("utf16le");for(;ht.readUInt16BE(Zt)!==0;)Zt+=2;const Pt=ht.slice(5,Zt).toString("utf16le");return{type:$.AttachedPictureType[Rt],format:Ct,description:Pt,size:Mt,data:ht.slice(Zt+4)}}}h.WmPictureToken=Tt})(AsfObject$1);Object.defineProperty(AsfParser$1,"__esModule",{value:!0});AsfParser$1.AsfParser=void 0;const debug_1$j=browserExports$2,type_1$1=type,GUID_1=GUID$1,AsfObject=AsfObject$1,BasicParser_1$9=BasicParser$1,debug$j=(0,debug_1$j.default)("music-metadata:parser:ASF"),headerType="asf";class AsfParser extends BasicParser_1$9.BasicParser{async parse(){const d=await this.tokenizer.readToken(AsfObject.TopLevelHeaderObjectToken);if(!d.objectId.equals(GUID_1.default.HeaderObject))throw new Error("expected asf header; but was not found; got: "+d.objectId.str);try{await this.parseObjectHeader(d.numberOfHeaderObjects)}catch(g){debug$j("Error while parsing ASF: %s",g)}}async parseObjectHeader(d){let g;do{const b=await this.tokenizer.readToken(AsfObject.HeaderObjectToken);switch(debug$j("header GUID=%s",b.objectId.str),b.objectId.str){case AsfObject.FilePropertiesObject.guid.str:const _=await this.tokenizer.readToken(new AsfObject.FilePropertiesObject(b));this.metadata.setFormat("duration",Number(_.playDuration/BigInt(1e3))/1e4-Number(_.preroll)/1e3),this.metadata.setFormat("bitrate",_.maximumBitrate);break;case AsfObject.StreamPropertiesObject.guid.str:const $=await this.tokenizer.readToken(new AsfObject.StreamPropertiesObject(b));this.metadata.setFormat("container","ASF/"+$.streamType);break;case AsfObject.HeaderExtensionObject.guid.str:const j=await this.tokenizer.readToken(new AsfObject.HeaderExtensionObject);await this.parseExtensionObject(j.extensionDataSize);break;case AsfObject.ContentDescriptionObjectState.guid.str:g=await this.tokenizer.readToken(new AsfObject.ContentDescriptionObjectState(b)),this.addTags(g);break;case AsfObject.ExtendedContentDescriptionObjectState.guid.str:g=await this.tokenizer.readToken(new AsfObject.ExtendedContentDescriptionObjectState(b)),this.addTags(g);break;case GUID_1.default.CodecListObject.str:const _e=await AsfObject.readCodecEntries(this.tokenizer);_e.forEach(rt=>{this.metadata.addStreamInfo({type:rt.type.videoCodec?type_1$1.TrackType.video:type_1$1.TrackType.audio,codecName:rt.codecName})});const et=_e.filter(rt=>rt.type.audioCodec).map(rt=>rt.codecName).join("/");this.metadata.setFormat("codec",et);break;case GUID_1.default.StreamBitratePropertiesObject.str:await this.tokenizer.ignore(b.objectSize-AsfObject.HeaderObjectToken.len);break;case GUID_1.default.PaddingObject.str:debug$j("Padding: %s bytes",b.objectSize-AsfObject.HeaderObjectToken.len),await this.tokenizer.ignore(b.objectSize-AsfObject.HeaderObjectToken.len);break;default:this.metadata.addWarning("Ignore ASF-Object-GUID: "+b.objectId.str),debug$j("Ignore ASF-Object-GUID: %s",b.objectId.str),await this.tokenizer.readToken(new AsfObject.IgnoreObjectState(b))}}while(--d)}addTags(d){d.forEach(g=>{this.metadata.addTag(headerType,g.id,g.value)})}async parseExtensionObject(d){do{const g=await this.tokenizer.readToken(AsfObject.HeaderObjectToken),b=g.objectSize-AsfObject.HeaderObjectToken.len;switch(g.objectId.str){case AsfObject.ExtendedStreamPropertiesObjectState.guid.str:await this.tokenizer.readToken(new AsfObject.ExtendedStreamPropertiesObjectState(g));break;case AsfObject.MetadataObjectState.guid.str:const _=await this.tokenizer.readToken(new AsfObject.MetadataObjectState(g));this.addTags(_);break;case AsfObject.MetadataLibraryObjectState.guid.str:const $=await this.tokenizer.readToken(new AsfObject.MetadataLibraryObjectState(g));this.addTags($);break;case GUID_1.default.PaddingObject.str:await this.tokenizer.ignore(b);break;case GUID_1.default.CompatibilityObject.str:this.tokenizer.ignore(b);break;case GUID_1.default.ASF_Index_Placeholder_Object.str:await this.tokenizer.ignore(b);break;default:this.metadata.addWarning("Ignore ASF-Object-GUID: "+g.objectId.str),await this.tokenizer.readToken(new AsfObject.IgnoreObjectState(g));break}d-=g.objectSize}while(d>0)}}AsfParser$1.AsfParser=AsfParser;var FlacParser$1={},Vorbis={};Object.defineProperty(Vorbis,"__esModule",{value:!0});Vorbis.IdentificationHeader=Vorbis.CommonHeader=Vorbis.VorbisPictureToken=void 0;const Token$l=lib$1,ID3v2Token_1$1=ID3v2Token;class VorbisPictureToken{static fromBase64(d){return this.fromBuffer(Buffer.from(d,"base64"))}static fromBuffer(d){return new VorbisPictureToken(d.length).get(d,0)}constructor(d){this.len=d}get(d,g){const b=ID3v2Token_1$1.AttachedPictureType[Token$l.UINT32_BE.get(d,g)],_=Token$l.UINT32_BE.get(d,g+=4),$=d.toString("utf-8",g+=4,g+_),j=Token$l.UINT32_BE.get(d,g+=_),_e=d.toString("utf-8",g+=4,g+j),et=Token$l.UINT32_BE.get(d,g+=j),rt=Token$l.UINT32_BE.get(d,g+=4),nt=Token$l.UINT32_BE.get(d,g+=4),st=Token$l.UINT32_BE.get(d,g+=4),at=Token$l.UINT32_BE.get(d,g+=4),it=Buffer.from(d.slice(g+=4,g+at));return{type:b,format:$,description:_e,width:et,height:rt,colour_depth:nt,indexed_color:st,data:it}}}Vorbis.VorbisPictureToken=VorbisPictureToken;Vorbis.CommonHeader={len:7,get:(h,d)=>({packetType:h.readUInt8(d),vorbis:new Token$l.StringType(6,"ascii").get(h,d+1)})};Vorbis.IdentificationHeader={len:23,get:(h,d)=>{const g=new DataView(h.buffer,h.byteOffset);return{version:g.getUint32(d+0,!0),channelMode:g.getUint8(d+4),sampleRate:g.getUint32(d+5,!0),bitrateMax:g.getUint32(d+9,!0),bitrateNominal:g.getUint32(d+13,!0),bitrateMin:g.getUint32(d+17,!0)}}};var AbstractID3Parser$1={};Object.defineProperty(AbstractID3Parser$1,"__esModule",{value:!0});AbstractID3Parser$1.AbstractID3Parser=void 0;const core_1$2=core$1,debug_1$i=browserExports$2,ID3v2Token_1=ID3v2Token,ID3v2Parser_1$3=ID3v2Parser$1,ID3v1Parser_1$2=ID3v1Parser,BasicParser_1$8=BasicParser$1,debug$i=(0,debug_1$i.default)("music-metadata:parser:ID3");class AbstractID3Parser extends BasicParser_1$8.BasicParser{constructor(){super(...arguments),this.id3parser=new ID3v2Parser_1$3.ID3v2Parser}static async startsWithID3v2Header(d){return(await d.peekToken(ID3v2Token_1.ID3v2Header)).fileIdentifier==="ID3"}async parse(){try{await this.parseID3v2()}catch(d){if(d instanceof core_1$2.EndOfStreamError)debug$i("End-of-stream");else throw d}}finalize(){}async parseID3v2(){await this.tryReadId3v2Headers(),debug$i("End of ID3v2 header, go to MPEG-parser: pos=%s",this.tokenizer.position),await this.postId3v2Parse(),this.options.skipPostHeaders&&this.metadata.hasAny()?this.finalize():(await new ID3v1Parser_1$2.ID3v1Parser().init(this.metadata,this.tokenizer,this.options).parse(),this.finalize())}async tryReadId3v2Headers(){if((await this.tokenizer.peekToken(ID3v2Token_1.ID3v2Header)).fileIdentifier==="ID3")return debug$i("Found ID3v2 header, pos=%s",this.tokenizer.position),await this.id3parser.parse(this.metadata,this.tokenizer,this.options),this.tryReadId3v2Headers()}}AbstractID3Parser$1.AbstractID3Parser=AbstractID3Parser;var VorbisParser$1={},VorbisDecoder$1={};Object.defineProperty(VorbisDecoder$1,"__esModule",{value:!0});VorbisDecoder$1.VorbisDecoder=void 0;const Token$k=lib$1;class VorbisDecoder{constructor(d,g){this.data=d,this.offset=g}readInt32(){const d=Token$k.UINT32_LE.get(this.data,this.offset);return this.offset+=4,d}readStringUtf8(){const d=this.readInt32(),g=Buffer.from(this.data).toString("utf-8",this.offset,this.offset+d);return this.offset+=d,g}parseUserComment(){const d=this.offset,g=this.readStringUtf8(),b=g.indexOf("=");return{key:g.slice(0,b).toUpperCase(),value:g.slice(b+1),len:this.offset-d}}}VorbisDecoder$1.VorbisDecoder=VorbisDecoder;Object.defineProperty(VorbisParser$1,"__esModule",{value:!0});VorbisParser$1.VorbisParser=void 0;const Token$j=lib$1,debug_1$h=browserExports$2,VorbisDecoder_1$1=VorbisDecoder$1,Vorbis_1$1=Vorbis,debug$h=(0,debug_1$h.default)("music-metadata:parser:ogg:vorbis1");class VorbisParser{constructor(d,g){this.metadata=d,this.options=g,this.pageSegments=[]}parsePage(d,g){if(d.headerType.firstPage)this.parseFirstPage(d,g);else{if(d.headerType.continued){if(this.pageSegments.length===0)throw new Error("Cannot continue on previous page");this.pageSegments.push(g)}if(d.headerType.lastPage||!d.headerType.continued){if(this.pageSegments.length>0){const b=Buffer.concat(this.pageSegments);this.parseFullPage(b)}this.pageSegments=d.headerType.lastPage?[]:[g]}}d.headerType.lastPage&&this.calculateDuration(d)}flush(){this.parseFullPage(Buffer.concat(this.pageSegments))}parseUserComment(d,g){const _=new VorbisDecoder_1$1.VorbisDecoder(d,g).parseUserComment();return this.addTag(_.key,_.value),_.len}addTag(d,g){if(d==="METADATA_BLOCK_PICTURE"&&typeof g=="string"){if(this.options.skipCovers){debug$h("Ignore picture");return}g=Vorbis_1$1.VorbisPictureToken.fromBase64(g),debug$h(`Push picture: id=${d}, format=${g.format}`)}else debug$h(`Push tag: id=${d}, value=${g}`);this.metadata.addTag("vorbis",d,g)}calculateDuration(d){this.metadata.format.sampleRate&&d.absoluteGranulePosition>=0&&(this.metadata.setFormat("numberOfSamples",d.absoluteGranulePosition),this.metadata.setFormat("duration",this.metadata.format.numberOfSamples/this.metadata.format.sampleRate))}parseFirstPage(d,g){this.metadata.setFormat("codec","Vorbis I"),debug$h("Parse first page");const b=Vorbis_1$1.CommonHeader.get(g,0);if(b.vorbis!=="vorbis")throw new Error("Metadata does not look like Vorbis");if(b.packetType===1){const _=Vorbis_1$1.IdentificationHeader.get(g,Vorbis_1$1.CommonHeader.len);this.metadata.setFormat("sampleRate",_.sampleRate),this.metadata.setFormat("bitrate",_.bitrateNominal),this.metadata.setFormat("numberOfChannels",_.channelMode),debug$h("sample-rate=%s[hz], bitrate=%s[b/s], channel-mode=%s",_.sampleRate,_.bitrateNominal,_.channelMode)}else throw new Error("First Ogg page should be type 1: the identification header")}parseFullPage(d){const g=Vorbis_1$1.CommonHeader.get(d,0);switch(debug$h("Parse full page: type=%s, byteLength=%s",g.packetType,d.byteLength),g.packetType){case 3:return this.parseUserCommentList(d,Vorbis_1$1.CommonHeader.len)}}parseUserCommentList(d,g){const b=Token$j.UINT32_LE.get(d,g);g+=4,g+=b;let _=Token$j.UINT32_LE.get(d,g);for(g+=4;_-- >0;)g+=this.parseUserComment(d,g)}}VorbisParser$1.VorbisParser=VorbisParser;Object.defineProperty(FlacParser$1,"__esModule",{value:!0});FlacParser$1.FlacParser=void 0;const token_types_1$1=lib$1,debug_1$g=browserExports$2,util$6=Util,Vorbis_1=Vorbis,AbstractID3Parser_1$3=AbstractID3Parser$1,FourCC_1$7=FourCC,VorbisParser_1$3=VorbisParser$1,VorbisDecoder_1=VorbisDecoder$1,debug$g=(0,debug_1$g.default)("music-metadata:parser:FLAC");var BlockType;(function(h){h[h.STREAMINFO=0]="STREAMINFO",h[h.PADDING=1]="PADDING",h[h.APPLICATION=2]="APPLICATION",h[h.SEEKTABLE=3]="SEEKTABLE",h[h.VORBIS_COMMENT=4]="VORBIS_COMMENT",h[h.CUESHEET=5]="CUESHEET",h[h.PICTURE=6]="PICTURE"})(BlockType||(BlockType={}));class FlacParser extends AbstractID3Parser_1$3.AbstractID3Parser{constructor(){super(...arguments),this.padding=0}init(d,g,b){return super.init(d,g,b),this.vorbisParser=new VorbisParser_1$3.VorbisParser(d,b),this}async postId3v2Parse(){if((await this.tokenizer.readToken(FourCC_1$7.FourCcToken)).toString()!=="fLaC")throw new Error("Invalid FLAC preamble");let g;do g=await this.tokenizer.readToken(Metadata.BlockHeader),await this.parseDataBlock(g);while(!g.lastBlock);if(this.tokenizer.fileInfo.size&&this.metadata.format.duration){const b=this.tokenizer.fileInfo.size-this.tokenizer.position;this.metadata.setFormat("bitrate",8*b/this.metadata.format.duration)}}parseDataBlock(d){switch(debug$g(`blockHeader type=${d.type}, length=${d.length}`),d.type){case BlockType.STREAMINFO:return this.parseBlockStreamInfo(d.length);case BlockType.PADDING:this.padding+=d.length;break;case BlockType.APPLICATION:break;case BlockType.SEEKTABLE:break;case BlockType.VORBIS_COMMENT:return this.parseComment(d.length);case BlockType.CUESHEET:break;case BlockType.PICTURE:return this.parsePicture(d.length).then();default:this.metadata.addWarning("Unknown block type: "+d.type)}return this.tokenizer.ignore(d.length).then()}async parseBlockStreamInfo(d){if(d!==Metadata.BlockStreamInfo.len)throw new Error("Unexpected block-stream-info length");const g=await this.tokenizer.readToken(Metadata.BlockStreamInfo);this.metadata.setFormat("container","FLAC"),this.metadata.setFormat("codec","FLAC"),this.metadata.setFormat("lossless",!0),this.metadata.setFormat("numberOfChannels",g.channels),this.metadata.setFormat("bitsPerSample",g.bitsPerSample),this.metadata.setFormat("sampleRate",g.sampleRate),g.totalSamples>0&&this.metadata.setFormat("duration",g.totalSamples/g.sampleRate)}async parseComment(d){const g=await this.tokenizer.readToken(new token_types_1$1.Uint8ArrayType(d)),b=new VorbisDecoder_1.VorbisDecoder(g,0);b.readStringUtf8();const _=b.readInt32();for(let $=0;$<_;$++){const j=b.parseUserComment();this.vorbisParser.addTag(j.key,j.value)}}async parsePicture(d){if(this.options.skipCovers)return this.tokenizer.ignore(d);{const g=await this.tokenizer.readToken(new Vorbis_1.VorbisPictureToken(d));this.vorbisParser.addTag("METADATA_BLOCK_PICTURE",g)}}}FlacParser$1.FlacParser=FlacParser;class Metadata{}Metadata.BlockHeader={len:4,get:(h,d)=>({lastBlock:util$6.getBit(h,d,7),type:util$6.getBitAllignedNumber(h,d,1,7),length:token_types_1$1.UINT24_BE.get(h,d+1)})};Metadata.BlockStreamInfo={len:34,get:(h,d)=>({minimumBlockSize:token_types_1$1.UINT16_BE.get(h,d),maximumBlockSize:token_types_1$1.UINT16_BE.get(h,d+2)/1e3,minimumFrameSize:token_types_1$1.UINT24_BE.get(h,d+4),maximumFrameSize:token_types_1$1.UINT24_BE.get(h,d+7),sampleRate:token_types_1$1.UINT24_BE.get(h,d+10)>>4,channels:util$6.getBitAllignedNumber(h,d+12,4,3)+1,bitsPerSample:util$6.getBitAllignedNumber(h,d+12,7,5)+1,totalSamples:util$6.getBitAllignedNumber(h,d+13,4,36),fileMD5:new token_types_1$1.Uint8ArrayType(16).get(h,d+18)})};var MP4Parser$1={},Atom$1={},AtomToken$2={};(function(h){Object.defineProperty(h,"__esModule",{value:!0}),h.ChapterText=h.StcoAtom=h.StszAtom=h.StscAtom=h.SampleToChunkToken=h.SttsAtom=h.TimeToSampleToken=h.SoundSampleDescriptionV0=h.SoundSampleDescriptionVersion=h.StsdAtom=h.TrackHeaderAtom=h.NameAtom=h.DataAtom=h.MvhdAtom=h.MdhdAtom=h.FixedLengthAtom=h.mhdr=h.tkhd=h.ftyp=h.ExtendedSize=h.Header=void 0;const d=lib$1,g=browserExports$2,b=FourCC,_=(0,g.default)("music-metadata:parser:MP4:atom");h.Header={len:8,get:(St,ht)=>{const kt=d.UINT32_BE.get(St,ht);if(kt<0)throw new Error("Invalid atom header length");return{length:BigInt(kt),name:new d.StringType(4,"binary").get(St,ht+4)}},put:(St,ht,kt)=>(d.UINT32_BE.put(St,ht,Number(kt.length)),b.FourCcToken.put(St,ht+4,kt.name))},h.ExtendedSize=d.UINT64_BE,h.ftyp={len:4,get:(St,ht)=>({type:new d.StringType(4,"ascii").get(St,ht)})},h.tkhd={len:4,get:(St,ht)=>({type:new d.StringType(4,"ascii").get(St,ht)})},h.mhdr={len:8,get:(St,ht)=>({version:d.UINT8.get(St,ht),flags:d.UINT24_BE.get(St,ht+1),nextItemID:d.UINT32_BE.get(St,ht+4)})};class ${constructor(ht,kt,Rt){if(this.len=ht,ht<kt)throw new Error(`Atom ${Rt} expected to be ${kt}, but specifies ${ht} bytes long.`);ht>kt&&_(`Warning: atom ${Rt} expected to be ${kt}, but was actually ${ht} bytes long.`)}}h.FixedLengthAtom=$;const j={len:4,get:(St,ht)=>{const kt=d.UINT32_BE.get(St,ht)-2082844800;return new Date(kt*1e3)}};class _e extends ${constructor(ht){super(ht,24,"mdhd"),this.len=ht}get(ht,kt){return{version:d.UINT8.get(ht,kt+0),flags:d.UINT24_BE.get(ht,kt+1),creationTime:j.get(ht,kt+4),modificationTime:j.get(ht,kt+8),timeScale:d.UINT32_BE.get(ht,kt+12),duration:d.UINT32_BE.get(ht,kt+16),language:d.UINT16_BE.get(ht,kt+20),quality:d.UINT16_BE.get(ht,kt+22)}}}h.MdhdAtom=_e;class et extends ${constructor(ht){super(ht,100,"mvhd"),this.len=ht}get(ht,kt){return{version:d.UINT8.get(ht,kt),flags:d.UINT24_BE.get(ht,kt+1),creationTime:j.get(ht,kt+4),modificationTime:j.get(ht,kt+8),timeScale:d.UINT32_BE.get(ht,kt+12),duration:d.UINT32_BE.get(ht,kt+16),preferredRate:d.UINT32_BE.get(ht,kt+20),preferredVolume:d.UINT16_BE.get(ht,kt+24),previewTime:d.UINT32_BE.get(ht,kt+72),previewDuration:d.UINT32_BE.get(ht,kt+76),posterTime:d.UINT32_BE.get(ht,kt+80),selectionTime:d.UINT32_BE.get(ht,kt+84),selectionDuration:d.UINT32_BE.get(ht,kt+88),currentTime:d.UINT32_BE.get(ht,kt+92),nextTrackID:d.UINT32_BE.get(ht,kt+96)}}}h.MvhdAtom=et;class rt{constructor(ht){this.len=ht}get(ht,kt){return{type:{set:d.UINT8.get(ht,kt+0),type:d.UINT24_BE.get(ht,kt+1)},locale:d.UINT24_BE.get(ht,kt+4),value:Buffer.from(new d.Uint8ArrayType(this.len-8).get(ht,kt+8))}}}h.DataAtom=rt;class nt{constructor(ht){this.len=ht}get(ht,kt){return{version:d.UINT8.get(ht,kt),flags:d.UINT24_BE.get(ht,kt+1),name:new d.StringType(this.len-4,"utf-8").get(ht,kt+4)}}}h.NameAtom=nt;class st{constructor(ht){this.len=ht}get(ht,kt){return{version:d.UINT8.get(ht,kt),flags:d.UINT24_BE.get(ht,kt+1),creationTime:j.get(ht,kt+4),modificationTime:j.get(ht,kt+8),trackId:d.UINT32_BE.get(ht,kt+12),duration:d.UINT32_BE.get(ht,kt+20),layer:d.UINT16_BE.get(ht,kt+24),alternateGroup:d.UINT16_BE.get(ht,kt+26),volume:d.UINT16_BE.get(ht,kt+28)}}}h.TrackHeaderAtom=st;const at={len:8,get:(St,ht)=>({version:d.UINT8.get(St,ht),flags:d.UINT24_BE.get(St,ht+1),numberOfEntries:d.UINT32_BE.get(St,ht+4)})};class it{constructor(ht){this.len=ht}get(ht,kt){return{dataFormat:b.FourCcToken.get(ht,kt),dataReferenceIndex:d.UINT16_BE.get(ht,kt+10),description:new d.Uint8ArrayType(this.len-12).get(ht,kt+12)}}}class dt{constructor(ht){this.len=ht}get(ht,kt){const Rt=at.get(ht,kt);kt+=at.len;const Mt=[];for(let Zt=0;Zt<Rt.numberOfEntries;++Zt){const Ct=d.UINT32_BE.get(ht,kt);kt+=d.UINT32_BE.len,Mt.push(new it(Ct).get(ht,kt)),kt+=Ct}return{header:Rt,table:Mt}}}h.StsdAtom=dt,h.SoundSampleDescriptionVersion={len:8,get(St,ht){return{version:d.INT16_BE.get(St,ht),revision:d.INT16_BE.get(St,ht+2),vendor:d.INT32_BE.get(St,ht+4)}}},h.SoundSampleDescriptionV0={len:12,get(St,ht){return{numAudioChannels:d.INT16_BE.get(St,ht+0),sampleSize:d.INT16_BE.get(St,ht+2),compressionId:d.INT16_BE.get(St,ht+4),packetSize:d.INT16_BE.get(St,ht+6),sampleRate:d.UINT16_BE.get(St,ht+8)+d.UINT16_BE.get(St,ht+10)/1e4}}};class ot{constructor(ht,kt){this.len=ht,this.token=kt}get(ht,kt){const Rt=d.INT32_BE.get(ht,kt+4);return{version:d.INT8.get(ht,kt+0),flags:d.INT24_BE.get(ht,kt+1),numberOfEntries:Rt,entries:Tt(ht,this.token,kt+8,this.len-8,Rt)}}}h.TimeToSampleToken={len:8,get(St,ht){return{count:d.INT32_BE.get(St,ht+0),duration:d.INT32_BE.get(St,ht+4)}}};class ct extends ot{constructor(ht){super(ht,h.TimeToSampleToken),this.len=ht}}h.SttsAtom=ct,h.SampleToChunkToken={len:12,get(St,ht){return{firstChunk:d.INT32_BE.get(St,ht),samplesPerChunk:d.INT32_BE.get(St,ht+4),sampleDescriptionId:d.INT32_BE.get(St,ht+8)}}};class lt extends ot{constructor(ht){super(ht,h.SampleToChunkToken),this.len=ht}}h.StscAtom=lt;class ut{constructor(ht){this.len=ht}get(ht,kt){const Rt=d.INT32_BE.get(ht,kt+8);return{version:d.INT8.get(ht,kt),flags:d.INT24_BE.get(ht,kt+1),sampleSize:d.INT32_BE.get(ht,kt+4),numberOfEntries:Rt,entries:Tt(ht,d.INT32_BE,kt+12,this.len-12,Rt)}}}h.StszAtom=ut;class ft extends ot{constructor(ht){super(ht,d.INT32_BE),this.len=ht}}h.StcoAtom=ft;class Et{constructor(ht){this.len=ht}get(ht,kt){const Rt=d.INT16_BE.get(ht,kt+0);return new d.StringType(Rt,"utf-8").get(ht,kt+2)}}h.ChapterText=Et;function Tt(St,ht,kt,Rt,Mt){if(_(`remainingLen=${Rt}, numberOfEntries=${Mt} * token-len=${ht.len}`),Rt===0)return[];if(Rt!==Mt*ht.len)throw new Error("mismatch number-of-entries with remaining atom-length");const Zt=[];for(let Ct=0;Ct<Mt;++Ct)Zt.push(ht.get(St,kt)),kt+=ht.len;return Zt}})(AtomToken$2);Object.defineProperty(Atom$1,"__esModule",{value:!0});Atom$1.Atom=void 0;const debug_1$f=browserExports$2,AtomToken$1=AtomToken$2,debug$f=(0,debug_1$f.default)("music-metadata:parser:MP4:Atom");class Atom{static async readAtom(d,g,b,_){const $=d.position,j=await d.readToken(AtomToken$1.Header);j.length===BigInt(1)&&(j.length=await d.readToken(AtomToken$1.ExtendedSize));const et=new Atom(j,j.length===BigInt(1),b),rt=et.getPayloadLength(_);return debug$f(`parse atom name=${et.atomPath}, extended=${et.extended}, offset=${$}, len=${et.header.length}`),await et.readData(d,g,rt),et}constructor(d,g,b){this.header=d,this.extended=g,this.parent=b,this.children=[],this.atomPath=(this.parent?this.parent.atomPath+".":"")+this.header.name}getHeaderLength(){return this.extended?16:8}getPayloadLength(d){return(this.header.length===BigInt(0)?d:Number(this.header.length))-this.getHeaderLength()}async readAtoms(d,g,b){for(;b>0;){const _=await Atom.readAtom(d,g,this,b);this.children.push(_),b-=_.header.length===BigInt(0)?b:Number(_.header.length)}}async readData(d,g,b){switch(this.header.name){case"moov":case"udta":case"trak":case"mdia":case"minf":case"stbl":case"<id>":case"ilst":case"tref":return this.readAtoms(d,g,this.getPayloadLength(b));case"meta":const $=(await d.peekToken(AtomToken$1.Header)).name==="hdlr"?0:4;return await d.ignore($),this.readAtoms(d,g,this.getPayloadLength(b)-$);case"mdhd":case"mvhd":case"tkhd":case"stsz":case"mdat":default:return g(this,b)}}}Atom$1.Atom=Atom;Object.defineProperty(MP4Parser$1,"__esModule",{value:!0});MP4Parser$1.MP4Parser=void 0;const debug_1$e=browserExports$2,Token$i=lib$1,BasicParser_1$7=BasicParser$1,ID3v1Parser_1$1=ID3v1Parser,type_1=type,Atom_1=Atom$1,AtomToken=AtomToken$2,debug$e=(0,debug_1$e.default)("music-metadata:parser:MP4"),tagFormat="iTunes",encoderDict={raw:{lossy:!1,format:"raw"},MAC3:{lossy:!0,format:"MACE 3:1"},MAC6:{lossy:!0,format:"MACE 6:1"},ima4:{lossy:!0,format:"IMA 4:1"},ulaw:{lossy:!0,format:"uLaw 2:1"},alaw:{lossy:!0,format:"uLaw 2:1"},Qclp:{lossy:!0,format:"QUALCOMM PureVoice"},".mp3":{lossy:!0,format:"MPEG-1 layer 3"},alac:{lossy:!1,format:"ALAC"},"ac-3":{lossy:!0,format:"AC-3"},mp4a:{lossy:!0,format:"MPEG-4/AAC"},mp4s:{lossy:!0,format:"MP4S"},c608:{lossy:!0,format:"CEA-608"},c708:{lossy:!0,format:"CEA-708"}};function distinct(h,d,g){return g.indexOf(h)===d}class MP4Parser extends BasicParser_1$7.BasicParser{constructor(){super(...arguments),this.atomParsers={mvhd:async d=>{const g=await this.tokenizer.readToken(new AtomToken.MvhdAtom(d));this.metadata.setFormat("creationTime",g.creationTime),this.metadata.setFormat("modificationTime",g.modificationTime)},mdhd:async d=>{const g=await this.tokenizer.readToken(new AtomToken.MdhdAtom(d)),b=this.getTrackDescription();b.creationTime=g.creationTime,b.modificationTime=g.modificationTime,b.timeScale=g.timeScale,b.duration=g.duration},chap:async d=>{const g=this.getTrackDescription(),b=[];for(;d>=Token$i.UINT32_BE.len;)b.push(await this.tokenizer.readNumber(Token$i.UINT32_BE)),d-=Token$i.UINT32_BE.len;g.chapterList=b},tkhd:async d=>{const g=await this.tokenizer.readToken(new AtomToken.TrackHeaderAtom(d));this.tracks.push(g)},mdat:async d=>{if(this.audioLengthInBytes=d,this.calculateBitRate(),this.options.includeChapters){const g=this.tracks.filter(b=>b.chapterList);if(g.length===1){const b=g[0].chapterList,_=this.tracks.filter($=>b.indexOf($.trackId)!==-1);if(_.length===1)return this.parseChapterTrack(_[0],g[0],d)}}await this.tokenizer.ignore(d)},ftyp:async d=>{const g=[];for(;d>0;){const _=await this.tokenizer.readToken(AtomToken.ftyp);d-=AtomToken.ftyp.len;const $=_.type.replace(/\W/g,"");$.length>0&&g.push($)}debug$e(`ftyp: ${g.join("/")}`);const b=g.filter(distinct).join("/");this.metadata.setFormat("container",b)},stsd:async d=>{const g=await this.tokenizer.readToken(new AtomToken.StsdAtom(d)),b=this.getTrackDescription();b.soundSampleDescription=g.table.map(_=>this.parseSoundSampleDescription(_))},stsc:async d=>{const g=await this.tokenizer.readToken(new AtomToken.StscAtom(d));this.getTrackDescription().sampleToChunkTable=g.entries},stts:async d=>{const g=await this.tokenizer.readToken(new AtomToken.SttsAtom(d));this.getTrackDescription().timeToSampleTable=g.entries},stsz:async d=>{const g=await this.tokenizer.readToken(new AtomToken.StszAtom(d)),b=this.getTrackDescription();b.sampleSize=g.sampleSize,b.sampleSizeTable=g.entries},stco:async d=>{const g=await this.tokenizer.readToken(new AtomToken.StcoAtom(d));this.getTrackDescription().chunkOffsetTable=g.entries},date:async d=>{const g=await this.tokenizer.readToken(new Token$i.StringType(d,"utf-8"));this.addTag("date",g)}}}static read_BE_Integer(d,g){const b=(g?"INT":"UINT")+d.length*8+(d.length>1?"_BE":""),_=Token$i[b];if(!_)throw new Error('Token for integer type not found: "'+b+'"');return Number(_.get(d,0))}async parse(){this.tracks=[];let d=this.tokenizer.fileInfo.size;for(;!this.tokenizer.fileInfo.size||d>0;){try{if((await this.tokenizer.peekToken(AtomToken.Header)).name==="\0\0\0\0"){const j=`Error at offset=${this.tokenizer.position}: box.id=0`;debug$e(j),this.addWarning(j);break}}catch($){const j=`Error at offset=${this.tokenizer.position}: ${$.message}`;debug$e(j),this.addWarning(j);break}const _=await Atom_1.Atom.readAtom(this.tokenizer,($,j)=>this.handleAtom($,j),null,d);d-=_.header.length===BigInt(0)?d:Number(_.header.length)}const g=[];this.tracks.forEach(_=>{const $=[];_.soundSampleDescription.forEach(j=>{const _e={},et=encoderDict[j.dataFormat];if(et?($.push(et.format),_e.codecName=et.format):_e.codecName=`<${j.dataFormat}>`,j.description){const{description:rt}=j;rt.sampleRate>0&&(_e.type=type_1.TrackType.audio,_e.audio={samplingFrequency:rt.sampleRate,bitDepth:rt.sampleSize,channels:rt.numAudioChannels})}this.metadata.addStreamInfo(_e)}),$.length>=1&&g.push($.join("/"))}),g.length>0&&this.metadata.setFormat("codec",g.filter(distinct).join("+"));const b=this.tracks.filter(_=>_.soundSampleDescription.length>=1&&_.soundSampleDescription[0].description&&_.soundSampleDescription[0].description.numAudioChannels>0);if(b.length>=1){const _=b[0];if(_.timeScale>0){const _e=_.duration/_.timeScale;this.metadata.setFormat("duration",_e)}const $=_.soundSampleDescription[0];if($.description&&(this.metadata.setFormat("sampleRate",$.description.sampleRate),this.metadata.setFormat("bitsPerSample",$.description.sampleSize),this.metadata.setFormat("numberOfChannels",$.description.numAudioChannels),_.timeScale===0&&_.timeToSampleTable.length>0)){const et=_.timeToSampleTable.map(rt=>rt.count*rt.duration).reduce((rt,nt)=>rt+nt)/$.description.sampleRate;this.metadata.setFormat("duration",et)}const j=encoderDict[$.dataFormat];j&&this.metadata.setFormat("lossless",!j.lossy),this.calculateBitRate()}}async handleAtom(d,g){if(d.parent)switch(d.parent.header.name){case"ilst":case"<id>":return this.parseMetadataItemData(d)}if(this.atomParsers[d.header.name])return this.atomParsers[d.header.name](g);debug$e(`No parser for atom path=${d.atomPath}, payload-len=${g}, ignoring atom`),await this.tokenizer.ignore(g)}getTrackDescription(){return this.tracks[this.tracks.length-1]}calculateBitRate(){this.audioLengthInBytes&&this.metadata.format.duration&&this.metadata.setFormat("bitrate",8*this.audioLengthInBytes/this.metadata.format.duration)}addTag(d,g){this.metadata.addTag(tagFormat,d,g)}addWarning(d){debug$e("Warning: "+d),this.metadata.addWarning(d)}parseMetadataItemData(d){let g=d.header.name;return d.readAtoms(this.tokenizer,async(b,_)=>{const $=b.getPayloadLength(_);switch(b.header.name){case"data":return this.parseValueAtom(g,b);case"name":case"mean":case"rate":const j=await this.tokenizer.readToken(new AtomToken.NameAtom($));g+=":"+j.name;break;default:const _e=await this.tokenizer.readToken(new Token$i.BufferType($));this.addWarning("Unsupported meta-item: "+g+"["+b.header.name+"] => value="+_e.toString("hex")+" ascii="+_e.toString("ascii"))}},d.getPayloadLength(0))}async parseValueAtom(d,g){const b=await this.tokenizer.readToken(new AtomToken.DataAtom(Number(g.header.length)-AtomToken.Header.len));if(b.type.set!==0)throw new Error("Unsupported type-set != 0: "+b.type.set);switch(b.type.type){case 0:switch(d){case"trkn":case"disk":const _=Token$i.UINT8.get(b.value,3),$=Token$i.UINT8.get(b.value,5);this.addTag(d,_+"/"+$);break;case"gnre":const j=Token$i.UINT8.get(b.value,1),_e=ID3v1Parser_1$1.Genres[j-1];this.addTag(d,_e);break;case"rate":const et=b.value.toString("ascii");this.addTag(d,et);break;default:debug$e("unknown proprietary value type for: "+g.atomPath)}break;case 1:case 18:this.addTag(d,b.value.toString("utf-8"));break;case 13:if(this.options.skipCovers)break;this.addTag(d,{format:"image/jpeg",data:Buffer.from(b.value)});break;case 14:if(this.options.skipCovers)break;this.addTag(d,{format:"image/png",data:Buffer.from(b.value)});break;case 21:this.addTag(d,MP4Parser.read_BE_Integer(b.value,!0));break;case 22:this.addTag(d,MP4Parser.read_BE_Integer(b.value,!1));break;case 65:this.addTag(d,b.value.readInt8(0));break;case 66:this.addTag(d,b.value.readInt16BE(0));break;case 67:this.addTag(d,b.value.readInt32BE(0));break;default:this.addWarning(`atom key=${d}, has unknown well-known-type (data-type): ${b.type.type}`)}}parseSoundSampleDescription(d){const g={dataFormat:d.dataFormat,dataReferenceIndex:d.dataReferenceIndex};let b=0;const _=AtomToken.SoundSampleDescriptionVersion.get(d.description,b);return b+=AtomToken.SoundSampleDescriptionVersion.len,_.version===0||_.version===1?g.description=AtomToken.SoundSampleDescriptionV0.get(d.description,b):debug$e(`Warning: sound-sample-description ${_} not implemented`),g}async parseChapterTrack(d,g,b){if(!d.sampleSize&&d.chunkOffsetTable.length!==d.sampleSizeTable.length)throw new Error("Expected equal chunk-offset-table & sample-size-table length.");const _=[];for(let $=0;$<d.chunkOffsetTable.length&&b>0;++$){const _e=d.chunkOffsetTable[$]-this.tokenizer.position,et=d.sampleSize>0?d.sampleSize:d.sampleSizeTable[$];if(b-=_e+et,b<0)throw new Error("Chapter chunk exceeding token length");await this.tokenizer.ignore(_e);const rt=await this.tokenizer.readToken(new AtomToken.ChapterText(et));debug$e(`Chapter ${$+1}: ${rt}`);const nt={title:rt,sampleOffset:this.findSampleOffset(g,this.tokenizer.position)};debug$e(`Chapter title=${nt.title}, offset=${nt.sampleOffset}/${this.tracks[0].duration}`),_.push(nt)}this.metadata.setFormat("chapters",_),await this.tokenizer.ignore(b)}findSampleOffset(d,g){let b=0;d.timeToSampleTable.forEach($=>{b+=$.count*$.duration}),debug$e(`Total duration=${b}`);let _=0;for(;_<d.chunkOffsetTable.length&&d.chunkOffsetTable[_]<g;)++_;return this.getChunkDuration(_+1,d)}getChunkDuration(d,g){let b=0,_=g.timeToSampleTable[b].count,$=g.timeToSampleTable[b].duration,j=1,_e=this.getSamplesPerChunk(j,g.sampleToChunkTable),et=0;for(;j<d;){const rt=Math.min(_,_e);et+=rt*$,_-=rt,_e-=rt,_e===0?(++j,_e=this.getSamplesPerChunk(j,g.sampleToChunkTable)):(++b,_=g.timeToSampleTable[b].count,$=g.timeToSampleTable[b].duration)}return et}getSamplesPerChunk(d,g){for(let b=0;b<g.length-1;++b)if(d>=g[b].firstChunk&&d<g[b+1].firstChunk)return g[b].samplesPerChunk;return g[g.length-1].samplesPerChunk}}MP4Parser$1.MP4Parser=MP4Parser;var MpegParser$1={},XingTag={},ExtendedLameHeader={},ReplayGainDataFormat={};Object.defineProperty(ReplayGainDataFormat,"__esModule",{value:!0});ReplayGainDataFormat.ReplayGain=void 0;const common$2=Util;var NameCode;(function(h){h[h.not_set=0]="not_set",h[h.radio=1]="radio",h[h.audiophile=2]="audiophile"})(NameCode||(NameCode={}));var ReplayGainOriginator;(function(h){h[h.unspecified=0]="unspecified",h[h.engineer=1]="engineer",h[h.user=2]="user",h[h.automatic=3]="automatic",h[h.rms_average=4]="rms_average"})(ReplayGainOriginator||(ReplayGainOriginator={}));ReplayGainDataFormat.ReplayGain={len:2,get:(h,d)=>{const g=common$2.getBitAllignedNumber(h,d,0,3),b=common$2.getBitAllignedNumber(h,d,6,1),_=common$2.getBitAllignedNumber(h,d,7,9)/10;if(g>0)return{type:common$2.getBitAllignedNumber(h,d,0,3),origin:common$2.getBitAllignedNumber(h,d,3,3),adjustment:b?-_:_}}};Object.defineProperty(ExtendedLameHeader,"__esModule",{value:!0});ExtendedLameHeader.ExtendedLameHeader=void 0;const Token$h=lib$1,common$1=Util,ReplayGainDataFormat_1=ReplayGainDataFormat;ExtendedLameHeader.ExtendedLameHeader={len:27,get:(h,d)=>{const g=Token$h.UINT32_BE.get(h,d+2);return{revision:common$1.getBitAllignedNumber(h,d,0,4),vbr_method:common$1.getBitAllignedNumber(h,d,4,4),lowpass_filter:100*Token$h.UINT8.get(h,d+1),track_peak:g===0?void 0:g/Math.pow(2,23),track_gain:ReplayGainDataFormat_1.ReplayGain.get(h,6),album_gain:ReplayGainDataFormat_1.ReplayGain.get(h,8),music_length:Token$h.UINT32_BE.get(h,d+20),music_crc:Token$h.UINT8.get(h,d+24),header_crc:Token$h.UINT16_BE.get(h,d+24)}}};(function(h){Object.defineProperty(h,"__esModule",{value:!0}),h.readXingHeader=h.XingHeaderFlags=h.LameEncoderVersion=h.InfoTagHeaderTag=void 0;const d=lib$1,g=Util,b=ExtendedLameHeader;h.InfoTagHeaderTag=new d.StringType(4,"ascii"),h.LameEncoderVersion=new d.StringType(6,"ascii"),h.XingHeaderFlags={len:4,get:($,j)=>({frames:g.isBitSet($,j,31),bytes:g.isBitSet($,j,30),toc:g.isBitSet($,j,29),vbrScale:g.isBitSet($,j,28)})};async function _($){const j=await $.readToken(h.XingHeaderFlags),_e={};if(j.frames&&(_e.numFrames=await $.readToken(d.UINT32_BE)),j.bytes&&(_e.streamSize=await $.readToken(d.UINT32_BE)),j.toc&&(_e.toc=Buffer.alloc(100),await $.readBuffer(_e.toc)),j.vbrScale&&(_e.vbrScale=await $.readToken(d.UINT32_BE)),await $.peekToken(new d.StringType(4,"ascii"))==="LAME"&&(await $.ignore(4),_e.lame={version:await $.readToken(new d.StringType(5,"ascii"))},_e.lame.version.match(/\d+.\d+/g))){const st=_e.lame.version.match(/\d+.\d+/g)[0].split(".").map(at=>parseInt(at,10));st[0]>=3&&st[1]>=90&&(_e.lame.extended=await $.readToken(b.ExtendedLameHeader))}return _e}h.readXingHeader=_})(XingTag);Object.defineProperty(MpegParser$1,"__esModule",{value:!0});MpegParser$1.MpegParser=void 0;const Token$g=lib$1,core_1$1=core$1,debug_1$d=browserExports$2,common=Util,AbstractID3Parser_1$2=AbstractID3Parser$1,XingTag_1=XingTag,debug$d=(0,debug_1$d.default)("music-metadata:parser:mpeg"),maxPeekLen=1024,MPEG4={AudioObjectTypes:["AAC Main","AAC LC","AAC SSR","AAC LTP"],SamplingFrequencies:[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350,void 0,void 0,-1]},MPEG4_ChannelConfigurations=[void 0,["front-center"],["front-left","front-right"],["front-center","front-left","front-right"],["front-center","front-left","front-right","back-center"],["front-center","front-left","front-right","back-left","back-right"],["front-center","front-left","front-right","back-left","back-right","LFE-channel"],["front-center","front-left","front-right","side-left","side-right","back-left","back-right","LFE-channel"]];class MpegFrameHeader{constructor(d,g){this.versionIndex=common.getBitAllignedNumber(d,g+1,3,2),this.layer=MpegFrameHeader.LayerDescription[common.getBitAllignedNumber(d,g+1,5,2)],this.versionIndex>1&&this.layer===0?this.parseAdtsHeader(d,g):this.parseMpegHeader(d,g),this.isProtectedByCRC=!common.isBitSet(d,g+1,7)}calcDuration(d){return d*this.calcSamplesPerFrame()/this.samplingRate}calcSamplesPerFrame(){return MpegFrameHeader.samplesInFrameTable[this.version===1?0:1][this.layer]}calculateSideInfoLength(){if(this.layer!==3)return 2;if(this.channelModeIndex===3){if(this.version===1)return 17;if(this.version===2||this.version===2.5)return 9}else{if(this.version===1)return 32;if(this.version===2||this.version===2.5)return 17}}calcSlotSize(){return[null,4,1,1][this.layer]}parseMpegHeader(d,g){this.container="MPEG",this.bitrateIndex=common.getBitAllignedNumber(d,g+2,0,4),this.sampRateFreqIndex=common.getBitAllignedNumber(d,g+2,4,2),this.padding=common.isBitSet(d,g+2,6),this.privateBit=common.isBitSet(d,g+2,7),this.channelModeIndex=common.getBitAllignedNumber(d,g+3,0,2),this.modeExtension=common.getBitAllignedNumber(d,g+3,2,2),this.isCopyrighted=common.isBitSet(d,g+3,4),this.isOriginalMedia=common.isBitSet(d,g+3,5),this.emphasis=common.getBitAllignedNumber(d,g+3,7,2),this.version=MpegFrameHeader.VersionID[this.versionIndex],this.channelMode=MpegFrameHeader.ChannelMode[this.channelModeIndex],this.codec=`MPEG ${this.version} Layer ${this.layer}`;const b=this.calcBitrate();if(!b)throw new Error("Cannot determine bit-rate");if(this.bitrate=b*1e3,this.samplingRate=this.calcSamplingRate(),this.samplingRate==null)throw new Error("Cannot determine sampling-rate")}parseAdtsHeader(d,g){debug$d("layer=0 => ADTS"),this.version=this.versionIndex===2?4:2,this.container="ADTS/MPEG-"+this.version;const b=common.getBitAllignedNumber(d,g+2,0,2);this.codec="AAC",this.codecProfile=MPEG4.AudioObjectTypes[b],debug$d(`MPEG-4 audio-codec=${this.codec}`);const _=common.getBitAllignedNumber(d,g+2,2,4);this.samplingRate=MPEG4.SamplingFrequencies[_],debug$d(`sampling-rate=${this.samplingRate}`);const $=common.getBitAllignedNumber(d,g+2,7,3);this.mp4ChannelConfig=MPEG4_ChannelConfigurations[$],debug$d(`channel-config=${this.mp4ChannelConfig.join("+")}`),this.frameLength=common.getBitAllignedNumber(d,g+3,6,2)<<11}calcBitrate(){if(this.bitrateIndex===0||this.bitrateIndex===15)return;const d=`${Math.floor(this.version)}${this.layer}`;return MpegFrameHeader.bitrate_index[this.bitrateIndex][d]}calcSamplingRate(){return this.sampRateFreqIndex===3?null:MpegFrameHeader.sampling_rate_freq_index[this.version][this.sampRateFreqIndex]}}MpegFrameHeader.SyncByte1=255;MpegFrameHeader.SyncByte2=224;MpegFrameHeader.VersionID=[2.5,null,2,1];MpegFrameHeader.LayerDescription=[0,3,2,1];MpegFrameHeader.ChannelMode=["stereo","joint_stereo","dual_channel","mono"];MpegFrameHeader.bitrate_index={1:{11:32,12:32,13:32,21:32,22:8,23:8},2:{11:64,12:48,13:40,21:48,22:16,23:16},3:{11:96,12:56,13:48,21:56,22:24,23:24},4:{11:128,12:64,13:56,21:64,22:32,23:32},5:{11:160,12:80,13:64,21:80,22:40,23:40},6:{11:192,12:96,13:80,21:96,22:48,23:48},7:{11:224,12:112,13:96,21:112,22:56,23:56},8:{11:256,12:128,13:112,21:128,22:64,23:64},9:{11:288,12:160,13:128,21:144,22:80,23:80},10:{11:320,12:192,13:160,21:160,22:96,23:96},11:{11:352,12:224,13:192,21:176,22:112,23:112},12:{11:384,12:256,13:224,21:192,22:128,23:128},13:{11:416,12:320,13:256,21:224,22:144,23:144},14:{11:448,12:384,13:320,21:256,22:160,23:160}};MpegFrameHeader.sampling_rate_freq_index={1:{0:44100,1:48e3,2:32e3},2:{0:22050,1:24e3,2:16e3},2.5:{0:11025,1:12e3,2:8e3}};MpegFrameHeader.samplesInFrameTable=[[0,384,1152,1152],[0,384,1152,576]];const FrameHeader={len:4,get:(h,d)=>new MpegFrameHeader(h,d)};function getVbrCodecProfile(h){return"V"+Math.floor((100-h)/10)}class MpegParser extends AbstractID3Parser_1$2.AbstractID3Parser{constructor(){super(...arguments),this.frameCount=0,this.syncFrameCount=-1,this.countSkipFrameData=0,this.totalDataLength=0,this.bitrates=[],this.calculateEofDuration=!1,this.buf_frame_header=Buffer.alloc(4),this.syncPeek={buf:Buffer.alloc(maxPeekLen),len:0}}async postId3v2Parse(){this.metadata.setFormat("lossless",!1);try{let d=!1;for(;!d;)await this.sync(),d=await this.parseCommonMpegHeader()}catch(d){if(d instanceof core_1$1.EndOfStreamError){if(debug$d("End-of-stream"),this.calculateEofDuration){const g=this.frameCount*this.samplesPerFrame;this.metadata.setFormat("numberOfSamples",g);const b=g/this.metadata.format.sampleRate;debug$d(`Calculate duration at EOF: ${b} sec.`,b),this.metadata.setFormat("duration",b)}}else throw d}}finalize(){const d=this.metadata.format,g=this.metadata.native.hasOwnProperty("ID3v1");if(d.duration&&this.tokenizer.fileInfo.size){const b=this.tokenizer.fileInfo.size-this.mpegOffset-(g?128:0);d.codecProfile&&d.codecProfile[0]==="V"&&this.metadata.setFormat("bitrate",b*8/d.duration)}else if(this.tokenizer.fileInfo.size&&d.codecProfile==="CBR"){const b=this.tokenizer.fileInfo.size-this.mpegOffset-(g?128:0),_=Math.round(b/this.frame_size)*this.samplesPerFrame;this.metadata.setFormat("numberOfSamples",_);const $=_/d.sampleRate;debug$d("Calculate CBR duration based on file size: %s",$),this.metadata.setFormat("duration",$)}}async sync(){let d=!1;for(;;){let g=0;if(this.syncPeek.len=await this.tokenizer.peekBuffer(this.syncPeek.buf,{length:maxPeekLen,mayBeLess:!0}),this.syncPeek.len<=163)throw new core_1$1.EndOfStreamError;for(;;)if(d&&(this.syncPeek.buf[g]&224)===224){this.buf_frame_header[0]=MpegFrameHeader.SyncByte1,this.buf_frame_header[1]=this.syncPeek.buf[g],await this.tokenizer.ignore(g),debug$d(`Sync at offset=${this.tokenizer.position-1}, frameCount=${this.frameCount}`),this.syncFrameCount===this.frameCount&&(debug$d(`Re-synced MPEG stream, frameCount=${this.frameCount}`),this.frameCount=0,this.frame_size=0),this.syncFrameCount=this.frameCount;return}else if(d=!1,g=this.syncPeek.buf.indexOf(MpegFrameHeader.SyncByte1,g),g===-1){if(this.syncPeek.len<this.syncPeek.buf.length)throw new core_1$1.EndOfStreamError;await this.tokenizer.ignore(this.syncPeek.len);break}else++g,d=!0}}async parseCommonMpegHeader(){this.frameCount===0&&(this.mpegOffset=this.tokenizer.position-1),await this.tokenizer.peekBuffer(this.buf_frame_header,{offset:1,length:3});let d;try{d=FrameHeader.get(this.buf_frame_header,0)}catch(g){return await this.tokenizer.ignore(1),this.metadata.addWarning("Parse error: "+g.message),!1}return await this.tokenizer.ignore(3),this.metadata.setFormat("container",d.container),this.metadata.setFormat("codec",d.codec),this.metadata.setFormat("lossless",!1),this.metadata.setFormat("sampleRate",d.samplingRate),this.frameCount++,d.version>=2&&d.layer===0?this.parseAdts(d):this.parseAudioFrameHeader(d)}async parseAudioFrameHeader(d){this.metadata.setFormat("numberOfChannels",d.channelMode==="mono"?1:2),this.metadata.setFormat("bitrate",d.bitrate),this.frameCount<20*1e4&&debug$d("offset=%s MP%s bitrate=%s sample-rate=%s",this.tokenizer.position-4,d.layer,d.bitrate,d.samplingRate);const g=d.calcSlotSize();if(g===null)throw new Error("invalid slot_size");const b=d.calcSamplesPerFrame();debug$d(`samples_per_frame=${b}`);const $=b/8*d.bitrate/d.samplingRate+(d.padding?g:0);if(this.frame_size=Math.floor($),this.audioFrameHeader=d,this.bitrates.push(d.bitrate),this.frameCount===1)return this.offset=FrameHeader.len,await this.skipSideInformation(),!1;if(this.frameCount===3){if(this.areAllSame(this.bitrates)){if(this.samplesPerFrame=b,this.metadata.setFormat("codecProfile","CBR"),this.tokenizer.fileInfo.size)return!0}else if(this.metadata.format.duration)return!0;if(!this.options.duration)return!0}return this.options.duration&&this.frameCount===4&&(this.samplesPerFrame=b,this.calculateEofDuration=!0),this.offset=4,d.isProtectedByCRC?(await this.parseCrc(),!1):(await this.skipSideInformation(),!1)}async parseAdts(d){const g=Buffer.alloc(3);await this.tokenizer.readBuffer(g),d.frameLength+=common.getBitAllignedNumber(g,0,0,11),this.totalDataLength+=d.frameLength,this.samplesPerFrame=1024;const b=d.samplingRate/this.samplesPerFrame,$=8*(this.frameCount===0?0:this.totalDataLength/this.frameCount)*b+.5;if(this.metadata.setFormat("bitrate",$),debug$d(`frame-count=${this.frameCount}, size=${d.frameLength} bytes, bit-rate=${$}`),await this.tokenizer.ignore(d.frameLength>7?d.frameLength-7:1),this.frameCount===3)if(this.metadata.setFormat("codecProfile",d.codecProfile),d.mp4ChannelConfig&&this.metadata.setFormat("numberOfChannels",d.mp4ChannelConfig.length),this.options.duration)this.calculateEofDuration=!0;else return!0;return!1}async parseCrc(){return this.crc=await this.tokenizer.readNumber(Token$g.INT16_BE),this.offset+=2,this.skipSideInformation()}async skipSideInformation(){const d=this.audioFrameHeader.calculateSideInfoLength();await this.tokenizer.readToken(new Token$g.Uint8ArrayType(d)),this.offset+=d,await this.readXtraInfoHeader()}async readXtraInfoHeader(){const d=await this.tokenizer.readToken(XingTag_1.InfoTagHeaderTag);switch(this.offset+=XingTag_1.InfoTagHeaderTag.len,d){case"Info":return this.metadata.setFormat("codecProfile","CBR"),this.readXingInfoHeader();case"Xing":const b=await this.readXingInfoHeader(),_=getVbrCodecProfile(b.vbrScale);return this.metadata.setFormat("codecProfile",_),null;case"Xtra":break;case"LAME":const $=await this.tokenizer.readToken(XingTag_1.LameEncoderVersion);if(this.frame_size>=this.offset+XingTag_1.LameEncoderVersion.len)return this.offset+=XingTag_1.LameEncoderVersion.len,this.metadata.setFormat("tool","LAME "+$),await this.skipFrameData(this.frame_size-this.offset),null;this.metadata.addWarning("Corrupt LAME header");break}const g=this.frame_size-this.offset;return g<0?this.metadata.addWarning("Frame "+this.frameCount+"corrupt: negative frameDataLeft"):await this.skipFrameData(g),null}async readXingInfoHeader(){const d=this.tokenizer.position,g=await(0,XingTag_1.readXingHeader)(this.tokenizer);if(this.offset+=this.tokenizer.position-d,g.lame&&(this.metadata.setFormat("tool","LAME "+common.stripNulls(g.lame.version)),g.lame.extended&&(this.metadata.setFormat("trackPeakLevel",g.lame.extended.track_peak),g.lame.extended.track_gain&&this.metadata.setFormat("trackGain",g.lame.extended.track_gain.adjustment),g.lame.extended.album_gain&&this.metadata.setFormat("albumGain",g.lame.extended.album_gain.adjustment),this.metadata.setFormat("duration",g.lame.extended.music_length/1e3))),g.streamSize){const _=this.audioFrameHeader.calcDuration(g.numFrames);return this.metadata.setFormat("duration",_),debug$d("Get duration from Xing header: %s",this.metadata.format.duration),g}const b=this.frame_size-this.offset;return await this.skipFrameData(b),g}async skipFrameData(d){if(d<0)throw new Error("frame-data-left cannot be negative");await this.tokenizer.ignore(d),this.countSkipFrameData+=d}areAllSame(d){const g=d[0];return d.every(b=>b===g)}}MpegParser$1.MpegParser=MpegParser;var musepack={},MpcSv8Parser$1={},StreamVersion8={};Object.defineProperty(StreamVersion8,"__esModule",{value:!0});StreamVersion8.StreamReader=void 0;const Token$f=lib$1,debug_1$c=browserExports$2,util$5=Util,debug$c=(0,debug_1$c.default)("music-metadata:parser:musepack:sv8"),PacketKey=new Token$f.StringType(2,"binary"),SH_part1={len:5,get:(h,d)=>({crc:Token$f.UINT32_LE.get(h,d),streamVersion:Token$f.UINT8.get(h,d+4)})},SH_part3={len:2,get:(h,d)=>({sampleFrequency:[44100,48e3,37800,32e3][util$5.getBitAllignedNumber(h,d,0,3)],maxUsedBands:util$5.getBitAllignedNumber(h,d,3,5),channelCount:util$5.getBitAllignedNumber(h,d+1,0,4)+1,msUsed:util$5.isBitSet(h,d+1,4),audioBlockFrames:util$5.getBitAllignedNumber(h,d+1,5,3)})};class StreamReader{constructor(d){this.tokenizer=d}async readPacketHeader(){const d=await this.tokenizer.readToken(PacketKey),g=await this.readVariableSizeField();return{key:d,payloadLength:g.value-2-g.len}}async readStreamHeader(d){const g={};debug$c(`Reading SH at offset=${this.tokenizer.position}`);const b=await this.tokenizer.readToken(SH_part1);d-=SH_part1.len,Object.assign(g,b),debug$c(`SH.streamVersion = ${b.streamVersion}`);const _=await this.readVariableSizeField();d-=_.len,g.sampleCount=_.value;const $=await this.readVariableSizeField();d-=$.len,g.beginningOfSilence=$.value;const j=await this.tokenizer.readToken(SH_part3);return d-=SH_part3.len,Object.assign(g,j),await this.tokenizer.ignore(d),g}async readVariableSizeField(d=1,g=0){let b=await this.tokenizer.readNumber(Token$f.UINT8);return b&128?(b&=127,b+=g,this.readVariableSizeField(d+1,b<<7)):{len:d,value:g+b}}}StreamVersion8.StreamReader=StreamReader;Object.defineProperty(MpcSv8Parser$1,"__esModule",{value:!0});MpcSv8Parser$1.MpcSv8Parser=void 0;const debug_1$b=browserExports$2,BasicParser_1$6=BasicParser$1,APEv2Parser_1$4=APEv2Parser$1,FourCC_1$6=FourCC,SV8=StreamVersion8,debug$b=(0,debug_1$b.default)("music-metadata:parser:musepack");class MpcSv8Parser extends BasicParser_1$6.BasicParser{constructor(){super(...arguments),this.audioLength=0}async parse(){if(await this.tokenizer.readToken(FourCC_1$6.FourCcToken)!=="MPCK")throw new Error("Invalid Magic number");return this.metadata.setFormat("container","Musepack, SV8"),this.parsePacket()}async parsePacket(){const d=new SV8.StreamReader(this.tokenizer);do{const g=await d.readPacketHeader();switch(debug$b(`packet-header key=${g.key}, payloadLength=${g.payloadLength}`),g.key){case"SH":const b=await d.readStreamHeader(g.payloadLength);this.metadata.setFormat("numberOfSamples",b.sampleCount),this.metadata.setFormat("sampleRate",b.sampleFrequency),this.metadata.setFormat("duration",b.sampleCount/b.sampleFrequency),this.metadata.setFormat("numberOfChannels",b.channelCount);break;case"AP":this.audioLength+=g.payloadLength,await this.tokenizer.ignore(g.payloadLength);break;case"RG":case"EI":case"SO":case"ST":case"CT":await this.tokenizer.ignore(g.payloadLength);break;case"SE":return this.metadata.setFormat("bitrate",this.audioLength*8/this.metadata.format.duration),APEv2Parser_1$4.APEv2Parser.tryParseApeHeader(this.metadata,this.tokenizer,this.options);default:throw new Error(`Unexpected header: ${g.key}`)}}while(!0)}}MpcSv8Parser$1.MpcSv8Parser=MpcSv8Parser;var MpcSv7Parser$1={},BitReader$1={};Object.defineProperty(BitReader$1,"__esModule",{value:!0});BitReader$1.BitReader=void 0;const Token$e=lib$1;class BitReader{constructor(d){this.tokenizer=d,this.pos=0,this.dword=void 0}async read(d){for(;this.dword===void 0;)this.dword=await this.tokenizer.readToken(Token$e.UINT32_LE);let g=this.dword;return this.pos+=d,this.pos<32?(g>>>=32-this.pos,g&(1<<d)-1):(this.pos-=32,this.pos===0?(this.dword=void 0,g&(1<<d)-1):(this.dword=await this.tokenizer.readToken(Token$e.UINT32_LE),this.pos&&(g<<=this.pos,g|=this.dword>>>32-this.pos),g&(1<<d)-1))}async ignore(d){if(this.pos>0){const _=32-this.pos;this.dword=void 0,d-=_,this.pos=0}const g=d%32,b=(d-g)/32;return await this.tokenizer.ignore(b*4),this.read(g)}}BitReader$1.BitReader=BitReader;var StreamVersion7={};Object.defineProperty(StreamVersion7,"__esModule",{value:!0});StreamVersion7.Header=void 0;const Token$d=lib$1,util$4=Util;StreamVersion7.Header={len:6*4,get:(h,d)=>{const g={signature:Buffer.from(h).toString("latin1",d,d+3),streamMinorVersion:util$4.getBitAllignedNumber(h,d+3,0,4),streamMajorVersion:util$4.getBitAllignedNumber(h,d+3,4,4),frameCount:Token$d.UINT32_LE.get(h,d+4),maxLevel:Token$d.UINT16_LE.get(h,d+8),sampleFrequency:[44100,48e3,37800,32e3][util$4.getBitAllignedNumber(h,d+10,0,2)],link:util$4.getBitAllignedNumber(h,d+10,2,2),profile:util$4.getBitAllignedNumber(h,d+10,4,4),maxBand:util$4.getBitAllignedNumber(h,d+11,0,6),intensityStereo:util$4.isBitSet(h,d+11,6),midSideStereo:util$4.isBitSet(h,d+11,7),titlePeak:Token$d.UINT16_LE.get(h,d+12),titleGain:Token$d.UINT16_LE.get(h,d+14),albumPeak:Token$d.UINT16_LE.get(h,d+16),albumGain:Token$d.UINT16_LE.get(h,d+18),lastFrameLength:Token$d.UINT32_LE.get(h,d+20)>>>20&2047,trueGapless:util$4.isBitSet(h,d+23,0)};return g.lastFrameLength=g.trueGapless?Token$d.UINT32_LE.get(h,20)>>>20&2047:0,g}};Object.defineProperty(MpcSv7Parser$1,"__esModule",{value:!0});MpcSv7Parser$1.MpcSv7Parser=void 0;const debug_1$a=browserExports$2,BasicParser_1$5=BasicParser$1,APEv2Parser_1$3=APEv2Parser$1,BitReader_1=BitReader$1,SV7=StreamVersion7,debug$a=(0,debug_1$a.default)("music-metadata:parser:musepack");class MpcSv7Parser extends BasicParser_1$5.BasicParser{constructor(){super(...arguments),this.audioLength=0}async parse(){const d=await this.tokenizer.readToken(SV7.Header);if(d.signature!=="MP+")throw new Error("Unexpected magic number");debug$a(`stream-version=${d.streamMajorVersion}.${d.streamMinorVersion}`),this.metadata.setFormat("container","Musepack, SV7"),this.metadata.setFormat("sampleRate",d.sampleFrequency);const g=1152*(d.frameCount-1)+d.lastFrameLength;this.metadata.setFormat("numberOfSamples",g),this.duration=g/d.sampleFrequency,this.metadata.setFormat("duration",this.duration),this.bitreader=new BitReader_1.BitReader(this.tokenizer),this.metadata.setFormat("numberOfChannels",d.midSideStereo||d.intensityStereo?2:1);const b=await this.bitreader.read(8);return this.metadata.setFormat("codec",(b/100).toFixed(2)),await this.skipAudioData(d.frameCount),debug$a(`End of audio stream, switching to APEv2, offset=${this.tokenizer.position}`),APEv2Parser_1$3.APEv2Parser.tryParseApeHeader(this.metadata,this.tokenizer,this.options)}async skipAudioData(d){for(;d-- >0;){const b=await this.bitreader.read(20);this.audioLength+=20+b,await this.bitreader.ignore(b)}const g=await this.bitreader.read(11);this.audioLength+=g,this.metadata.setFormat("bitrate",this.audioLength/this.duration)}}MpcSv7Parser$1.MpcSv7Parser=MpcSv7Parser;Object.defineProperty(musepack,"__esModule",{value:!0});const debug_1$9=browserExports$2,Token$c=lib$1,AbstractID3Parser_1$1=AbstractID3Parser$1,MpcSv8Parser_1=MpcSv8Parser$1,MpcSv7Parser_1=MpcSv7Parser$1,debug$9=(0,debug_1$9.default)("music-metadata:parser:musepack");class MusepackParser extends AbstractID3Parser_1$1.AbstractID3Parser{async postId3v2Parse(){const d=await this.tokenizer.peekToken(new Token$c.StringType(3,"binary"));let g;switch(d){case"MP+":{debug$9("Musepack stream-version 7"),g=new MpcSv7Parser_1.MpcSv7Parser;break}case"MPC":{debug$9("Musepack stream-version 8"),g=new MpcSv8Parser_1.MpcSv8Parser;break}default:throw new Error("Invalid Musepack signature prefix")}return g.init(this.metadata,this.tokenizer,this.options),g.parse()}}musepack.default=MusepackParser;var OggParser$1={},OpusParser$1={},Opus$1={};Object.defineProperty(Opus$1,"__esModule",{value:!0});Opus$1.IdHeader=void 0;const Token$b=lib$1;class IdHeader{constructor(d){if(this.len=d,d<19)throw new Error("ID-header-page 0 should be at least 19 bytes long")}get(d,g){return{magicSignature:new Token$b.StringType(8,"ascii").get(d,g+0),version:d.readUInt8(g+8),channelCount:d.readUInt8(g+9),preSkip:d.readInt16LE(g+10),inputSampleRate:d.readInt32LE(g+12),outputGain:d.readInt16LE(g+16),channelMapping:d.readUInt8(g+18)}}}Opus$1.IdHeader=IdHeader;Object.defineProperty(OpusParser$1,"__esModule",{value:!0});OpusParser$1.OpusParser=void 0;const Token$a=lib$1,VorbisParser_1$2=VorbisParser$1,Opus=Opus$1;class OpusParser extends VorbisParser_1$2.VorbisParser{constructor(d,g,b){super(d,g),this.tokenizer=b,this.lastPos=-1}parseFirstPage(d,g){if(this.metadata.setFormat("codec","Opus"),this.idHeader=new Opus.IdHeader(g.length).get(g,0),this.idHeader.magicSignature!=="OpusHead")throw new Error("Illegal ogg/Opus magic-signature");this.metadata.setFormat("sampleRate",this.idHeader.inputSampleRate),this.metadata.setFormat("numberOfChannels",this.idHeader.channelCount)}parseFullPage(d){switch(new Token$a.StringType(8,"ascii").get(d,0)){case"OpusTags":this.parseUserCommentList(d,8),this.lastPos=this.tokenizer.position-d.length;break}}calculateDuration(d){if(this.metadata.format.sampleRate&&d.absoluteGranulePosition>=0){const g=d.absoluteGranulePosition-this.idHeader.preSkip;if(this.metadata.setFormat("numberOfSamples",g),this.metadata.setFormat("duration",g/48e3),this.lastPos!==-1&&this.tokenizer.fileInfo.size&&this.metadata.format.duration){const b=this.tokenizer.fileInfo.size-this.lastPos;this.metadata.setFormat("bitrate",8*b/this.metadata.format.duration)}}}}OpusParser$1.OpusParser=OpusParser;var SpeexParser$1={},Speex$1={};Object.defineProperty(Speex$1,"__esModule",{value:!0});Speex$1.Header=void 0;const Token$9=lib$1,util$3=Util;Speex$1.Header={len:80,get:(h,d)=>({speex:new Token$9.StringType(8,"ascii").get(h,d+0),version:util$3.trimRightNull(new Token$9.StringType(20,"ascii").get(h,d+8)),version_id:h.readInt32LE(d+28),header_size:h.readInt32LE(d+32),rate:h.readInt32LE(d+36),mode:h.readInt32LE(d+40),mode_bitstream_version:h.readInt32LE(d+44),nb_channels:h.readInt32LE(d+48),bitrate:h.readInt32LE(d+52),frame_size:h.readInt32LE(d+56),vbr:h.readInt32LE(d+60),frames_per_packet:h.readInt32LE(d+64),extra_headers:h.readInt32LE(d+68),reserved1:h.readInt32LE(d+72),reserved2:h.readInt32LE(d+76)})};Object.defineProperty(SpeexParser$1,"__esModule",{value:!0});SpeexParser$1.SpeexParser=void 0;const debug_1$8=browserExports$2,VorbisParser_1$1=VorbisParser$1,Speex=Speex$1,debug$8=(0,debug_1$8.default)("music-metadata:parser:ogg:speex");class SpeexParser extends VorbisParser_1$1.VorbisParser{constructor(d,g,b){super(d,g),this.tokenizer=b}parseFirstPage(d,g){debug$8("First Ogg/Speex page");const b=Speex.Header.get(g,0);this.metadata.setFormat("codec",`Speex ${b.version}`),this.metadata.setFormat("numberOfChannels",b.nb_channels),this.metadata.setFormat("sampleRate",b.rate),b.bitrate!==-1&&this.metadata.setFormat("bitrate",b.bitrate)}}SpeexParser$1.SpeexParser=SpeexParser;var TheoraParser$1={},Theora={};Object.defineProperty(Theora,"__esModule",{value:!0});Theora.IdentificationHeader=void 0;const Token$8=lib$1;Theora.IdentificationHeader={len:42,get:(h,d)=>({id:new Token$8.StringType(7,"ascii").get(h,d),vmaj:h.readUInt8(d+7),vmin:h.readUInt8(d+8),vrev:h.readUInt8(d+9),vmbw:h.readUInt16BE(d+10),vmbh:h.readUInt16BE(d+17),nombr:Token$8.UINT24_BE.get(h,d+37),nqual:h.readUInt8(d+40)})};Object.defineProperty(TheoraParser$1,"__esModule",{value:!0});TheoraParser$1.TheoraParser=void 0;const debug_1$7=browserExports$2,Theora_1=Theora,debug$7=(0,debug_1$7.default)("music-metadata:parser:ogg:theora");class TheoraParser{constructor(d,g,b){this.metadata=d,this.tokenizer=b}parsePage(d,g){d.headerType.firstPage&&this.parseFirstPage(d,g)}flush(){debug$7("flush")}calculateDuration(d){debug$7("duration calculation not implemented")}parseFirstPage(d,g){debug$7("First Ogg/Theora page"),this.metadata.setFormat("codec","Theora");const b=Theora_1.IdentificationHeader.get(g,0);this.metadata.setFormat("bitrate",b.nombr)}}TheoraParser$1.TheoraParser=TheoraParser;Object.defineProperty(OggParser$1,"__esModule",{value:!0});OggParser$1.OggParser=OggParser$1.SegmentTable=void 0;const Token$7=lib$1,core_1=core$1,debug_1$6=browserExports$2,util$2=Util,FourCC_1$5=FourCC,BasicParser_1$4=BasicParser$1,VorbisParser_1=VorbisParser$1,OpusParser_1=OpusParser$1,SpeexParser_1=SpeexParser$1,TheoraParser_1=TheoraParser$1,debug$6=(0,debug_1$6.default)("music-metadata:parser:ogg");class SegmentTable{static sum(d,g,b){let _=0;for(let $=g;$<g+b;++$)_+=d[$];return _}constructor(d){this.len=d.page_segments}get(d,g){return{totalPageSize:SegmentTable.sum(d,g,this.len)}}}OggParser$1.SegmentTable=SegmentTable;class OggParser extends BasicParser_1$4.BasicParser{async parse(){debug$6("pos=%s, parsePage()",this.tokenizer.position);try{let d;do{if(d=await this.tokenizer.readToken(OggParser.Header),d.capturePattern!=="OggS")throw new Error("Invalid Ogg capture pattern");this.metadata.setFormat("container","Ogg"),this.header=d,this.pageNumber=d.pageSequenceNo,debug$6("page#=%s, Ogg.id=%s",d.pageSequenceNo,d.capturePattern);const g=await this.tokenizer.readToken(new SegmentTable(d));debug$6("totalPageSize=%s",g.totalPageSize);const b=await this.tokenizer.readToken(new Token$7.Uint8ArrayType(g.totalPageSize));if(debug$6("firstPage=%s, lastPage=%s, continued=%s",d.headerType.firstPage,d.headerType.lastPage,d.headerType.continued),d.headerType.firstPage){const _=new Token$7.StringType(7,"ascii").get(Buffer.from(b),0);switch(_){case"vorbis":debug$6("Set page consumer to Ogg/Vorbis"),this.pageConsumer=new VorbisParser_1.VorbisParser(this.metadata,this.options);break;case"OpusHea":debug$6("Set page consumer to Ogg/Opus"),this.pageConsumer=new OpusParser_1.OpusParser(this.metadata,this.options,this.tokenizer);break;case"Speex  ":debug$6("Set page consumer to Ogg/Speex"),this.pageConsumer=new SpeexParser_1.SpeexParser(this.metadata,this.options,this.tokenizer);break;case"fishead":case"\0theora":debug$6("Set page consumer to Ogg/Theora"),this.pageConsumer=new TheoraParser_1.TheoraParser(this.metadata,this.options,this.tokenizer);break;default:throw new Error("gg audio-codec not recognized (id="+_+")")}}this.pageConsumer.parsePage(d,b)}while(!d.headerType.lastPage)}catch(d){if(d instanceof core_1.EndOfStreamError)this.metadata.addWarning("Last OGG-page is not marked with last-page flag"),debug$6("End-of-stream"),this.metadata.addWarning("Last OGG-page is not marked with last-page flag"),this.header&&this.pageConsumer.calculateDuration(this.header);else if(d.message.startsWith("FourCC"))this.pageNumber>0&&(this.metadata.addWarning("Invalid FourCC ID, maybe last OGG-page is not marked with last-page flag"),this.pageConsumer.flush());else throw d}}}OggParser.Header={len:27,get:(h,d)=>({capturePattern:FourCC_1$5.FourCcToken.get(h,d),version:Token$7.UINT8.get(h,d+4),headerType:{continued:util$2.getBit(h,d+5,0),firstPage:util$2.getBit(h,d+5,1),lastPage:util$2.getBit(h,d+5,2)},absoluteGranulePosition:Number(Token$7.UINT64_LE.get(h,d+6)),streamSerialNumber:Token$7.UINT32_LE.get(h,d+14),pageSequenceNo:Token$7.UINT32_LE.get(h,d+18),pageChecksum:Token$7.UINT32_LE.get(h,d+22),page_segments:Token$7.UINT8.get(h,d+26)})};OggParser$1.OggParser=OggParser;var WaveParser$1={},RiffChunk={};Object.defineProperty(RiffChunk,"__esModule",{value:!0});RiffChunk.ListInfoTagValue=RiffChunk.Header=void 0;const Token$6=lib$1;RiffChunk.Header={len:8,get:(h,d)=>({chunkID:h.toString("binary",d,d+4),chunkSize:Token$6.UINT32_LE.get(h,4)})};class ListInfoTagValue{constructor(d){this.tagHeader=d,this.len=d.chunkSize,this.len+=this.len&1}get(d,g){return new Token$6.StringType(this.tagHeader.chunkSize,"ascii").get(d,g)}}RiffChunk.ListInfoTagValue=ListInfoTagValue;var WaveChunk$1={};(function(h){Object.defineProperty(h,"__esModule",{value:!0}),h.FactChunk=h.Format=h.WaveFormat=void 0,function(b){b[b.PCM=1]="PCM",b[b.ADPCM=2]="ADPCM",b[b.IEEE_FLOAT=3]="IEEE_FLOAT",b[b.MPEG_ADTS_AAC=5632]="MPEG_ADTS_AAC",b[b.MPEG_LOAS=5634]="MPEG_LOAS",b[b.RAW_AAC1=255]="RAW_AAC1",b[b.DOLBY_AC3_SPDIF=146]="DOLBY_AC3_SPDIF",b[b.DVM=8192]="DVM",b[b.RAW_SPORT=576]="RAW_SPORT",b[b.ESST_AC3=577]="ESST_AC3",b[b.DRM=9]="DRM",b[b.DTS2=8193]="DTS2",b[b.MPEG=80]="MPEG"}(h.WaveFormat||(h.WaveFormat={}));class d{constructor(_){if(_.chunkSize<16)throw new Error("Invalid chunk size");this.len=_.chunkSize}get(_,$){return{wFormatTag:_.readUInt16LE($),nChannels:_.readUInt16LE($+2),nSamplesPerSec:_.readUInt32LE($+4),nAvgBytesPerSec:_.readUInt32LE($+8),nBlockAlign:_.readUInt16LE($+12),wBitsPerSample:_.readUInt16LE($+14)}}}h.Format=d;class g{constructor(_){if(_.chunkSize<4)throw new Error("Invalid fact chunk size.");this.len=_.chunkSize}get(_,$){return{dwSampleLength:_.readUInt32LE($)}}}h.FactChunk=g})(WaveChunk$1);var BwfChunk={};Object.defineProperty(BwfChunk,"__esModule",{value:!0});BwfChunk.BroadcastAudioExtensionChunk=void 0;const Token$5=lib$1,Util_1=Util;BwfChunk.BroadcastAudioExtensionChunk={len:420,get:(h,d)=>({description:(0,Util_1.stripNulls)(new Token$5.StringType(256,"ascii").get(h,d)).trim(),originator:(0,Util_1.stripNulls)(new Token$5.StringType(32,"ascii").get(h,d+256)).trim(),originatorReference:(0,Util_1.stripNulls)(new Token$5.StringType(32,"ascii").get(h,d+288)).trim(),originationDate:(0,Util_1.stripNulls)(new Token$5.StringType(10,"ascii").get(h,d+320)).trim(),originationTime:(0,Util_1.stripNulls)(new Token$5.StringType(8,"ascii").get(h,d+330)).trim(),timeReferenceLow:Token$5.UINT32_LE.get(h,d+338),timeReferenceHigh:Token$5.UINT32_LE.get(h,d+342),version:Token$5.UINT16_LE.get(h,d+346),umid:new Token$5.Uint8ArrayType(64).get(h,d+348),loudnessValue:Token$5.UINT16_LE.get(h,d+412),maxTruePeakLevel:Token$5.UINT16_LE.get(h,d+414),maxMomentaryLoudness:Token$5.UINT16_LE.get(h,d+416),maxShortTermLoudness:Token$5.UINT16_LE.get(h,d+418)})};Object.defineProperty(WaveParser$1,"__esModule",{value:!0});WaveParser$1.WaveParser=void 0;const strtok3$2=core$1,Token$4=lib$1,debug_1$5=browserExports$2,riff=RiffChunk,WaveChunk=WaveChunk$1,ID3v2Parser_1$2=ID3v2Parser$1,util$1=Util,FourCC_1$4=FourCC,BasicParser_1$3=BasicParser$1,BwfChunk_1=BwfChunk,debug$5=(0,debug_1$5.default)("music-metadata:parser:RIFF");class WaveParser extends BasicParser_1$3.BasicParser{async parse(){const d=await this.tokenizer.readToken(riff.Header);if(debug$5(`pos=${this.tokenizer.position}, parse: chunkID=${d.chunkID}`),d.chunkID==="RIFF")return this.parseRiffChunk(d.chunkSize).catch(g=>{if(!(g instanceof strtok3$2.EndOfStreamError))throw g})}async parseRiffChunk(d){const g=await this.tokenizer.readToken(FourCC_1$4.FourCcToken);switch(this.metadata.setFormat("container",g),g){case"WAVE":return this.readWaveChunk(d-FourCC_1$4.FourCcToken.len);default:throw new Error(`Unsupported RIFF format: RIFF/${g}`)}}async readWaveChunk(d){for(;d>=riff.Header.len;){const g=await this.tokenizer.readToken(riff.Header);switch(d-=riff.Header.len+g.chunkSize,g.chunkSize>d&&this.metadata.addWarning("Data chunk size exceeds file size"),this.header=g,debug$5(`pos=${this.tokenizer.position}, readChunk: chunkID=RIFF/WAVE/${g.chunkID}`),g.chunkID){case"LIST":await this.parseListTag(g);break;case"fact":this.metadata.setFormat("lossless",!1),this.fact=await this.tokenizer.readToken(new WaveChunk.FactChunk(g));break;case"fmt ":const b=await this.tokenizer.readToken(new WaveChunk.Format(g));let _=WaveChunk.WaveFormat[b.wFormatTag];_||(debug$5("WAVE/non-PCM format="+b.wFormatTag),_="non-PCM ("+b.wFormatTag+")"),this.metadata.setFormat("codec",_),this.metadata.setFormat("bitsPerSample",b.wBitsPerSample),this.metadata.setFormat("sampleRate",b.nSamplesPerSec),this.metadata.setFormat("numberOfChannels",b.nChannels),this.metadata.setFormat("bitrate",b.nBlockAlign*b.nSamplesPerSec*8),this.blockAlign=b.nBlockAlign;break;case"id3 ":case"ID3 ":const $=await this.tokenizer.readToken(new Token$4.Uint8ArrayType(g.chunkSize)),j=strtok3$2.fromBuffer($);await new ID3v2Parser_1$2.ID3v2Parser().parse(this.metadata,j,this.options);break;case"data":this.metadata.format.lossless!==!1&&this.metadata.setFormat("lossless",!0);let _e=g.chunkSize;if(this.tokenizer.fileInfo.size){const st=this.tokenizer.fileInfo.size-this.tokenizer.position;st<_e&&(this.metadata.addWarning("data chunk length exceeding file length"),_e=st)}const et=this.fact?this.fact.dwSampleLength:_e===4294967295?void 0:_e/this.blockAlign;et&&(this.metadata.setFormat("numberOfSamples",et),this.metadata.setFormat("duration",et/this.metadata.format.sampleRate)),this.metadata.format.codec==="ADPCM"?this.metadata.setFormat("bitrate",352e3):this.metadata.setFormat("bitrate",this.blockAlign*this.metadata.format.sampleRate*8),await this.tokenizer.ignore(g.chunkSize);break;case"bext":const rt=await this.tokenizer.readToken(BwfChunk_1.BroadcastAudioExtensionChunk);Object.keys(rt).forEach(st=>{this.metadata.addTag("exif","bext."+st,rt[st])});const nt=g.chunkSize-BwfChunk_1.BroadcastAudioExtensionChunk.len;await this.tokenizer.ignore(nt);break;case"\0\0\0\0":debug$5(`Ignore padding chunk: RIFF/${g.chunkID} of ${g.chunkSize} bytes`),this.metadata.addWarning("Ignore chunk: RIFF/"+g.chunkID),await this.tokenizer.ignore(g.chunkSize);break;default:debug$5(`Ignore chunk: RIFF/${g.chunkID} of ${g.chunkSize} bytes`),this.metadata.addWarning("Ignore chunk: RIFF/"+g.chunkID),await this.tokenizer.ignore(g.chunkSize)}this.header.chunkSize%2===1&&(debug$5("Read odd padding byte"),await this.tokenizer.ignore(1))}}async parseListTag(d){const g=await this.tokenizer.readToken(new Token$4.StringType(4,"binary"));switch(debug$5("pos=%s, parseListTag: chunkID=RIFF/WAVE/LIST/%s",this.tokenizer.position,g),g){case"INFO":return this.parseRiffInfoTags(d.chunkSize-4);case"adtl":default:return this.metadata.addWarning("Ignore chunk: RIFF/WAVE/LIST/"+g),debug$5("Ignoring chunkID=RIFF/WAVE/LIST/"+g),this.tokenizer.ignore(d.chunkSize-4).then()}}async parseRiffInfoTags(d){for(;d>=8;){const g=await this.tokenizer.readToken(riff.Header),b=new riff.ListInfoTagValue(g),_=await this.tokenizer.readToken(b);this.addTag(g.chunkID,util$1.stripNulls(_)),d-=8+b.len}if(d!==0)throw Error("Illegal remaining size: "+d)}addTag(d,g){this.metadata.addTag("exif",d,g)}}WaveParser$1.WaveParser=WaveParser;var WavPackParser$1={},WavPackToken={};Object.defineProperty(WavPackToken,"__esModule",{value:!0});WavPackToken.WavPack=void 0;const Token$3=lib$1,FourCC_1$3=FourCC,SampleRates=[6e3,8e3,9600,11025,12e3,16e3,22050,24e3,32e3,44100,48e3,64e3,88200,96e3,192e3,-1];class WavPack{static isBitSet(d,g){return WavPack.getBitAllignedNumber(d,g,1)===1}static getBitAllignedNumber(d,g,b){return d>>>g&4294967295>>>32-b}}WavPack.BlockHeaderToken={len:32,get:(h,d)=>{const g=Token$3.UINT32_LE.get(h,d+24),b={BlockID:FourCC_1$3.FourCcToken.get(h,d),blockSize:Token$3.UINT32_LE.get(h,d+4),version:Token$3.UINT16_LE.get(h,d+8),totalSamples:Token$3.UINT32_LE.get(h,d+12),blockIndex:Token$3.UINT32_LE.get(h,d+16),blockSamples:Token$3.UINT32_LE.get(h,d+20),flags:{bitsPerSample:(1+WavPack.getBitAllignedNumber(g,0,2))*8,isMono:WavPack.isBitSet(g,2),isHybrid:WavPack.isBitSet(g,3),isJointStereo:WavPack.isBitSet(g,4),crossChannel:WavPack.isBitSet(g,5),hybridNoiseShaping:WavPack.isBitSet(g,6),floatingPoint:WavPack.isBitSet(g,7),samplingRate:SampleRates[WavPack.getBitAllignedNumber(g,23,4)],isDSD:WavPack.isBitSet(g,31)},crc:new Token$3.Uint8ArrayType(4).get(h,d+28)};return b.flags.isDSD&&(b.totalSamples*=8),b}};WavPack.MetadataIdToken={len:1,get:(h,d)=>({functionId:WavPack.getBitAllignedNumber(h[d],0,6),isOptional:WavPack.isBitSet(h[d],5),isOddSize:WavPack.isBitSet(h[d],6),largeBlock:WavPack.isBitSet(h[d],7)})};WavPackToken.WavPack=WavPack;Object.defineProperty(WavPackParser$1,"__esModule",{value:!0});WavPackParser$1.WavPackParser=void 0;const Token$2=lib$1,APEv2Parser_1$2=APEv2Parser$1,FourCC_1$2=FourCC,BasicParser_1$2=BasicParser$1,WavPackToken_1=WavPackToken,debug_1$4=browserExports$2,debug$4=(0,debug_1$4.default)("music-metadata:parser:WavPack");class WavPackParser extends BasicParser_1$2.BasicParser{async parse(){return this.audioDataSize=0,await this.parseWavPackBlocks(),APEv2Parser_1$2.APEv2Parser.tryParseApeHeader(this.metadata,this.tokenizer,this.options)}async parseWavPackBlocks(){do{if(await this.tokenizer.peekToken(FourCC_1$2.FourCcToken)!=="wvpk")break;const g=await this.tokenizer.readToken(WavPackToken_1.WavPack.BlockHeaderToken);if(g.BlockID!=="wvpk")throw new Error("Invalid WavPack Block-ID");debug$4(`WavPack header blockIndex=${g.blockIndex}, len=${WavPackToken_1.WavPack.BlockHeaderToken.len}`),g.blockIndex===0&&!this.metadata.format.container&&(this.metadata.setFormat("container","WavPack"),this.metadata.setFormat("lossless",!g.flags.isHybrid),this.metadata.setFormat("bitsPerSample",g.flags.bitsPerSample),g.flags.isDSD||(this.metadata.setFormat("sampleRate",g.flags.samplingRate),this.metadata.setFormat("duration",g.totalSamples/g.flags.samplingRate)),this.metadata.setFormat("numberOfChannels",g.flags.isMono?1:2),this.metadata.setFormat("numberOfSamples",g.totalSamples),this.metadata.setFormat("codec",g.flags.isDSD?"DSD":"PCM"));const b=g.blockSize-(WavPackToken_1.WavPack.BlockHeaderToken.len-8);await(g.blockIndex===0?this.parseMetadataSubBlock(g,b):this.tokenizer.ignore(b)),g.blockSamples>0&&(this.audioDataSize+=g.blockSize)}while(!this.tokenizer.fileInfo.size||this.tokenizer.fileInfo.size-this.tokenizer.position>=WavPackToken_1.WavPack.BlockHeaderToken.len);this.metadata.setFormat("bitrate",this.audioDataSize*8/this.metadata.format.duration)}async parseMetadataSubBlock(d,g){for(;g>WavPackToken_1.WavPack.MetadataIdToken.len;){const b=await this.tokenizer.readToken(WavPackToken_1.WavPack.MetadataIdToken),_=await this.tokenizer.readNumber(b.largeBlock?Token$2.UINT24_LE:Token$2.UINT8),$=Buffer.alloc(_*2-(b.isOddSize?1:0));switch(await this.tokenizer.readBuffer($),debug$4(`Metadata Sub-Blocks functionId=0x${b.functionId.toString(16)}, id.largeBlock=${b.largeBlock},data-size=${$.length}`),b.functionId){case 0:break;case 14:debug$4("ID_DSD_BLOCK");const j=1<<$.readUInt8(0),_e=d.flags.samplingRate*j*8;if(!d.flags.isDSD)throw new Error("Only expect DSD block if DSD-flag is set");this.metadata.setFormat("sampleRate",_e),this.metadata.setFormat("duration",d.totalSamples/_e);break;case 36:debug$4("ID_ALT_TRAILER: trailer for non-wav files");break;case 38:this.metadata.setFormat("audioMD5",$);break;case 47:debug$4(`ID_BLOCK_CHECKSUM: checksum=${$.toString("hex")}`);break;default:debug$4(`Ignore unsupported meta-sub-block-id functionId=0x${b.functionId.toString(16)}`);break}g-=WavPackToken_1.WavPack.MetadataIdToken.len+(b.largeBlock?Token$2.UINT24_LE.len:Token$2.UINT8.len)+_*2,debug$4(`remainingLength=${g}`),b.isOddSize&&this.tokenizer.ignore(1)}if(g!==0)throw new Error("metadata-sub-block should fit it remaining length")}}WavPackParser$1.WavPackParser=WavPackParser;var DsfParser$1={},DsfChunk={};(function(h){Object.defineProperty(h,"__esModule",{value:!0}),h.FormatChunk=h.ChannelType=h.DsdChunk=h.ChunkHeader=void 0;const d=lib$1,g=FourCC;h.ChunkHeader={len:12,get:(b,_)=>({id:g.FourCcToken.get(b,_),size:d.UINT64_LE.get(b,_+4)})},h.DsdChunk={len:16,get:(b,_)=>({fileSize:d.INT64_LE.get(b,_),metadataPointer:d.INT64_LE.get(b,_+8)})},function(b){b[b.mono=1]="mono",b[b.stereo=2]="stereo",b[b.channels=3]="channels",b[b.quad=4]="quad",b[b["4 channels"]=5]="4 channels",b[b["5 channels"]=6]="5 channels",b[b["5.1 channels"]=7]="5.1 channels"}(h.ChannelType||(h.ChannelType={})),h.FormatChunk={len:40,get:(b,_)=>({formatVersion:d.INT32_LE.get(b,_),formatID:d.INT32_LE.get(b,_+4),channelType:d.INT32_LE.get(b,_+8),channelNum:d.INT32_LE.get(b,_+12),samplingFrequency:d.INT32_LE.get(b,_+16),bitsPerSample:d.INT32_LE.get(b,_+20),sampleCount:d.INT64_LE.get(b,_+24),blockSizePerChannel:d.INT32_LE.get(b,_+32)})}})(DsfChunk);Object.defineProperty(DsfParser$1,"__esModule",{value:!0});DsfParser$1.DsfParser=void 0;const debug_1$3=browserExports$2,AbstractID3Parser_1=AbstractID3Parser$1,DsfChunk_1=DsfChunk,ID3v2Parser_1$1=ID3v2Parser$1,debug$3=(0,debug_1$3.default)("music-metadata:parser:DSF");class DsfParser extends AbstractID3Parser_1.AbstractID3Parser{async postId3v2Parse(){const d=this.tokenizer.position,g=await this.tokenizer.readToken(DsfChunk_1.ChunkHeader);if(g.id!=="DSD ")throw new Error("Invalid chunk signature");this.metadata.setFormat("container","DSF"),this.metadata.setFormat("lossless",!0);const b=await this.tokenizer.readToken(DsfChunk_1.DsdChunk);if(b.metadataPointer===BigInt(0))debug$3("No ID3v2 tag present");else return debug$3(`expect ID3v2 at offset=${b.metadataPointer}`),await this.parseChunks(b.fileSize-g.size),await this.tokenizer.ignore(Number(b.metadataPointer)-this.tokenizer.position-d),new ID3v2Parser_1$1.ID3v2Parser().parse(this.metadata,this.tokenizer,this.options)}async parseChunks(d){for(;d>=DsfChunk_1.ChunkHeader.len;){const g=await this.tokenizer.readToken(DsfChunk_1.ChunkHeader);switch(debug$3(`Parsing chunk name=${g.id} size=${g.size}`),g.id){case"fmt ":const b=await this.tokenizer.readToken(DsfChunk_1.FormatChunk);this.metadata.setFormat("numberOfChannels",b.channelNum),this.metadata.setFormat("sampleRate",b.samplingFrequency),this.metadata.setFormat("bitsPerSample",b.bitsPerSample),this.metadata.setFormat("numberOfSamples",b.sampleCount),this.metadata.setFormat("duration",Number(b.sampleCount)/b.samplingFrequency);const _=b.bitsPerSample*b.samplingFrequency*b.channelNum;this.metadata.setFormat("bitrate",_);return;default:this.tokenizer.ignore(Number(g.size)-DsfChunk_1.ChunkHeader.len);break}d-=g.size}}}DsfParser$1.DsfParser=DsfParser;var DsdiffParser$1={},DsdiffToken={};Object.defineProperty(DsdiffToken,"__esModule",{value:!0});DsdiffToken.ChunkHeader64=void 0;const Token$1=lib$1,FourCC_1$1=FourCC;DsdiffToken.ChunkHeader64={len:12,get:(h,d)=>({chunkID:FourCC_1$1.FourCcToken.get(h,d),chunkSize:Token$1.INT64_BE.get(h,d+4)})};Object.defineProperty(DsdiffParser$1,"__esModule",{value:!0});DsdiffParser$1.DsdiffParser=void 0;const Token=lib$1,debug_1$2=browserExports$2,strtok3$1=core$1,FourCC_1=FourCC,BasicParser_1$1=BasicParser$1,ID3v2Parser_1=ID3v2Parser$1,DsdiffToken_1=DsdiffToken,debug$2=(0,debug_1$2.default)("music-metadata:parser:aiff");class DsdiffParser extends BasicParser_1$1.BasicParser{async parse(){const d=await this.tokenizer.readToken(DsdiffToken_1.ChunkHeader64);if(d.chunkID!=="FRM8")throw new Error("Unexpected chunk-ID");const g=(await this.tokenizer.readToken(FourCC_1.FourCcToken)).trim();switch(g){case"DSD":return this.metadata.setFormat("container",`DSDIFF/${g}`),this.metadata.setFormat("lossless",!0),this.readFmt8Chunks(d.chunkSize-BigInt(FourCC_1.FourCcToken.len));default:throw Error(`Unsupported DSDIFF type: ${g}`)}}async readFmt8Chunks(d){for(;d>=DsdiffToken_1.ChunkHeader64.len;){const g=await this.tokenizer.readToken(DsdiffToken_1.ChunkHeader64);debug$2(`Chunk id=${g.chunkID}`),await this.readData(g),d-=BigInt(DsdiffToken_1.ChunkHeader64.len)+g.chunkSize}}async readData(d){debug$2(`Reading data of chunk[ID=${d.chunkID}, size=${d.chunkSize}]`);const g=this.tokenizer.position;switch(d.chunkID.trim()){case"FVER":const _=await this.tokenizer.readToken(Token.UINT32_LE);debug$2(`DSDIFF version=${_}`);break;case"PROP":if(await this.tokenizer.readToken(FourCC_1.FourCcToken)!=="SND ")throw new Error("Unexpected PROP-chunk ID");await this.handleSoundPropertyChunks(d.chunkSize-BigInt(FourCC_1.FourCcToken.len));break;case"ID3":const j=await this.tokenizer.readToken(new Token.Uint8ArrayType(Number(d.chunkSize))),_e=strtok3$1.fromBuffer(j);await new ID3v2Parser_1.ID3v2Parser().parse(this.metadata,_e,this.options);break;default:debug$2(`Ignore chunk[ID=${d.chunkID}, size=${d.chunkSize}]`);break;case"DSD":this.metadata.setFormat("numberOfSamples",Number(d.chunkSize*BigInt(8)/BigInt(this.metadata.format.numberOfChannels))),this.metadata.setFormat("duration",this.metadata.format.numberOfSamples/this.metadata.format.sampleRate);break}const b=d.chunkSize-BigInt(this.tokenizer.position-g);b>0&&(debug$2(`After Parsing chunk, remaining ${b} bytes`),await this.tokenizer.ignore(Number(b)))}async handleSoundPropertyChunks(d){for(debug$2(`Parsing sound-property-chunks, remainingSize=${d}`);d>0;){const g=await this.tokenizer.readToken(DsdiffToken_1.ChunkHeader64);debug$2(`Sound-property-chunk[ID=${g.chunkID}, size=${g.chunkSize}]`);const b=this.tokenizer.position;switch(g.chunkID.trim()){case"FS":const $=await this.tokenizer.readToken(Token.UINT32_BE);this.metadata.setFormat("sampleRate",$);break;case"CHNL":const j=await this.tokenizer.readToken(Token.UINT16_BE);this.metadata.setFormat("numberOfChannels",j),await this.handleChannelChunks(g.chunkSize-BigInt(Token.UINT16_BE.len));break;case"CMPR":const _e=(await this.tokenizer.readToken(FourCC_1.FourCcToken)).trim(),et=await this.tokenizer.readToken(Token.UINT8),rt=await this.tokenizer.readToken(new Token.StringType(et,"ascii"));_e==="DSD"&&(this.metadata.setFormat("lossless",!0),this.metadata.setFormat("bitsPerSample",1)),this.metadata.setFormat("codec",`${_e} (${rt})`);break;case"ABSS":const nt=await this.tokenizer.readToken(Token.UINT16_BE),st=await this.tokenizer.readToken(Token.UINT8),at=await this.tokenizer.readToken(Token.UINT8),it=await this.tokenizer.readToken(Token.UINT32_BE);debug$2(`ABSS ${nt}:${st}:${at}.${it}`);break;case"LSCO":const dt=await this.tokenizer.readToken(Token.UINT16_BE);debug$2(`LSCO lsConfig=${dt}`);break;case"COMT":default:debug$2(`Unknown sound-property-chunk[ID=${g.chunkID}, size=${g.chunkSize}]`),await this.tokenizer.ignore(Number(g.chunkSize))}const _=g.chunkSize-BigInt(this.tokenizer.position-b);_>0&&(debug$2(`After Parsing sound-property-chunk ${g.chunkSize}, remaining ${_} bytes`),await this.tokenizer.ignore(Number(_))),d-=BigInt(DsdiffToken_1.ChunkHeader64.len)+g.chunkSize,debug$2(`Parsing sound-property-chunks, remainingSize=${d}`)}if(this.metadata.format.lossless&&this.metadata.format.sampleRate&&this.metadata.format.numberOfChannels&&this.metadata.format.bitsPerSample){const g=this.metadata.format.sampleRate*this.metadata.format.numberOfChannels*this.metadata.format.bitsPerSample;this.metadata.setFormat("bitrate",g)}}async handleChannelChunks(d){debug$2(`Parsing channel-chunks, remainingSize=${d}`);const g=[];for(;d>=FourCC_1.FourCcToken.len;){const b=await this.tokenizer.readToken(FourCC_1.FourCcToken);debug$2(`Channel[ID=${b}]`),g.push(b),d-=BigInt(FourCC_1.FourCcToken.len)}return debug$2(`Channels: ${g.join(", ")}`),g}}DsdiffParser$1.DsdiffParser=DsdiffParser;var MatroskaParser$1={},MatroskaDtd={};Object.defineProperty(MatroskaDtd,"__esModule",{value:!0});MatroskaDtd.elements=void 0;const types_1$1=types;MatroskaDtd.elements={440786851:{name:"ebml",container:{17030:{name:"ebmlVersion",value:types_1$1.DataType.uint},17143:{name:"ebmlReadVersion",value:types_1$1.DataType.uint},17138:{name:"ebmlMaxIDWidth",value:types_1$1.DataType.uint},17139:{name:"ebmlMaxSizeWidth",value:types_1$1.DataType.uint},17026:{name:"docType",value:types_1$1.DataType.string},17031:{name:"docTypeVersion",value:types_1$1.DataType.uint},17029:{name:"docTypeReadVersion",value:types_1$1.DataType.uint}}},408125543:{name:"segment",container:{290298740:{name:"seekHead",container:{19899:{name:"seek",container:{21419:{name:"seekId",value:types_1$1.DataType.binary},21420:{name:"seekPosition",value:types_1$1.DataType.uint}}}}},357149030:{name:"info",container:{29604:{name:"uid",value:types_1$1.DataType.uid},29572:{name:"filename",value:types_1$1.DataType.string},3979555:{name:"prevUID",value:types_1$1.DataType.uid},3965867:{name:"prevFilename",value:types_1$1.DataType.string},4110627:{name:"nextUID",value:types_1$1.DataType.uid},4096955:{name:"nextFilename",value:types_1$1.DataType.string},2807729:{name:"timecodeScale",value:types_1$1.DataType.uint},17545:{name:"duration",value:types_1$1.DataType.float},17505:{name:"dateUTC",value:types_1$1.DataType.uint},31657:{name:"title",value:types_1$1.DataType.string},19840:{name:"muxingApp",value:types_1$1.DataType.string},22337:{name:"writingApp",value:types_1$1.DataType.string}}},524531317:{name:"cluster",multiple:!0,container:{231:{name:"timecode",value:types_1$1.DataType.uid},163:{name:"unknown",value:types_1$1.DataType.binary},167:{name:"position",value:types_1$1.DataType.uid},171:{name:"prevSize",value:types_1$1.DataType.uid}}},374648427:{name:"tracks",container:{174:{name:"entries",multiple:!0,container:{215:{name:"trackNumber",value:types_1$1.DataType.uint},29637:{name:"uid",value:types_1$1.DataType.uid},131:{name:"trackType",value:types_1$1.DataType.uint},185:{name:"flagEnabled",value:types_1$1.DataType.bool},136:{name:"flagDefault",value:types_1$1.DataType.bool},21930:{name:"flagForced",value:types_1$1.DataType.bool},156:{name:"flagLacing",value:types_1$1.DataType.bool},28135:{name:"minCache",value:types_1$1.DataType.uint},28136:{name:"maxCache",value:types_1$1.DataType.uint},2352003:{name:"defaultDuration",value:types_1$1.DataType.uint},2306383:{name:"timecodeScale",value:types_1$1.DataType.float},21358:{name:"name",value:types_1$1.DataType.string},2274716:{name:"language",value:types_1$1.DataType.string},134:{name:"codecID",value:types_1$1.DataType.string},25506:{name:"codecPrivate",value:types_1$1.DataType.binary},2459272:{name:"codecName",value:types_1$1.DataType.string},3839639:{name:"codecSettings",value:types_1$1.DataType.string},3883072:{name:"codecInfoUrl",value:types_1$1.DataType.string},2536e3:{name:"codecDownloadUrl",value:types_1$1.DataType.string},170:{name:"codecDecodeAll",value:types_1$1.DataType.bool},28587:{name:"trackOverlay",value:types_1$1.DataType.uint},224:{name:"video",container:{154:{name:"flagInterlaced",value:types_1$1.DataType.bool},21432:{name:"stereoMode",value:types_1$1.DataType.uint},176:{name:"pixelWidth",value:types_1$1.DataType.uint},186:{name:"pixelHeight",value:types_1$1.DataType.uint},21680:{name:"displayWidth",value:types_1$1.DataType.uint},21690:{name:"displayHeight",value:types_1$1.DataType.uint},21683:{name:"aspectRatioType",value:types_1$1.DataType.uint},3061028:{name:"colourSpace",value:types_1$1.DataType.uint},3126563:{name:"gammaValue",value:types_1$1.DataType.float}}},225:{name:"audio",container:{181:{name:"samplingFrequency",value:types_1$1.DataType.float},30901:{name:"outputSamplingFrequency",value:types_1$1.DataType.float},159:{name:"channels",value:types_1$1.DataType.uint},148:{name:"channels",value:types_1$1.DataType.uint},32123:{name:"channelPositions",value:types_1$1.DataType.binary},25188:{name:"bitDepth",value:types_1$1.DataType.uint}}},28032:{name:"contentEncodings",container:{25152:{name:"contentEncoding",container:{20529:{name:"order",value:types_1$1.DataType.uint},20530:{name:"scope",value:types_1$1.DataType.bool},20531:{name:"type",value:types_1$1.DataType.uint},20532:{name:"contentEncoding",container:{16980:{name:"contentCompAlgo",value:types_1$1.DataType.uint},16981:{name:"contentCompSettings",value:types_1$1.DataType.binary}}},20533:{name:"contentEncoding",container:{18401:{name:"contentEncAlgo",value:types_1$1.DataType.uint},18402:{name:"contentEncKeyID",value:types_1$1.DataType.binary},18403:{name:"contentSignature ",value:types_1$1.DataType.binary},18404:{name:"ContentSigKeyID  ",value:types_1$1.DataType.binary},18405:{name:"contentSigAlgo ",value:types_1$1.DataType.uint},18406:{name:"contentSigHashAlgo ",value:types_1$1.DataType.uint}}},25188:{name:"bitDepth",value:types_1$1.DataType.uint}}}}}}}}},475249515:{name:"cues",container:{187:{name:"cuePoint",container:{179:{name:"cueTime",value:types_1$1.DataType.uid},183:{name:"positions",container:{247:{name:"track",value:types_1$1.DataType.uint},241:{name:"clusterPosition",value:types_1$1.DataType.uint},21368:{name:"blockNumber",value:types_1$1.DataType.uint},234:{name:"codecState",value:types_1$1.DataType.uint},219:{name:"reference",container:{150:{name:"time",value:types_1$1.DataType.uint},151:{name:"cluster",value:types_1$1.DataType.uint},21343:{name:"number",value:types_1$1.DataType.uint},235:{name:"codecState",value:types_1$1.DataType.uint}}},240:{name:"relativePosition",value:types_1$1.DataType.uint}}}}}}},423732329:{name:"attachments",container:{24999:{name:"attachedFiles",multiple:!0,container:{18046:{name:"description",value:types_1$1.DataType.string},18030:{name:"name",value:types_1$1.DataType.string},18016:{name:"mimeType",value:types_1$1.DataType.string},18012:{name:"data",value:types_1$1.DataType.binary},18094:{name:"uid",value:types_1$1.DataType.uid}}}}},272869232:{name:"chapters",container:{17849:{name:"editionEntry",container:{182:{name:"chapterAtom",container:{29636:{name:"uid",value:types_1$1.DataType.uid},145:{name:"timeStart",value:types_1$1.DataType.uint},146:{name:"timeEnd",value:types_1$1.DataType.uid},152:{name:"hidden",value:types_1$1.DataType.bool},17816:{name:"enabled",value:types_1$1.DataType.uid},143:{name:"track",container:{137:{name:"trackNumber",value:types_1$1.DataType.uid},128:{name:"display",container:{133:{name:"string",value:types_1$1.DataType.string},17276:{name:"language ",value:types_1$1.DataType.string},17278:{name:"country ",value:types_1$1.DataType.string}}}}}}}}}}},307544935:{name:"tags",container:{29555:{name:"tag",multiple:!0,container:{25536:{name:"target",container:{25541:{name:"tagTrackUID",value:types_1$1.DataType.uid},25540:{name:"tagChapterUID",value:types_1$1.DataType.uint},25542:{name:"tagAttachmentUID",value:types_1$1.DataType.uid},25546:{name:"targetType",value:types_1$1.DataType.string},26826:{name:"targetTypeValue",value:types_1$1.DataType.uint},25545:{name:"tagEditionUID",value:types_1$1.DataType.uid}}},26568:{name:"simpleTags",multiple:!0,container:{17827:{name:"name",value:types_1$1.DataType.string},17543:{name:"string",value:types_1$1.DataType.string},17541:{name:"binary",value:types_1$1.DataType.binary},17530:{name:"language",value:types_1$1.DataType.string},17531:{name:"languageIETF",value:types_1$1.DataType.string},17540:{name:"default",value:types_1$1.DataType.bool}}}}}}}}}};Object.defineProperty(MatroskaParser$1,"__esModule",{value:!0});MatroskaParser$1.MatroskaParser=void 0;const token_types_1=lib$1,debug_1$1=browserExports$2,BasicParser_1=BasicParser$1,types_1=types,matroskaDtd=MatroskaDtd,debug$1=(0,debug_1$1.default)("music-metadata:parser:matroska");class MatroskaParser extends BasicParser_1.BasicParser{constructor(){super(),this.padding=0,this.parserMap=new Map,this.ebmlMaxIDLength=4,this.ebmlMaxSizeLength=8,this.parserMap.set(types_1.DataType.uint,d=>this.readUint(d)),this.parserMap.set(types_1.DataType.string,d=>this.readString(d)),this.parserMap.set(types_1.DataType.binary,d=>this.readBuffer(d)),this.parserMap.set(types_1.DataType.uid,async d=>await this.readUint(d)===1),this.parserMap.set(types_1.DataType.bool,d=>this.readFlag(d)),this.parserMap.set(types_1.DataType.float,d=>this.readFloat(d))}init(d,g,b){return super.init(d,g,b),this}async parse(){const d=await this.parseContainer(matroskaDtd.elements,this.tokenizer.fileInfo.size,[]);if(this.metadata.setFormat("container",`EBML/${d.ebml.docType}`),d.segment){const g=d.segment.info;if(g){const _=g.timecodeScale?g.timecodeScale:1e6;if(typeof g.duration=="number"){const $=g.duration*_/1e9;this.addTag("segment:title",g.title),this.metadata.setFormat("duration",$)}}const b=d.segment.tracks;if(b&&b.entries){b.entries.forEach($=>{const j={codecName:$.codecID.replace("A_","").replace("V_",""),codecSettings:$.codecSettings,flagDefault:$.flagDefault,flagLacing:$.flagLacing,flagEnabled:$.flagEnabled,language:$.language,name:$.name,type:$.trackType,audio:$.audio,video:$.video};this.metadata.addStreamInfo(j)});const _=b.entries.filter($=>$.trackType===types_1.TrackType.audio.valueOf()).reduce(($,j)=>!$||!$.flagDefault&&j.flagDefault||j.trackNumber&&j.trackNumber<$.trackNumber?j:$,null);_&&(this.metadata.setFormat("codec",_.codecID.replace("A_","")),this.metadata.setFormat("sampleRate",_.audio.samplingFrequency),this.metadata.setFormat("numberOfChannels",_.audio.channels)),d.segment.tags&&d.segment.tags.tag.forEach($=>{const j=$.target,_e=j!=null&&j.targetTypeValue?types_1.TargetType[j.targetTypeValue]:j!=null&&j.targetType?j.targetType:"track";$.simpleTags.forEach(et=>{const rt=et.string?et.string:et.binary;this.addTag(`${_e}:${et.name}`,rt)})}),d.segment.attachments&&d.segment.attachments.attachedFiles.filter($=>$.mimeType.startsWith("image/")).map($=>({data:$.data,format:$.mimeType,description:$.description,name:$.name})).forEach($=>{this.addTag("picture",$)})}}}async parseContainer(d,g,b){const _={};for(;this.tokenizer.position<g;){let $;try{$=await this.readElement()}catch(_e){if(_e.message==="End-Of-Stream")break;throw _e}const j=d[$.id];if(j)if(debug$1(`Element: name=${j.name}, container=${!!j.container}`),j.container){const _e=await this.parseContainer(j.container,$.len>=0?this.tokenizer.position+$.len:-1,b.concat([j.name]));j.multiple?(_[j.name]||(_[j.name]=[]),_[j.name].push(_e)):_[j.name]=_e}else _[j.name]=await this.parserMap.get(j.value)($);else switch($.id){case 236:this.padding+=$.len,await this.tokenizer.ignore($.len);break;default:debug$1(`parseEbml: path=${b.join("/")}, unknown element: id=${$.id.toString(16)}`),this.padding+=$.len,await this.tokenizer.ignore($.len)}}return _}async readVintData(d){const g=await this.tokenizer.peekNumber(token_types_1.UINT8);let b=128,_=1;for(;!(g&b);){if(_>d)throw new Error("VINT value exceeding maximum size");++_,b>>=1}const $=Buffer.alloc(_);return await this.tokenizer.readBuffer($),$}async readElement(){const d=await this.readVintData(this.ebmlMaxIDLength),g=await this.readVintData(this.ebmlMaxSizeLength);g[0]^=128>>g.length-1;const b=Math.min(6,g.length);return{id:d.readUIntBE(0,d.length),len:g.readUIntBE(g.length-b,b)}}isMaxValue(d){if(d.length===this.ebmlMaxSizeLength){for(let g=1;g<this.ebmlMaxSizeLength;++g)if(d[g]!==255)return!1;return!0}return!1}async readFloat(d){switch(d.len){case 0:return 0;case 4:return this.tokenizer.readNumber(token_types_1.Float32_BE);case 8:return this.tokenizer.readNumber(token_types_1.Float64_BE);case 10:return this.tokenizer.readNumber(token_types_1.Float64_BE);default:throw new Error(`Invalid IEEE-754 float length: ${d.len}`)}}async readFlag(d){return await this.readUint(d)===1}async readUint(d){const g=await this.readBuffer(d),b=Math.min(6,d.len);return g.readUIntBE(d.len-b,b)}async readString(d){return(await this.tokenizer.readToken(new token_types_1.StringType(d.len,"utf-8"))).replace(/\00.*$/g,"")}async readBuffer(d){const g=Buffer.alloc(d.len);return await this.tokenizer.readBuffer(g),g}addTag(d,g){this.metadata.addTag("matroska",d,g)}}MatroskaParser$1.MatroskaParser=MatroskaParser;Object.defineProperty(ParserFactory$1,"__esModule",{value:!0});ParserFactory$1.ParserFactory=ParserFactory$1.parseHttpContentType=void 0;const FileType=core,ContentType=contentType,MimeType=mediaTyper,debug_1=browserExports$2,MetadataCollector_1=MetadataCollector$1,AiffParser_1=AiffParser,APEv2Parser_1$1=APEv2Parser$1,AsfParser_1=AsfParser$1,FlacParser_1=FlacParser$1,MP4Parser_1=MP4Parser$1,MpegParser_1=MpegParser$1,musepack_1=musepack,OggParser_1=OggParser$1,WaveParser_1=WaveParser$1,WavPackParser_1=WavPackParser$1,DsfParser_1=DsfParser$1,DsdiffParser_1=DsdiffParser$1,MatroskaParser_1=MatroskaParser$1,debug=(0,debug_1.default)("music-metadata:parser:factory");function parseHttpContentType(h){const d=ContentType.parse(h),g=MimeType.parse(d.type);return{type:g.type,subtype:g.subtype,suffix:g.suffix,parameters:d.parameters}}ParserFactory$1.parseHttpContentType=parseHttpContentType;async function parse(h,d,g={}){const b=await ParserFactory.loadParser(d),_=new MetadataCollector_1.MetadataCollector(g);return await b.init(_,h,g).parse(),_.toCommonMetadata()}class ParserFactory{static async parseOnContentType(d,g){const{mimeType:b,path:_,url:$}=await d.fileInfo,j=ParserFactory.getParserIdForMimeType(b)||ParserFactory.getParserIdForExtension(_)||ParserFactory.getParserIdForExtension($);return j||debug("No parser found for MIME-type / extension: "+b),this.parse(d,j,g)}static async parse(d,g,b){if(!g){debug("Guess parser on content...");const _=Buffer.alloc(4100);if(await d.peekBuffer(_,{mayBeLess:!0}),d.fileInfo.path&&(g=this.getParserIdForExtension(d.fileInfo.path)),!g){const $=await FileType.fromBuffer(_);if(!$)throw new Error("Failed to determine audio format");if(debug(`Guessed file type is mime=${$.mime}, extension=${$.ext}`),g=ParserFactory.getParserIdForMimeType($.mime),!g)throw new Error("Guessed MIME-type not supported: "+$.mime)}}return parse(d,g,b)}static getParserIdForExtension(d){if(!d)return;switch(this.getExtension(d).toLocaleLowerCase()||d){case".mp2":case".mp3":case".m2a":case".aac":return"mpeg";case".ape":return"apev2";case".mp4":case".m4a":case".m4b":case".m4pa":case".m4v":case".m4r":case".3gp":return"mp4";case".wma":case".wmv":case".asf":return"asf";case".flac":return"flac";case".ogg":case".ogv":case".oga":case".ogm":case".ogx":case".opus":case".spx":return"ogg";case".aif":case".aiff":case".aifc":return"aiff";case".wav":case".bwf":return"riff";case".wv":case".wvp":return"wavpack";case".mpc":return"musepack";case".dsf":return"dsf";case".dff":return"dsdiff";case".mka":case".mkv":case".mk3d":case".mks":case".webm":return"matroska"}}static async loadParser(d){switch(d){case"aiff":return new AiffParser_1.AIFFParser;case"adts":case"mpeg":return new MpegParser_1.MpegParser;case"apev2":return new APEv2Parser_1$1.APEv2Parser;case"asf":return new AsfParser_1.AsfParser;case"dsf":return new DsfParser_1.DsfParser;case"dsdiff":return new DsdiffParser_1.DsdiffParser;case"flac":return new FlacParser_1.FlacParser;case"mp4":return new MP4Parser_1.MP4Parser;case"musepack":return new musepack_1.default;case"ogg":return new OggParser_1.OggParser;case"riff":return new WaveParser_1.WaveParser;case"wavpack":return new WavPackParser_1.WavPackParser;case"matroska":return new MatroskaParser_1.MatroskaParser;default:throw new Error(`Unknown parser type: ${d}`)}}static getExtension(d){const g=d.lastIndexOf(".");return g===-1?"":d.slice(g)}static getParserIdForMimeType(d){let g;try{g=parseHttpContentType(d)}catch{debug(`Invalid HTTP Content-Type header value: ${d}`);return}const b=g.subtype.indexOf("x-")===0?g.subtype.substring(2):g.subtype;switch(g.type){case"audio":switch(b){case"mp3":case"mpeg":return"mpeg";case"aac":case"aacp":return"adts";case"flac":return"flac";case"ape":case"monkeys-audio":return"apev2";case"mp4":case"m4a":return"mp4";case"ogg":case"opus":case"speex":return"ogg";case"ms-wma":case"ms-wmv":case"ms-asf":return"asf";case"aiff":case"aif":case"aifc":return"aiff";case"vnd.wave":case"wav":case"wave":return"riff";case"wavpack":return"wavpack";case"musepack":return"musepack";case"matroska":case"webm":return"matroska";case"dsf":return"dsf"}break;case"video":switch(b){case"ms-asf":case"ms-wmv":return"asf";case"m4v":case"mp4":return"mp4";case"ogg":return"ogg";case"matroska":case"webm":return"matroska"}break;case"application":switch(b){case"vnd.ms-asf":return"asf";case"ogg":return"ogg"}break}}}ParserFactory$1.ParserFactory=ParserFactory;var RandomUint8ArrayReader$1={};Object.defineProperty(RandomUint8ArrayReader$1,"__esModule",{value:!0});RandomUint8ArrayReader$1.RandomUint8ArrayReader=void 0;class RandomUint8ArrayReader{constructor(d){this.uint8Array=d,this.fileSize=d.length}async randomRead(d,g,b,_){return d.set(this.uint8Array.subarray(_,_+b),g),b}}RandomUint8ArrayReader$1.RandomUint8ArrayReader=RandomUint8ArrayReader;var Lyrics3={};(function(h){Object.defineProperty(h,"__esModule",{value:!0}),h.getLyricsHeaderLength=h.endTag2=void 0,h.endTag2="LYRICS200";async function d(g){if(g.fileSize>=143){const b=Buffer.alloc(15);await g.randomRead(b,0,b.length,g.fileSize-143);const _=b.toString("binary");if(_.substr(6)===h.endTag2)return parseInt(_.substr(0,6),10)+15}return 0}h.getLyricsHeaderLength=d})(Lyrics3);Object.defineProperty(core$2,"__esModule",{value:!0});core$2.scanAppendingHeaders=core$2.selectCover=core$2.ratingToStars=core$2.orderTags=core$2.parseFromTokenizer=core$2.parseBuffer=core$2.parseStream=void 0;const strtok3=core$1,ParserFactory_1=ParserFactory$1,RandomUint8ArrayReader_1=RandomUint8ArrayReader$1,APEv2Parser_1=APEv2Parser$1,ID3v1Parser_1=ID3v1Parser,Lyrics3_1=Lyrics3;function parseStream(h,d,g={}){return parseFromTokenizer(strtok3.fromStream(h,typeof d=="string"?{mimeType:d}:d),g)}core$2.parseStream=parseStream;async function parseBuffer(h,d,g={}){const b=new RandomUint8ArrayReader_1.RandomUint8ArrayReader(h);await scanAppendingHeaders(b,g);const _=strtok3.fromBuffer(h,typeof d=="string"?{mimeType:d}:d);return parseFromTokenizer(_,g)}core$2.parseBuffer=parseBuffer;function parseFromTokenizer(h,d){return ParserFactory_1.ParserFactory.parseOnContentType(h,d)}core$2.parseFromTokenizer=parseFromTokenizer;function orderTags(h){const d={};for(const g of h)(d[g.id]=d[g.id]||[]).push(g.value);return d}core$2.orderTags=orderTags;function ratingToStars(h){return h===void 0?0:1+Math.round(h*4)}core$2.ratingToStars=ratingToStars;function selectCover(h){return h?h.reduce((d,g)=>g.name&&g.name.toLowerCase()in["front","cover","cover (front)"]?g:d):null}core$2.selectCover=selectCover;async function scanAppendingHeaders(h,d={}){let g=h.fileSize;if(await(0,ID3v1Parser_1.hasID3v1Header)(h)){g-=128;const b=await(0,Lyrics3_1.getLyricsHeaderLength)(h);g-=b}d.apeHeader=await APEv2Parser_1.APEv2Parser.findApeFooterOffset(h,g)}core$2.scanAppendingHeaders=scanAppendingHeaders;var lib={},browser$2={exports:{}},stream={exports:{}},buffer={},base64Js={};base64Js.byteLength=byteLength;base64Js.toByteArray=toByteArray;base64Js.fromByteArray=fromByteArray;var lookup=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i$1=0,len=code.length;i$1<len;++i$1)lookup[i$1]=code[i$1],revLookup[code.charCodeAt(i$1)]=i$1;revLookup[45]=62;revLookup[95]=63;function getLens(h){var d=h.length;if(d%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var g=h.indexOf("=");g===-1&&(g=d);var b=g===d?0:4-g%4;return[g,b]}function byteLength(h){var d=getLens(h),g=d[0],b=d[1];return(g+b)*3/4-b}function _byteLength(h,d,g){return(d+g)*3/4-g}function toByteArray(h){var d,g=getLens(h),b=g[0],_=g[1],$=new Arr(_byteLength(h,b,_)),j=0,_e=_>0?b-4:b,et;for(et=0;et<_e;et+=4)d=revLookup[h.charCodeAt(et)]<<18|revLookup[h.charCodeAt(et+1)]<<12|revLookup[h.charCodeAt(et+2)]<<6|revLookup[h.charCodeAt(et+3)],$[j++]=d>>16&255,$[j++]=d>>8&255,$[j++]=d&255;return _===2&&(d=revLookup[h.charCodeAt(et)]<<2|revLookup[h.charCodeAt(et+1)]>>4,$[j++]=d&255),_===1&&(d=revLookup[h.charCodeAt(et)]<<10|revLookup[h.charCodeAt(et+1)]<<4|revLookup[h.charCodeAt(et+2)]>>2,$[j++]=d>>8&255,$[j++]=d&255),$}function tripletToBase64(h){return lookup[h>>18&63]+lookup[h>>12&63]+lookup[h>>6&63]+lookup[h&63]}function encodeChunk(h,d,g){for(var b,_=[],$=d;$<g;$+=3)b=(h[$]<<16&16711680)+(h[$+1]<<8&65280)+(h[$+2]&255),_.push(tripletToBase64(b));return _.join("")}function fromByteArray(h){for(var d,g=h.length,b=g%3,_=[],$=16383,j=0,_e=g-b;j<_e;j+=$)_.push(encodeChunk(h,j,j+$>_e?_e:j+$));return b===1?(d=h[g-1],_.push(lookup[d>>2]+lookup[d<<4&63]+"==")):b===2&&(d=(h[g-2]<<8)+h[g-1],_.push(lookup[d>>10]+lookup[d>>4&63]+lookup[d<<2&63]+"=")),_.join("")}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(h){const d=base64Js,g=ieee754,b=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;h.Buffer=_e,h.SlowBuffer=ut,h.INSPECT_MAX_BYTES=50;const _=2147483647;h.kMaxLength=_,_e.TYPED_ARRAY_SUPPORT=$(),!_e.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function $(){try{const At=new Uint8Array(1),pt={foo:function(){return 42}};return Object.setPrototypeOf(pt,Uint8Array.prototype),Object.setPrototypeOf(At,pt),At.foo()===42}catch{return!1}}Object.defineProperty(_e.prototype,"parent",{enumerable:!0,get:function(){if(_e.isBuffer(this))return this.buffer}}),Object.defineProperty(_e.prototype,"offset",{enumerable:!0,get:function(){if(_e.isBuffer(this))return this.byteOffset}});function j(At){if(At>_)throw new RangeError('The value "'+At+'" is invalid for option "size"');const pt=new Uint8Array(At);return Object.setPrototypeOf(pt,_e.prototype),pt}function _e(At,pt,gt){if(typeof At=="number"){if(typeof pt=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return st(At)}return et(At,pt,gt)}_e.poolSize=8192;function et(At,pt,gt){if(typeof At=="string")return at(At,pt);if(ArrayBuffer.isView(At))return dt(At);if(At==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof At);if(Gt(At,ArrayBuffer)||At&&Gt(At.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Gt(At,SharedArrayBuffer)||At&&Gt(At.buffer,SharedArrayBuffer)))return ot(At,pt,gt);if(typeof At=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const Dt=At.valueOf&&At.valueOf();if(Dt!=null&&Dt!==At)return _e.from(Dt,pt,gt);const Xt=ct(At);if(Xt)return Xt;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof At[Symbol.toPrimitive]=="function")return _e.from(At[Symbol.toPrimitive]("string"),pt,gt);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof At)}_e.from=function(At,pt,gt){return et(At,pt,gt)},Object.setPrototypeOf(_e.prototype,Uint8Array.prototype),Object.setPrototypeOf(_e,Uint8Array);function rt(At){if(typeof At!="number")throw new TypeError('"size" argument must be of type number');if(At<0)throw new RangeError('The value "'+At+'" is invalid for option "size"')}function nt(At,pt,gt){return rt(At),At<=0?j(At):pt!==void 0?typeof gt=="string"?j(At).fill(pt,gt):j(At).fill(pt):j(At)}_e.alloc=function(At,pt,gt){return nt(At,pt,gt)};function st(At){return rt(At),j(At<0?0:lt(At)|0)}_e.allocUnsafe=function(At){return st(At)},_e.allocUnsafeSlow=function(At){return st(At)};function at(At,pt){if((typeof pt!="string"||pt==="")&&(pt="utf8"),!_e.isEncoding(pt))throw new TypeError("Unknown encoding: "+pt);const gt=ft(At,pt)|0;let Dt=j(gt);const Xt=Dt.write(At,pt);return Xt!==gt&&(Dt=Dt.slice(0,Xt)),Dt}function it(At){const pt=At.length<0?0:lt(At.length)|0,gt=j(pt);for(let Dt=0;Dt<pt;Dt+=1)gt[Dt]=At[Dt]&255;return gt}function dt(At){if(Gt(At,Uint8Array)){const pt=new Uint8Array(At);return ot(pt.buffer,pt.byteOffset,pt.byteLength)}return it(At)}function ot(At,pt,gt){if(pt<0||At.byteLength<pt)throw new RangeError('"offset" is outside of buffer bounds');if(At.byteLength<pt+(gt||0))throw new RangeError('"length" is outside of buffer bounds');let Dt;return pt===void 0&&gt===void 0?Dt=new Uint8Array(At):gt===void 0?Dt=new Uint8Array(At,pt):Dt=new Uint8Array(At,pt,gt),Object.setPrototypeOf(Dt,_e.prototype),Dt}function ct(At){if(_e.isBuffer(At)){const pt=lt(At.length)|0,gt=j(pt);return gt.length===0||At.copy(gt,0,0,pt),gt}if(At.length!==void 0)return typeof At.length!="number"||dr(At.length)?j(0):it(At);if(At.type==="Buffer"&&Array.isArray(At.data))return it(At.data)}function lt(At){if(At>=_)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+_.toString(16)+" bytes");return At|0}function ut(At){return+At!=At&&(At=0),_e.alloc(+At)}_e.isBuffer=function(pt){return pt!=null&&pt._isBuffer===!0&&pt!==_e.prototype},_e.compare=function(pt,gt){if(Gt(pt,Uint8Array)&&(pt=_e.from(pt,pt.offset,pt.byteLength)),Gt(gt,Uint8Array)&&(gt=_e.from(gt,gt.offset,gt.byteLength)),!_e.isBuffer(pt)||!_e.isBuffer(gt))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(pt===gt)return 0;let Dt=pt.length,Xt=gt.length;for(let rr=0,ir=Math.min(Dt,Xt);rr<ir;++rr)if(pt[rr]!==gt[rr]){Dt=pt[rr],Xt=gt[rr];break}return Dt<Xt?-1:Xt<Dt?1:0},_e.isEncoding=function(pt){switch(String(pt).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},_e.concat=function(pt,gt){if(!Array.isArray(pt))throw new TypeError('"list" argument must be an Array of Buffers');if(pt.length===0)return _e.alloc(0);let Dt;if(gt===void 0)for(gt=0,Dt=0;Dt<pt.length;++Dt)gt+=pt[Dt].length;const Xt=_e.allocUnsafe(gt);let rr=0;for(Dt=0;Dt<pt.length;++Dt){let ir=pt[Dt];if(Gt(ir,Uint8Array))rr+ir.length>Xt.length?(_e.isBuffer(ir)||(ir=_e.from(ir)),ir.copy(Xt,rr)):Uint8Array.prototype.set.call(Xt,ir,rr);else if(_e.isBuffer(ir))ir.copy(Xt,rr);else throw new TypeError('"list" argument must be an Array of Buffers');rr+=ir.length}return Xt};function ft(At,pt){if(_e.isBuffer(At))return At.length;if(ArrayBuffer.isView(At)||Gt(At,ArrayBuffer))return At.byteLength;if(typeof At!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof At);const gt=At.length,Dt=arguments.length>2&&arguments[2]===!0;if(!Dt&&gt===0)return 0;let Xt=!1;for(;;)switch(pt){case"ascii":case"latin1":case"binary":return gt;case"utf8":case"utf-8":return It(At).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return gt*2;case"hex":return gt>>>1;case"base64":return ar(At).length;default:if(Xt)return Dt?-1:It(At).length;pt=(""+pt).toLowerCase(),Xt=!0}}_e.byteLength=ft;function Et(At,pt,gt){let Dt=!1;if((pt===void 0||pt<0)&&(pt=0),pt>this.length||((gt===void 0||gt>this.length)&&(gt=this.length),gt<=0)||(gt>>>=0,pt>>>=0,gt<=pt))return"";for(At||(At="utf8");;)switch(At){case"hex":return Bt(this,pt,gt);case"utf8":case"utf-8":return xt(this,pt,gt);case"ascii":return er(this,pt,gt);case"latin1":case"binary":return Kt(this,pt,gt);case"base64":return Pt(this,pt,gt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return nr(this,pt,gt);default:if(Dt)throw new TypeError("Unknown encoding: "+At);At=(At+"").toLowerCase(),Dt=!0}}_e.prototype._isBuffer=!0;function Tt(At,pt,gt){const Dt=At[pt];At[pt]=At[gt],At[gt]=Dt}_e.prototype.swap16=function(){const pt=this.length;if(pt%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let gt=0;gt<pt;gt+=2)Tt(this,gt,gt+1);return this},_e.prototype.swap32=function(){const pt=this.length;if(pt%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let gt=0;gt<pt;gt+=4)Tt(this,gt,gt+3),Tt(this,gt+1,gt+2);return this},_e.prototype.swap64=function(){const pt=this.length;if(pt%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let gt=0;gt<pt;gt+=8)Tt(this,gt,gt+7),Tt(this,gt+1,gt+6),Tt(this,gt+2,gt+5),Tt(this,gt+3,gt+4);return this},_e.prototype.toString=function(){const pt=this.length;return pt===0?"":arguments.length===0?xt(this,0,pt):Et.apply(this,arguments)},_e.prototype.toLocaleString=_e.prototype.toString,_e.prototype.equals=function(pt){if(!_e.isBuffer(pt))throw new TypeError("Argument must be a Buffer");return this===pt?!0:_e.compare(this,pt)===0},_e.prototype.inspect=function(){let pt="";const gt=h.INSPECT_MAX_BYTES;return pt=this.toString("hex",0,gt).replace(/(.{2})/g,"$1 ").trim(),this.length>gt&&(pt+=" ... "),"<Buffer "+pt+">"},b&&(_e.prototype[b]=_e.prototype.inspect),_e.prototype.compare=function(pt,gt,Dt,Xt,rr){if(Gt(pt,Uint8Array)&&(pt=_e.from(pt,pt.offset,pt.byteLength)),!_e.isBuffer(pt))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof pt);if(gt===void 0&&(gt=0),Dt===void 0&&(Dt=pt?pt.length:0),Xt===void 0&&(Xt=0),rr===void 0&&(rr=this.length),gt<0||Dt>pt.length||Xt<0||rr>this.length)throw new RangeError("out of range index");if(Xt>=rr&&gt>=Dt)return 0;if(Xt>=rr)return-1;if(gt>=Dt)return 1;if(gt>>>=0,Dt>>>=0,Xt>>>=0,rr>>>=0,this===pt)return 0;let ir=rr-Xt,wr=Dt-gt;const Ir=Math.min(ir,wr),Tr=this.slice(Xt,rr),$r=pt.slice(gt,Dt);for(let Ar=0;Ar<Ir;++Ar)if(Tr[Ar]!==$r[Ar]){ir=Tr[Ar],wr=$r[Ar];break}return ir<wr?-1:wr<ir?1:0};function St(At,pt,gt,Dt,Xt){if(At.length===0)return-1;if(typeof gt=="string"?(Dt=gt,gt=0):gt>2147483647?gt=2147483647:gt<-2147483648&&(gt=-2147483648),gt=+gt,dr(gt)&&(gt=Xt?0:At.length-1),gt<0&&(gt=At.length+gt),gt>=At.length){if(Xt)return-1;gt=At.length-1}else if(gt<0)if(Xt)gt=0;else return-1;if(typeof pt=="string"&&(pt=_e.from(pt,Dt)),_e.isBuffer(pt))return pt.length===0?-1:ht(At,pt,gt,Dt,Xt);if(typeof pt=="number")return pt=pt&255,typeof Uint8Array.prototype.indexOf=="function"?Xt?Uint8Array.prototype.indexOf.call(At,pt,gt):Uint8Array.prototype.lastIndexOf.call(At,pt,gt):ht(At,[pt],gt,Dt,Xt);throw new TypeError("val must be string, number or Buffer")}function ht(At,pt,gt,Dt,Xt){let rr=1,ir=At.length,wr=pt.length;if(Dt!==void 0&&(Dt=String(Dt).toLowerCase(),Dt==="ucs2"||Dt==="ucs-2"||Dt==="utf16le"||Dt==="utf-16le")){if(At.length<2||pt.length<2)return-1;rr=2,ir/=2,wr/=2,gt/=2}function Ir($r,Ar){return rr===1?$r[Ar]:$r.readUInt16BE(Ar*rr)}let Tr;if(Xt){let $r=-1;for(Tr=gt;Tr<ir;Tr++)if(Ir(At,Tr)===Ir(pt,$r===-1?0:Tr-$r)){if($r===-1&&($r=Tr),Tr-$r+1===wr)return $r*rr}else $r!==-1&&(Tr-=Tr-$r),$r=-1}else for(gt+wr>ir&&(gt=ir-wr),Tr=gt;Tr>=0;Tr--){let $r=!0;for(let Ar=0;Ar<wr;Ar++)if(Ir(At,Tr+Ar)!==Ir(pt,Ar)){$r=!1;break}if($r)return Tr}return-1}_e.prototype.includes=function(pt,gt,Dt){return this.indexOf(pt,gt,Dt)!==-1},_e.prototype.indexOf=function(pt,gt,Dt){return St(this,pt,gt,Dt,!0)},_e.prototype.lastIndexOf=function(pt,gt,Dt){return St(this,pt,gt,Dt,!1)};function kt(At,pt,gt,Dt){gt=Number(gt)||0;const Xt=At.length-gt;Dt?(Dt=Number(Dt),Dt>Xt&&(Dt=Xt)):Dt=Xt;const rr=pt.length;Dt>rr/2&&(Dt=rr/2);let ir;for(ir=0;ir<Dt;++ir){const wr=parseInt(pt.substr(ir*2,2),16);if(dr(wr))return ir;At[gt+ir]=wr}return ir}function Rt(At,pt,gt,Dt){return lr(It(pt,At.length-gt),At,gt,Dt)}function Mt(At,pt,gt,Dt){return lr(Nt(pt),At,gt,Dt)}function Zt(At,pt,gt,Dt){return lr(ar(pt),At,gt,Dt)}function Ct(At,pt,gt,Dt){return lr(qt(pt,At.length-gt),At,gt,Dt)}_e.prototype.write=function(pt,gt,Dt,Xt){if(gt===void 0)Xt="utf8",Dt=this.length,gt=0;else if(Dt===void 0&&typeof gt=="string")Xt=gt,Dt=this.length,gt=0;else if(isFinite(gt))gt=gt>>>0,isFinite(Dt)?(Dt=Dt>>>0,Xt===void 0&&(Xt="utf8")):(Xt=Dt,Dt=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const rr=this.length-gt;if((Dt===void 0||Dt>rr)&&(Dt=rr),pt.length>0&&(Dt<0||gt<0)||gt>this.length)throw new RangeError("Attempt to write outside buffer bounds");Xt||(Xt="utf8");let ir=!1;for(;;)switch(Xt){case"hex":return kt(this,pt,gt,Dt);case"utf8":case"utf-8":return Rt(this,pt,gt,Dt);case"ascii":case"latin1":case"binary":return Mt(this,pt,gt,Dt);case"base64":return Zt(this,pt,gt,Dt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ct(this,pt,gt,Dt);default:if(ir)throw new TypeError("Unknown encoding: "+Xt);Xt=(""+Xt).toLowerCase(),ir=!0}},_e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Pt(At,pt,gt){return pt===0&&gt===At.length?d.fromByteArray(At):d.fromByteArray(At.slice(pt,gt))}function xt(At,pt,gt){gt=Math.min(At.length,gt);const Dt=[];let Xt=pt;for(;Xt<gt;){const rr=At[Xt];let ir=null,wr=rr>239?4:rr>223?3:rr>191?2:1;if(Xt+wr<=gt){let Ir,Tr,$r,Ar;switch(wr){case 1:rr<128&&(ir=rr);break;case 2:Ir=At[Xt+1],(Ir&192)===128&&(Ar=(rr&31)<<6|Ir&63,Ar>127&&(ir=Ar));break;case 3:Ir=At[Xt+1],Tr=At[Xt+2],(Ir&192)===128&&(Tr&192)===128&&(Ar=(rr&15)<<12|(Ir&63)<<6|Tr&63,Ar>2047&&(Ar<55296||Ar>57343)&&(ir=Ar));break;case 4:Ir=At[Xt+1],Tr=At[Xt+2],$r=At[Xt+3],(Ir&192)===128&&(Tr&192)===128&&($r&192)===128&&(Ar=(rr&15)<<18|(Ir&63)<<12|(Tr&63)<<6|$r&63,Ar>65535&&Ar<1114112&&(ir=Ar))}}ir===null?(ir=65533,wr=1):ir>65535&&(ir-=65536,Dt.push(ir>>>10&1023|55296),ir=56320|ir&1023),Dt.push(ir),Xt+=wr}return tr(Dt)}const Ht=4096;function tr(At){const pt=At.length;if(pt<=Ht)return String.fromCharCode.apply(String,At);let gt="",Dt=0;for(;Dt<pt;)gt+=String.fromCharCode.apply(String,At.slice(Dt,Dt+=Ht));return gt}function er(At,pt,gt){let Dt="";gt=Math.min(At.length,gt);for(let Xt=pt;Xt<gt;++Xt)Dt+=String.fromCharCode(At[Xt]&127);return Dt}function Kt(At,pt,gt){let Dt="";gt=Math.min(At.length,gt);for(let Xt=pt;Xt<gt;++Xt)Dt+=String.fromCharCode(At[Xt]);return Dt}function Bt(At,pt,gt){const Dt=At.length;(!pt||pt<0)&&(pt=0),(!gt||gt<0||gt>Dt)&&(gt=Dt);let Xt="";for(let rr=pt;rr<gt;++rr)Xt+=mr[At[rr]];return Xt}function nr(At,pt,gt){const Dt=At.slice(pt,gt);let Xt="";for(let rr=0;rr<Dt.length-1;rr+=2)Xt+=String.fromCharCode(Dt[rr]+Dt[rr+1]*256);return Xt}_e.prototype.slice=function(pt,gt){const Dt=this.length;pt=~~pt,gt=gt===void 0?Dt:~~gt,pt<0?(pt+=Dt,pt<0&&(pt=0)):pt>Dt&&(pt=Dt),gt<0?(gt+=Dt,gt<0&&(gt=0)):gt>Dt&&(gt=Dt),gt<pt&&(gt=pt);const Xt=this.subarray(pt,gt);return Object.setPrototypeOf(Xt,_e.prototype),Xt};function Ut(At,pt,gt){if(At%1!==0||At<0)throw new RangeError("offset is not uint");if(At+pt>gt)throw new RangeError("Trying to access beyond buffer length")}_e.prototype.readUintLE=_e.prototype.readUIntLE=function(pt,gt,Dt){pt=pt>>>0,gt=gt>>>0,Dt||Ut(pt,gt,this.length);let Xt=this[pt],rr=1,ir=0;for(;++ir<gt&&(rr*=256);)Xt+=this[pt+ir]*rr;return Xt},_e.prototype.readUintBE=_e.prototype.readUIntBE=function(pt,gt,Dt){pt=pt>>>0,gt=gt>>>0,Dt||Ut(pt,gt,this.length);let Xt=this[pt+--gt],rr=1;for(;gt>0&&(rr*=256);)Xt+=this[pt+--gt]*rr;return Xt},_e.prototype.readUint8=_e.prototype.readUInt8=function(pt,gt){return pt=pt>>>0,gt||Ut(pt,1,this.length),this[pt]},_e.prototype.readUint16LE=_e.prototype.readUInt16LE=function(pt,gt){return pt=pt>>>0,gt||Ut(pt,2,this.length),this[pt]|this[pt+1]<<8},_e.prototype.readUint16BE=_e.prototype.readUInt16BE=function(pt,gt){return pt=pt>>>0,gt||Ut(pt,2,this.length),this[pt]<<8|this[pt+1]},_e.prototype.readUint32LE=_e.prototype.readUInt32LE=function(pt,gt){return pt=pt>>>0,gt||Ut(pt,4,this.length),(this[pt]|this[pt+1]<<8|this[pt+2]<<16)+this[pt+3]*16777216},_e.prototype.readUint32BE=_e.prototype.readUInt32BE=function(pt,gt){return pt=pt>>>0,gt||Ut(pt,4,this.length),this[pt]*16777216+(this[pt+1]<<16|this[pt+2]<<8|this[pt+3])},_e.prototype.readBigUInt64LE=fr(function(pt){pt=pt>>>0,Jt(pt,"offset");const gt=this[pt],Dt=this[pt+7];(gt===void 0||Dt===void 0)&&mt(pt,this.length-8);const Xt=gt+this[++pt]*2**8+this[++pt]*2**16+this[++pt]*2**24,rr=this[++pt]+this[++pt]*2**8+this[++pt]*2**16+Dt*2**24;return BigInt(Xt)+(BigInt(rr)<<BigInt(32))}),_e.prototype.readBigUInt64BE=fr(function(pt){pt=pt>>>0,Jt(pt,"offset");const gt=this[pt],Dt=this[pt+7];(gt===void 0||Dt===void 0)&&mt(pt,this.length-8);const Xt=gt*2**24+this[++pt]*2**16+this[++pt]*2**8+this[++pt],rr=this[++pt]*2**24+this[++pt]*2**16+this[++pt]*2**8+Dt;return(BigInt(Xt)<<BigInt(32))+BigInt(rr)}),_e.prototype.readIntLE=function(pt,gt,Dt){pt=pt>>>0,gt=gt>>>0,Dt||Ut(pt,gt,this.length);let Xt=this[pt],rr=1,ir=0;for(;++ir<gt&&(rr*=256);)Xt+=this[pt+ir]*rr;return rr*=128,Xt>=rr&&(Xt-=Math.pow(2,8*gt)),Xt},_e.prototype.readIntBE=function(pt,gt,Dt){pt=pt>>>0,gt=gt>>>0,Dt||Ut(pt,gt,this.length);let Xt=gt,rr=1,ir=this[pt+--Xt];for(;Xt>0&&(rr*=256);)ir+=this[pt+--Xt]*rr;return rr*=128,ir>=rr&&(ir-=Math.pow(2,8*gt)),ir},_e.prototype.readInt8=function(pt,gt){return pt=pt>>>0,gt||Ut(pt,1,this.length),this[pt]&128?(255-this[pt]+1)*-1:this[pt]},_e.prototype.readInt16LE=function(pt,gt){pt=pt>>>0,gt||Ut(pt,2,this.length);const Dt=this[pt]|this[pt+1]<<8;return Dt&32768?Dt|4294901760:Dt},_e.prototype.readInt16BE=function(pt,gt){pt=pt>>>0,gt||Ut(pt,2,this.length);const Dt=this[pt+1]|this[pt]<<8;return Dt&32768?Dt|4294901760:Dt},_e.prototype.readInt32LE=function(pt,gt){return pt=pt>>>0,gt||Ut(pt,4,this.length),this[pt]|this[pt+1]<<8|this[pt+2]<<16|this[pt+3]<<24},_e.prototype.readInt32BE=function(pt,gt){return pt=pt>>>0,gt||Ut(pt,4,this.length),this[pt]<<24|this[pt+1]<<16|this[pt+2]<<8|this[pt+3]},_e.prototype.readBigInt64LE=fr(function(pt){pt=pt>>>0,Jt(pt,"offset");const gt=this[pt],Dt=this[pt+7];(gt===void 0||Dt===void 0)&&mt(pt,this.length-8);const Xt=this[pt+4]+this[pt+5]*2**8+this[pt+6]*2**16+(Dt<<24);return(BigInt(Xt)<<BigInt(32))+BigInt(gt+this[++pt]*2**8+this[++pt]*2**16+this[++pt]*2**24)}),_e.prototype.readBigInt64BE=fr(function(pt){pt=pt>>>0,Jt(pt,"offset");const gt=this[pt],Dt=this[pt+7];(gt===void 0||Dt===void 0)&&mt(pt,this.length-8);const Xt=(gt<<24)+this[++pt]*2**16+this[++pt]*2**8+this[++pt];return(BigInt(Xt)<<BigInt(32))+BigInt(this[++pt]*2**24+this[++pt]*2**16+this[++pt]*2**8+Dt)}),_e.prototype.readFloatLE=function(pt,gt){return pt=pt>>>0,gt||Ut(pt,4,this.length),g.read(this,pt,!0,23,4)},_e.prototype.readFloatBE=function(pt,gt){return pt=pt>>>0,gt||Ut(pt,4,this.length),g.read(this,pt,!1,23,4)},_e.prototype.readDoubleLE=function(pt,gt){return pt=pt>>>0,gt||Ut(pt,8,this.length),g.read(this,pt,!0,52,8)},_e.prototype.readDoubleBE=function(pt,gt){return pt=pt>>>0,gt||Ut(pt,8,this.length),g.read(this,pt,!1,52,8)};function zt(At,pt,gt,Dt,Xt,rr){if(!_e.isBuffer(At))throw new TypeError('"buffer" argument must be a Buffer instance');if(pt>Xt||pt<rr)throw new RangeError('"value" argument is out of bounds');if(gt+Dt>At.length)throw new RangeError("Index out of range")}_e.prototype.writeUintLE=_e.prototype.writeUIntLE=function(pt,gt,Dt,Xt){if(pt=+pt,gt=gt>>>0,Dt=Dt>>>0,!Xt){const wr=Math.pow(2,8*Dt)-1;zt(this,pt,gt,Dt,wr,0)}let rr=1,ir=0;for(this[gt]=pt&255;++ir<Dt&&(rr*=256);)this[gt+ir]=pt/rr&255;return gt+Dt},_e.prototype.writeUintBE=_e.prototype.writeUIntBE=function(pt,gt,Dt,Xt){if(pt=+pt,gt=gt>>>0,Dt=Dt>>>0,!Xt){const wr=Math.pow(2,8*Dt)-1;zt(this,pt,gt,Dt,wr,0)}let rr=Dt-1,ir=1;for(this[gt+rr]=pt&255;--rr>=0&&(ir*=256);)this[gt+rr]=pt/ir&255;return gt+Dt},_e.prototype.writeUint8=_e.prototype.writeUInt8=function(pt,gt,Dt){return pt=+pt,gt=gt>>>0,Dt||zt(this,pt,gt,1,255,0),this[gt]=pt&255,gt+1},_e.prototype.writeUint16LE=_e.prototype.writeUInt16LE=function(pt,gt,Dt){return pt=+pt,gt=gt>>>0,Dt||zt(this,pt,gt,2,65535,0),this[gt]=pt&255,this[gt+1]=pt>>>8,gt+2},_e.prototype.writeUint16BE=_e.prototype.writeUInt16BE=function(pt,gt,Dt){return pt=+pt,gt=gt>>>0,Dt||zt(this,pt,gt,2,65535,0),this[gt]=pt>>>8,this[gt+1]=pt&255,gt+2},_e.prototype.writeUint32LE=_e.prototype.writeUInt32LE=function(pt,gt,Dt){return pt=+pt,gt=gt>>>0,Dt||zt(this,pt,gt,4,4294967295,0),this[gt+3]=pt>>>24,this[gt+2]=pt>>>16,this[gt+1]=pt>>>8,this[gt]=pt&255,gt+4},_e.prototype.writeUint32BE=_e.prototype.writeUInt32BE=function(pt,gt,Dt){return pt=+pt,gt=gt>>>0,Dt||zt(this,pt,gt,4,4294967295,0),this[gt]=pt>>>24,this[gt+1]=pt>>>16,this[gt+2]=pt>>>8,this[gt+3]=pt&255,gt+4};function sr(At,pt,gt,Dt,Xt){Or(pt,Dt,Xt,At,gt,7);let rr=Number(pt&BigInt(4294967295));At[gt++]=rr,rr=rr>>8,At[gt++]=rr,rr=rr>>8,At[gt++]=rr,rr=rr>>8,At[gt++]=rr;let ir=Number(pt>>BigInt(32)&BigInt(4294967295));return At[gt++]=ir,ir=ir>>8,At[gt++]=ir,ir=ir>>8,At[gt++]=ir,ir=ir>>8,At[gt++]=ir,gt}function or(At,pt,gt,Dt,Xt){Or(pt,Dt,Xt,At,gt,7);let rr=Number(pt&BigInt(4294967295));At[gt+7]=rr,rr=rr>>8,At[gt+6]=rr,rr=rr>>8,At[gt+5]=rr,rr=rr>>8,At[gt+4]=rr;let ir=Number(pt>>BigInt(32)&BigInt(4294967295));return At[gt+3]=ir,ir=ir>>8,At[gt+2]=ir,ir=ir>>8,At[gt+1]=ir,ir=ir>>8,At[gt]=ir,gt+8}_e.prototype.writeBigUInt64LE=fr(function(pt,gt=0){return sr(this,pt,gt,BigInt(0),BigInt("0xffffffffffffffff"))}),_e.prototype.writeBigUInt64BE=fr(function(pt,gt=0){return or(this,pt,gt,BigInt(0),BigInt("0xffffffffffffffff"))}),_e.prototype.writeIntLE=function(pt,gt,Dt,Xt){if(pt=+pt,gt=gt>>>0,!Xt){const Ir=Math.pow(2,8*Dt-1);zt(this,pt,gt,Dt,Ir-1,-Ir)}let rr=0,ir=1,wr=0;for(this[gt]=pt&255;++rr<Dt&&(ir*=256);)pt<0&&wr===0&&this[gt+rr-1]!==0&&(wr=1),this[gt+rr]=(pt/ir>>0)-wr&255;return gt+Dt},_e.prototype.writeIntBE=function(pt,gt,Dt,Xt){if(pt=+pt,gt=gt>>>0,!Xt){const Ir=Math.pow(2,8*Dt-1);zt(this,pt,gt,Dt,Ir-1,-Ir)}let rr=Dt-1,ir=1,wr=0;for(this[gt+rr]=pt&255;--rr>=0&&(ir*=256);)pt<0&&wr===0&&this[gt+rr+1]!==0&&(wr=1),this[gt+rr]=(pt/ir>>0)-wr&255;return gt+Dt},_e.prototype.writeInt8=function(pt,gt,Dt){return pt=+pt,gt=gt>>>0,Dt||zt(this,pt,gt,1,127,-128),pt<0&&(pt=255+pt+1),this[gt]=pt&255,gt+1},_e.prototype.writeInt16LE=function(pt,gt,Dt){return pt=+pt,gt=gt>>>0,Dt||zt(this,pt,gt,2,32767,-32768),this[gt]=pt&255,this[gt+1]=pt>>>8,gt+2},_e.prototype.writeInt16BE=function(pt,gt,Dt){return pt=+pt,gt=gt>>>0,Dt||zt(this,pt,gt,2,32767,-32768),this[gt]=pt>>>8,this[gt+1]=pt&255,gt+2},_e.prototype.writeInt32LE=function(pt,gt,Dt){return pt=+pt,gt=gt>>>0,Dt||zt(this,pt,gt,4,2147483647,-2147483648),this[gt]=pt&255,this[gt+1]=pt>>>8,this[gt+2]=pt>>>16,this[gt+3]=pt>>>24,gt+4},_e.prototype.writeInt32BE=function(pt,gt,Dt){return pt=+pt,gt=gt>>>0,Dt||zt(this,pt,gt,4,2147483647,-2147483648),pt<0&&(pt=4294967295+pt+1),this[gt]=pt>>>24,this[gt+1]=pt>>>16,this[gt+2]=pt>>>8,this[gt+3]=pt&255,gt+4},_e.prototype.writeBigInt64LE=fr(function(pt,gt=0){return sr(this,pt,gt,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),_e.prototype.writeBigInt64BE=fr(function(pt,gt=0){return or(this,pt,gt,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ur(At,pt,gt,Dt,Xt,rr){if(gt+Dt>At.length)throw new RangeError("Index out of range");if(gt<0)throw new RangeError("Index out of range")}function _r(At,pt,gt,Dt,Xt){return pt=+pt,gt=gt>>>0,Xt||ur(At,pt,gt,4),g.write(At,pt,gt,Dt,23,4),gt+4}_e.prototype.writeFloatLE=function(pt,gt,Dt){return _r(this,pt,gt,!0,Dt)},_e.prototype.writeFloatBE=function(pt,gt,Dt){return _r(this,pt,gt,!1,Dt)};function vr(At,pt,gt,Dt,Xt){return pt=+pt,gt=gt>>>0,Xt||ur(At,pt,gt,8),g.write(At,pt,gt,Dt,52,8),gt+8}_e.prototype.writeDoubleLE=function(pt,gt,Dt){return vr(this,pt,gt,!0,Dt)},_e.prototype.writeDoubleBE=function(pt,gt,Dt){return vr(this,pt,gt,!1,Dt)},_e.prototype.copy=function(pt,gt,Dt,Xt){if(!_e.isBuffer(pt))throw new TypeError("argument should be a Buffer");if(Dt||(Dt=0),!Xt&&Xt!==0&&(Xt=this.length),gt>=pt.length&&(gt=pt.length),gt||(gt=0),Xt>0&&Xt<Dt&&(Xt=Dt),Xt===Dt||pt.length===0||this.length===0)return 0;if(gt<0)throw new RangeError("targetStart out of bounds");if(Dt<0||Dt>=this.length)throw new RangeError("Index out of range");if(Xt<0)throw new RangeError("sourceEnd out of bounds");Xt>this.length&&(Xt=this.length),pt.length-gt<Xt-Dt&&(Xt=pt.length-gt+Dt);const rr=Xt-Dt;return this===pt&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(gt,Dt,Xt):Uint8Array.prototype.set.call(pt,this.subarray(Dt,Xt),gt),rr},_e.prototype.fill=function(pt,gt,Dt,Xt){if(typeof pt=="string"){if(typeof gt=="string"?(Xt=gt,gt=0,Dt=this.length):typeof Dt=="string"&&(Xt=Dt,Dt=this.length),Xt!==void 0&&typeof Xt!="string")throw new TypeError("encoding must be a string");if(typeof Xt=="string"&&!_e.isEncoding(Xt))throw new TypeError("Unknown encoding: "+Xt);if(pt.length===1){const ir=pt.charCodeAt(0);(Xt==="utf8"&&ir<128||Xt==="latin1")&&(pt=ir)}}else typeof pt=="number"?pt=pt&255:typeof pt=="boolean"&&(pt=Number(pt));if(gt<0||this.length<gt||this.length<Dt)throw new RangeError("Out of range index");if(Dt<=gt)return this;gt=gt>>>0,Dt=Dt===void 0?this.length:Dt>>>0,pt||(pt=0);let rr;if(typeof pt=="number")for(rr=gt;rr<Dt;++rr)this[rr]=pt;else{const ir=_e.isBuffer(pt)?pt:_e.from(pt,Xt),wr=ir.length;if(wr===0)throw new TypeError('The value "'+pt+'" is invalid for argument "value"');for(rr=0;rr<Dt-gt;++rr)this[rr+gt]=ir[rr%wr]}return this};const br={};function Er(At,pt,gt){br[At]=class extends gt{constructor(){super(),Object.defineProperty(this,"message",{value:pt.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${At}]`,this.stack,delete this.name}get code(){return At}set code(Xt){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Xt,writable:!0})}toString(){return`${this.name} [${At}]: ${this.message}`}}}Er("ERR_BUFFER_OUT_OF_BOUNDS",function(At){return At?`${At} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Er("ERR_INVALID_ARG_TYPE",function(At,pt){return`The "${At}" argument must be of type number. Received type ${typeof pt}`},TypeError),Er("ERR_OUT_OF_RANGE",function(At,pt,gt){let Dt=`The value of "${At}" is out of range.`,Xt=gt;return Number.isInteger(gt)&&Math.abs(gt)>2**32?Xt=Cr(String(gt)):typeof gt=="bigint"&&(Xt=String(gt),(gt>BigInt(2)**BigInt(32)||gt<-(BigInt(2)**BigInt(32)))&&(Xt=Cr(Xt)),Xt+="n"),Dt+=` It must be ${pt}. Received ${Xt}`,Dt},RangeError);function Cr(At){let pt="",gt=At.length;const Dt=At[0]==="-"?1:0;for(;gt>=Dt+4;gt-=3)pt=`_${At.slice(gt-3,gt)}${pt}`;return`${At.slice(0,gt)}${pt}`}function kr(At,pt,gt){Jt(pt,"offset"),(At[pt]===void 0||At[pt+gt]===void 0)&&mt(pt,At.length-(gt+1))}function Or(At,pt,gt,Dt,Xt,rr){if(At>gt||At<pt){const ir=typeof pt=="bigint"?"n":"";let wr;throw pt===0||pt===BigInt(0)?wr=`>= 0${ir} and < 2${ir} ** ${(rr+1)*8}${ir}`:wr=`>= -(2${ir} ** ${(rr+1)*8-1}${ir}) and < 2 ** ${(rr+1)*8-1}${ir}`,new br.ERR_OUT_OF_RANGE("value",wr,At)}kr(Dt,Xt,rr)}function Jt(At,pt){if(typeof At!="number")throw new br.ERR_INVALID_ARG_TYPE(pt,"number",At)}function mt(At,pt,gt){throw Math.floor(At)!==At?(Jt(At,gt),new br.ERR_OUT_OF_RANGE("offset","an integer",At)):pt<0?new br.ERR_BUFFER_OUT_OF_BOUNDS:new br.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${pt}`,At)}const Vt=/[^+/0-9A-Za-z-_]/g;function Qt(At){if(At=At.split("=")[0],At=At.trim().replace(Vt,""),At.length<2)return"";for(;At.length%4!==0;)At=At+"=";return At}function It(At,pt){pt=pt||1/0;let gt;const Dt=At.length;let Xt=null;const rr=[];for(let ir=0;ir<Dt;++ir){if(gt=At.charCodeAt(ir),gt>55295&&gt<57344){if(!Xt){if(gt>56319){(pt-=3)>-1&&rr.push(239,191,189);continue}else if(ir+1===Dt){(pt-=3)>-1&&rr.push(239,191,189);continue}Xt=gt;continue}if(gt<56320){(pt-=3)>-1&&rr.push(239,191,189),Xt=gt;continue}gt=(Xt-55296<<10|gt-56320)+65536}else Xt&&(pt-=3)>-1&&rr.push(239,191,189);if(Xt=null,gt<128){if((pt-=1)<0)break;rr.push(gt)}else if(gt<2048){if((pt-=2)<0)break;rr.push(gt>>6|192,gt&63|128)}else if(gt<65536){if((pt-=3)<0)break;rr.push(gt>>12|224,gt>>6&63|128,gt&63|128)}else if(gt<1114112){if((pt-=4)<0)break;rr.push(gt>>18|240,gt>>12&63|128,gt>>6&63|128,gt&63|128)}else throw new Error("Invalid code point")}return rr}function Nt(At){const pt=[];for(let gt=0;gt<At.length;++gt)pt.push(At.charCodeAt(gt)&255);return pt}function qt(At,pt){let gt,Dt,Xt;const rr=[];for(let ir=0;ir<At.length&&!((pt-=2)<0);++ir)gt=At.charCodeAt(ir),Dt=gt>>8,Xt=gt%256,rr.push(Xt),rr.push(Dt);return rr}function ar(At){return d.toByteArray(Qt(At))}function lr(At,pt,gt,Dt){let Xt;for(Xt=0;Xt<Dt&&!(Xt+gt>=pt.length||Xt>=At.length);++Xt)pt[Xt+gt]=At[Xt];return Xt}function Gt(At,pt){return At instanceof pt||At!=null&&At.constructor!=null&&At.constructor.name!=null&&At.constructor.name===pt.name}function dr(At){return At!==At}const mr=function(){const At="0123456789abcdef",pt=new Array(256);for(let gt=0;gt<16;++gt){const Dt=gt*16;for(let Xt=0;Xt<16;++Xt)pt[Dt+Xt]=At[gt]+At[Xt]}return pt}();function fr(At){return typeof BigInt>"u"?gr:At}function gr(){throw new Error("BigInt not supported")}})(buffer);let AggregateError$1=class extends Error{constructor(d){if(!Array.isArray(d))throw new TypeError(`Expected input to be an Array, got ${typeof d}`);let g="";for(let b=0;b<d.length;b++)g+=`    ${d[b].stack}
`;super(g),this.name="AggregateError",this.errors=d}};var primordials={AggregateError:AggregateError$1,ArrayIsArray(h){return Array.isArray(h)},ArrayPrototypeIncludes(h,d){return h.includes(d)},ArrayPrototypeIndexOf(h,d){return h.indexOf(d)},ArrayPrototypeJoin(h,d){return h.join(d)},ArrayPrototypeMap(h,d){return h.map(d)},ArrayPrototypePop(h,d){return h.pop(d)},ArrayPrototypePush(h,d){return h.push(d)},ArrayPrototypeSlice(h,d,g){return h.slice(d,g)},Error,FunctionPrototypeCall(h,d,...g){return h.call(d,...g)},FunctionPrototypeSymbolHasInstance(h,d){return Function.prototype[Symbol.hasInstance].call(h,d)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(h,d){return Object.defineProperties(h,d)},ObjectDefineProperty(h,d,g){return Object.defineProperty(h,d,g)},ObjectGetOwnPropertyDescriptor(h,d){return Object.getOwnPropertyDescriptor(h,d)},ObjectKeys(h){return Object.keys(h)},ObjectSetPrototypeOf(h,d){return Object.setPrototypeOf(h,d)},Promise,PromisePrototypeCatch(h,d){return h.catch(d)},PromisePrototypeThen(h,d,g){return h.then(d,g)},PromiseReject(h){return Promise.reject(h)},PromiseResolve(h){return Promise.resolve(h)},ReflectApply:Reflect.apply,RegExpPrototypeTest(h,d){return h.test(d)},SafeSet:Set,String,StringPrototypeSlice(h,d,g){return h.slice(d,g)},StringPrototypeToLowerCase(h){return h.toLowerCase()},StringPrototypeToUpperCase(h){return h.toUpperCase()},StringPrototypeTrim(h){return h.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(h,d,g){return h.set(d,g)},Boolean,Uint8Array},util={exports:{}},inspect$2={format(h,...d){return h.replace(/%([sdifj])/g,function(...[g,b]){const _=d.shift();return b==="f"?_.toFixed(6):b==="j"?JSON.stringify(_):b==="s"&&typeof _=="object"?`${_.constructor!==Object?_.constructor.name:""} {}`.trim():_.toString()})},inspect(h){switch(typeof h){case"string":if(h.includes("'"))if(h.includes('"')){if(!h.includes("`")&&!h.includes("${"))return`\`${h}\``}else return`"${h}"`;return`'${h}'`;case"number":return isNaN(h)?"NaN":Object.is(h,-0)?String(h):h;case"bigint":return`${String(h)}n`;case"boolean":case"undefined":return String(h);case"object":return"{}"}}};const{format,inspect:inspect$1}=inspect$2,{AggregateError:CustomAggregateError}=primordials,AggregateError=globalThis.AggregateError||CustomAggregateError,kIsNodeError=Symbol("kIsNodeError"),kTypes=["string","function","number","object","Function","Object","boolean","bigint","symbol"],classRegExp=/^([A-Z][a-z0-9]*)+$/,nodeInternalPrefix="__node_internal_",codes$1={};function assert(h,d){if(!h)throw new codes$1.ERR_INTERNAL_ASSERTION(d)}function addNumericalSeparator(h){let d="",g=h.length;const b=h[0]==="-"?1:0;for(;g>=b+4;g-=3)d=`_${h.slice(g-3,g)}${d}`;return`${h.slice(0,g)}${d}`}function getMessage(h,d,g){if(typeof d=="function")return assert(d.length<=g.length,`Code: ${h}; The provided arguments length (${g.length}) does not match the required ones (${d.length}).`),d(...g);const b=(d.match(/%[dfijoOs]/g)||[]).length;return assert(b===g.length,`Code: ${h}; The provided arguments length (${g.length}) does not match the required ones (${b}).`),g.length===0?d:format(d,...g)}function E(h,d,g){g||(g=Error);class b extends g{constructor(...$){super(getMessage(h,d,$))}toString(){return`${this.name} [${h}]: ${this.message}`}}Object.defineProperties(b.prototype,{name:{value:g.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${h}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),b.prototype.code=h,b.prototype[kIsNodeError]=!0,codes$1[h]=b}function hideStackFrames$1(h){const d=nodeInternalPrefix+h.name;return Object.defineProperty(h,"name",{value:d}),h}function aggregateTwoErrors$2(h,d){if(h&&d&&h!==d){if(Array.isArray(d.errors))return d.errors.push(h),d;const g=new AggregateError([d,h],d.message);return g.code=d.code,g}return h||d}let AbortError$5=class extends Error{constructor(d="The operation was aborted",g=void 0){if(g!==void 0&&typeof g!="object")throw new codes$1.ERR_INVALID_ARG_TYPE("options","Object",g);super(d,g),this.code="ABORT_ERR",this.name="AbortError"}};E("ERR_ASSERTION","%s",Error);E("ERR_INVALID_ARG_TYPE",(h,d,g)=>{assert(typeof h=="string","'name' must be a string"),Array.isArray(d)||(d=[d]);let b="The ";h.endsWith(" argument")?b+=`${h} `:b+=`"${h}" ${h.includes(".")?"property":"argument"} `,b+="must be ";const _=[],$=[],j=[];for(const et of d)assert(typeof et=="string","All expected entries have to be of type string"),kTypes.includes(et)?_.push(et.toLowerCase()):classRegExp.test(et)?$.push(et):(assert(et!=="object",'The value "object" should be written as "Object"'),j.push(et));if($.length>0){const et=_.indexOf("object");et!==-1&&(_.splice(_,et,1),$.push("Object"))}if(_.length>0){switch(_.length){case 1:b+=`of type ${_[0]}`;break;case 2:b+=`one of type ${_[0]} or ${_[1]}`;break;default:{const et=_.pop();b+=`one of type ${_.join(", ")}, or ${et}`}}($.length>0||j.length>0)&&(b+=" or ")}if($.length>0){switch($.length){case 1:b+=`an instance of ${$[0]}`;break;case 2:b+=`an instance of ${$[0]} or ${$[1]}`;break;default:{const et=$.pop();b+=`an instance of ${$.join(", ")}, or ${et}`}}j.length>0&&(b+=" or ")}switch(j.length){case 0:break;case 1:j[0].toLowerCase()!==j[0]&&(b+="an "),b+=`${j[0]}`;break;case 2:b+=`one of ${j[0]} or ${j[1]}`;break;default:{const et=j.pop();b+=`one of ${j.join(", ")}, or ${et}`}}if(g==null)b+=`. Received ${g}`;else if(typeof g=="function"&&g.name)b+=`. Received function ${g.name}`;else if(typeof g=="object"){var _e;if((_e=g.constructor)!==null&&_e!==void 0&&_e.name)b+=`. Received an instance of ${g.constructor.name}`;else{const et=inspect$1(g,{depth:-1});b+=`. Received ${et}`}}else{let et=inspect$1(g,{colors:!1});et.length>25&&(et=`${et.slice(0,25)}...`),b+=`. Received type ${typeof g} (${et})`}return b},TypeError);E("ERR_INVALID_ARG_VALUE",(h,d,g="is invalid")=>{let b=inspect$1(d);return b.length>128&&(b=b.slice(0,128)+"..."),`The ${h.includes(".")?"property":"argument"} '${h}' ${g}. Received ${b}`},TypeError);E("ERR_INVALID_RETURN_VALUE",(h,d,g)=>{var b;const _=g!=null&&(b=g.constructor)!==null&&b!==void 0&&b.name?`instance of ${g.constructor.name}`:`type ${typeof g}`;return`Expected ${h} to be returned from the "${d}" function but got ${_}.`},TypeError);E("ERR_MISSING_ARGS",(...h)=>{assert(h.length>0,"At least one arg needs to be specified");let d;const g=h.length;switch(h=(Array.isArray(h)?h:[h]).map(b=>`"${b}"`).join(" or "),g){case 1:d+=`The ${h[0]} argument`;break;case 2:d+=`The ${h[0]} and ${h[1]} arguments`;break;default:{const b=h.pop();d+=`The ${h.join(", ")}, and ${b} arguments`}break}return`${d} must be specified`},TypeError);E("ERR_OUT_OF_RANGE",(h,d,g)=>{assert(d,'Missing "range" argument');let b;if(Number.isInteger(g)&&Math.abs(g)>2**32)b=addNumericalSeparator(String(g));else if(typeof g=="bigint"){b=String(g);const _=BigInt(2)**BigInt(32);(g>_||g<-_)&&(b=addNumericalSeparator(b)),b+="n"}else b=inspect$1(g);return`The value of "${h}" is out of range. It must be ${d}. Received ${b}`},RangeError);E("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);E("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);E("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);E("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);E("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);E("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);E("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);E("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);E("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);E("ERR_STREAM_WRITE_AFTER_END","write after end",Error);E("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);var errors={AbortError:AbortError$5,aggregateTwoErrors:hideStackFrames$1(aggregateTwoErrors$2),hideStackFrames:hideStackFrames$1,codes:codes$1},browser$1={exports:{}},hasRequiredBrowser;function requireBrowser(){if(hasRequiredBrowser)return browser$1.exports;hasRequiredBrowser=1;const{AbortController:h,AbortSignal:d}=typeof self<"u"?self:typeof window<"u"?window:void 0;return browser$1.exports=h,browser$1.exports.AbortSignal=d,browser$1.exports.default=h,browser$1.exports}var events={exports:{}},R=typeof Reflect=="object"?Reflect:null,ReflectApply=R&&typeof R.apply=="function"?R.apply:function h(d,g,b){return Function.prototype.apply.call(d,g,b)},ReflectOwnKeys;R&&typeof R.ownKeys=="function"?ReflectOwnKeys=R.ownKeys:Object.getOwnPropertySymbols?ReflectOwnKeys=function(d){return Object.getOwnPropertyNames(d).concat(Object.getOwnPropertySymbols(d))}:ReflectOwnKeys=function(d){return Object.getOwnPropertyNames(d)};function ProcessEmitWarning(h){console&&console.warn&&console.warn(h)}var NumberIsNaN$2=Number.isNaN||function h(d){return d!==d};function EventEmitter(){EventEmitter.init.call(this)}events.exports=EventEmitter;events.exports.once=once$2;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=void 0;EventEmitter.prototype._eventsCount=0;EventEmitter.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(h){if(typeof h!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof h)}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(h){if(typeof h!="number"||h<0||NumberIsNaN$2(h))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+h+".");defaultMaxListeners=h}});EventEmitter.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};EventEmitter.prototype.setMaxListeners=function h(d){if(typeof d!="number"||d<0||NumberIsNaN$2(d))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+d+".");return this._maxListeners=d,this};function _getMaxListeners(h){return h._maxListeners===void 0?EventEmitter.defaultMaxListeners:h._maxListeners}EventEmitter.prototype.getMaxListeners=function h(){return _getMaxListeners(this)};EventEmitter.prototype.emit=function h(d){for(var g=[],b=1;b<arguments.length;b++)g.push(arguments[b]);var _=d==="error",$=this._events;if($!==void 0)_=_&&$.error===void 0;else if(!_)return!1;if(_){var j;if(g.length>0&&(j=g[0]),j instanceof Error)throw j;var _e=new Error("Unhandled error."+(j?" ("+j.message+")":""));throw _e.context=j,_e}var et=$[d];if(et===void 0)return!1;if(typeof et=="function")ReflectApply(et,this,g);else for(var rt=et.length,nt=arrayClone(et,rt),b=0;b<rt;++b)ReflectApply(nt[b],this,g);return!0};function _addListener(h,d,g,b){var _,$,j;if(checkListener(g),$=h._events,$===void 0?($=h._events=Object.create(null),h._eventsCount=0):($.newListener!==void 0&&(h.emit("newListener",d,g.listener?g.listener:g),$=h._events),j=$[d]),j===void 0)j=$[d]=g,++h._eventsCount;else if(typeof j=="function"?j=$[d]=b?[g,j]:[j,g]:b?j.unshift(g):j.push(g),_=_getMaxListeners(h),_>0&&j.length>_&&!j.warned){j.warned=!0;var _e=new Error("Possible EventEmitter memory leak detected. "+j.length+" "+String(d)+" listeners added. Use emitter.setMaxListeners() to increase limit");_e.name="MaxListenersExceededWarning",_e.emitter=h,_e.type=d,_e.count=j.length,ProcessEmitWarning(_e)}return h}EventEmitter.prototype.addListener=function h(d,g){return _addListener(this,d,g,!1)};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.prependListener=function h(d,g){return _addListener(this,d,g,!0)};function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(h,d,g){var b={fired:!1,wrapFn:void 0,target:h,type:d,listener:g},_=onceWrapper.bind(b);return _.listener=g,b.wrapFn=_,_}EventEmitter.prototype.once=function h(d,g){return checkListener(g),this.on(d,_onceWrap(this,d,g)),this};EventEmitter.prototype.prependOnceListener=function h(d,g){return checkListener(g),this.prependListener(d,_onceWrap(this,d,g)),this};EventEmitter.prototype.removeListener=function h(d,g){var b,_,$,j,_e;if(checkListener(g),_=this._events,_===void 0)return this;if(b=_[d],b===void 0)return this;if(b===g||b.listener===g)--this._eventsCount===0?this._events=Object.create(null):(delete _[d],_.removeListener&&this.emit("removeListener",d,b.listener||g));else if(typeof b!="function"){for($=-1,j=b.length-1;j>=0;j--)if(b[j]===g||b[j].listener===g){_e=b[j].listener,$=j;break}if($<0)return this;$===0?b.shift():spliceOne(b,$),b.length===1&&(_[d]=b[0]),_.removeListener!==void 0&&this.emit("removeListener",d,_e||g)}return this};EventEmitter.prototype.off=EventEmitter.prototype.removeListener;EventEmitter.prototype.removeAllListeners=function h(d){var g,b,_;if(b=this._events,b===void 0)return this;if(b.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):b[d]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete b[d]),this;if(arguments.length===0){var $=Object.keys(b),j;for(_=0;_<$.length;++_)j=$[_],j!=="removeListener"&&this.removeAllListeners(j);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(g=b[d],typeof g=="function")this.removeListener(d,g);else if(g!==void 0)for(_=g.length-1;_>=0;_--)this.removeListener(d,g[_]);return this};function _listeners(h,d,g){var b=h._events;if(b===void 0)return[];var _=b[d];return _===void 0?[]:typeof _=="function"?g?[_.listener||_]:[_]:g?unwrapListeners(_):arrayClone(_,_.length)}EventEmitter.prototype.listeners=function h(d){return _listeners(this,d,!0)};EventEmitter.prototype.rawListeners=function h(d){return _listeners(this,d,!1)};EventEmitter.listenerCount=function(h,d){return typeof h.listenerCount=="function"?h.listenerCount(d):listenerCount.call(h,d)};EventEmitter.prototype.listenerCount=listenerCount;function listenerCount(h){var d=this._events;if(d!==void 0){var g=d[h];if(typeof g=="function")return 1;if(g!==void 0)return g.length}return 0}EventEmitter.prototype.eventNames=function h(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(h,d){for(var g=new Array(d),b=0;b<d;++b)g[b]=h[b];return g}function spliceOne(h,d){for(;d+1<h.length;d++)h[d]=h[d+1];h.pop()}function unwrapListeners(h){for(var d=new Array(h.length),g=0;g<d.length;++g)d[g]=h[g].listener||h[g];return d}function once$2(h,d){return new Promise(function(g,b){function _(j){h.removeListener(d,$),b(j)}function $(){typeof h.removeListener=="function"&&h.removeListener("error",_),g([].slice.call(arguments))}eventTargetAgnosticAddListener(h,d,$,{once:!0}),d!=="error"&&addErrorHandlerIfEventEmitter(h,_,{once:!0})})}function addErrorHandlerIfEventEmitter(h,d,g){typeof h.on=="function"&&eventTargetAgnosticAddListener(h,"error",d,g)}function eventTargetAgnosticAddListener(h,d,g,b){if(typeof h.on=="function")b.once?h.once(d,g):h.on(d,g);else if(typeof h.addEventListener=="function")h.addEventListener(d,function _($){b.once&&h.removeEventListener(d,_),g($)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof h)}var eventsExports=events.exports;(function(h){const d=buffer,{format:g,inspect:b}=inspect$2,{codes:{ERR_INVALID_ARG_TYPE:_}}=errors,{kResistStopPropagation:$,AggregateError:j,SymbolDispose:_e}=primordials,et=globalThis.AbortSignal||requireBrowser().AbortSignal,rt=globalThis.AbortController||requireBrowser().AbortController,nt=Object.getPrototypeOf(async function(){}).constructor,st=globalThis.Blob||d.Blob,at=typeof st<"u"?function(ct){return ct instanceof st}:function(ct){return!1},it=(ot,ct)=>{if(ot!==void 0&&(ot===null||typeof ot!="object"||!("aborted"in ot)))throw new _(ct,"AbortSignal",ot)},dt=(ot,ct)=>{if(typeof ot!="function")throw new _(ct,"Function",ot)};h.exports={AggregateError:j,kEmptyObject:Object.freeze({}),once(ot){let ct=!1;return function(...lt){ct||(ct=!0,ot.apply(this,lt))}},createDeferredPromise:function(){let ot,ct;return{promise:new Promise((ut,ft)=>{ot=ut,ct=ft}),resolve:ot,reject:ct}},promisify(ot){return new Promise((ct,lt)=>{ot((ut,...ft)=>ut?lt(ut):ct(...ft))})},debuglog(){return function(){}},format:g,inspect:b,types:{isAsyncFunction(ot){return ot instanceof nt},isArrayBufferView(ot){return ArrayBuffer.isView(ot)}},isBlob:at,deprecate(ot,ct){return ot},addAbortListener:eventsExports.addAbortListener||function(ct,lt){if(ct===void 0)throw new _("signal","AbortSignal",ct);it(ct,"signal"),dt(lt,"listener");let ut;return ct.aborted?queueMicrotask(()=>lt()):(ct.addEventListener("abort",lt,{__proto__:null,once:!0,[$]:!0}),ut=()=>{ct.removeEventListener("abort",lt)}),{__proto__:null,[_e](){var ft;(ft=ut)===null||ft===void 0||ft()}}},AbortSignalAny:et.any||function(ct){if(ct.length===1)return ct[0];const lt=new rt,ut=()=>lt.abort();return ct.forEach(ft=>{it(ft,"signals"),ft.addEventListener("abort",ut,{once:!0})}),lt.signal.addEventListener("abort",()=>{ct.forEach(ft=>ft.removeEventListener("abort",ut))},{once:!0}),lt.signal}},h.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")})(util);var utilExports=util.exports,operators={};const{ArrayIsArray:ArrayIsArray$2,ArrayPrototypeIncludes,ArrayPrototypeJoin,ArrayPrototypeMap,NumberIsInteger:NumberIsInteger$1,NumberIsNaN:NumberIsNaN$1,NumberMAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER,NumberParseInt,ObjectPrototypeHasOwnProperty,RegExpPrototypeExec,String:String$1,StringPrototypeToUpperCase,StringPrototypeTrim}=primordials,{hideStackFrames,codes:{ERR_SOCKET_BAD_PORT,ERR_INVALID_ARG_TYPE:ERR_INVALID_ARG_TYPE$4,ERR_INVALID_ARG_VALUE:ERR_INVALID_ARG_VALUE$3,ERR_OUT_OF_RANGE:ERR_OUT_OF_RANGE$1,ERR_UNKNOWN_SIGNAL}}=errors,{normalizeEncoding:normalizeEncoding$1}=utilExports,{isAsyncFunction,isArrayBufferView}=utilExports.types,signals={};function isInt32(h){return h===(h|0)}function isUint32(h){return h===h>>>0}const octalReg=/^[0-7]+$/,modeDesc="must be a 32-bit unsigned integer or an octal string";function parseFileMode(h,d,g){if(typeof h>"u"&&(h=g),typeof h=="string"){if(RegExpPrototypeExec(octalReg,h)===null)throw new ERR_INVALID_ARG_VALUE$3(d,h,modeDesc);h=NumberParseInt(h,8)}return validateUint32(h,d),h}const validateInteger$2=hideStackFrames((h,d,g=NumberMIN_SAFE_INTEGER,b=NumberMAX_SAFE_INTEGER)=>{if(typeof h!="number")throw new ERR_INVALID_ARG_TYPE$4(d,"number",h);if(!NumberIsInteger$1(h))throw new ERR_OUT_OF_RANGE$1(d,"an integer",h);if(h<g||h>b)throw new ERR_OUT_OF_RANGE$1(d,`>= ${g} && <= ${b}`,h)}),validateInt32=hideStackFrames((h,d,g=-2147483648,b=2147483647)=>{if(typeof h!="number")throw new ERR_INVALID_ARG_TYPE$4(d,"number",h);if(!NumberIsInteger$1(h))throw new ERR_OUT_OF_RANGE$1(d,"an integer",h);if(h<g||h>b)throw new ERR_OUT_OF_RANGE$1(d,`>= ${g} && <= ${b}`,h)}),validateUint32=hideStackFrames((h,d,g=!1)=>{if(typeof h!="number")throw new ERR_INVALID_ARG_TYPE$4(d,"number",h);if(!NumberIsInteger$1(h))throw new ERR_OUT_OF_RANGE$1(d,"an integer",h);const b=g?1:0,_=4294967295;if(h<b||h>_)throw new ERR_OUT_OF_RANGE$1(d,`>= ${b} && <= ${_}`,h)});function validateString(h,d){if(typeof h!="string")throw new ERR_INVALID_ARG_TYPE$4(d,"string",h)}function validateNumber(h,d,g=void 0,b){if(typeof h!="number")throw new ERR_INVALID_ARG_TYPE$4(d,"number",h);if(g!=null&&h<g||b!=null&&h>b||(g!=null||b!=null)&&NumberIsNaN$1(h))throw new ERR_OUT_OF_RANGE$1(d,`${g!=null?`>= ${g}`:""}${g!=null&&b!=null?" && ":""}${b!=null?`<= ${b}`:""}`,h)}const validateOneOf=hideStackFrames((h,d,g)=>{if(!ArrayPrototypeIncludes(g,h)){const _="must be one of: "+ArrayPrototypeJoin(ArrayPrototypeMap(g,$=>typeof $=="string"?`'${$}'`:String$1($)),", ");throw new ERR_INVALID_ARG_VALUE$3(d,h,_)}});function validateBoolean$1(h,d){if(typeof h!="boolean")throw new ERR_INVALID_ARG_TYPE$4(d,"boolean",h)}function getOwnPropertyValueOrDefault(h,d,g){return h==null||!ObjectPrototypeHasOwnProperty(h,d)?g:h[d]}const validateObject$2=hideStackFrames((h,d,g=null)=>{const b=getOwnPropertyValueOrDefault(g,"allowArray",!1),_=getOwnPropertyValueOrDefault(g,"allowFunction",!1);if(!getOwnPropertyValueOrDefault(g,"nullable",!1)&&h===null||!b&&ArrayIsArray$2(h)||typeof h!="object"&&(!_||typeof h!="function"))throw new ERR_INVALID_ARG_TYPE$4(d,"Object",h)}),validateDictionary=hideStackFrames((h,d)=>{if(h!=null&&typeof h!="object"&&typeof h!="function")throw new ERR_INVALID_ARG_TYPE$4(d,"a dictionary",h)}),validateArray=hideStackFrames((h,d,g=0)=>{if(!ArrayIsArray$2(h))throw new ERR_INVALID_ARG_TYPE$4(d,"Array",h);if(h.length<g){const b=`must be longer than ${g}`;throw new ERR_INVALID_ARG_VALUE$3(d,h,b)}});function validateStringArray(h,d){validateArray(h,d);for(let g=0;g<h.length;g++)validateString(h[g],`${d}[${g}]`)}function validateBooleanArray(h,d){validateArray(h,d);for(let g=0;g<h.length;g++)validateBoolean$1(h[g],`${d}[${g}]`)}function validateAbortSignalArray(h,d){validateArray(h,d);for(let g=0;g<h.length;g++){const b=h[g],_=`${d}[${g}]`;if(b==null)throw new ERR_INVALID_ARG_TYPE$4(_,"AbortSignal",b);validateAbortSignal$3(b,_)}}function validateSignalName(h,d="signal"){if(validateString(h,d),signals[h]===void 0)throw signals[StringPrototypeToUpperCase(h)]!==void 0?new ERR_UNKNOWN_SIGNAL(h+" (signals must use all capital letters)"):new ERR_UNKNOWN_SIGNAL(h)}const validateBuffer=hideStackFrames((h,d="buffer")=>{if(!isArrayBufferView(h))throw new ERR_INVALID_ARG_TYPE$4(d,["Buffer","TypedArray","DataView"],h)});function validateEncoding(h,d){const g=normalizeEncoding$1(d),b=h.length;if(g==="hex"&&b%2!==0)throw new ERR_INVALID_ARG_VALUE$3("encoding",d,`is invalid for data of length ${b}`)}function validatePort(h,d="Port",g=!0){if(typeof h!="number"&&typeof h!="string"||typeof h=="string"&&StringPrototypeTrim(h).length===0||+h!==+h>>>0||h>65535||h===0&&!g)throw new ERR_SOCKET_BAD_PORT(d,h,g);return h|0}const validateAbortSignal$3=hideStackFrames((h,d)=>{if(h!==void 0&&(h===null||typeof h!="object"||!("aborted"in h)))throw new ERR_INVALID_ARG_TYPE$4(d,"AbortSignal",h)}),validateFunction$2=hideStackFrames((h,d)=>{if(typeof h!="function")throw new ERR_INVALID_ARG_TYPE$4(d,"Function",h)}),validatePlainFunction=hideStackFrames((h,d)=>{if(typeof h!="function"||isAsyncFunction(h))throw new ERR_INVALID_ARG_TYPE$4(d,"Function",h)}),validateUndefined=hideStackFrames((h,d)=>{if(h!==void 0)throw new ERR_INVALID_ARG_TYPE$4(d,"undefined",h)});function validateUnion(h,d,g){if(!ArrayPrototypeIncludes(g,h))throw new ERR_INVALID_ARG_TYPE$4(d,`('${ArrayPrototypeJoin(g,"|")}')`,h)}const linkValueRegExp=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function validateLinkHeaderFormat(h,d){if(typeof h>"u"||!RegExpPrototypeExec(linkValueRegExp,h))throw new ERR_INVALID_ARG_VALUE$3(d,h,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function validateLinkHeaderValue(h){if(typeof h=="string")return validateLinkHeaderFormat(h,"hints"),h;if(ArrayIsArray$2(h)){const d=h.length;let g="";if(d===0)return g;for(let b=0;b<d;b++){const _=h[b];validateLinkHeaderFormat(_,"hints"),g+=_,b!==d-1&&(g+=", ")}return g}throw new ERR_INVALID_ARG_VALUE$3("hints",h,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}var validators={isInt32,isUint32,parseFileMode,validateArray,validateStringArray,validateBooleanArray,validateAbortSignalArray,validateBoolean:validateBoolean$1,validateBuffer,validateDictionary,validateEncoding,validateFunction:validateFunction$2,validateInt32,validateInteger:validateInteger$2,validateNumber,validateObject:validateObject$2,validateOneOf,validatePlainFunction,validatePort,validateSignalName,validateString,validateUint32,validateUndefined,validateUnion,validateAbortSignal:validateAbortSignal$3,validateLinkHeaderValue},endOfStream={exports:{}},browser={exports:{}},process$5=browser.exports={},cachedSetTimeout,cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?cachedSetTimeout=setTimeout:cachedSetTimeout=defaultSetTimout}catch{cachedSetTimeout=defaultSetTimout}try{typeof clearTimeout=="function"?cachedClearTimeout=clearTimeout:cachedClearTimeout=defaultClearTimeout}catch{cachedClearTimeout=defaultClearTimeout}})();function runTimeout(h){if(cachedSetTimeout===setTimeout)return setTimeout(h,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(h,0);try{return cachedSetTimeout(h,0)}catch{try{return cachedSetTimeout.call(null,h,0)}catch{return cachedSetTimeout.call(this,h,0)}}}function runClearTimeout(h){if(cachedClearTimeout===clearTimeout)return clearTimeout(h);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(h);try{return cachedClearTimeout(h)}catch{try{return cachedClearTimeout.call(null,h)}catch{return cachedClearTimeout.call(this,h)}}}var queue=[],draining=!1,currentQueue,queueIndex=-1;function cleanUpNextTick(){!draining||!currentQueue||(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var h=runTimeout(cleanUpNextTick);draining=!0;for(var d=queue.length;d;){for(currentQueue=queue,queue=[];++queueIndex<d;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,d=queue.length}currentQueue=null,draining=!1,runClearTimeout(h)}}process$5.nextTick=function(h){var d=new Array(arguments.length-1);if(arguments.length>1)for(var g=1;g<arguments.length;g++)d[g-1]=arguments[g];queue.push(new Item(h,d)),queue.length===1&&!draining&&runTimeout(drainQueue)};function Item(h,d){this.fun=h,this.array=d}Item.prototype.run=function(){this.fun.apply(null,this.array)};process$5.title="browser";process$5.browser=!0;process$5.env={};process$5.argv=[];process$5.version="";process$5.versions={};function noop(){}process$5.on=noop;process$5.addListener=noop;process$5.once=noop;process$5.off=noop;process$5.removeListener=noop;process$5.removeAllListeners=noop;process$5.emit=noop;process$5.prependListener=noop;process$5.prependOnceListener=noop;process$5.listeners=function(h){return[]};process$5.binding=function(h){throw new Error("process.binding is not supported")};process$5.cwd=function(){return"/"};process$5.chdir=function(h){throw new Error("process.chdir is not supported")};process$5.umask=function(){return 0};var browserExports$1=browser.exports;const{SymbolAsyncIterator:SymbolAsyncIterator$2,SymbolIterator:SymbolIterator$2,SymbolFor}=primordials,kIsDestroyed$1=SymbolFor("nodejs.stream.destroyed"),kIsErrored=SymbolFor("nodejs.stream.errored"),kIsReadable=SymbolFor("nodejs.stream.readable"),kIsWritable=SymbolFor("nodejs.stream.writable"),kIsDisturbed=SymbolFor("nodejs.stream.disturbed"),kIsClosedPromise$1=SymbolFor("nodejs.webstream.isClosedPromise"),kControllerErrorFunction=SymbolFor("nodejs.webstream.controllerErrorFunction");function isReadableNodeStream$2(h,d=!1){var g;return!!(h&&typeof h.pipe=="function"&&typeof h.on=="function"&&(!d||typeof h.pause=="function"&&typeof h.resume=="function")&&(!h._writableState||((g=h._readableState)===null||g===void 0?void 0:g.readable)!==!1)&&(!h._writableState||h._readableState))}function isWritableNodeStream$1(h){var d;return!!(h&&typeof h.write=="function"&&typeof h.on=="function"&&(!h._readableState||((d=h._writableState)===null||d===void 0?void 0:d.writable)!==!1))}function isDuplexNodeStream(h){return!!(h&&typeof h.pipe=="function"&&h._readableState&&typeof h.on=="function"&&typeof h.write=="function")}function isNodeStream$4(h){return h&&(h._readableState||h._writableState||typeof h.write=="function"&&typeof h.on=="function"||typeof h.pipe=="function"&&typeof h.on=="function")}function isReadableStream$3(h){return!!(h&&!isNodeStream$4(h)&&typeof h.pipeThrough=="function"&&typeof h.getReader=="function"&&typeof h.cancel=="function")}function isWritableStream$2(h){return!!(h&&!isNodeStream$4(h)&&typeof h.getWriter=="function"&&typeof h.abort=="function")}function isTransformStream$2(h){return!!(h&&!isNodeStream$4(h)&&typeof h.readable=="object"&&typeof h.writable=="object")}function isWebStream$2(h){return isReadableStream$3(h)||isWritableStream$2(h)||isTransformStream$2(h)}function isIterable$1(h,d){return h==null?!1:d===!0?typeof h[SymbolAsyncIterator$2]=="function":d===!1?typeof h[SymbolIterator$2]=="function":typeof h[SymbolAsyncIterator$2]=="function"||typeof h[SymbolIterator$2]=="function"}function isDestroyed$1(h){if(!isNodeStream$4(h))return null;const d=h._writableState,g=h._readableState,b=d||g;return!!(h.destroyed||h[kIsDestroyed$1]||b!=null&&b.destroyed)}function isWritableEnded(h){if(!isWritableNodeStream$1(h))return null;if(h.writableEnded===!0)return!0;const d=h._writableState;return d!=null&&d.errored?!1:typeof(d==null?void 0:d.ended)!="boolean"?null:d.ended}function isWritableFinished$1(h,d){if(!isWritableNodeStream$1(h))return null;if(h.writableFinished===!0)return!0;const g=h._writableState;return g!=null&&g.errored?!1:typeof(g==null?void 0:g.finished)!="boolean"?null:!!(g.finished||d===!1&&g.ended===!0&&g.length===0)}function isReadableEnded(h){if(!isReadableNodeStream$2(h))return null;if(h.readableEnded===!0)return!0;const d=h._readableState;return!d||d.errored?!1:typeof(d==null?void 0:d.ended)!="boolean"?null:d.ended}function isReadableFinished$2(h,d){if(!isReadableNodeStream$2(h))return null;const g=h._readableState;return g!=null&&g.errored?!1:typeof(g==null?void 0:g.endEmitted)!="boolean"?null:!!(g.endEmitted||d===!1&&g.ended===!0&&g.length===0)}function isReadable$3(h){return h&&h[kIsReadable]!=null?h[kIsReadable]:typeof(h==null?void 0:h.readable)!="boolean"?null:isDestroyed$1(h)?!1:isReadableNodeStream$2(h)&&h.readable&&!isReadableFinished$2(h)}function isWritable$3(h){return h&&h[kIsWritable]!=null?h[kIsWritable]:typeof(h==null?void 0:h.writable)!="boolean"?null:isDestroyed$1(h)?!1:isWritableNodeStream$1(h)&&h.writable&&!isWritableEnded(h)}function isFinished$1(h,d){return isNodeStream$4(h)?isDestroyed$1(h)?!0:!((d==null?void 0:d.readable)!==!1&&isReadable$3(h)||(d==null?void 0:d.writable)!==!1&&isWritable$3(h)):null}function isWritableErrored$1(h){var d,g;return isNodeStream$4(h)?h.writableErrored?h.writableErrored:(d=(g=h._writableState)===null||g===void 0?void 0:g.errored)!==null&&d!==void 0?d:null:null}function isReadableErrored$1(h){var d,g;return isNodeStream$4(h)?h.readableErrored?h.readableErrored:(d=(g=h._readableState)===null||g===void 0?void 0:g.errored)!==null&&d!==void 0?d:null:null}function isClosed$1(h){if(!isNodeStream$4(h))return null;if(typeof h.closed=="boolean")return h.closed;const d=h._writableState,g=h._readableState;return typeof(d==null?void 0:d.closed)=="boolean"||typeof(g==null?void 0:g.closed)=="boolean"?(d==null?void 0:d.closed)||(g==null?void 0:g.closed):typeof h._closed=="boolean"&&isOutgoingMessage(h)?h._closed:null}function isOutgoingMessage(h){return typeof h._closed=="boolean"&&typeof h._defaultKeepAlive=="boolean"&&typeof h._removedConnection=="boolean"&&typeof h._removedContLen=="boolean"}function isServerResponse(h){return typeof h._sent100=="boolean"&&isOutgoingMessage(h)}function isServerRequest$1(h){var d;return typeof h._consuming=="boolean"&&typeof h._dumped=="boolean"&&((d=h.req)===null||d===void 0?void 0:d.upgradeOrConnect)===void 0}function willEmitClose(h){if(!isNodeStream$4(h))return null;const d=h._writableState,g=h._readableState,b=d||g;return!b&&isServerResponse(h)||!!(b&&b.autoDestroy&&b.emitClose&&b.closed===!1)}function isDisturbed(h){var d;return!!(h&&((d=h[kIsDisturbed])!==null&&d!==void 0?d:h.readableDidRead||h.readableAborted))}function isErrored(h){var d,g,b,_,$,j,_e,et,rt,nt;return!!(h&&((d=(g=(b=(_=($=(j=h[kIsErrored])!==null&&j!==void 0?j:h.readableErrored)!==null&&$!==void 0?$:h.writableErrored)!==null&&_!==void 0?_:(_e=h._readableState)===null||_e===void 0?void 0:_e.errorEmitted)!==null&&b!==void 0?b:(et=h._writableState)===null||et===void 0?void 0:et.errorEmitted)!==null&&g!==void 0?g:(rt=h._readableState)===null||rt===void 0?void 0:rt.errored)!==null&&d!==void 0?d:!((nt=h._writableState)===null||nt===void 0)&&nt.errored))}var utils={isDestroyed:isDestroyed$1,kIsDestroyed:kIsDestroyed$1,isDisturbed,kIsDisturbed,isErrored,kIsErrored,isReadable:isReadable$3,kIsReadable,kIsClosedPromise:kIsClosedPromise$1,kControllerErrorFunction,kIsWritable,isClosed:isClosed$1,isDuplexNodeStream,isFinished:isFinished$1,isIterable:isIterable$1,isReadableNodeStream:isReadableNodeStream$2,isReadableStream:isReadableStream$3,isReadableEnded,isReadableFinished:isReadableFinished$2,isReadableErrored:isReadableErrored$1,isNodeStream:isNodeStream$4,isWebStream:isWebStream$2,isWritable:isWritable$3,isWritableNodeStream:isWritableNodeStream$1,isWritableStream:isWritableStream$2,isWritableEnded,isWritableFinished:isWritableFinished$1,isWritableErrored:isWritableErrored$1,isServerRequest:isServerRequest$1,isServerResponse,willEmitClose,isTransformStream:isTransformStream$2};const process$4=browserExports$1,{AbortError:AbortError$4,codes}=errors,{ERR_INVALID_ARG_TYPE:ERR_INVALID_ARG_TYPE$3,ERR_STREAM_PREMATURE_CLOSE:ERR_STREAM_PREMATURE_CLOSE$1}=codes,{kEmptyObject,once:once$1}=utilExports,{validateAbortSignal:validateAbortSignal$2,validateFunction:validateFunction$1,validateObject:validateObject$1,validateBoolean}=validators,{Promise:Promise$3,PromisePrototypeThen:PromisePrototypeThen$2,SymbolDispose:SymbolDispose$1}=primordials,{isClosed,isReadable:isReadable$2,isReadableNodeStream:isReadableNodeStream$1,isReadableStream:isReadableStream$2,isReadableFinished:isReadableFinished$1,isReadableErrored,isWritable:isWritable$2,isWritableNodeStream,isWritableStream:isWritableStream$1,isWritableFinished,isWritableErrored,isNodeStream:isNodeStream$3,willEmitClose:_willEmitClose,kIsClosedPromise}=utils;let addAbortListener$1;function isRequest$1(h){return h.setHeader&&typeof h.abort=="function"}const nop=()=>{};function eos$2(h,d,g){var b,_;if(arguments.length===2?(g=d,d=kEmptyObject):d==null?d=kEmptyObject:validateObject$1(d,"options"),validateFunction$1(g,"callback"),validateAbortSignal$2(d.signal,"options.signal"),g=once$1(g),isReadableStream$2(h)||isWritableStream$1(h))return eosWeb(h,d,g);if(!isNodeStream$3(h))throw new ERR_INVALID_ARG_TYPE$3("stream",["ReadableStream","WritableStream","Stream"],h);const $=(b=d.readable)!==null&&b!==void 0?b:isReadableNodeStream$1(h),j=(_=d.writable)!==null&&_!==void 0?_:isWritableNodeStream(h),_e=h._writableState,et=h._readableState,rt=()=>{h.writable||at()};let nt=_willEmitClose(h)&&isReadableNodeStream$1(h)===$&&isWritableNodeStream(h)===j,st=isWritableFinished(h,!1);const at=()=>{st=!0,h.destroyed&&(nt=!1),!(nt&&(!h.readable||$))&&(!$||it)&&g.call(h)};let it=isReadableFinished$1(h,!1);const dt=()=>{it=!0,h.destroyed&&(nt=!1),!(nt&&(!h.writable||j))&&(!j||st)&&g.call(h)},ot=Tt=>{g.call(h,Tt)};let ct=isClosed(h);const lt=()=>{ct=!0;const Tt=isWritableErrored(h)||isReadableErrored(h);if(Tt&&typeof Tt!="boolean")return g.call(h,Tt);if($&&!it&&isReadableNodeStream$1(h,!0)&&!isReadableFinished$1(h,!1))return g.call(h,new ERR_STREAM_PREMATURE_CLOSE$1);if(j&&!st&&!isWritableFinished(h,!1))return g.call(h,new ERR_STREAM_PREMATURE_CLOSE$1);g.call(h)},ut=()=>{ct=!0;const Tt=isWritableErrored(h)||isReadableErrored(h);if(Tt&&typeof Tt!="boolean")return g.call(h,Tt);g.call(h)},ft=()=>{h.req.on("finish",at)};isRequest$1(h)?(h.on("complete",at),nt||h.on("abort",lt),h.req?ft():h.on("request",ft)):j&&!_e&&(h.on("end",rt),h.on("close",rt)),!nt&&typeof h.aborted=="boolean"&&h.on("aborted",lt),h.on("end",dt),h.on("finish",at),d.error!==!1&&h.on("error",ot),h.on("close",lt),ct?process$4.nextTick(lt):_e!=null&&_e.errorEmitted||et!=null&&et.errorEmitted?nt||process$4.nextTick(ut):(!$&&(!nt||isReadable$2(h))&&(st||isWritable$2(h)===!1)||!j&&(!nt||isWritable$2(h))&&(it||isReadable$2(h)===!1)||et&&h.req&&h.aborted)&&process$4.nextTick(ut);const Et=()=>{g=nop,h.removeListener("aborted",lt),h.removeListener("complete",at),h.removeListener("abort",lt),h.removeListener("request",ft),h.req&&h.req.removeListener("finish",at),h.removeListener("end",rt),h.removeListener("close",rt),h.removeListener("finish",at),h.removeListener("end",dt),h.removeListener("error",ot),h.removeListener("close",lt)};if(d.signal&&!ct){const Tt=()=>{const St=g;Et(),St.call(h,new AbortError$4(void 0,{cause:d.signal.reason}))};if(d.signal.aborted)process$4.nextTick(Tt);else{addAbortListener$1=addAbortListener$1||utilExports.addAbortListener;const St=addAbortListener$1(d.signal,Tt),ht=g;g=once$1((...kt)=>{St[SymbolDispose$1](),ht.apply(h,kt)})}}return Et}function eosWeb(h,d,g){let b=!1,_=nop;if(d.signal)if(_=()=>{b=!0,g.call(h,new AbortError$4(void 0,{cause:d.signal.reason}))},d.signal.aborted)process$4.nextTick(_);else{addAbortListener$1=addAbortListener$1||utilExports.addAbortListener;const j=addAbortListener$1(d.signal,_),_e=g;g=once$1((...et)=>{j[SymbolDispose$1](),_e.apply(h,et)})}const $=(...j)=>{b||process$4.nextTick(()=>g.apply(h,j))};return PromisePrototypeThen$2(h[kIsClosedPromise].promise,$,$),nop}function finished$1(h,d){var g;let b=!1;return d===null&&(d=kEmptyObject),(g=d)!==null&&g!==void 0&&g.cleanup&&(validateBoolean(d.cleanup,"cleanup"),b=d.cleanup),new Promise$3((_,$)=>{const j=eos$2(h,d,_e=>{b&&j(),_e?$(_e):_()})})}endOfStream.exports=eos$2;endOfStream.exports.finished=finished$1;var endOfStreamExports=endOfStream.exports;const process$3=browserExports$1,{aggregateTwoErrors:aggregateTwoErrors$1,codes:{ERR_MULTIPLE_CALLBACK},AbortError:AbortError$3}=errors,{Symbol:Symbol$3}=primordials,{kIsDestroyed,isDestroyed,isFinished,isServerRequest}=utils,kDestroy=Symbol$3("kDestroy"),kConstruct=Symbol$3("kConstruct");function checkError(h,d,g){h&&(h.stack,d&&!d.errored&&(d.errored=h),g&&!g.errored&&(g.errored=h))}function destroy(h,d){const g=this._readableState,b=this._writableState,_=b||g;return b!=null&&b.destroyed||g!=null&&g.destroyed?(typeof d=="function"&&d(),this):(checkError(h,b,g),b&&(b.destroyed=!0),g&&(g.destroyed=!0),_.constructed?_destroy(this,h,d):this.once(kDestroy,function($){_destroy(this,aggregateTwoErrors$1($,h),d)}),this)}function _destroy(h,d,g){let b=!1;function _($){if(b)return;b=!0;const j=h._readableState,_e=h._writableState;checkError($,_e,j),_e&&(_e.closed=!0),j&&(j.closed=!0),typeof g=="function"&&g($),$?process$3.nextTick(emitErrorCloseNT,h,$):process$3.nextTick(emitCloseNT,h)}try{h._destroy(d||null,_)}catch($){_($)}}function emitErrorCloseNT(h,d){emitErrorNT(h,d),emitCloseNT(h)}function emitCloseNT(h){const d=h._readableState,g=h._writableState;g&&(g.closeEmitted=!0),d&&(d.closeEmitted=!0),(g!=null&&g.emitClose||d!=null&&d.emitClose)&&h.emit("close")}function emitErrorNT(h,d){const g=h._readableState,b=h._writableState;b!=null&&b.errorEmitted||g!=null&&g.errorEmitted||(b&&(b.errorEmitted=!0),g&&(g.errorEmitted=!0),h.emit("error",d))}function undestroy(){const h=this._readableState,d=this._writableState;h&&(h.constructed=!0,h.closed=!1,h.closeEmitted=!1,h.destroyed=!1,h.errored=null,h.errorEmitted=!1,h.reading=!1,h.ended=h.readable===!1,h.endEmitted=h.readable===!1),d&&(d.constructed=!0,d.destroyed=!1,d.closed=!1,d.closeEmitted=!1,d.errored=null,d.errorEmitted=!1,d.finalCalled=!1,d.prefinished=!1,d.ended=d.writable===!1,d.ending=d.writable===!1,d.finished=d.writable===!1)}function errorOrDestroy(h,d,g){const b=h._readableState,_=h._writableState;if(_!=null&&_.destroyed||b!=null&&b.destroyed)return this;b!=null&&b.autoDestroy||_!=null&&_.autoDestroy?h.destroy(d):d&&(d.stack,_&&!_.errored&&(_.errored=d),b&&!b.errored&&(b.errored=d),g?process$3.nextTick(emitErrorNT,h,d):emitErrorNT(h,d))}function construct(h,d){if(typeof h._construct!="function")return;const g=h._readableState,b=h._writableState;g&&(g.constructed=!1),b&&(b.constructed=!1),h.once(kConstruct,d),!(h.listenerCount(kConstruct)>1)&&process$3.nextTick(constructNT,h)}function constructNT(h){let d=!1;function g(b){if(d){errorOrDestroy(h,b??new ERR_MULTIPLE_CALLBACK);return}d=!0;const _=h._readableState,$=h._writableState,j=$||_;_&&(_.constructed=!0),$&&($.constructed=!0),j.destroyed?h.emit(kDestroy,b):b?errorOrDestroy(h,b,!0):process$3.nextTick(emitConstructNT,h)}try{h._construct(b=>{process$3.nextTick(g,b)})}catch(b){process$3.nextTick(g,b)}}function emitConstructNT(h){h.emit(kConstruct)}function isRequest(h){return(h==null?void 0:h.setHeader)&&typeof h.abort=="function"}function emitCloseLegacy(h){h.emit("close")}function emitErrorCloseLegacy(h,d){h.emit("error",d),process$3.nextTick(emitCloseLegacy,h)}function destroyer$2(h,d){!h||isDestroyed(h)||(!d&&!isFinished(h)&&(d=new AbortError$3),isServerRequest(h)?(h.socket=null,h.destroy(d)):isRequest(h)?h.abort():isRequest(h.req)?h.req.abort():typeof h.destroy=="function"?h.destroy(d):typeof h.close=="function"?h.close():d?process$3.nextTick(emitErrorCloseLegacy,h,d):process$3.nextTick(emitCloseLegacy,h),h.destroyed||(h[kIsDestroyed]=!0))}var destroy_1={construct,destroyer:destroyer$2,destroy,undestroy,errorOrDestroy};const{ArrayIsArray:ArrayIsArray$1,ObjectSetPrototypeOf:ObjectSetPrototypeOf$2}=primordials,{EventEmitter:EE}=eventsExports;function Stream(h){EE.call(this,h)}ObjectSetPrototypeOf$2(Stream.prototype,EE.prototype);ObjectSetPrototypeOf$2(Stream,EE);Stream.prototype.pipe=function(h,d){const g=this;function b(nt){h.writable&&h.write(nt)===!1&&g.pause&&g.pause()}g.on("data",b);function _(){g.readable&&g.resume&&g.resume()}h.on("drain",_),!h._isStdio&&(!d||d.end!==!1)&&(g.on("end",j),g.on("close",_e));let $=!1;function j(){$||($=!0,h.end())}function _e(){$||($=!0,typeof h.destroy=="function"&&h.destroy())}function et(nt){rt(),EE.listenerCount(this,"error")===0&&this.emit("error",nt)}prependListener(g,"error",et),prependListener(h,"error",et);function rt(){g.removeListener("data",b),h.removeListener("drain",_),g.removeListener("end",j),g.removeListener("close",_e),g.removeListener("error",et),h.removeListener("error",et),g.removeListener("end",rt),g.removeListener("close",rt),h.removeListener("close",rt)}return g.on("end",rt),g.on("close",rt),h.on("close",rt),h.emit("pipe",g),h};function prependListener(h,d,g){if(typeof h.prependListener=="function")return h.prependListener(d,g);!h._events||!h._events[d]?h.on(d,g):ArrayIsArray$1(h._events[d])?h._events[d].unshift(g):h._events[d]=[g,h._events[d]]}var legacy={Stream,prependListener},addAbortSignal={exports:{}};(function(h){const{SymbolDispose:d}=primordials,{AbortError:g,codes:b}=errors,{isNodeStream:_,isWebStream:$,kControllerErrorFunction:j}=utils,_e=endOfStreamExports,{ERR_INVALID_ARG_TYPE:et}=b;let rt;const nt=(st,at)=>{if(typeof st!="object"||!("aborted"in st))throw new et(at,"AbortSignal",st)};h.exports.addAbortSignal=function(at,it){if(nt(at,"signal"),!_(it)&&!$(it))throw new et("stream",["ReadableStream","WritableStream","Stream"],it);return h.exports.addAbortSignalNoValidate(at,it)},h.exports.addAbortSignalNoValidate=function(st,at){if(typeof st!="object"||!("aborted"in st))return at;const it=_(at)?()=>{at.destroy(new g(void 0,{cause:st.reason}))}:()=>{at[j](new g(void 0,{cause:st.reason}))};if(st.aborted)it();else{rt=rt||utilExports.addAbortListener;const dt=rt(st,it);_e(at,dt[d])}return at}})(addAbortSignal);var addAbortSignalExports=addAbortSignal.exports;const{StringPrototypeSlice,SymbolIterator:SymbolIterator$1,TypedArrayPrototypeSet,Uint8Array:Uint8Array$1}=primordials,{Buffer:Buffer$3}=buffer,{inspect}=utilExports;var buffer_list=class{constructor(){this.head=null,this.tail=null,this.length=0}push(d){const g={data:d,next:null};this.length>0?this.tail.next=g:this.head=g,this.tail=g,++this.length}unshift(d){const g={data:d,next:this.head};this.length===0&&(this.tail=g),this.head=g,++this.length}shift(){if(this.length===0)return;const d=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,d}clear(){this.head=this.tail=null,this.length=0}join(d){if(this.length===0)return"";let g=this.head,b=""+g.data;for(;(g=g.next)!==null;)b+=d+g.data;return b}concat(d){if(this.length===0)return Buffer$3.alloc(0);const g=Buffer$3.allocUnsafe(d>>>0);let b=this.head,_=0;for(;b;)TypedArrayPrototypeSet(g,b.data,_),_+=b.data.length,b=b.next;return g}consume(d,g){const b=this.head.data;if(d<b.length){const _=b.slice(0,d);return this.head.data=b.slice(d),_}return d===b.length?this.shift():g?this._getString(d):this._getBuffer(d)}first(){return this.head.data}*[SymbolIterator$1](){for(let d=this.head;d;d=d.next)yield d.data}_getString(d){let g="",b=this.head,_=0;do{const $=b.data;if(d>$.length)g+=$,d-=$.length;else{d===$.length?(g+=$,++_,b.next?this.head=b.next:this.head=this.tail=null):(g+=StringPrototypeSlice($,0,d),this.head=b,b.data=StringPrototypeSlice($,d));break}++_}while((b=b.next)!==null);return this.length-=_,g}_getBuffer(d){const g=Buffer$3.allocUnsafe(d),b=d;let _=this.head,$=0;do{const j=_.data;if(d>j.length)TypedArrayPrototypeSet(g,j,b-d),d-=j.length;else{d===j.length?(TypedArrayPrototypeSet(g,j,b-d),++$,_.next?this.head=_.next:this.head=this.tail=null):(TypedArrayPrototypeSet(g,new Uint8Array$1(j.buffer,j.byteOffset,d),b-d),this.head=_,_.data=j.slice(d));break}++$}while((_=_.next)!==null);return this.length-=$,g}[Symbol.for("nodejs.util.inspect.custom")](d,g){return inspect(this,{...g,depth:0,customInspect:!1})}};const{MathFloor:MathFloor$1,NumberIsInteger}=primordials,{validateInteger:validateInteger$1}=validators,{ERR_INVALID_ARG_VALUE:ERR_INVALID_ARG_VALUE$2}=errors.codes;let defaultHighWaterMarkBytes=16*1024,defaultHighWaterMarkObjectMode=16;function highWaterMarkFrom(h,d,g){return h.highWaterMark!=null?h.highWaterMark:d?h[g]:null}function getDefaultHighWaterMark(h){return h?defaultHighWaterMarkObjectMode:defaultHighWaterMarkBytes}function setDefaultHighWaterMark(h,d){validateInteger$1(d,"value",0),h?defaultHighWaterMarkObjectMode=d:defaultHighWaterMarkBytes=d}function getHighWaterMark$1(h,d,g,b){const _=highWaterMarkFrom(d,b,g);if(_!=null){if(!NumberIsInteger(_)||_<0){const $=b?`options.${g}`:"options.highWaterMark";throw new ERR_INVALID_ARG_VALUE$2($,_)}return MathFloor$1(_)}return getDefaultHighWaterMark(h.objectMode)}var state={getHighWaterMark:getHighWaterMark$1,getDefaultHighWaterMark,setDefaultHighWaterMark},string_decoder={},safeBuffer={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(h,d){var g=buffer,b=g.Buffer;function _(j,_e){for(var et in j)_e[et]=j[et]}b.from&&b.alloc&&b.allocUnsafe&&b.allocUnsafeSlow?h.exports=g:(_(g,d),d.Buffer=$);function $(j,_e,et){return b(j,_e,et)}$.prototype=Object.create(b.prototype),_(b,$),$.from=function(j,_e,et){if(typeof j=="number")throw new TypeError("Argument must not be a number");return b(j,_e,et)},$.alloc=function(j,_e,et){if(typeof j!="number")throw new TypeError("Argument must be a number");var rt=b(j);return _e!==void 0?typeof et=="string"?rt.fill(_e,et):rt.fill(_e):rt.fill(0),rt},$.allocUnsafe=function(j){if(typeof j!="number")throw new TypeError("Argument must be a number");return b(j)},$.allocUnsafeSlow=function(j){if(typeof j!="number")throw new TypeError("Argument must be a number");return g.SlowBuffer(j)}})(safeBuffer,safeBuffer.exports);var safeBufferExports=safeBuffer.exports,Buffer$2=safeBufferExports.Buffer,isEncoding=Buffer$2.isEncoding||function(h){switch(h=""+h,h&&h.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function _normalizeEncoding(h){if(!h)return"utf8";for(var d;;)switch(h){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return h;default:if(d)return;h=(""+h).toLowerCase(),d=!0}}function normalizeEncoding(h){var d=_normalizeEncoding(h);if(typeof d!="string"&&(Buffer$2.isEncoding===isEncoding||!isEncoding(h)))throw new Error("Unknown encoding: "+h);return d||h}string_decoder.StringDecoder=StringDecoder;function StringDecoder(h){this.encoding=normalizeEncoding(h);var d;switch(this.encoding){case"utf16le":this.text=utf16Text,this.end=utf16End,d=4;break;case"utf8":this.fillLast=utf8FillLast,d=4;break;case"base64":this.text=base64Text,this.end=base64End,d=3;break;default:this.write=simpleWrite,this.end=simpleEnd;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Buffer$2.allocUnsafe(d)}StringDecoder.prototype.write=function(h){if(h.length===0)return"";var d,g;if(this.lastNeed){if(d=this.fillLast(h),d===void 0)return"";g=this.lastNeed,this.lastNeed=0}else g=0;return g<h.length?d?d+this.text(h,g):this.text(h,g):d||""};StringDecoder.prototype.end=utf8End;StringDecoder.prototype.text=utf8Text;StringDecoder.prototype.fillLast=function(h){if(this.lastNeed<=h.length)return h.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);h.copy(this.lastChar,this.lastTotal-this.lastNeed,0,h.length),this.lastNeed-=h.length};function utf8CheckByte(h){return h<=127?0:h>>5===6?2:h>>4===14?3:h>>3===30?4:h>>6===2?-1:-2}function utf8CheckIncomplete(h,d,g){var b=d.length-1;if(b<g)return 0;var _=utf8CheckByte(d[b]);return _>=0?(_>0&&(h.lastNeed=_-1),_):--b<g||_===-2?0:(_=utf8CheckByte(d[b]),_>=0?(_>0&&(h.lastNeed=_-2),_):--b<g||_===-2?0:(_=utf8CheckByte(d[b]),_>=0?(_>0&&(_===2?_=0:h.lastNeed=_-3),_):0))}function utf8CheckExtraBytes(h,d,g){if((d[0]&192)!==128)return h.lastNeed=0,"";if(h.lastNeed>1&&d.length>1){if((d[1]&192)!==128)return h.lastNeed=1,"";if(h.lastNeed>2&&d.length>2&&(d[2]&192)!==128)return h.lastNeed=2,""}}function utf8FillLast(h){var d=this.lastTotal-this.lastNeed,g=utf8CheckExtraBytes(this,h);if(g!==void 0)return g;if(this.lastNeed<=h.length)return h.copy(this.lastChar,d,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);h.copy(this.lastChar,d,0,h.length),this.lastNeed-=h.length}function utf8Text(h,d){var g=utf8CheckIncomplete(this,h,d);if(!this.lastNeed)return h.toString("utf8",d);this.lastTotal=g;var b=h.length-(g-this.lastNeed);return h.copy(this.lastChar,0,b),h.toString("utf8",d,b)}function utf8End(h){var d=h&&h.length?this.write(h):"";return this.lastNeed?d+"":d}function utf16Text(h,d){if((h.length-d)%2===0){var g=h.toString("utf16le",d);if(g){var b=g.charCodeAt(g.length-1);if(b>=55296&&b<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=h[h.length-2],this.lastChar[1]=h[h.length-1],g.slice(0,-1)}return g}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=h[h.length-1],h.toString("utf16le",d,h.length-1)}function utf16End(h){var d=h&&h.length?this.write(h):"";if(this.lastNeed){var g=this.lastTotal-this.lastNeed;return d+this.lastChar.toString("utf16le",0,g)}return d}function base64Text(h,d){var g=(h.length-d)%3;return g===0?h.toString("base64",d):(this.lastNeed=3-g,this.lastTotal=3,g===1?this.lastChar[0]=h[h.length-1]:(this.lastChar[0]=h[h.length-2],this.lastChar[1]=h[h.length-1]),h.toString("base64",d,h.length-g))}function base64End(h){var d=h&&h.length?this.write(h):"";return this.lastNeed?d+this.lastChar.toString("base64",0,3-this.lastNeed):d}function simpleWrite(h){return h.toString(this.encoding)}function simpleEnd(h){return h&&h.length?this.write(h):""}const process$2=browserExports$1,{PromisePrototypeThen:PromisePrototypeThen$1,SymbolAsyncIterator:SymbolAsyncIterator$1,SymbolIterator}=primordials,{Buffer:Buffer$1}=buffer,{ERR_INVALID_ARG_TYPE:ERR_INVALID_ARG_TYPE$2,ERR_STREAM_NULL_VALUES}=errors.codes;function from(h,d,g){let b;if(typeof d=="string"||d instanceof Buffer$1)return new h({objectMode:!0,...g,read(){this.push(d),this.push(null)}});let _;if(d&&d[SymbolAsyncIterator$1])_=!0,b=d[SymbolAsyncIterator$1]();else if(d&&d[SymbolIterator])_=!1,b=d[SymbolIterator]();else throw new ERR_INVALID_ARG_TYPE$2("iterable",["Iterable"],d);const $=new h({objectMode:!0,highWaterMark:1,...g});let j=!1;$._read=function(){j||(j=!0,et())},$._destroy=function(rt,nt){PromisePrototypeThen$1(_e(rt),()=>process$2.nextTick(nt,rt),st=>process$2.nextTick(nt,st||rt))};async function _e(rt){const nt=rt!=null,st=typeof b.throw=="function";if(nt&&st){const{value:at,done:it}=await b.throw(rt);if(await at,it)return}if(typeof b.return=="function"){const{value:at}=await b.return();await at}}async function et(){for(;;){try{const{value:rt,done:nt}=_?await b.next():b.next();if(nt)$.push(null);else{const st=rt&&typeof rt.then=="function"?await rt:rt;if(st===null)throw j=!1,new ERR_STREAM_NULL_VALUES;if($.push(st))continue;j=!1}}catch(rt){$.destroy(rt)}break}}return $}var from_1=from,readable,hasRequiredReadable;function requireReadable(){if(hasRequiredReadable)return readable;hasRequiredReadable=1;const h=browserExports$1,{ArrayPrototypeIndexOf:d,NumberIsInteger:g,NumberIsNaN:b,NumberParseInt:_,ObjectDefineProperties:$,ObjectKeys:j,ObjectSetPrototypeOf:_e,Promise:et,SafeSet:rt,SymbolAsyncDispose:nt,SymbolAsyncIterator:st,Symbol:at}=primordials;readable=Gt,Gt.ReadableState=lr;const{EventEmitter:it}=eventsExports,{Stream:dt,prependListener:ot}=legacy,{Buffer:ct}=buffer,{addAbortSignal:lt}=addAbortSignalExports,ut=endOfStreamExports;let ft=utilExports.debuglog("stream",$t=>{ft=$t});const Et=buffer_list,Tt=destroy_1,{getHighWaterMark:St,getDefaultHighWaterMark:ht}=state,{aggregateTwoErrors:kt,codes:{ERR_INVALID_ARG_TYPE:Rt,ERR_METHOD_NOT_IMPLEMENTED:Mt,ERR_OUT_OF_RANGE:Zt,ERR_STREAM_PUSH_AFTER_EOF:Ct,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:Pt},AbortError:xt}=errors,{validateObject:Ht}=validators,tr=at("kPaused"),{StringDecoder:er}=string_decoder,Kt=from_1;_e(Gt.prototype,dt.prototype),_e(Gt,dt);const Bt=()=>{},{errorOrDestroy:nr}=Tt,Ut=1,zt=2,sr=4,or=8,ur=16,_r=32,vr=64,br=128,Er=256,Cr=512,kr=1024,Or=2048,Jt=4096,mt=8192,Vt=16384,Qt=32768,It=65536,Nt=1<<17,qt=1<<18;function ar($t){return{enumerable:!1,get(){return(this.state&$t)!==0},set(Lt){Lt?this.state|=$t:this.state&=~$t}}}$(lr.prototype,{objectMode:ar(Ut),ended:ar(zt),endEmitted:ar(sr),reading:ar(or),constructed:ar(ur),sync:ar(_r),needReadable:ar(vr),emittedReadable:ar(br),readableListening:ar(Er),resumeScheduled:ar(Cr),errorEmitted:ar(kr),emitClose:ar(Or),autoDestroy:ar(Jt),destroyed:ar(mt),closed:ar(Vt),closeEmitted:ar(Qt),multiAwaitDrain:ar(It),readingMore:ar(Nt),dataEmitted:ar(qt)});function lr($t,Lt,hr){typeof hr!="boolean"&&(hr=Lt instanceof requireDuplex()),this.state=Or|Jt|ur|_r,$t&&$t.objectMode&&(this.state|=Ut),hr&&$t&&$t.readableObjectMode&&(this.state|=Ut),this.highWaterMark=$t?St(this,$t,"readableHighWaterMark",hr):ht(!1),this.buffer=new Et,this.length=0,this.pipes=[],this.flowing=null,this[tr]=null,$t&&$t.emitClose===!1&&(this.state&=~Or),$t&&$t.autoDestroy===!1&&(this.state&=~Jt),this.errored=null,this.defaultEncoding=$t&&$t.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,$t&&$t.encoding&&(this.decoder=new er($t.encoding),this.encoding=$t.encoding)}function Gt($t){if(!(this instanceof Gt))return new Gt($t);const Lt=this instanceof requireDuplex();this._readableState=new lr($t,this,Lt),$t&&(typeof $t.read=="function"&&(this._read=$t.read),typeof $t.destroy=="function"&&(this._destroy=$t.destroy),typeof $t.construct=="function"&&(this._construct=$t.construct),$t.signal&&!Lt&&lt($t.signal,this)),dt.call(this,$t),Tt.construct(this,()=>{this._readableState.needReadable&&Xt(this,this._readableState)})}Gt.prototype.destroy=Tt.destroy,Gt.prototype._undestroy=Tt.undestroy,Gt.prototype._destroy=function($t,Lt){Lt($t)},Gt.prototype[it.captureRejectionSymbol]=function($t){this.destroy($t)},Gt.prototype[nt]=function(){let $t;return this.destroyed||($t=this.readableEnded?null:new xt,this.destroy($t)),new et((Lt,hr)=>ut(this,pr=>pr&&pr!==$t?hr(pr):Lt(null)))},Gt.prototype.push=function($t,Lt){return dr(this,$t,Lt,!1)},Gt.prototype.unshift=function($t,Lt){return dr(this,$t,Lt,!0)};function dr($t,Lt,hr,pr){ft("readableAddChunk",Lt);const yr=$t._readableState;let Nr;if(yr.state&Ut||(typeof Lt=="string"?(hr=hr||yr.defaultEncoding,yr.encoding!==hr&&(pr&&yr.encoding?Lt=ct.from(Lt,hr).toString(yr.encoding):(Lt=ct.from(Lt,hr),hr=""))):Lt instanceof ct?hr="":dt._isUint8Array(Lt)?(Lt=dt._uint8ArrayToBuffer(Lt),hr=""):Lt!=null&&(Nr=new Rt("chunk",["string","Buffer","Uint8Array"],Lt))),Nr)nr($t,Nr);else if(Lt===null)yr.state&=~or,pt($t,yr);else if(yr.state&Ut||Lt&&Lt.length>0)if(pr)if(yr.state&sr)nr($t,new Pt);else{if(yr.destroyed||yr.errored)return!1;mr($t,yr,Lt,!0)}else if(yr.ended)nr($t,new Ct);else{if(yr.destroyed||yr.errored)return!1;yr.state&=~or,yr.decoder&&!hr?(Lt=yr.decoder.write(Lt),yr.objectMode||Lt.length!==0?mr($t,yr,Lt,!1):Xt($t,yr)):mr($t,yr,Lt,!1)}else pr||(yr.state&=~or,Xt($t,yr));return!yr.ended&&(yr.length<yr.highWaterMark||yr.length===0)}function mr($t,Lt,hr,pr){Lt.flowing&&Lt.length===0&&!Lt.sync&&$t.listenerCount("data")>0?(Lt.state&It?Lt.awaitDrainWriters.clear():Lt.awaitDrainWriters=null,Lt.dataEmitted=!0,$t.emit("data",hr)):(Lt.length+=Lt.objectMode?1:hr.length,pr?Lt.buffer.unshift(hr):Lt.buffer.push(hr),Lt.state&vr&&gt($t)),Xt($t,Lt)}Gt.prototype.isPaused=function(){const $t=this._readableState;return $t[tr]===!0||$t.flowing===!1},Gt.prototype.setEncoding=function($t){const Lt=new er($t);this._readableState.decoder=Lt,this._readableState.encoding=this._readableState.decoder.encoding;const hr=this._readableState.buffer;let pr="";for(const yr of hr)pr+=Lt.write(yr);return hr.clear(),pr!==""&&hr.push(pr),this._readableState.length=pr.length,this};const fr=1073741824;function gr($t){if($t>fr)throw new Zt("size","<= 1GiB",$t);return $t--,$t|=$t>>>1,$t|=$t>>>2,$t|=$t>>>4,$t|=$t>>>8,$t|=$t>>>16,$t++,$t}function At($t,Lt){return $t<=0||Lt.length===0&&Lt.ended?0:Lt.state&Ut?1:b($t)?Lt.flowing&&Lt.length?Lt.buffer.first().length:Lt.length:$t<=Lt.length?$t:Lt.ended?Lt.length:0}Gt.prototype.read=function($t){ft("read",$t),$t===void 0?$t=NaN:g($t)||($t=_($t,10));const Lt=this._readableState,hr=$t;if($t>Lt.highWaterMark&&(Lt.highWaterMark=gr($t)),$t!==0&&(Lt.state&=~br),$t===0&&Lt.needReadable&&((Lt.highWaterMark!==0?Lt.length>=Lt.highWaterMark:Lt.length>0)||Lt.ended))return ft("read: emitReadable",Lt.length,Lt.ended),Lt.length===0&&Lt.ended?Ur(this):gt(this),null;if($t=At($t,Lt),$t===0&&Lt.ended)return Lt.length===0&&Ur(this),null;let pr=(Lt.state&vr)!==0;if(ft("need readable",pr),(Lt.length===0||Lt.length-$t<Lt.highWaterMark)&&(pr=!0,ft("length less than watermark",pr)),Lt.ended||Lt.reading||Lt.destroyed||Lt.errored||!Lt.constructed)pr=!1,ft("reading, ended or constructing",pr);else if(pr){ft("do read"),Lt.state|=or|_r,Lt.length===0&&(Lt.state|=vr);try{this._read(Lt.highWaterMark)}catch(Nr){nr(this,Nr)}Lt.state&=~_r,Lt.reading||($t=At(hr,Lt))}let yr;return $t>0?yr=sn($t,Lt):yr=null,yr===null?(Lt.needReadable=Lt.length<=Lt.highWaterMark,$t=0):(Lt.length-=$t,Lt.multiAwaitDrain?Lt.awaitDrainWriters.clear():Lt.awaitDrainWriters=null),Lt.length===0&&(Lt.ended||(Lt.needReadable=!0),hr!==$t&&Lt.ended&&Ur(this)),yr!==null&&!Lt.errorEmitted&&!Lt.closeEmitted&&(Lt.dataEmitted=!0,this.emit("data",yr)),yr};function pt($t,Lt){if(ft("onEofChunk"),!Lt.ended){if(Lt.decoder){const hr=Lt.decoder.end();hr&&hr.length&&(Lt.buffer.push(hr),Lt.length+=Lt.objectMode?1:hr.length)}Lt.ended=!0,Lt.sync?gt($t):(Lt.needReadable=!1,Lt.emittedReadable=!0,Dt($t))}}function gt($t){const Lt=$t._readableState;ft("emitReadable",Lt.needReadable,Lt.emittedReadable),Lt.needReadable=!1,Lt.emittedReadable||(ft("emitReadable",Lt.flowing),Lt.emittedReadable=!0,h.nextTick(Dt,$t))}function Dt($t){const Lt=$t._readableState;ft("emitReadable_",Lt.destroyed,Lt.length,Lt.ended),!Lt.destroyed&&!Lt.errored&&(Lt.length||Lt.ended)&&($t.emit("readable"),Lt.emittedReadable=!1),Lt.needReadable=!Lt.flowing&&!Lt.ended&&Lt.length<=Lt.highWaterMark,Ar($t)}function Xt($t,Lt){!Lt.readingMore&&Lt.constructed&&(Lt.readingMore=!0,h.nextTick(rr,$t,Lt))}function rr($t,Lt){for(;!Lt.reading&&!Lt.ended&&(Lt.length<Lt.highWaterMark||Lt.flowing&&Lt.length===0);){const hr=Lt.length;if(ft("maybeReadMore read 0"),$t.read(0),hr===Lt.length)break}Lt.readingMore=!1}Gt.prototype._read=function($t){throw new Mt("_read()")},Gt.prototype.pipe=function($t,Lt){const hr=this,pr=this._readableState;pr.pipes.length===1&&(pr.multiAwaitDrain||(pr.multiAwaitDrain=!0,pr.awaitDrainWriters=new rt(pr.awaitDrainWriters?[pr.awaitDrainWriters]:[]))),pr.pipes.push($t),ft("pipe count=%d opts=%j",pr.pipes.length,Lt);const Nr=(!Lt||Lt.end!==!1)&&$t!==h.stdout&&$t!==h.stderr?Nn:Tn;pr.endEmitted?h.nextTick(Nr):hr.once("end",Nr),$t.on("unpipe",Mr);function Mr(on,Kr){ft("onunpipe"),on===hr&&Kr&&Kr.hasUnpiped===!1&&(Kr.hasUnpiped=!0,Kn())}function Nn(){ft("onend"),$t.end()}let an,On=!1;function Kn(){ft("cleanup"),$t.removeListener("close",In),$t.removeListener("finish",Pn),an&&$t.removeListener("drain",an),$t.removeListener("error",Rn),$t.removeListener("unpipe",Mr),hr.removeListener("end",Nn),hr.removeListener("end",Tn),hr.removeListener("data",Mn),On=!0,an&&pr.awaitDrainWriters&&(!$t._writableState||$t._writableState.needDrain)&&an()}function Dn(){On||(pr.pipes.length===1&&pr.pipes[0]===$t?(ft("false write response, pause",0),pr.awaitDrainWriters=$t,pr.multiAwaitDrain=!1):pr.pipes.length>1&&pr.pipes.includes($t)&&(ft("false write response, pause",pr.awaitDrainWriters.size),pr.awaitDrainWriters.add($t)),hr.pause()),an||(an=ir(hr,$t),$t.on("drain",an))}hr.on("data",Mn);function Mn(on){ft("ondata");const Kr=$t.write(on);ft("dest.write",Kr),Kr===!1&&Dn()}function Rn(on){if(ft("onerror",on),Tn(),$t.removeListener("error",Rn),$t.listenerCount("error")===0){const Kr=$t._writableState||$t._readableState;Kr&&!Kr.errorEmitted?nr($t,on):$t.emit("error",on)}}ot($t,"error",Rn);function In(){$t.removeListener("finish",Pn),Tn()}$t.once("close",In);function Pn(){ft("onfinish"),$t.removeListener("close",In),Tn()}$t.once("finish",Pn);function Tn(){ft("unpipe"),hr.unpipe($t)}return $t.emit("pipe",hr),$t.writableNeedDrain===!0?Dn():pr.flowing||(ft("pipe resume"),hr.resume()),$t};function ir($t,Lt){return function(){const pr=$t._readableState;pr.awaitDrainWriters===Lt?(ft("pipeOnDrain",1),pr.awaitDrainWriters=null):pr.multiAwaitDrain&&(ft("pipeOnDrain",pr.awaitDrainWriters.size),pr.awaitDrainWriters.delete(Lt)),(!pr.awaitDrainWriters||pr.awaitDrainWriters.size===0)&&$t.listenerCount("data")&&$t.resume()}}Gt.prototype.unpipe=function($t){const Lt=this._readableState,hr={hasUnpiped:!1};if(Lt.pipes.length===0)return this;if(!$t){const yr=Lt.pipes;Lt.pipes=[],this.pause();for(let Nr=0;Nr<yr.length;Nr++)yr[Nr].emit("unpipe",this,{hasUnpiped:!1});return this}const pr=d(Lt.pipes,$t);return pr===-1?this:(Lt.pipes.splice(pr,1),Lt.pipes.length===0&&this.pause(),$t.emit("unpipe",this,hr),this)},Gt.prototype.on=function($t,Lt){const hr=dt.prototype.on.call(this,$t,Lt),pr=this._readableState;return $t==="data"?(pr.readableListening=this.listenerCount("readable")>0,pr.flowing!==!1&&this.resume()):$t==="readable"&&!pr.endEmitted&&!pr.readableListening&&(pr.readableListening=pr.needReadable=!0,pr.flowing=!1,pr.emittedReadable=!1,ft("on readable",pr.length,pr.reading),pr.length?gt(this):pr.reading||h.nextTick(Ir,this)),hr},Gt.prototype.addListener=Gt.prototype.on,Gt.prototype.removeListener=function($t,Lt){const hr=dt.prototype.removeListener.call(this,$t,Lt);return $t==="readable"&&h.nextTick(wr,this),hr},Gt.prototype.off=Gt.prototype.removeListener,Gt.prototype.removeAllListeners=function($t){const Lt=dt.prototype.removeAllListeners.apply(this,arguments);return($t==="readable"||$t===void 0)&&h.nextTick(wr,this),Lt};function wr($t){const Lt=$t._readableState;Lt.readableListening=$t.listenerCount("readable")>0,Lt.resumeScheduled&&Lt[tr]===!1?Lt.flowing=!0:$t.listenerCount("data")>0?$t.resume():Lt.readableListening||(Lt.flowing=null)}function Ir($t){ft("readable nexttick read 0"),$t.read(0)}Gt.prototype.resume=function(){const $t=this._readableState;return $t.flowing||(ft("resume"),$t.flowing=!$t.readableListening,Tr(this,$t)),$t[tr]=!1,this};function Tr($t,Lt){Lt.resumeScheduled||(Lt.resumeScheduled=!0,h.nextTick($r,$t,Lt))}function $r($t,Lt){ft("resume",Lt.reading),Lt.reading||$t.read(0),Lt.resumeScheduled=!1,$t.emit("resume"),Ar($t),Lt.flowing&&!Lt.reading&&$t.read(0)}Gt.prototype.pause=function(){return ft("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(ft("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[tr]=!0,this};function Ar($t){const Lt=$t._readableState;for(ft("flow",Lt.flowing);Lt.flowing&&$t.read()!==null;);}Gt.prototype.wrap=function($t){let Lt=!1;$t.on("data",pr=>{!this.push(pr)&&$t.pause&&(Lt=!0,$t.pause())}),$t.on("end",()=>{this.push(null)}),$t.on("error",pr=>{nr(this,pr)}),$t.on("close",()=>{this.destroy()}),$t.on("destroy",()=>{this.destroy()}),this._read=()=>{Lt&&$t.resume&&(Lt=!1,$t.resume())};const hr=j($t);for(let pr=1;pr<hr.length;pr++){const yr=hr[pr];this[yr]===void 0&&typeof $t[yr]=="function"&&(this[yr]=$t[yr].bind($t))}return this},Gt.prototype[st]=function(){return nn(this)},Gt.prototype.iterator=function($t){return $t!==void 0&&Ht($t,"options"),nn(this,$t)};function nn($t,Lt){typeof $t.read!="function"&&($t=Gt.wrap($t,{objectMode:!0}));const hr=mn($t,Lt);return hr.stream=$t,hr}async function*mn($t,Lt){let hr=Bt;function pr(Mr){this===$t?(hr(),hr=Bt):hr=Mr}$t.on("readable",pr);let yr;const Nr=ut($t,{writable:!1},Mr=>{yr=Mr?kt(yr,Mr):null,hr(),hr=Bt});try{for(;;){const Mr=$t.destroyed?null:$t.read();if(Mr!==null)yield Mr;else{if(yr)throw yr;if(yr===null)return;await new et(pr)}}}catch(Mr){throw yr=kt(yr,Mr),yr}finally{(yr||(Lt==null?void 0:Lt.destroyOnReturn)!==!1)&&(yr===void 0||$t._readableState.autoDestroy)?Tt.destroyer($t,null):($t.off("readable",pr),Nr())}}$(Gt.prototype,{readable:{__proto__:null,get(){const $t=this._readableState;return!!$t&&$t.readable!==!1&&!$t.destroyed&&!$t.errorEmitted&&!$t.endEmitted},set($t){this._readableState&&(this._readableState.readable=!!$t)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function($t){this._readableState&&(this._readableState.flowing=$t)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set($t){this._readableState&&(this._readableState.destroyed=$t)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),$(lr.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[tr]!==!1},set($t){this[tr]=!!$t}}}),Gt._fromList=sn;function sn($t,Lt){if(Lt.length===0)return null;let hr;return Lt.objectMode?hr=Lt.buffer.shift():!$t||$t>=Lt.length?(Lt.decoder?hr=Lt.buffer.join(""):Lt.buffer.length===1?hr=Lt.buffer.first():hr=Lt.buffer.concat(Lt.length),Lt.buffer.clear()):hr=Lt.buffer.consume($t,Lt.decoder),hr}function Ur($t){const Lt=$t._readableState;ft("endReadable",Lt.endEmitted),Lt.endEmitted||(Lt.ended=!0,h.nextTick(Fr,Lt,$t))}function Fr($t,Lt){if(ft("endReadableNT",$t.endEmitted,$t.length),!$t.errored&&!$t.closeEmitted&&!$t.endEmitted&&$t.length===0){if($t.endEmitted=!0,Lt.emit("end"),Lt.writable&&Lt.allowHalfOpen===!1)h.nextTick(Cn,Lt);else if($t.autoDestroy){const hr=Lt._writableState;(!hr||hr.autoDestroy&&(hr.finished||hr.writable===!1))&&Lt.destroy()}}}function Cn($t){$t.writable&&!$t.writableEnded&&!$t.destroyed&&$t.end()}Gt.from=function($t,Lt){return Kt(Gt,$t,Lt)};let xr;function Pr(){return xr===void 0&&(xr={}),xr}return Gt.fromWeb=function($t,Lt){return Pr().newStreamReadableFromReadableStream($t,Lt)},Gt.toWeb=function($t,Lt){return Pr().newReadableStreamFromStreamReadable($t,Lt)},Gt.wrap=function($t,Lt){var hr,pr;return new Gt({objectMode:(hr=(pr=$t.readableObjectMode)!==null&&pr!==void 0?pr:$t.objectMode)!==null&&hr!==void 0?hr:!0,...Lt,destroy(yr,Nr){Tt.destroyer($t,yr),Nr(yr)}}).wrap($t)},readable}var writable,hasRequiredWritable;function requireWritable(){if(hasRequiredWritable)return writable;hasRequiredWritable=1;const h=browserExports$1,{ArrayPrototypeSlice:d,Error:g,FunctionPrototypeSymbolHasInstance:b,ObjectDefineProperty:_,ObjectDefineProperties:$,ObjectSetPrototypeOf:j,StringPrototypeToLowerCase:_e,Symbol:et,SymbolHasInstance:rt}=primordials;writable=Ht,Ht.WritableState=Pt;const{EventEmitter:nt}=eventsExports,st=legacy.Stream,{Buffer:at}=buffer,it=destroy_1,{addAbortSignal:dt}=addAbortSignalExports,{getHighWaterMark:ot,getDefaultHighWaterMark:ct}=state,{ERR_INVALID_ARG_TYPE:lt,ERR_METHOD_NOT_IMPLEMENTED:ut,ERR_MULTIPLE_CALLBACK:ft,ERR_STREAM_CANNOT_PIPE:Et,ERR_STREAM_DESTROYED:Tt,ERR_STREAM_ALREADY_FINISHED:St,ERR_STREAM_NULL_VALUES:ht,ERR_STREAM_WRITE_AFTER_END:kt,ERR_UNKNOWN_ENCODING:Rt}=errors.codes,{errorOrDestroy:Mt}=it;j(Ht.prototype,st.prototype),j(Ht,st);function Zt(){}const Ct=et("kOnFinished");function Pt(Jt,mt,Vt){typeof Vt!="boolean"&&(Vt=mt instanceof requireDuplex()),this.objectMode=!!(Jt&&Jt.objectMode),Vt&&(this.objectMode=this.objectMode||!!(Jt&&Jt.writableObjectMode)),this.highWaterMark=Jt?ot(this,Jt,"writableHighWaterMark",Vt):ct(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const Qt=!!(Jt&&Jt.decodeStrings===!1);this.decodeStrings=!Qt,this.defaultEncoding=Jt&&Jt.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=nr.bind(void 0,mt),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,xt(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!Jt||Jt.emitClose!==!1,this.autoDestroy=!Jt||Jt.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[Ct]=[]}function xt(Jt){Jt.buffered=[],Jt.bufferedIndex=0,Jt.allBuffers=!0,Jt.allNoop=!0}Pt.prototype.getBuffer=function(){return d(this.buffered,this.bufferedIndex)},_(Pt.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function Ht(Jt){const mt=this instanceof requireDuplex();if(!mt&&!b(Ht,this))return new Ht(Jt);this._writableState=new Pt(Jt,this,mt),Jt&&(typeof Jt.write=="function"&&(this._write=Jt.write),typeof Jt.writev=="function"&&(this._writev=Jt.writev),typeof Jt.destroy=="function"&&(this._destroy=Jt.destroy),typeof Jt.final=="function"&&(this._final=Jt.final),typeof Jt.construct=="function"&&(this._construct=Jt.construct),Jt.signal&&dt(Jt.signal,this)),st.call(this,Jt),it.construct(this,()=>{const Vt=this._writableState;Vt.writing||or(this,Vt),br(this,Vt)})}_(Ht,rt,{__proto__:null,value:function(Jt){return b(this,Jt)?!0:this!==Ht?!1:Jt&&Jt._writableState instanceof Pt}}),Ht.prototype.pipe=function(){Mt(this,new Et)};function tr(Jt,mt,Vt,Qt){const It=Jt._writableState;if(typeof Vt=="function")Qt=Vt,Vt=It.defaultEncoding;else{if(!Vt)Vt=It.defaultEncoding;else if(Vt!=="buffer"&&!at.isEncoding(Vt))throw new Rt(Vt);typeof Qt!="function"&&(Qt=Zt)}if(mt===null)throw new ht;if(!It.objectMode)if(typeof mt=="string")It.decodeStrings!==!1&&(mt=at.from(mt,Vt),Vt="buffer");else if(mt instanceof at)Vt="buffer";else if(st._isUint8Array(mt))mt=st._uint8ArrayToBuffer(mt),Vt="buffer";else throw new lt("chunk",["string","Buffer","Uint8Array"],mt);let Nt;return It.ending?Nt=new kt:It.destroyed&&(Nt=new Tt("write")),Nt?(h.nextTick(Qt,Nt),Mt(Jt,Nt,!0),Nt):(It.pendingcb++,er(Jt,It,mt,Vt,Qt))}Ht.prototype.write=function(Jt,mt,Vt){return tr(this,Jt,mt,Vt)===!0},Ht.prototype.cork=function(){this._writableState.corked++},Ht.prototype.uncork=function(){const Jt=this._writableState;Jt.corked&&(Jt.corked--,Jt.writing||or(this,Jt))},Ht.prototype.setDefaultEncoding=function(mt){if(typeof mt=="string"&&(mt=_e(mt)),!at.isEncoding(mt))throw new Rt(mt);return this._writableState.defaultEncoding=mt,this};function er(Jt,mt,Vt,Qt,It){const Nt=mt.objectMode?1:Vt.length;mt.length+=Nt;const qt=mt.length<mt.highWaterMark;return qt||(mt.needDrain=!0),mt.writing||mt.corked||mt.errored||!mt.constructed?(mt.buffered.push({chunk:Vt,encoding:Qt,callback:It}),mt.allBuffers&&Qt!=="buffer"&&(mt.allBuffers=!1),mt.allNoop&&It!==Zt&&(mt.allNoop=!1)):(mt.writelen=Nt,mt.writecb=It,mt.writing=!0,mt.sync=!0,Jt._write(Vt,Qt,mt.onwrite),mt.sync=!1),qt&&!mt.errored&&!mt.destroyed}function Kt(Jt,mt,Vt,Qt,It,Nt,qt){mt.writelen=Qt,mt.writecb=qt,mt.writing=!0,mt.sync=!0,mt.destroyed?mt.onwrite(new Tt("write")):Vt?Jt._writev(It,mt.onwrite):Jt._write(It,Nt,mt.onwrite),mt.sync=!1}function Bt(Jt,mt,Vt,Qt){--mt.pendingcb,Qt(Vt),sr(mt),Mt(Jt,Vt)}function nr(Jt,mt){const Vt=Jt._writableState,Qt=Vt.sync,It=Vt.writecb;if(typeof It!="function"){Mt(Jt,new ft);return}Vt.writing=!1,Vt.writecb=null,Vt.length-=Vt.writelen,Vt.writelen=0,mt?(mt.stack,Vt.errored||(Vt.errored=mt),Jt._readableState&&!Jt._readableState.errored&&(Jt._readableState.errored=mt),Qt?h.nextTick(Bt,Jt,Vt,mt,It):Bt(Jt,Vt,mt,It)):(Vt.buffered.length>Vt.bufferedIndex&&or(Jt,Vt),Qt?Vt.afterWriteTickInfo!==null&&Vt.afterWriteTickInfo.cb===It?Vt.afterWriteTickInfo.count++:(Vt.afterWriteTickInfo={count:1,cb:It,stream:Jt,state:Vt},h.nextTick(Ut,Vt.afterWriteTickInfo)):zt(Jt,Vt,1,It))}function Ut({stream:Jt,state:mt,count:Vt,cb:Qt}){return mt.afterWriteTickInfo=null,zt(Jt,mt,Vt,Qt)}function zt(Jt,mt,Vt,Qt){for(!mt.ending&&!Jt.destroyed&&mt.length===0&&mt.needDrain&&(mt.needDrain=!1,Jt.emit("drain"));Vt-- >0;)mt.pendingcb--,Qt();mt.destroyed&&sr(mt),br(Jt,mt)}function sr(Jt){if(Jt.writing)return;for(let It=Jt.bufferedIndex;It<Jt.buffered.length;++It){var mt;const{chunk:Nt,callback:qt}=Jt.buffered[It],ar=Jt.objectMode?1:Nt.length;Jt.length-=ar,qt((mt=Jt.errored)!==null&&mt!==void 0?mt:new Tt("write"))}const Vt=Jt[Ct].splice(0);for(let It=0;It<Vt.length;It++){var Qt;Vt[It]((Qt=Jt.errored)!==null&&Qt!==void 0?Qt:new Tt("end"))}xt(Jt)}function or(Jt,mt){if(mt.corked||mt.bufferProcessing||mt.destroyed||!mt.constructed)return;const{buffered:Vt,bufferedIndex:Qt,objectMode:It}=mt,Nt=Vt.length-Qt;if(!Nt)return;let qt=Qt;if(mt.bufferProcessing=!0,Nt>1&&Jt._writev){mt.pendingcb-=Nt-1;const ar=mt.allNoop?Zt:Gt=>{for(let dr=qt;dr<Vt.length;++dr)Vt[dr].callback(Gt)},lr=mt.allNoop&&qt===0?Vt:d(Vt,qt);lr.allBuffers=mt.allBuffers,Kt(Jt,mt,!0,mt.length,lr,"",ar),xt(mt)}else{do{const{chunk:ar,encoding:lr,callback:Gt}=Vt[qt];Vt[qt++]=null;const dr=It?1:ar.length;Kt(Jt,mt,!1,dr,ar,lr,Gt)}while(qt<Vt.length&&!mt.writing);qt===Vt.length?xt(mt):qt>256?(Vt.splice(0,qt),mt.bufferedIndex=0):mt.bufferedIndex=qt}mt.bufferProcessing=!1}Ht.prototype._write=function(Jt,mt,Vt){if(this._writev)this._writev([{chunk:Jt,encoding:mt}],Vt);else throw new ut("_write()")},Ht.prototype._writev=null,Ht.prototype.end=function(Jt,mt,Vt){const Qt=this._writableState;typeof Jt=="function"?(Vt=Jt,Jt=null,mt=null):typeof mt=="function"&&(Vt=mt,mt=null);let It;if(Jt!=null){const Nt=tr(this,Jt,mt);Nt instanceof g&&(It=Nt)}return Qt.corked&&(Qt.corked=1,this.uncork()),It||(!Qt.errored&&!Qt.ending?(Qt.ending=!0,br(this,Qt,!0),Qt.ended=!0):Qt.finished?It=new St("end"):Qt.destroyed&&(It=new Tt("end"))),typeof Vt=="function"&&(It||Qt.finished?h.nextTick(Vt,It):Qt[Ct].push(Vt)),this};function ur(Jt){return Jt.ending&&!Jt.destroyed&&Jt.constructed&&Jt.length===0&&!Jt.errored&&Jt.buffered.length===0&&!Jt.finished&&!Jt.writing&&!Jt.errorEmitted&&!Jt.closeEmitted}function _r(Jt,mt){let Vt=!1;function Qt(It){if(Vt){Mt(Jt,It??ft());return}if(Vt=!0,mt.pendingcb--,It){const Nt=mt[Ct].splice(0);for(let qt=0;qt<Nt.length;qt++)Nt[qt](It);Mt(Jt,It,mt.sync)}else ur(mt)&&(mt.prefinished=!0,Jt.emit("prefinish"),mt.pendingcb++,h.nextTick(Er,Jt,mt))}mt.sync=!0,mt.pendingcb++;try{Jt._final(Qt)}catch(It){Qt(It)}mt.sync=!1}function vr(Jt,mt){!mt.prefinished&&!mt.finalCalled&&(typeof Jt._final=="function"&&!mt.destroyed?(mt.finalCalled=!0,_r(Jt,mt)):(mt.prefinished=!0,Jt.emit("prefinish")))}function br(Jt,mt,Vt){ur(mt)&&(vr(Jt,mt),mt.pendingcb===0&&(Vt?(mt.pendingcb++,h.nextTick((Qt,It)=>{ur(It)?Er(Qt,It):It.pendingcb--},Jt,mt)):ur(mt)&&(mt.pendingcb++,Er(Jt,mt))))}function Er(Jt,mt){mt.pendingcb--,mt.finished=!0;const Vt=mt[Ct].splice(0);for(let Qt=0;Qt<Vt.length;Qt++)Vt[Qt]();if(Jt.emit("finish"),mt.autoDestroy){const Qt=Jt._readableState;(!Qt||Qt.autoDestroy&&(Qt.endEmitted||Qt.readable===!1))&&Jt.destroy()}}$(Ht.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(Jt){this._writableState&&(this._writableState.destroyed=Jt)}},writable:{__proto__:null,get(){const Jt=this._writableState;return!!Jt&&Jt.writable!==!1&&!Jt.destroyed&&!Jt.errored&&!Jt.ending&&!Jt.ended},set(Jt){this._writableState&&(this._writableState.writable=!!Jt)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const Jt=this._writableState;return Jt?!Jt.destroyed&&!Jt.ending&&Jt.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const Cr=it.destroy;Ht.prototype.destroy=function(Jt,mt){const Vt=this._writableState;return!Vt.destroyed&&(Vt.bufferedIndex<Vt.buffered.length||Vt[Ct].length)&&h.nextTick(sr,Vt),Cr.call(this,Jt,mt),this},Ht.prototype._undestroy=it.undestroy,Ht.prototype._destroy=function(Jt,mt){mt(Jt)},Ht.prototype[nt.captureRejectionSymbol]=function(Jt){this.destroy(Jt)};let kr;function Or(){return kr===void 0&&(kr={}),kr}return Ht.fromWeb=function(Jt,mt){return Or().newStreamWritableFromWritableStream(Jt,mt)},Ht.toWeb=function(Jt){return Or().newWritableStreamFromStreamWritable(Jt)},writable}var duplexify,hasRequiredDuplexify;function requireDuplexify(){if(hasRequiredDuplexify)return duplexify;hasRequiredDuplexify=1;const h=browserExports$1,d=buffer,{isReadable:g,isWritable:b,isIterable:_,isNodeStream:$,isReadableNodeStream:j,isWritableNodeStream:_e,isDuplexNodeStream:et,isReadableStream:rt,isWritableStream:nt}=utils,st=endOfStreamExports,{AbortError:at,codes:{ERR_INVALID_ARG_TYPE:it,ERR_INVALID_RETURN_VALUE:dt}}=errors,{destroyer:ot}=destroy_1,ct=requireDuplex(),lt=requireReadable(),ut=requireWritable(),{createDeferredPromise:ft}=utilExports,Et=from_1,Tt=globalThis.Blob||d.Blob,St=typeof Tt<"u"?function(Pt){return Pt instanceof Tt}:function(Pt){return!1},ht=globalThis.AbortController||requireBrowser().AbortController,{FunctionPrototypeCall:kt}=primordials;class Rt extends ct{constructor(Pt){super(Pt),(Pt==null?void 0:Pt.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(Pt==null?void 0:Pt.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}duplexify=function Ct(Pt,xt){if(et(Pt))return Pt;if(j(Pt))return Zt({readable:Pt});if(_e(Pt))return Zt({writable:Pt});if($(Pt))return Zt({writable:!1,readable:!1});if(rt(Pt))return Zt({readable:lt.fromWeb(Pt)});if(nt(Pt))return Zt({writable:ut.fromWeb(Pt)});if(typeof Pt=="function"){const{value:tr,write:er,final:Kt,destroy:Bt}=Mt(Pt);if(_(tr))return Et(Rt,tr,{objectMode:!0,write:er,final:Kt,destroy:Bt});const nr=tr==null?void 0:tr.then;if(typeof nr=="function"){let Ut;const zt=kt(nr,tr,sr=>{if(sr!=null)throw new dt("nully","body",sr)},sr=>{ot(Ut,sr)});return Ut=new Rt({objectMode:!0,readable:!1,write:er,final(sr){Kt(async()=>{try{await zt,h.nextTick(sr,null)}catch(or){h.nextTick(sr,or)}})},destroy:Bt})}throw new dt("Iterable, AsyncIterable or AsyncFunction",xt,tr)}if(St(Pt))return Ct(Pt.arrayBuffer());if(_(Pt))return Et(Rt,Pt,{objectMode:!0,writable:!1});if(rt(Pt==null?void 0:Pt.readable)&&nt(Pt==null?void 0:Pt.writable))return Rt.fromWeb(Pt);if(typeof(Pt==null?void 0:Pt.writable)=="object"||typeof(Pt==null?void 0:Pt.readable)=="object"){const tr=Pt!=null&&Pt.readable?j(Pt==null?void 0:Pt.readable)?Pt==null?void 0:Pt.readable:Ct(Pt.readable):void 0,er=Pt!=null&&Pt.writable?_e(Pt==null?void 0:Pt.writable)?Pt==null?void 0:Pt.writable:Ct(Pt.writable):void 0;return Zt({readable:tr,writable:er})}const Ht=Pt==null?void 0:Pt.then;if(typeof Ht=="function"){let tr;return kt(Ht,Pt,er=>{er!=null&&tr.push(er),tr.push(null)},er=>{ot(tr,er)}),tr=new Rt({objectMode:!0,writable:!1,read(){}})}throw new it(xt,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],Pt)};function Mt(Ct){let{promise:Pt,resolve:xt}=ft();const Ht=new ht,tr=Ht.signal;return{value:Ct(async function*(){for(;;){const Kt=Pt;Pt=null;const{chunk:Bt,done:nr,cb:Ut}=await Kt;if(h.nextTick(Ut),nr)return;if(tr.aborted)throw new at(void 0,{cause:tr.reason});({promise:Pt,resolve:xt}=ft()),yield Bt}}(),{signal:tr}),write(Kt,Bt,nr){const Ut=xt;xt=null,Ut({chunk:Kt,done:!1,cb:nr})},final(Kt){const Bt=xt;xt=null,Bt({done:!0,cb:Kt})},destroy(Kt,Bt){Ht.abort(),Bt(Kt)}}}function Zt(Ct){const Pt=Ct.readable&&typeof Ct.readable.read!="function"?lt.wrap(Ct.readable):Ct.readable,xt=Ct.writable;let Ht=!!g(Pt),tr=!!b(xt),er,Kt,Bt,nr,Ut;function zt(sr){const or=nr;nr=null,or?or(sr):sr&&Ut.destroy(sr)}return Ut=new Rt({readableObjectMode:!!(Pt!=null&&Pt.readableObjectMode),writableObjectMode:!!(xt!=null&&xt.writableObjectMode),readable:Ht,writable:tr}),tr&&(st(xt,sr=>{tr=!1,sr&&ot(Pt,sr),zt(sr)}),Ut._write=function(sr,or,ur){xt.write(sr,or)?ur():er=ur},Ut._final=function(sr){xt.end(),Kt=sr},xt.on("drain",function(){if(er){const sr=er;er=null,sr()}}),xt.on("finish",function(){if(Kt){const sr=Kt;Kt=null,sr()}})),Ht&&(st(Pt,sr=>{Ht=!1,sr&&ot(Pt,sr),zt(sr)}),Pt.on("readable",function(){if(Bt){const sr=Bt;Bt=null,sr()}}),Pt.on("end",function(){Ut.push(null)}),Ut._read=function(){for(;;){const sr=Pt.read();if(sr===null){Bt=Ut._read;return}if(!Ut.push(sr))return}}),Ut._destroy=function(sr,or){!sr&&nr!==null&&(sr=new at),Bt=null,er=null,Kt=null,nr===null?or(sr):(nr=or,ot(xt,sr),ot(Pt,sr))},Ut}return duplexify}var duplex,hasRequiredDuplex;function requireDuplex(){if(hasRequiredDuplex)return duplex;hasRequiredDuplex=1;const{ObjectDefineProperties:h,ObjectGetOwnPropertyDescriptor:d,ObjectKeys:g,ObjectSetPrototypeOf:b}=primordials;duplex=j;const _=requireReadable(),$=requireWritable();b(j.prototype,_.prototype),b(j,_);{const nt=g($.prototype);for(let st=0;st<nt.length;st++){const at=nt[st];j.prototype[at]||(j.prototype[at]=$.prototype[at])}}function j(nt){if(!(this instanceof j))return new j(nt);_.call(this,nt),$.call(this,nt),nt?(this.allowHalfOpen=nt.allowHalfOpen!==!1,nt.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),nt.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}h(j.prototype,{writable:{__proto__:null,...d($.prototype,"writable")},writableHighWaterMark:{__proto__:null,...d($.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...d($.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...d($.prototype,"writableBuffer")},writableLength:{__proto__:null,...d($.prototype,"writableLength")},writableFinished:{__proto__:null,...d($.prototype,"writableFinished")},writableCorked:{__proto__:null,...d($.prototype,"writableCorked")},writableEnded:{__proto__:null,...d($.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...d($.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(nt){this._readableState&&this._writableState&&(this._readableState.destroyed=nt,this._writableState.destroyed=nt)}}});let _e;function et(){return _e===void 0&&(_e={}),_e}j.fromWeb=function(nt,st){return et().newStreamDuplexFromReadableWritablePair(nt,st)},j.toWeb=function(nt){return et().newReadableWritablePairFromDuplex(nt)};let rt;return j.from=function(nt){return rt||(rt=requireDuplexify()),rt(nt,"body")},duplex}const{ObjectSetPrototypeOf:ObjectSetPrototypeOf$1,Symbol:Symbol$2}=primordials;var transform=Transform$1;const{ERR_METHOD_NOT_IMPLEMENTED}=errors.codes,Duplex$2=requireDuplex(),{getHighWaterMark}=state;ObjectSetPrototypeOf$1(Transform$1.prototype,Duplex$2.prototype);ObjectSetPrototypeOf$1(Transform$1,Duplex$2);const kCallback=Symbol$2("kCallback");function Transform$1(h){if(!(this instanceof Transform$1))return new Transform$1(h);const d=h?getHighWaterMark(this,h,"readableHighWaterMark",!0):null;d===0&&(h={...h,highWaterMark:null,readableHighWaterMark:d,writableHighWaterMark:h.writableHighWaterMark||0}),Duplex$2.call(this,h),this._readableState.sync=!1,this[kCallback]=null,h&&(typeof h.transform=="function"&&(this._transform=h.transform),typeof h.flush=="function"&&(this._flush=h.flush)),this.on("prefinish",prefinish)}function final(h){typeof this._flush=="function"&&!this.destroyed?this._flush((d,g)=>{if(d){h?h(d):this.destroy(d);return}g!=null&&this.push(g),this.push(null),h&&h()}):(this.push(null),h&&h())}function prefinish(){this._final!==final&&final.call(this)}Transform$1.prototype._final=final;Transform$1.prototype._transform=function(h,d,g){throw new ERR_METHOD_NOT_IMPLEMENTED("_transform()")};Transform$1.prototype._write=function(h,d,g){const b=this._readableState,_=this._writableState,$=b.length;this._transform(h,d,(j,_e)=>{if(j){g(j);return}_e!=null&&this.push(_e),_.ended||$===b.length||b.length<b.highWaterMark?g():this[kCallback]=g})};Transform$1.prototype._read=function(){if(this[kCallback]){const h=this[kCallback];this[kCallback]=null,h()}};const{ObjectSetPrototypeOf}=primordials;var passthrough=PassThrough$1;const Transform=transform;ObjectSetPrototypeOf(PassThrough$1.prototype,Transform.prototype);ObjectSetPrototypeOf(PassThrough$1,Transform);function PassThrough$1(h){if(!(this instanceof PassThrough$1))return new PassThrough$1(h);Transform.call(this,h)}PassThrough$1.prototype._transform=function(h,d,g){g(null,h)};const process$1=browserExports$1,{ArrayIsArray,Promise:Promise$2,SymbolAsyncIterator,SymbolDispose}=primordials,eos$1=endOfStreamExports,{once}=utilExports,destroyImpl=destroy_1,Duplex$1=requireDuplex(),{aggregateTwoErrors,codes:{ERR_INVALID_ARG_TYPE:ERR_INVALID_ARG_TYPE$1,ERR_INVALID_RETURN_VALUE,ERR_MISSING_ARGS:ERR_MISSING_ARGS$2,ERR_STREAM_DESTROYED,ERR_STREAM_PREMATURE_CLOSE},AbortError:AbortError$2}=errors,{validateFunction,validateAbortSignal:validateAbortSignal$1}=validators,{isIterable,isReadable:isReadable$1,isReadableNodeStream,isNodeStream:isNodeStream$2,isTransformStream:isTransformStream$1,isWebStream:isWebStream$1,isReadableStream:isReadableStream$1,isReadableFinished}=utils,AbortController$2=globalThis.AbortController||requireBrowser().AbortController;let PassThrough,Readable,addAbortListener;function destroyer$1(h,d,g){let b=!1;h.on("close",()=>{b=!0});const _=eos$1(h,{readable:d,writable:g},$=>{b=!$});return{destroy:$=>{b||(b=!0,destroyImpl.destroyer(h,$||new ERR_STREAM_DESTROYED("pipe")))},cleanup:_}}function popCallback(h){return validateFunction(h[h.length-1],"streams[stream.length - 1]"),h.pop()}function makeAsyncIterable(h){if(isIterable(h))return h;if(isReadableNodeStream(h))return fromReadable(h);throw new ERR_INVALID_ARG_TYPE$1("val",["Readable","Iterable","AsyncIterable"],h)}async function*fromReadable(h){Readable||(Readable=requireReadable()),yield*Readable.prototype[SymbolAsyncIterator].call(h)}async function pumpToNode(h,d,g,{end:b}){let _,$=null;const j=rt=>{if(rt&&(_=rt),$){const nt=$;$=null,nt()}},_e=()=>new Promise$2((rt,nt)=>{_?nt(_):$=()=>{_?nt(_):rt()}});d.on("drain",j);const et=eos$1(d,{readable:!1},j);try{d.writableNeedDrain&&await _e();for await(const rt of h)d.write(rt)||await _e();b&&(d.end(),await _e()),g()}catch(rt){g(_!==rt?aggregateTwoErrors(_,rt):rt)}finally{et(),d.off("drain",j)}}async function pumpToWeb(h,d,g,{end:b}){isTransformStream$1(d)&&(d=d.writable);const _=d.getWriter();try{for await(const $ of h)await _.ready,_.write($).catch(()=>{});await _.ready,b&&await _.close(),g()}catch($){try{await _.abort($),g($)}catch(j){g(j)}}}function pipeline$1(...h){return pipelineImpl(h,once(popCallback(h)))}function pipelineImpl(h,d,g){if(h.length===1&&ArrayIsArray(h[0])&&(h=h[0]),h.length<2)throw new ERR_MISSING_ARGS$2("streams");const b=new AbortController$2,_=b.signal,$=g==null?void 0:g.signal,j=[];validateAbortSignal$1($,"options.signal");function _e(){dt(new AbortError$2)}addAbortListener=addAbortListener||utilExports.addAbortListener;let et;$&&(et=addAbortListener($,_e));let rt,nt;const st=[];let at=0;function it(ft){dt(ft,--at===0)}function dt(ft,Et){var Tt;if(ft&&(!rt||rt.code==="ERR_STREAM_PREMATURE_CLOSE")&&(rt=ft),!(!rt&&!Et)){for(;st.length;)st.shift()(rt);(Tt=et)===null||Tt===void 0||Tt[SymbolDispose](),b.abort(),Et&&(rt||j.forEach(St=>St()),process$1.nextTick(d,rt,nt))}}let ot;for(let ft=0;ft<h.length;ft++){const Et=h[ft],Tt=ft<h.length-1,St=ft>0,ht=Tt||(g==null?void 0:g.end)!==!1,kt=ft===h.length-1;if(isNodeStream$2(Et)){let Rt=function(Mt){Mt&&Mt.name!=="AbortError"&&Mt.code!=="ERR_STREAM_PREMATURE_CLOSE"&&it(Mt)};var ut=Rt;if(ht){const{destroy:Mt,cleanup:Zt}=destroyer$1(Et,Tt,St);st.push(Mt),isReadable$1(Et)&&kt&&j.push(Zt)}Et.on("error",Rt),isReadable$1(Et)&&kt&&j.push(()=>{Et.removeListener("error",Rt)})}if(ft===0)if(typeof Et=="function"){if(ot=Et({signal:_}),!isIterable(ot))throw new ERR_INVALID_RETURN_VALUE("Iterable, AsyncIterable or Stream","source",ot)}else isIterable(Et)||isReadableNodeStream(Et)||isTransformStream$1(Et)?ot=Et:ot=Duplex$1.from(Et);else if(typeof Et=="function"){if(isTransformStream$1(ot)){var ct;ot=makeAsyncIterable((ct=ot)===null||ct===void 0?void 0:ct.readable)}else ot=makeAsyncIterable(ot);if(ot=Et(ot,{signal:_}),Tt){if(!isIterable(ot,!0))throw new ERR_INVALID_RETURN_VALUE("AsyncIterable",`transform[${ft-1}]`,ot)}else{var lt;PassThrough||(PassThrough=passthrough);const Rt=new PassThrough({objectMode:!0}),Mt=(lt=ot)===null||lt===void 0?void 0:lt.then;if(typeof Mt=="function")at++,Mt.call(ot,Pt=>{nt=Pt,Pt!=null&&Rt.write(Pt),ht&&Rt.end(),process$1.nextTick(it)},Pt=>{Rt.destroy(Pt),process$1.nextTick(it,Pt)});else if(isIterable(ot,!0))at++,pumpToNode(ot,Rt,it,{end:ht});else if(isReadableStream$1(ot)||isTransformStream$1(ot)){const Pt=ot.readable||ot;at++,pumpToNode(Pt,Rt,it,{end:ht})}else throw new ERR_INVALID_RETURN_VALUE("AsyncIterable or Promise","destination",ot);ot=Rt;const{destroy:Zt,cleanup:Ct}=destroyer$1(ot,!1,!0);st.push(Zt),kt&&j.push(Ct)}}else if(isNodeStream$2(Et)){if(isReadableNodeStream(ot)){at+=2;const Rt=pipe(ot,Et,it,{end:ht});isReadable$1(Et)&&kt&&j.push(Rt)}else if(isTransformStream$1(ot)||isReadableStream$1(ot)){const Rt=ot.readable||ot;at++,pumpToNode(Rt,Et,it,{end:ht})}else if(isIterable(ot))at++,pumpToNode(ot,Et,it,{end:ht});else throw new ERR_INVALID_ARG_TYPE$1("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],ot);ot=Et}else if(isWebStream$1(Et)){if(isReadableNodeStream(ot))at++,pumpToWeb(makeAsyncIterable(ot),Et,it,{end:ht});else if(isReadableStream$1(ot)||isIterable(ot))at++,pumpToWeb(ot,Et,it,{end:ht});else if(isTransformStream$1(ot))at++,pumpToWeb(ot.readable,Et,it,{end:ht});else throw new ERR_INVALID_ARG_TYPE$1("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],ot);ot=Et}else ot=Duplex$1.from(Et)}return(_!=null&&_.aborted||$!=null&&$.aborted)&&process$1.nextTick(_e),ot}function pipe(h,d,g,{end:b}){let _=!1;if(d.on("close",()=>{_||g(new ERR_STREAM_PREMATURE_CLOSE)}),h.pipe(d,{end:!1}),b){let j=function(){_=!0,d.end()};var $=j;isReadableFinished(h)?process$1.nextTick(j):h.once("end",j)}else g();return eos$1(h,{readable:!0,writable:!1},j=>{const _e=h._readableState;j&&j.code==="ERR_STREAM_PREMATURE_CLOSE"&&_e&&_e.ended&&!_e.errored&&!_e.errorEmitted?h.once("end",g).once("error",g):g(j)}),eos$1(d,{readable:!1,writable:!0},g)}var pipeline_1={pipelineImpl,pipeline:pipeline$1};const{pipeline}=pipeline_1,Duplex=requireDuplex(),{destroyer}=destroy_1,{isNodeStream:isNodeStream$1,isReadable,isWritable:isWritable$1,isWebStream,isTransformStream,isWritableStream,isReadableStream}=utils,{AbortError:AbortError$1,codes:{ERR_INVALID_ARG_VALUE:ERR_INVALID_ARG_VALUE$1,ERR_MISSING_ARGS:ERR_MISSING_ARGS$1}}=errors,eos=endOfStreamExports;var compose$1=function h(...d){if(d.length===0)throw new ERR_MISSING_ARGS$1("streams");if(d.length===1)return Duplex.from(d[0]);const g=[...d];if(typeof d[0]=="function"&&(d[0]=Duplex.from(d[0])),typeof d[d.length-1]=="function"){const it=d.length-1;d[it]=Duplex.from(d[it])}for(let it=0;it<d.length;++it)if(!(!isNodeStream$1(d[it])&&!isWebStream(d[it]))){if(it<d.length-1&&!(isReadable(d[it])||isReadableStream(d[it])||isTransformStream(d[it])))throw new ERR_INVALID_ARG_VALUE$1(`streams[${it}]`,g[it],"must be readable");if(it>0&&!(isWritable$1(d[it])||isWritableStream(d[it])||isTransformStream(d[it])))throw new ERR_INVALID_ARG_VALUE$1(`streams[${it}]`,g[it],"must be writable")}let b,_,$,j,_e;function et(it){const dt=j;j=null,dt?dt(it):it?_e.destroy(it):!at&&!st&&_e.destroy()}const rt=d[0],nt=pipeline(d,et),st=!!(isWritable$1(rt)||isWritableStream(rt)||isTransformStream(rt)),at=!!(isReadable(nt)||isReadableStream(nt)||isTransformStream(nt));if(_e=new Duplex({writableObjectMode:!!(rt!=null&&rt.writableObjectMode),readableObjectMode:!!(nt!=null&&nt.readableObjectMode),writable:st,readable:at}),st){if(isNodeStream$1(rt))_e._write=function(dt,ot,ct){rt.write(dt,ot)?ct():b=ct},_e._final=function(dt){rt.end(),_=dt},rt.on("drain",function(){if(b){const dt=b;b=null,dt()}});else if(isWebStream(rt)){const ot=(isTransformStream(rt)?rt.writable:rt).getWriter();_e._write=async function(ct,lt,ut){try{await ot.ready,ot.write(ct).catch(()=>{}),ut()}catch(ft){ut(ft)}},_e._final=async function(ct){try{await ot.ready,ot.close().catch(()=>{}),_=ct}catch(lt){ct(lt)}}}const it=isTransformStream(nt)?nt.readable:nt;eos(it,()=>{if(_){const dt=_;_=null,dt()}})}if(at){if(isNodeStream$1(nt))nt.on("readable",function(){if($){const it=$;$=null,it()}}),nt.on("end",function(){_e.push(null)}),_e._read=function(){for(;;){const it=nt.read();if(it===null){$=_e._read;return}if(!_e.push(it))return}};else if(isWebStream(nt)){const dt=(isTransformStream(nt)?nt.readable:nt).getReader();_e._read=async function(){for(;;)try{const{value:ot,done:ct}=await dt.read();if(!_e.push(ot))return;if(ct){_e.push(null);return}}catch{return}}}}return _e._destroy=function(it,dt){!it&&j!==null&&(it=new AbortError$1),$=null,b=null,_=null,j===null?dt(it):(j=dt,isNodeStream$1(nt)&&destroyer(nt,it))},_e};const AbortController$1=globalThis.AbortController||requireBrowser().AbortController,{codes:{ERR_INVALID_ARG_VALUE,ERR_INVALID_ARG_TYPE,ERR_MISSING_ARGS,ERR_OUT_OF_RANGE},AbortError}=errors,{validateAbortSignal,validateInteger,validateObject}=validators,kWeakHandler=primordials.Symbol("kWeak"),kResistStopPropagation=primordials.Symbol("kResistStopPropagation"),{finished}=endOfStreamExports,staticCompose=compose$1,{addAbortSignalNoValidate}=addAbortSignalExports,{isWritable,isNodeStream}=utils,{deprecate}=utilExports,{ArrayPrototypePush,Boolean:Boolean$1,MathFloor,Number:Number$1,NumberIsNaN,Promise:Promise$1,PromiseReject,PromiseResolve,PromisePrototypeThen,Symbol:Symbol$1}=primordials,kEmpty=Symbol$1("kEmpty"),kEof=Symbol$1("kEof");function compose(h,d){if(d!=null&&validateObject(d,"options"),(d==null?void 0:d.signal)!=null&&validateAbortSignal(d.signal,"options.signal"),isNodeStream(h)&&!isWritable(h))throw new ERR_INVALID_ARG_VALUE("stream",h,"must be writable");const g=staticCompose(this,h);return d!=null&&d.signal&&addAbortSignalNoValidate(d.signal,g),g}function map(h,d){if(typeof h!="function")throw new ERR_INVALID_ARG_TYPE("fn",["Function","AsyncFunction"],h);d!=null&&validateObject(d,"options"),(d==null?void 0:d.signal)!=null&&validateAbortSignal(d.signal,"options.signal");let g=1;(d==null?void 0:d.concurrency)!=null&&(g=MathFloor(d.concurrency));let b=g-1;return(d==null?void 0:d.highWaterMark)!=null&&(b=MathFloor(d.highWaterMark)),validateInteger(g,"options.concurrency",1),validateInteger(b,"options.highWaterMark",0),b+=g,(async function*(){const $=utilExports.AbortSignalAny([d==null?void 0:d.signal].filter(Boolean$1)),j=this,_e=[],et={signal:$};let rt,nt,st=!1,at=0;function it(){st=!0,dt()}function dt(){at-=1,ot()}function ot(){nt&&!st&&at<g&&_e.length<b&&(nt(),nt=null)}async function ct(){try{for await(let lt of j){if(st)return;if($.aborted)throw new AbortError;try{if(lt=h(lt,et),lt===kEmpty)continue;lt=PromiseResolve(lt)}catch(ut){lt=PromiseReject(ut)}at+=1,PromisePrototypeThen(lt,dt,it),_e.push(lt),rt&&(rt(),rt=null),!st&&(_e.length>=b||at>=g)&&await new Promise$1(ut=>{nt=ut})}_e.push(kEof)}catch(lt){const ut=PromiseReject(lt);PromisePrototypeThen(ut,dt,it),_e.push(ut)}finally{st=!0,rt&&(rt(),rt=null)}}ct();try{for(;;){for(;_e.length>0;){const lt=await _e[0];if(lt===kEof)return;if($.aborted)throw new AbortError;lt!==kEmpty&&(yield lt),_e.shift(),ot()}await new Promise$1(lt=>{rt=lt})}}finally{st=!0,nt&&(nt(),nt=null)}}).call(this)}function asIndexedPairs(h=void 0){return h!=null&&validateObject(h,"options"),(h==null?void 0:h.signal)!=null&&validateAbortSignal(h.signal,"options.signal"),(async function*(){let g=0;for await(const _ of this){var b;if(h!=null&&(b=h.signal)!==null&&b!==void 0&&b.aborted)throw new AbortError({cause:h.signal.reason});yield[g++,_]}}).call(this)}async function some(h,d=void 0){for await(const g of filter.call(this,h,d))return!0;return!1}async function every(h,d=void 0){if(typeof h!="function")throw new ERR_INVALID_ARG_TYPE("fn",["Function","AsyncFunction"],h);return!await some.call(this,async(...g)=>!await h(...g),d)}async function find(h,d){for await(const g of filter.call(this,h,d))return g}async function forEach(h,d){if(typeof h!="function")throw new ERR_INVALID_ARG_TYPE("fn",["Function","AsyncFunction"],h);async function g(b,_){return await h(b,_),kEmpty}for await(const b of map.call(this,g,d));}function filter(h,d){if(typeof h!="function")throw new ERR_INVALID_ARG_TYPE("fn",["Function","AsyncFunction"],h);async function g(b,_){return await h(b,_)?b:kEmpty}return map.call(this,g,d)}class ReduceAwareErrMissingArgs extends ERR_MISSING_ARGS{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function reduce(h,d,g){var b;if(typeof h!="function")throw new ERR_INVALID_ARG_TYPE("reducer",["Function","AsyncFunction"],h);g!=null&&validateObject(g,"options"),(g==null?void 0:g.signal)!=null&&validateAbortSignal(g.signal,"options.signal");let _=arguments.length>1;if(g!=null&&(b=g.signal)!==null&&b!==void 0&&b.aborted){const rt=new AbortError(void 0,{cause:g.signal.reason});throw this.once("error",()=>{}),await finished(this.destroy(rt)),rt}const $=new AbortController$1,j=$.signal;if(g!=null&&g.signal){const rt={once:!0,[kWeakHandler]:this,[kResistStopPropagation]:!0};g.signal.addEventListener("abort",()=>$.abort(),rt)}let _e=!1;try{for await(const rt of this){var et;if(_e=!0,g!=null&&(et=g.signal)!==null&&et!==void 0&&et.aborted)throw new AbortError;_?d=await h(d,rt,{signal:j}):(d=rt,_=!0)}if(!_e&&!_)throw new ReduceAwareErrMissingArgs}finally{$.abort()}return d}async function toArray(h){h!=null&&validateObject(h,"options"),(h==null?void 0:h.signal)!=null&&validateAbortSignal(h.signal,"options.signal");const d=[];for await(const b of this){var g;if(h!=null&&(g=h.signal)!==null&&g!==void 0&&g.aborted)throw new AbortError(void 0,{cause:h.signal.reason});ArrayPrototypePush(d,b)}return d}function flatMap(h,d){const g=map.call(this,h,d);return(async function*(){for await(const _ of g)yield*_}).call(this)}function toIntegerOrInfinity(h){if(h=Number$1(h),NumberIsNaN(h))return 0;if(h<0)throw new ERR_OUT_OF_RANGE("number",">= 0",h);return h}function drop(h,d=void 0){return d!=null&&validateObject(d,"options"),(d==null?void 0:d.signal)!=null&&validateAbortSignal(d.signal,"options.signal"),h=toIntegerOrInfinity(h),(async function*(){var b;if(d!=null&&(b=d.signal)!==null&&b!==void 0&&b.aborted)throw new AbortError;for await(const $ of this){var _;if(d!=null&&(_=d.signal)!==null&&_!==void 0&&_.aborted)throw new AbortError;h--<=0&&(yield $)}}).call(this)}function take(h,d=void 0){return d!=null&&validateObject(d,"options"),(d==null?void 0:d.signal)!=null&&validateAbortSignal(d.signal,"options.signal"),h=toIntegerOrInfinity(h),(async function*(){var b;if(d!=null&&(b=d.signal)!==null&&b!==void 0&&b.aborted)throw new AbortError;for await(const $ of this){var _;if(d!=null&&(_=d.signal)!==null&&_!==void 0&&_.aborted)throw new AbortError;if(h-- >0&&(yield $),h<=0)return}}).call(this)}operators.streamReturningOperators={asIndexedPairs:deprecate(asIndexedPairs,"readable.asIndexedPairs will be removed in a future version."),drop,filter,flatMap,map,take,compose};operators.promiseReturningOperators={every,forEach,reduce,toArray,some,find};var promises,hasRequiredPromises;function requirePromises(){if(hasRequiredPromises)return promises;hasRequiredPromises=1;const{ArrayPrototypePop:h,Promise:d}=primordials,{isIterable:g,isNodeStream:b,isWebStream:_}=utils,{pipelineImpl:$}=pipeline_1,{finished:j}=endOfStreamExports;requireStream();function _e(...et){return new d((rt,nt)=>{let st,at;const it=et[et.length-1];if(it&&typeof it=="object"&&!b(it)&&!g(it)&&!_(it)){const dt=h(et);st=dt.signal,at=dt.end}$(et,(dt,ot)=>{dt?nt(dt):rt(ot)},{signal:st,end:at})})}return promises={finished:j,pipeline:_e},promises}var hasRequiredStream;function requireStream(){if(hasRequiredStream)return stream.exports;hasRequiredStream=1;const{Buffer:h}=buffer,{ObjectDefineProperty:d,ObjectKeys:g,ReflectApply:b}=primordials,{promisify:{custom:_}}=utilExports,{streamReturningOperators:$,promiseReturningOperators:j}=operators,{codes:{ERR_ILLEGAL_CONSTRUCTOR:_e}}=errors,et=compose$1,{setDefaultHighWaterMark:rt,getDefaultHighWaterMark:nt}=state,{pipeline:st}=pipeline_1,{destroyer:at}=destroy_1,it=endOfStreamExports,dt=requirePromises(),ot=utils,ct=stream.exports=legacy.Stream;ct.isDestroyed=ot.isDestroyed,ct.isDisturbed=ot.isDisturbed,ct.isErrored=ot.isErrored,ct.isReadable=ot.isReadable,ct.isWritable=ot.isWritable,ct.Readable=requireReadable();for(const ft of g($)){let Tt=function(...St){if(new.target)throw _e();return ct.Readable.from(b(Et,this,St))};var ut=Tt;const Et=$[ft];d(Tt,"name",{__proto__:null,value:Et.name}),d(Tt,"length",{__proto__:null,value:Et.length}),d(ct.Readable.prototype,ft,{__proto__:null,value:Tt,enumerable:!1,configurable:!0,writable:!0})}for(const ft of g(j)){let Tt=function(...ht){if(new.target)throw _e();return b(Et,this,ht)};var ut=Tt;const Et=j[ft];d(Tt,"name",{__proto__:null,value:Et.name}),d(Tt,"length",{__proto__:null,value:Et.length}),d(ct.Readable.prototype,ft,{__proto__:null,value:Tt,enumerable:!1,configurable:!0,writable:!0})}ct.Writable=requireWritable(),ct.Duplex=requireDuplex(),ct.Transform=transform,ct.PassThrough=passthrough,ct.pipeline=st;const{addAbortSignal:lt}=addAbortSignalExports;return ct.addAbortSignal=lt,ct.finished=it,ct.destroy=at,ct.compose=et,ct.setDefaultHighWaterMark=rt,ct.getDefaultHighWaterMark=nt,d(ct,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return dt}}),d(st,_,{__proto__:null,enumerable:!0,get(){return dt.pipeline}}),d(it,_,{__proto__:null,enumerable:!0,get(){return dt.finished}}),ct.Stream=ct,ct._isUint8Array=function(Et){return Et instanceof Uint8Array},ct._uint8ArrayToBuffer=function(Et){return h.from(Et.buffer,Et.byteOffset,Et.byteLength)},stream.exports}(function(h){const d=requireStream(),g=requirePromises(),b=d.Readable.destroy;h.exports=d.Readable,h.exports._uint8ArrayToBuffer=d._uint8ArrayToBuffer,h.exports._isUint8Array=d._isUint8Array,h.exports.isDisturbed=d.isDisturbed,h.exports.isErrored=d.isErrored,h.exports.isReadable=d.isReadable,h.exports.Readable=d.Readable,h.exports.Writable=d.Writable,h.exports.Duplex=d.Duplex,h.exports.Transform=d.Transform,h.exports.PassThrough=d.PassThrough,h.exports.addAbortSignal=d.addAbortSignal,h.exports.finished=d.finished,h.exports.destroy=d.destroy,h.exports.destroy=b,h.exports.pipeline=d.pipeline,h.exports.compose=d.compose,Object.defineProperty(d,"promises",{configurable:!0,enumerable:!0,get(){return g}}),h.exports.Stream=d.Stream,h.exports.default=h.exports})(browser$2);var browserExports=browser$2.exports;Object.defineProperty(lib,"__esModule",{value:!0});lib.ReadableWebToNodeStream=void 0;const readable_stream_1=browserExports;class ReadableWebToNodeStream extends readable_stream_1.Readable{constructor(d){super(),this.bytesRead=0,this.released=!1,this.reader=d.getReader()}_read(){if(this.released){this.push(null);return}this.pendingRead=this.reader.read().then(d=>{delete this.pendingRead,d.done||this.released?this.push(null):(this.bytesRead+=d.value.length,this.push(d.value))}).catch(d=>{this.destroy(d)})}async waitForReadToComplete(){this.pendingRead&&await this.pendingRead}async close(){await this.syncAndRelease()}async syncAndRelease(){this.released=!0,await this.waitForReadToComplete(),await this.reader.releaseLock()}}lib.ReadableWebToNodeStream=ReadableWebToNodeStream;(function(h){Object.defineProperty(h,"__esModule",{value:!0}),h.fetchFromUrl=h.parseBlob=h.parseReadableStream=h.parseNodeStream=h.selectCover=h.ratingToStars=h.orderTags=h.parseFromTokenizer=h.parseBuffer=void 0;const d=browserExports$2,g=core$2,b=lib,_=d("music-metadata-browser:main");var $=core$2;Object.defineProperty(h,"parseBuffer",{enumerable:!0,get:function(){return $.parseBuffer}}),Object.defineProperty(h,"parseFromTokenizer",{enumerable:!0,get:function(){return $.parseFromTokenizer}}),Object.defineProperty(h,"orderTags",{enumerable:!0,get:function(){return $.orderTags}}),Object.defineProperty(h,"ratingToStars",{enumerable:!0,get:function(){return $.ratingToStars}}),Object.defineProperty(h,"selectCover",{enumerable:!0,get:function(){return $.selectCover}}),h.parseNodeStream=g.parseStream;async function j(nt,st,at){const it=new b.ReadableWebToNodeStream(nt),dt=await(0,h.parseNodeStream)(it,typeof st=="string"?{mimeType:st}:st,at);return await it.close(),dt}h.parseReadableStream=j;async function _e(nt,st){nt.type,nt.size,nt instanceof File&&nt.name;const at=nt.stream?nt.stream():et(nt);return j(at,{mimeType:nt.type,size:nt.size},st)}h.parseBlob=_e;function et(nt){const st=new FileReader;return new ReadableStream({start(at){st.onloadend=it=>{let dt=it.target.result;dt instanceof ArrayBuffer&&(dt=new Uint8Array(dt)),at.enqueue(dt),at.close()},st.onerror=it=>{at.close()},st.onabort=it=>{at.close()},st.readAsArrayBuffer(nt)}})}async function rt(nt,st){const at=await fetch(nt),it={size:parseInt(at.headers.get("Content-Length"),10),mimeType:at.headers.get("Content-Type")};if(at.ok)if(at.body){const dt=await j(at.body,it,st);return _("Closing HTTP-readable-stream..."),at.body.locked||await at.body.cancel(),_("HTTP-readable-stream closed."),dt}else return _e(await at.blob(),st);else throw new Error(`HTTP error status=${at.status}: ${at.statusText}`)}h.fetchFromUrl=rt})(lib$3);function e(h){return String(h).split("").map(d=>d.charCodeAt(0))}function t(h){return new Uint8Array(e(h))}function a(h){const d=new ArrayBuffer(2*h.length),g=new Uint8Array(d);return new Uint16Array(d).set(e(h)),g}function r(h){return[h>>>24&255,h>>>16&255,h>>>8&255,h&255]}function n(h){return 11+h}function s(h,d,g,b){return 11+d+1+1+(b?2+2*(g+1):g+1)+h}function i(h){let d=0;return h.forEach(g=>{d+=2+2*g[0].length+2+2+2*g[1].length+2}),11+d}function c(h,d){const g=2*d;let b=0;return h.forEach(_=>{b+=2+2*_[0].length+2+4}),18+g+2+b}class o{_setIntegerFrame(d,g){const b=parseInt(g,10);this.frames.push({name:d,value:b,size:n(b.toString().length)})}_setStringFrame(d,g){const b=g.toString();let _=13+2*b.length;d==="TDAT"&&(_=n(b.length)),this.frames.push({name:d,value:b,size:_})}_setPictureFrame(d,g,b,_){const $=function(_e){if(!_e||!_e.length)return null;if(_e[0]===255&&_e[1]===216&&_e[2]===255)return"image/jpeg";if(_e[0]===137&&_e[1]===80&&_e[2]===78&&_e[3]===71)return"image/png";if(_e[0]===71&&_e[1]===73&&_e[2]===70)return"image/gif";if(_e[8]===87&&_e[9]===69&&_e[10]===66&&_e[11]===80)return"image/webp";const et=_e[0]===73&&_e[1]===73&&_e[2]===42&&_e[3]===0,rt=_e[0]===77&&_e[1]===77&&_e[2]===0&&_e[3]===42;return et||rt?"image/tiff":_e[0]===66&&_e[1]===77?"image/bmp":_e[0]===0&&_e[1]===0&&_e[2]===1&&_e[3]===0?"image/x-icon":null}(new Uint8Array(g)),j=b.toString();if(!$)throw new Error("Unknown picture MIME type");b||(_=!1),this.frames.push({name:"APIC",value:g,pictureType:d,mimeType:$,useUnicodeEncoding:_,description:j,size:s(g.byteLength,$.length,j.length,_)})}_setLyricsFrame(d,g,b){const _=d.split("").map(rt=>rt.charCodeAt(0)),$=g.toString(),j=b.toString();var _e,et;this.frames.push({name:"USLT",value:j,language:_,description:$,size:(_e=$.length,et=j.length,16+2*_e+2+2+2*et)})}_setCommentFrame(d,g,b){const _=d.split("").map(rt=>rt.charCodeAt(0)),$=g.toString(),j=b.toString();var _e,et;this.frames.push({name:"COMM",value:j,language:_,description:$,size:(_e=$.length,et=j.length,16+2*_e+2+2+2*et)})}_setPrivateFrame(d,g){const b=d.toString();var _,$;this.frames.push({name:"PRIV",value:g,id:b,size:(_=b.length,$=g.byteLength,10+_+1+$)})}_setUserStringFrame(d,g){const b=d.toString(),_=g.toString();var $,j;this.frames.push({name:"TXXX",description:b,value:_,size:($=b.length,j=_.length,13+2*$+2+2+2*j)})}_setUrlLinkFrame(d,g){const b=g.toString();var _;this.frames.push({name:d,value:b,size:(_=b.length,10+_)})}_setPairedTextFrame(d,g){this.frames.push({name:d,value:g,size:i(g)})}_setSynchronisedLyricsFrame(d,g,b,_,$){const j=$.toString(),_e=_.split("").map(et=>et.charCodeAt(0));this.frames.push({name:"SYLT",value:g,language:_e,description:j,type:d,timestampFormat:b,size:c(g,j.length)})}constructor(d){if(!d||typeof d!="object"||!("byteLength"in d))throw new Error("First argument should be an instance of ArrayBuffer or Buffer");this.arrayBuffer=d,this.padding=4096,this.frames=[],this.url=""}setFrame(d,g){switch(d){case"TPE1":case"TCOM":case"TCON":{if(!Array.isArray(g))throw new Error(`${d} frame value should be an array of strings`);const b=d==="TCON"?";":"/",_=g.join(b);this._setStringFrame(d,_);break}case"TLAN":case"TIT1":case"TIT2":case"TIT3":case"TALB":case"TPE2":case"TPE3":case"TPE4":case"TRCK":case"TPOS":case"TMED":case"TPUB":case"TCOP":case"TKEY":case"TEXT":case"TDAT":case"TCMP":case"TSSE":case"TSRC":this._setStringFrame(d,g);break;case"TBPM":case"TLEN":case"TYER":this._setIntegerFrame(d,g);break;case"USLT":if(g.language=g.language||"eng",typeof g!="object"||!("description"in g)||!("lyrics"in g))throw new Error("USLT frame value should be an object with keys description and lyrics");if(g.language&&!g.language.match(/[a-z]{3}/i))throw new Error("Language must be coded following the ISO 639-2 standards");this._setLyricsFrame(g.language,g.description,g.lyrics);break;case"APIC":if(typeof g!="object"||!("type"in g)||!("data"in g)||!("description"in g))throw new Error("APIC frame value should be an object with keys type, data and description");if(g.type<0||g.type>20)throw new Error("Incorrect APIC frame picture type");this._setPictureFrame(g.type,g.data,g.description,!!g.useUnicodeEncoding);break;case"TXXX":if(typeof g!="object"||!("description"in g)||!("value"in g))throw new Error("TXXX frame value should be an object with keys description and value");this._setUserStringFrame(g.description,g.value);break;case"WCOM":case"WCOP":case"WOAF":case"WOAR":case"WOAS":case"WORS":case"WPAY":case"WPUB":this._setUrlLinkFrame(d,g);break;case"COMM":if(g.language=g.language||"eng",typeof g!="object"||!("description"in g)||!("text"in g))throw new Error("COMM frame value should be an object with keys description and text");if(g.language&&!g.language.match(/[a-z]{3}/i))throw new Error("Language must be coded following the ISO 639-2 standards");this._setCommentFrame(g.language,g.description,g.text);break;case"PRIV":if(typeof g!="object"||!("id"in g)||!("data"in g))throw new Error("PRIV frame value should be an object with keys id and data");this._setPrivateFrame(g.id,g.data);break;case"IPLS":if(!Array.isArray(g)||!Array.isArray(g[0]))throw new Error("IPLS frame value should be an array of pairs");this._setPairedTextFrame(d,g);break;case"SYLT":if(typeof g!="object"||!("type"in g)||!("text"in g)||!("timestampFormat"in g))throw new Error("SYLT frame value should be an object with keys type, text and timestampFormat");if(!Array.isArray(g.text)||!Array.isArray(g.text[0]))throw new Error("SYLT frame text value should be an array of pairs");if(g.type<0||g.type>6)throw new Error("Incorrect SYLT frame content type");if(g.timestampFormat<1||g.timestampFormat>2)throw new Error("Incorrect SYLT frame time stamp format");g.language=g.language||"eng",g.description=g.description||"",this._setSynchronisedLyricsFrame(g.type,g.text,g.timestampFormat,g.language,g.description);break;default:throw new Error(`Unsupported frame ${d}`)}return this}removeTag(){if(this.arrayBuffer.byteLength<10)return;const d=new Uint8Array(this.arrayBuffer),g=d[3],b=((_=[d[6],d[7],d[8],d[9]])[0]<<21)+(_[1]<<14)+(_[2]<<7)+_[3]+10;var _,$;($=d)[0]!==73||$[1]!==68||$[2]!==51||g<2||g>4||(this.arrayBuffer=new Uint8Array(d.subarray(b)).buffer)}addTag(){this.removeTag();const d=[255,254],g=10+this.frames.reduce((_e,et)=>_e+et.size,0)+this.padding,b=new ArrayBuffer(this.arrayBuffer.byteLength+g),_=new Uint8Array(b);let $=0,j=[];return j=[73,68,51,3],_.set(j,$),$+=j.length,$++,$++,j=function(_e){return[_e>>>21&127,_e>>>14&127,_e>>>7&127,_e&127]}(g-10),_.set(j,$),$+=j.length,this.frames.forEach(_e=>{switch(j=t(_e.name),_.set(j,$),$+=j.length,j=r(_e.size-10),_.set(j,$),$+=j.length,$+=2,_e.name){case"WCOM":case"WCOP":case"WOAF":case"WOAR":case"WOAS":case"WORS":case"WPAY":case"WPUB":j=t(_e.value),_.set(j,$),$+=j.length;break;case"TPE1":case"TCOM":case"TCON":case"TLAN":case"TIT1":case"TIT2":case"TIT3":case"TALB":case"TPE2":case"TPE3":case"TPE4":case"TRCK":case"TPOS":case"TKEY":case"TMED":case"TPUB":case"TCOP":case"TEXT":case"TSSE":case"TSRC":j=[1].concat(d),_.set(j,$),$+=j.length,j=a(_e.value),_.set(j,$),$+=j.length;break;case"TXXX":case"USLT":case"COMM":j=[1],_e.name!=="USLT"&&_e.name!=="COMM"||(j=j.concat(_e.language)),j=j.concat(d),_.set(j,$),$+=j.length,j=a(_e.description),_.set(j,$),$+=j.length,j=[0,0].concat(d),_.set(j,$),$+=j.length,j=a(_e.value),_.set(j,$),$+=j.length;break;case"TBPM":case"TLEN":case"TDAT":case"TYER":$++,j=t(_e.value),_.set(j,$),$+=j.length;break;case"PRIV":j=t(_e.id),_.set(j,$),$+=j.length,$++,_.set(new Uint8Array(_e.value),$),$+=_e.value.byteLength;break;case"APIC":j=[_e.useUnicodeEncoding?1:0],_.set(j,$),$+=j.length,j=t(_e.mimeType),_.set(j,$),$+=j.length,j=[0,_e.pictureType],_.set(j,$),$+=j.length,_e.useUnicodeEncoding?(j=[].concat(d),_.set(j,$),$+=j.length,j=a(_e.description),_.set(j,$),$+=j.length,$+=2):(j=t(_e.description),_.set(j,$),$+=j.length,$++),_.set(new Uint8Array(_e.value),$),$+=_e.value.byteLength;break;case"IPLS":j=[1],_.set(j,$),$+=j.length,_e.value.forEach(et=>{j=[].concat(d),_.set(j,$),$+=j.length,j=a(et[0].toString()),_.set(j,$),$+=j.length,j=[0,0].concat(d),_.set(j,$),$+=j.length,j=a(et[1].toString()),_.set(j,$),$+=j.length,j=[0,0],_.set(j,$),$+=j.length});break;case"SYLT":j=[1].concat(_e.language).concat(_e.timestampFormat).concat(_e.type),_.set(j,$),$+=j.length,j=[].concat(d),_.set(j,$),$+=j.length,j=a(_e.description),_.set(j,$),$+=j.length,$+=2,_e.value.forEach(et=>{j=[].concat(d),_.set(j,$),$+=j.length,j=a(et[0].toString()),_.set(j,$),$+=j.length,j=[0,0],_.set(j,$),$+=j.length,j=r(et[1]),_.set(j,$),$+=j.length})}}),$+=this.padding,_.set(new Uint8Array(this.arrayBuffer),$),this.arrayBuffer=b,b}getBlob(){return new Blob([this.arrayBuffer],{type:"audio/mpeg"})}getURL(){return this.url||(this.url=URL.createObjectURL(this.getBlob())),this.url}revokeURL(){URL.revokeObjectURL(this.url)}}function extractFromFilename(h){const d=h.replace(/\.[^/.]+$/,"").replace(/_/g," ").trim(),g=[" - ","  ","  "];for(const b of g){const _=d.indexOf(b);if(_>0)return{artist:d.slice(0,_).trim(),title:d.slice(_+b.length).trim(),album:"Unknown"}}if(d.includes("-")){const b=d.split("-");if(b.length>=2)return{artist:b[0].trim(),title:b.slice(1).join("-").trim(),album:"Unknown"}}return{title:d.trim(),artist:"Unknown",album:"Unknown"}}async function readMetadata(h){var d,g;try{const b=await lib$3.parseBlob(h),_=b.common.title&&b.common.title.trim()!=="",$=b.common.artist&&b.common.artist.trim()!=="";return _||$?{title:b.common.title||extractFromFilename(h.name).title,artist:b.common.artist||"Unknown",album:b.common.album||"Unknown",year:b.common.year,genre:(d=b.common.genre)==null?void 0:d[0],trackNumber:((g=b.common.track)==null?void 0:g.no)||void 0}:extractFromFilename(h.name)}catch{return extractFromFilename(h.name)}}async function writeMetadata(h,d){const g=await h.arrayBuffer(),b=new o(g);if(b.setFrame("TIT2",d.title),b.setFrame("TPE1",[d.artist]),b.setFrame("TALB",d.album),d.year&&b.setFrame("TYER",d.year),d.genre&&b.setFrame("TCON",[d.genre]),d.trackNumber&&b.setFrame("TRCK",String(d.trackNumber)),d.artworkUrl)try{const _=await fetch(d.artworkUrl);if(_.ok){const $=await _.arrayBuffer();b.setFrame("APIC",{type:3,data:$,description:"Cover",useUnicodeEncoding:!1})}}catch(_){console.warn("Could not embed artwork:",_)}return b.addTag(),b.getBlob()}function downloadBlob(h,d){const g=URL.createObjectURL(h),b=document.createElement("a");b.href=g,b.download=d,document.body.appendChild(b),b.click(),document.body.removeChild(b),URL.revokeObjectURL(g)}const FETCH_TIMEOUT_MS=8e3,CORS_PROXIES=[h=>`https://api.allorigins.win/raw?url=${encodeURIComponent(h)}`,h=>`https://corsproxy.io/?url=${encodeURIComponent(h)}`,h=>`https://api.codetabs.com/v1/proxy?quest=${encodeURIComponent(h)}`],DEFAULT_SOURCE_SETTINGS={itunes:!0,deezer:!0,musicbrainz:!0,piped:!0,youtube:!0,ytdlp:!0},SETTINGS_KEY="tagfix-enabled-sources";function getUserSourceSettings(){if(typeof window>"u")return DEFAULT_SOURCE_SETTINGS;try{const h=localStorage.getItem(SETTINGS_KEY);if(h){const d=JSON.parse(h);return{...DEFAULT_SOURCE_SETTINGS,...d}}}catch{}return DEFAULT_SOURCE_SETTINGS}function isUserSourceEnabled(h){return getUserSourceSettings()[h]??!0}function fetchWithTimeout(h,d=FETCH_TIMEOUT_MS,g){const b=new AbortController,_=setTimeout(()=>b.abort(),d);return fetch(h,{...g,signal:b.signal}).finally(()=>clearTimeout(_))}async function fetchViaCorsProxy(h,d=FETCH_TIMEOUT_MS){try{const{data:b,error:_}=await supabase.functions.invoke("cors-proxy",{body:{url:h}});if(!_&&b){const $=typeof b=="string"?b:JSON.stringify(b);return new Response($,{status:200,headers:{"Content-Type":"application/json"}})}console.warn("Edge function proxy failed, falling back to public proxies:",_)}catch(b){console.warn("Edge function proxy error, falling back:",b)}let g=null;for(const b of CORS_PROXIES)try{const _=b(h),$=await fetchWithTimeout(_,d);if($.ok)return $;g=new Error(`Proxy returned ${$.status}`)}catch(_){g=_ instanceof Error?_:new Error(String(_));continue}throw g||new Error("All CORS proxies failed")}const circuitBreaker={itunes:{failures:0,disabled:!1},deezer:{failures:0,disabled:!1},musicbrainz:{failures:0,disabled:!1},piped:{failures:0,disabled:!1},youtube:{failures:0,disabled:!1},ytdlp:{failures:0,disabled:!1}},CIRCUIT_BREAKER_THRESHOLD=3;function recordSuccess(h){circuitBreaker[h]&&(circuitBreaker[h].failures=0)}function recordFailure(h){return circuitBreaker[h]?(circuitBreaker[h].failures++,circuitBreaker[h].failures>=CIRCUIT_BREAKER_THRESHOLD?(circuitBreaker[h].disabled=!0,console.warn(`Circuit breaker: disabling ${h} after ${CIRCUIT_BREAKER_THRESHOLD} consecutive failures`),!0):!1):!1}function isSourceEnabled(h){var d;return!((d=circuitBreaker[h])!=null&&d.disabled)&&isUserSourceEnabled(h)}function resetCircuitBreakers(){for(const h of Object.keys(circuitBreaker))circuitBreaker[h]={failures:0,disabled:!1}}function cleanSearchQuery(h){return h.replace(/\(.*?\)/g,"").replace(/\[.*?\]/g,"").replace(/official\s*(video|audio|music\s*video)/gi,"").replace(/lyrics?\s*(video)?/gi,"").replace(/HD|HQ|4K|1080p|720p/gi,"").replace(/feat\.?\s+.*$/gi,"").replace(/ft\.?\s+.*$/gi,"").replace(/prod\.?\s+.*$/gi,"").replace(/unreleased/gi,"").replace(/\s+/g," ").trim()}function delay(h){return new Promise(d=>setTimeout(d,h))}const YTDLP_TIMEOUT_MS=15e3;function parseArtistTitle(h){const d=h.replace(/\(.*?\)/g,"").replace(/\[.*?\]/g,"").replace(/official\s*(video|audio|music\s*video)/gi,"").replace(/lyrics?\s*(video)?/gi,"").replace(/HD|HQ|4K|1080p|720p/gi,"").replace(/\s+/g," ").trim(),g=d.match(/^(.+?)\s*[-]\s*(.+)$/);if(g)return{artist:g[1].trim(),title:g[2].trim()};const b=d.match(/^(.+?):\s*(.+)$/);if(b)return{artist:b[1].trim(),title:b[2].trim()};const _=d.match(/^(.+?)\s+by\s*(.+)$/i);return _?{artist:_[2].trim(),title:_[1].trim()}:{artist:"",title:d}}function extractYear(h){if(h&&h.length>=4){const d=parseInt(h.substring(0,4),10);return isNaN(d)?void 0:d}}function mapYtDlpToMetadata(h){var b;const{artist:d,title:g}=parseArtistTitle(h.title);return{title:g||h.title,artist:d||h.channel||"Unknown",album:"",year:extractYear(h.upload_date),genre:(b=h.categories)==null?void 0:b[0],artworkUrl:h.thumbnail,source:"youtube"}}async function searchYtDlp(h,d=5){if(!isSourceEnabled("ytdlp"))return[];const g=cleanSearchQuery(h);try{const b=new AbortController,_=setTimeout(()=>b.abort(),YTDLP_TIMEOUT_MS),{data:$,error:j}=await supabase.functions.invoke("yt-dlp-search",{body:{query:g,maxResults:Math.min(d,10)}});if(clearTimeout(_),j)throw console.error("[yt-dlp] Edge function error:",j),recordFailure("ytdlp"),new Error(`yt-dlp search failed: ${j.message}`);const _e=$;if(_e.error)throw console.error("[yt-dlp] Search error:",_e.error),recordFailure("ytdlp"),new Error(_e.error);return _e.quotaExceeded?(console.warn("[yt-dlp] Rate limited"),recordFailure("ytdlp"),[]):!_e.videos||_e.videos.length===0?[]:(recordSuccess("ytdlp"),_e.videos.filter(et=>et.duration>30).map(mapYtDlpToMetadata))}catch(b){throw b instanceof Error&&b.name==="AbortError"?(console.error("[yt-dlp] Request timed out"),recordFailure("ytdlp"),new Error("yt-dlp search timed out")):(console.error("[yt-dlp] Search failed:",b),recordFailure("ytdlp"),b)}}function normalize(h){return h.toLowerCase().replace(/[''`]/g,"").replace(/[^a-z0-9\s]/g," ").replace(/\s+/g," ").trim()}function wordCoverage(h,d){const g=new Set(normalize(h).split(" ").filter($=>$.length>1)),b=normalize(d).split(" ").filter($=>$.length>1);if(b.length===0||g.size===0)return 0;let _=0;for(const $ of b)g.has($)&&_++;return _/b.length}function strongSubstringMatch(h,d){const g=normalize(h),b=normalize(d);if(!g||!b||!g.includes(b)&&!b.includes(g))return!1;const _=Math.min(g.length,b.length),$=Math.max(g.length,b.length);return _/$>=.6}function relevanceScore(h,d,g){let b=0;const _=normalize(d),$=normalize(g),j=normalize(h.artist),_e=normalize(h.title);if(_&&_!=="unknown"&&(j===_?b+=.5:strongSubstringMatch(j,_)?b+=.4:wordCoverage(j,_)>.5&&(b+=.25)),$){const et=wordCoverage(_e,$);_e===$?b+=.5:strongSubstringMatch(_e,$)?b+=.4:et>=.8?b+=.3:et>=.5&&(b+=.15)}return b}function filterByRelevance(h,d,g,b=.4){return h.map($=>{const j=$,_e=normalize(d),et=normalize(g),rt=normalize($.artist),nt=normalize($.title);let st=0;_e&&_e!=="unknown"&&(rt===_e?st=1:strongSubstringMatch(rt,_e)?st=.8:wordCoverage(rt,_e)>.5&&(st=.5));let at=0;if(et){const dt=wordCoverage(nt,et);nt===et?at=1:strongSubstringMatch(nt,et)?at=.7:dt>=.8?at=.5:dt>=.6&&(at=.3)}const it=relevanceScore($,d,g);return{result:j,totalScore:it,artistScore:st,titleScore:at}}).filter($=>$.titleScore>0&&$.totalScore>=b).sort(($,j)=>j.totalScore-$.totalScore).map($=>$.result)}async function searchTrack(h){if(!isSourceEnabled("itunes"))return[];const d=cleanSearchQuery(h),g=`https://itunes.apple.com/search?term=${encodeURIComponent(d)}&media=music&entity=song&limit=10`;try{const _=await(await fetchViaCorsProxy(g)).json();return recordSuccess("itunes"),_.results.map($=>{var j;return{title:$.trackName,artist:$.artistName,album:$.collectionName,year:$.releaseDate?new Date($.releaseDate).getFullYear():void 0,genre:$.primaryGenreName,trackNumber:$.trackNumber,artworkUrl:(j=$.artworkUrl100)==null?void 0:j.replace("100x100bb","600x600bb"),source:"itunes"}})}catch(b){throw recordFailure("itunes"),b}}async function searchDeezer(h){if(!isSourceEnabled("deezer"))return[];const d=cleanSearchQuery(h),g=`https://api.deezer.com/search?q=${encodeURIComponent(d)}&limit=10`;try{const _=await(await fetchViaCorsProxy(g)).json();return!_.data||!Array.isArray(_.data)?(recordFailure("deezer"),[]):(recordSuccess("deezer"),_.data.map($=>{var j,_e,et,rt;return{title:$.title||$.title_short||"Unknown",artist:((j=$.artist)==null?void 0:j.name)||"Unknown",album:((_e=$.album)==null?void 0:_e.title)||"Unknown",artworkUrl:((et=$.album)==null?void 0:et.cover_big)||((rt=$.album)==null?void 0:rt.cover_medium),source:"deezer"}}))}catch{return recordFailure("deezer"),[]}}function buildSearchQuery(h){const d=[];return h.artist&&h.artist!=="Unknown"&&d.push(h.artist),h.title&&d.push(h.title),d.join(" ")}function parseVideoTitle$1(h,d){const g=[" - ","  ","  "," | "];for(const b of g){const _=h.indexOf(b);if(_>0)return{artist:h.slice(0,_).trim(),title:h.slice(_+b.length).trim().replace(/\(official.*?\)/gi,"").replace(/\[official.*?\]/gi,"").replace(/official\s*(video|audio|music\s*video)/gi,"").replace(/lyrics?\s*(video)?/gi,"").replace(/\s*\(?\s*(?:HD|HQ|4K)\s*\)?/gi,"").trim()}}return{artist:d.replace(/\s*-\s*Topic$/gi,"").replace(/\s*[-]?\s*(VEVO|Official|Music|Records|Channel)$/gi,"").trim(),title:h.replace(/\(official.*?\)/gi,"").replace(/\[official.*?\]/gi,"").replace(/official\s*(video|audio|music\s*video)/gi,"").trim()}}function extractAlbumFromTags(h,d,g){if(!h||h.length===0)return;const b=d.toLowerCase(),_=g.toLowerCase();for(const $ of h){const j=$.toLowerCase();if(j!==b&&j!==_&&!j.includes("official")&&!j.includes("video")&&!j.includes("audio")&&!j.includes("lyrics")&&!j.includes("music video")&&$.length>2&&$.length<60){if(j.includes(b)&&j!==b)continue;return $}}}function extractFromDescription(h){if(!h)return{};let d,g;const b=h.match(/[]\s*(\d{4})/);if(b){const $=parseInt(b[1],10);$>=1900&&$<=new Date().getFullYear()+1&&(d=$)}const _=h.match(/Provided to YouTube by.*?\n(.+)/i);if(_){const $=_[1].split("").map(j=>j.trim()).filter(Boolean);$.length>=3&&(g=$[2])}if(!g){const $=h.match(/Album\s*:\s*(.+)/i);$&&(g=$[1].trim())}return{album:g,year:d}}async function searchYouTube(h){if(!isSourceEnabled("youtube"))return[];const d=cleanSearchQuery(h);try{const{data:g,error:b}=await supabase.functions.invoke("youtube-search",{body:{query:d,maxResults:10}});if(b)throw new Error(`Edge function error: ${b.message}`);return g!=null&&g.quotaExceeded?(console.warn("[YouTube] API quota exceeded  disabling for this session"),recordFailure("youtube"),recordFailure("youtube"),recordFailure("youtube"),[]):!(g!=null&&g.videos)||g.videos.length===0?(recordSuccess("youtube"),[]):(recordSuccess("youtube"),g.videos.filter(_=>{const $=_.lengthSeconds||0;return $===0||$>30&&$<600}).map(_=>{const $=parseVideoTitle$1(_.title,_.channelTitle),j=extractAlbumFromTags(_.tags||[],$.artist,$.title),_e=extractFromDescription(_.description||"");return{title:$.title,artist:$.artist,album:j||_e.album||"Unknown",year:_e.year,artworkUrl:_.thumbnail,source:"youtube"}}))}catch(g){throw recordFailure("youtube"),g}}const MB_BASE="https://musicbrainz.org/ws/2",MB_USER_AGENT="TagFix/1.0 (https://tagfix.app)";async function searchMusicBrainz(h){if(!isSourceEnabled("musicbrainz"))return[];const d=h.replace(/\(.*?\)/g,"").replace(/\[.*?\]/g,"").replace(/official\s*(video|audio|music\s*video)/gi,"").replace(/\s+/g," ").trim(),g=`${MB_BASE}/recording?query=${encodeURIComponent(d)}&fmt=json&limit=10`;try{const b=await fetchWithTimeout(g,8e3,{headers:{"User-Agent":MB_USER_AGENT,Accept:"application/json"}});if(!b.ok)throw new Error(`MusicBrainz API returned ${b.status}`);const _=await b.json();return recordSuccess("musicbrainz"),_.recordings.map($=>{var st,at,it,dt,ot,ct,lt;const j=((it=(at=(st=$["artist-credit"])==null?void 0:st[0])==null?void 0:at.artist)==null?void 0:it.name)||"Unknown",_e=(ot=(dt=$.releases)==null?void 0:dt.sort((ut,ft)=>{var Tt,St;const Et=ht=>ht==="Album"?0:ht==="Single"?1:ht==="EP"?2:3;return Et((Tt=ut["release-group"])==null?void 0:Tt["primary-type"])-Et((St=ft["release-group"])==null?void 0:St["primary-type"])}))==null?void 0:ot[0],et=(_e==null?void 0:_e.title)||"Unknown",rt=_e!=null&&_e.date?new Date(_e.date).getFullYear():void 0,nt=(lt=(ct=$.tags)==null?void 0:ct[0])==null?void 0:lt.name;return{title:$.title,artist:j,album:et,year:rt&&!isNaN(rt)?rt:void 0,genre:nt,source:"musicbrainz"}})}catch(b){throw recordFailure("musicbrainz"),b}}const PIPED_INSTANCES=["https://pipedapi.kavin.rocks","https://pipedapi.adminforge.de","https://pipedapi.leptons.xyz","https://pipedapi.r4fo.com","https://pipedapi.syncpundit.io"];function parseVideoTitle(h,d){const g=[" - ","  ","  "," | "];for(const b of g){const _=h.indexOf(b);if(_>0)return{artist:h.slice(0,_).trim(),title:h.slice(_+b.length).trim().replace(/\(official.*?\)/gi,"").replace(/\[official.*?\]/gi,"").replace(/official\s*(video|audio|music\s*video)/gi,"").replace(/lyrics?\s*(video)?/gi,"").replace(/\s*\(?\s*(?:HD|HQ|4K)\s*\)?/gi,"").trim()}}return{artist:d.replace(/\s*-\s*Topic$/gi,"").replace(/\s*[-]?\s*(VEVO|Official|Music|Records|Channel)$/gi,"").trim(),title:h.replace(/\(official.*?\)/gi,"").replace(/\[official.*?\]/gi,"").replace(/official\s*(video|audio|music\s*video)/gi,"").trim()}}async function searchPiped(h){if(!isSourceEnabled("piped"))return[];const d=cleanSearchQuery(h);for(const g of PIPED_INSTANCES)try{const b=`${g}/search?q=${encodeURIComponent(d)}&filter=music_songs`,_=await fetchWithTimeout(b,5e3);if(!_.ok)continue;const $=await _.json();if(!$.items||!Array.isArray($.items))continue;const j=$.items.filter(_e=>_e.type==="stream"&&_e.duration>30&&_e.duration<600).slice(0,10);return recordSuccess("piped"),j.map(_e=>{const et=parseVideoTitle(_e.title,_e.uploaderName);return{title:et.title,artist:et.artist,album:"Unknown",artworkUrl:_e.thumbnail,source:"piped"}})}catch{continue}return recordFailure("piped"),[]}const DB_NAME="tagfix-db",DB_VERSION=2,META_STORE="scan-results",FILE_STORE="file-data";function openDB(){return new Promise((h,d)=>{const g=indexedDB.open(DB_NAME,DB_VERSION);g.onupgradeneeded=b=>{const _=g.result;_.objectStoreNames.contains(META_STORE)||_.createObjectStore(META_STORE,{keyPath:"id"}),_.objectStoreNames.contains(FILE_STORE)||_.createObjectStore(FILE_STORE,{keyPath:"id"})},g.onsuccess=()=>h(g.result),g.onerror=()=>d(g.error)})}async function persistTrack(h){try{const d=await openDB(),g=d.transaction(META_STORE,"readwrite");g.objectStore(META_STORE).put(h),await new Promise((b,_)=>{g.oncomplete=()=>b(),g.onerror=()=>_(g.error)}),d.close()}catch(d){console.warn("Failed to persist track:",d)}}async function loadPersistedTracks(){try{const h=await openDB(),g=h.transaction(META_STORE,"readonly").objectStore(META_STORE).getAll(),b=await new Promise((_,$)=>{g.onsuccess=()=>_(g.result||[]),g.onerror=()=>$(g.error)});return h.close(),b}catch(h){return console.warn("Failed to load persisted tracks:",h),[]}}async function removePersistedTrack(h){try{const d=await openDB(),g=d.transaction([META_STORE,FILE_STORE],"readwrite");g.objectStore(META_STORE).delete(h),g.objectStore(FILE_STORE).delete(h),await new Promise((b,_)=>{g.oncomplete=()=>b(),g.onerror=()=>_(g.error)}),d.close()}catch(d){console.warn("Failed to remove persisted track:",d)}}async function clearPersistedTracks(){try{const h=await openDB(),d=h.transaction([META_STORE,FILE_STORE],"readwrite");d.objectStore(META_STORE).clear(),d.objectStore(FILE_STORE).clear(),await new Promise((g,b)=>{d.oncomplete=()=>g(),d.onerror=()=>b(d.error)}),h.close()}catch(h){console.warn("Failed to clear persisted tracks:",h)}}async function persistFileBatch(h){if(h.length!==0)try{const d=await openDB(),g=d.transaction(FILE_STORE,"readwrite"),b=g.objectStore(FILE_STORE);for(const _ of h)try{const $=await _.file.arrayBuffer();b.put({id:_.id,fileName:_.fileName,data:$})}catch{}await new Promise((_,$)=>{g.oncomplete=()=>_(),g.onerror=()=>$(g.error)}),d.close()}catch(d){console.warn("Failed to persist file batch:",d)}}async function loadPersistedFiles(){const h=new Map;try{const d=await openDB(),b=d.transaction(FILE_STORE,"readonly").objectStore(FILE_STORE).getAll(),_=await new Promise(($,j)=>{b.onsuccess=()=>$(b.result||[]),b.onerror=()=>j(b.error)});d.close();for(const $ of _)h.set($.id,new File([$.data],$.fileName,{type:"audio/mpeg"}))}catch(d){console.warn("Failed to load persisted files:",d)}return h}function commonjsRequire(h){throw new Error('Could not dynamically require "'+h+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var jszip_min={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(h,d){(function(g){h.exports=g()})(function(){return function g(b,_,$){function j(rt,nt){if(!_[rt]){if(!b[rt]){var st=typeof commonjsRequire=="function"&&commonjsRequire;if(!nt&&st)return st(rt,!0);if(_e)return _e(rt,!0);var at=new Error("Cannot find module '"+rt+"'");throw at.code="MODULE_NOT_FOUND",at}var it=_[rt]={exports:{}};b[rt][0].call(it.exports,function(dt){var ot=b[rt][1][dt];return j(ot||dt)},it,it.exports,g,b,_,$)}return _[rt].exports}for(var _e=typeof commonjsRequire=="function"&&commonjsRequire,et=0;et<$.length;et++)j($[et]);return j}({1:[function(g,b,_){var $=g("./utils"),j=g("./support"),_e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";_.encode=function(et){for(var rt,nt,st,at,it,dt,ot,ct=[],lt=0,ut=et.length,ft=ut,Et=$.getTypeOf(et)!=="string";lt<et.length;)ft=ut-lt,st=Et?(rt=et[lt++],nt=lt<ut?et[lt++]:0,lt<ut?et[lt++]:0):(rt=et.charCodeAt(lt++),nt=lt<ut?et.charCodeAt(lt++):0,lt<ut?et.charCodeAt(lt++):0),at=rt>>2,it=(3&rt)<<4|nt>>4,dt=1<ft?(15&nt)<<2|st>>6:64,ot=2<ft?63&st:64,ct.push(_e.charAt(at)+_e.charAt(it)+_e.charAt(dt)+_e.charAt(ot));return ct.join("")},_.decode=function(et){var rt,nt,st,at,it,dt,ot=0,ct=0,lt="data:";if(et.substr(0,lt.length)===lt)throw new Error("Invalid base64 input, it looks like a data url.");var ut,ft=3*(et=et.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(et.charAt(et.length-1)===_e.charAt(64)&&ft--,et.charAt(et.length-2)===_e.charAt(64)&&ft--,ft%1!=0)throw new Error("Invalid base64 input, bad content length.");for(ut=j.uint8array?new Uint8Array(0|ft):new Array(0|ft);ot<et.length;)rt=_e.indexOf(et.charAt(ot++))<<2|(at=_e.indexOf(et.charAt(ot++)))>>4,nt=(15&at)<<4|(it=_e.indexOf(et.charAt(ot++)))>>2,st=(3&it)<<6|(dt=_e.indexOf(et.charAt(ot++))),ut[ct++]=rt,it!==64&&(ut[ct++]=nt),dt!==64&&(ut[ct++]=st);return ut}},{"./support":30,"./utils":32}],2:[function(g,b,_){var $=g("./external"),j=g("./stream/DataWorker"),_e=g("./stream/Crc32Probe"),et=g("./stream/DataLengthProbe");function rt(nt,st,at,it,dt){this.compressedSize=nt,this.uncompressedSize=st,this.crc32=at,this.compression=it,this.compressedContent=dt}rt.prototype={getContentWorker:function(){var nt=new j($.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new et("data_length")),st=this;return nt.on("end",function(){if(this.streamInfo.data_length!==st.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),nt},getCompressedWorker:function(){return new j($.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},rt.createWorkerFrom=function(nt,st,at){return nt.pipe(new _e).pipe(new et("uncompressedSize")).pipe(st.compressWorker(at)).pipe(new et("compressedSize")).withStreamInfo("compression",st)},b.exports=rt},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(g,b,_){var $=g("./stream/GenericWorker");_.STORE={magic:"\0\0",compressWorker:function(){return new $("STORE compression")},uncompressWorker:function(){return new $("STORE decompression")}},_.DEFLATE=g("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(g,b,_){var $=g("./utils"),j=function(){for(var _e,et=[],rt=0;rt<256;rt++){_e=rt;for(var nt=0;nt<8;nt++)_e=1&_e?3988292384^_e>>>1:_e>>>1;et[rt]=_e}return et}();b.exports=function(_e,et){return _e!==void 0&&_e.length?$.getTypeOf(_e)!=="string"?function(rt,nt,st,at){var it=j,dt=at+st;rt^=-1;for(var ot=at;ot<dt;ot++)rt=rt>>>8^it[255&(rt^nt[ot])];return-1^rt}(0|et,_e,_e.length,0):function(rt,nt,st,at){var it=j,dt=at+st;rt^=-1;for(var ot=at;ot<dt;ot++)rt=rt>>>8^it[255&(rt^nt.charCodeAt(ot))];return-1^rt}(0|et,_e,_e.length,0):0}},{"./utils":32}],5:[function(g,b,_){_.base64=!1,_.binary=!1,_.dir=!1,_.createFolders=!0,_.date=null,_.compression=null,_.compressionOptions=null,_.comment=null,_.unixPermissions=null,_.dosPermissions=null},{}],6:[function(g,b,_){var $=null;$=typeof Promise<"u"?Promise:g("lie"),b.exports={Promise:$}},{lie:37}],7:[function(g,b,_){var $=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",j=g("pako"),_e=g("./utils"),et=g("./stream/GenericWorker"),rt=$?"uint8array":"array";function nt(st,at){et.call(this,"FlateWorker/"+st),this._pako=null,this._pakoAction=st,this._pakoOptions=at,this.meta={}}_.magic="\b\0",_e.inherits(nt,et),nt.prototype.processChunk=function(st){this.meta=st.meta,this._pako===null&&this._createPako(),this._pako.push(_e.transformTo(rt,st.data),!1)},nt.prototype.flush=function(){et.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},nt.prototype.cleanUp=function(){et.prototype.cleanUp.call(this),this._pako=null},nt.prototype._createPako=function(){this._pako=new j[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var st=this;this._pako.onData=function(at){st.push({data:at,meta:st.meta})}},_.compressWorker=function(st){return new nt("Deflate",st)},_.uncompressWorker=function(){return new nt("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(g,b,_){function $(it,dt){var ot,ct="";for(ot=0;ot<dt;ot++)ct+=String.fromCharCode(255&it),it>>>=8;return ct}function j(it,dt,ot,ct,lt,ut){var ft,Et,Tt=it.file,St=it.compression,ht=ut!==rt.utf8encode,kt=_e.transformTo("string",ut(Tt.name)),Rt=_e.transformTo("string",rt.utf8encode(Tt.name)),Mt=Tt.comment,Zt=_e.transformTo("string",ut(Mt)),Ct=_e.transformTo("string",rt.utf8encode(Mt)),Pt=Rt.length!==Tt.name.length,xt=Ct.length!==Mt.length,Ht="",tr="",er="",Kt=Tt.dir,Bt=Tt.date,nr={crc32:0,compressedSize:0,uncompressedSize:0};dt&&!ot||(nr.crc32=it.crc32,nr.compressedSize=it.compressedSize,nr.uncompressedSize=it.uncompressedSize);var Ut=0;dt&&(Ut|=8),ht||!Pt&&!xt||(Ut|=2048);var zt=0,sr=0;Kt&&(zt|=16),lt==="UNIX"?(sr=798,zt|=function(ur,_r){var vr=ur;return ur||(vr=_r?16893:33204),(65535&vr)<<16}(Tt.unixPermissions,Kt)):(sr=20,zt|=function(ur){return 63&(ur||0)}(Tt.dosPermissions)),ft=Bt.getUTCHours(),ft<<=6,ft|=Bt.getUTCMinutes(),ft<<=5,ft|=Bt.getUTCSeconds()/2,Et=Bt.getUTCFullYear()-1980,Et<<=4,Et|=Bt.getUTCMonth()+1,Et<<=5,Et|=Bt.getUTCDate(),Pt&&(tr=$(1,1)+$(nt(kt),4)+Rt,Ht+="up"+$(tr.length,2)+tr),xt&&(er=$(1,1)+$(nt(Zt),4)+Ct,Ht+="uc"+$(er.length,2)+er);var or="";return or+=`
\0`,or+=$(Ut,2),or+=St.magic,or+=$(ft,2),or+=$(Et,2),or+=$(nr.crc32,4),or+=$(nr.compressedSize,4),or+=$(nr.uncompressedSize,4),or+=$(kt.length,2),or+=$(Ht.length,2),{fileRecord:st.LOCAL_FILE_HEADER+or+kt+Ht,dirRecord:st.CENTRAL_FILE_HEADER+$(sr,2)+or+$(Zt.length,2)+"\0\0\0\0"+$(zt,4)+$(ct,4)+kt+Ht+Zt}}var _e=g("../utils"),et=g("../stream/GenericWorker"),rt=g("../utf8"),nt=g("../crc32"),st=g("../signature");function at(it,dt,ot,ct){et.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=dt,this.zipPlatform=ot,this.encodeFileName=ct,this.streamFiles=it,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}_e.inherits(at,et),at.prototype.push=function(it){var dt=it.meta.percent||0,ot=this.entriesCount,ct=this._sources.length;this.accumulate?this.contentBuffer.push(it):(this.bytesWritten+=it.data.length,et.prototype.push.call(this,{data:it.data,meta:{currentFile:this.currentFile,percent:ot?(dt+100*(ot-ct-1))/ot:100}}))},at.prototype.openedSource=function(it){this.currentSourceOffset=this.bytesWritten,this.currentFile=it.file.name;var dt=this.streamFiles&&!it.file.dir;if(dt){var ot=j(it,dt,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:ot.fileRecord,meta:{percent:0}})}else this.accumulate=!0},at.prototype.closedSource=function(it){this.accumulate=!1;var dt=this.streamFiles&&!it.file.dir,ot=j(it,dt,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(ot.dirRecord),dt)this.push({data:function(ct){return st.DATA_DESCRIPTOR+$(ct.crc32,4)+$(ct.compressedSize,4)+$(ct.uncompressedSize,4)}(it),meta:{percent:100}});else for(this.push({data:ot.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},at.prototype.flush=function(){for(var it=this.bytesWritten,dt=0;dt<this.dirRecords.length;dt++)this.push({data:this.dirRecords[dt],meta:{percent:100}});var ot=this.bytesWritten-it,ct=function(lt,ut,ft,Et,Tt){var St=_e.transformTo("string",Tt(Et));return st.CENTRAL_DIRECTORY_END+"\0\0\0\0"+$(lt,2)+$(lt,2)+$(ut,4)+$(ft,4)+$(St.length,2)+St}(this.dirRecords.length,ot,it,this.zipComment,this.encodeFileName);this.push({data:ct,meta:{percent:100}})},at.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},at.prototype.registerPrevious=function(it){this._sources.push(it);var dt=this;return it.on("data",function(ot){dt.processChunk(ot)}),it.on("end",function(){dt.closedSource(dt.previous.streamInfo),dt._sources.length?dt.prepareNextSource():dt.end()}),it.on("error",function(ot){dt.error(ot)}),this},at.prototype.resume=function(){return!!et.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},at.prototype.error=function(it){var dt=this._sources;if(!et.prototype.error.call(this,it))return!1;for(var ot=0;ot<dt.length;ot++)try{dt[ot].error(it)}catch{}return!0},at.prototype.lock=function(){et.prototype.lock.call(this);for(var it=this._sources,dt=0;dt<it.length;dt++)it[dt].lock()},b.exports=at},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(g,b,_){var $=g("../compressions"),j=g("./ZipFileWorker");_.generateWorker=function(_e,et,rt){var nt=new j(et.streamFiles,rt,et.platform,et.encodeFileName),st=0;try{_e.forEach(function(at,it){st++;var dt=function(ut,ft){var Et=ut||ft,Tt=$[Et];if(!Tt)throw new Error(Et+" is not a valid compression method !");return Tt}(it.options.compression,et.compression),ot=it.options.compressionOptions||et.compressionOptions||{},ct=it.dir,lt=it.date;it._compressWorker(dt,ot).withStreamInfo("file",{name:at,dir:ct,date:lt,comment:it.comment||"",unixPermissions:it.unixPermissions,dosPermissions:it.dosPermissions}).pipe(nt)}),nt.entriesCount=st}catch(at){nt.error(at)}return nt}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(g,b,_){function $(){if(!(this instanceof $))return new $;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var j=new $;for(var _e in this)typeof this[_e]!="function"&&(j[_e]=this[_e]);return j}}($.prototype=g("./object")).loadAsync=g("./load"),$.support=g("./support"),$.defaults=g("./defaults"),$.version="3.10.1",$.loadAsync=function(j,_e){return new $().loadAsync(j,_e)},$.external=g("./external"),b.exports=$},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(g,b,_){var $=g("./utils"),j=g("./external"),_e=g("./utf8"),et=g("./zipEntries"),rt=g("./stream/Crc32Probe"),nt=g("./nodejsUtils");function st(at){return new j.Promise(function(it,dt){var ot=at.decompressed.getContentWorker().pipe(new rt);ot.on("error",function(ct){dt(ct)}).on("end",function(){ot.streamInfo.crc32!==at.decompressed.crc32?dt(new Error("Corrupted zip : CRC32 mismatch")):it()}).resume()})}b.exports=function(at,it){var dt=this;return it=$.extend(it||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:_e.utf8decode}),nt.isNode&&nt.isStream(at)?j.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):$.prepareContent("the loaded zip file",at,!0,it.optimizedBinaryString,it.base64).then(function(ot){var ct=new et(it);return ct.load(ot),ct}).then(function(ot){var ct=[j.Promise.resolve(ot)],lt=ot.files;if(it.checkCRC32)for(var ut=0;ut<lt.length;ut++)ct.push(st(lt[ut]));return j.Promise.all(ct)}).then(function(ot){for(var ct=ot.shift(),lt=ct.files,ut=0;ut<lt.length;ut++){var ft=lt[ut],Et=ft.fileNameStr,Tt=$.resolve(ft.fileNameStr);dt.file(Tt,ft.decompressed,{binary:!0,optimizedBinaryString:!0,date:ft.date,dir:ft.dir,comment:ft.fileCommentStr.length?ft.fileCommentStr:null,unixPermissions:ft.unixPermissions,dosPermissions:ft.dosPermissions,createFolders:it.createFolders}),ft.dir||(dt.file(Tt).unsafeOriginalName=Et)}return ct.zipComment.length&&(dt.comment=ct.zipComment),dt})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(g,b,_){var $=g("../utils"),j=g("../stream/GenericWorker");function _e(et,rt){j.call(this,"Nodejs stream input adapter for "+et),this._upstreamEnded=!1,this._bindStream(rt)}$.inherits(_e,j),_e.prototype._bindStream=function(et){var rt=this;(this._stream=et).pause(),et.on("data",function(nt){rt.push({data:nt,meta:{percent:0}})}).on("error",function(nt){rt.isPaused?this.generatedError=nt:rt.error(nt)}).on("end",function(){rt.isPaused?rt._upstreamEnded=!0:rt.end()})},_e.prototype.pause=function(){return!!j.prototype.pause.call(this)&&(this._stream.pause(),!0)},_e.prototype.resume=function(){return!!j.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},b.exports=_e},{"../stream/GenericWorker":28,"../utils":32}],13:[function(g,b,_){var $=g("readable-stream").Readable;function j(_e,et,rt){$.call(this,et),this._helper=_e;var nt=this;_e.on("data",function(st,at){nt.push(st)||nt._helper.pause(),rt&&rt(at)}).on("error",function(st){nt.emit("error",st)}).on("end",function(){nt.push(null)})}g("../utils").inherits(j,$),j.prototype._read=function(){this._helper.resume()},b.exports=j},{"../utils":32,"readable-stream":16}],14:[function(g,b,_){b.exports={isNode:typeof Buffer<"u",newBufferFrom:function($,j){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from($,j);if(typeof $=="number")throw new Error('The "data" argument must not be a number');return new Buffer($,j)},allocBuffer:function($){if(Buffer.alloc)return Buffer.alloc($);var j=new Buffer($);return j.fill(0),j},isBuffer:function($){return Buffer.isBuffer($)},isStream:function($){return $&&typeof $.on=="function"&&typeof $.pause=="function"&&typeof $.resume=="function"}}},{}],15:[function(g,b,_){function $(Tt,St,ht){var kt,Rt=_e.getTypeOf(St),Mt=_e.extend(ht||{},nt);Mt.date=Mt.date||new Date,Mt.compression!==null&&(Mt.compression=Mt.compression.toUpperCase()),typeof Mt.unixPermissions=="string"&&(Mt.unixPermissions=parseInt(Mt.unixPermissions,8)),Mt.unixPermissions&&16384&Mt.unixPermissions&&(Mt.dir=!0),Mt.dosPermissions&&16&Mt.dosPermissions&&(Mt.dir=!0),Mt.dir&&(Tt=lt(Tt)),Mt.createFolders&&(kt=ct(Tt))&&ut.call(this,kt,!0);var Zt=Rt==="string"&&Mt.binary===!1&&Mt.base64===!1;ht&&ht.binary!==void 0||(Mt.binary=!Zt),(St instanceof st&&St.uncompressedSize===0||Mt.dir||!St||St.length===0)&&(Mt.base64=!1,Mt.binary=!0,St="",Mt.compression="STORE",Rt="string");var Ct=null;Ct=St instanceof st||St instanceof et?St:dt.isNode&&dt.isStream(St)?new ot(Tt,St):_e.prepareContent(Tt,St,Mt.binary,Mt.optimizedBinaryString,Mt.base64);var Pt=new at(Tt,Ct,Mt);this.files[Tt]=Pt}var j=g("./utf8"),_e=g("./utils"),et=g("./stream/GenericWorker"),rt=g("./stream/StreamHelper"),nt=g("./defaults"),st=g("./compressedObject"),at=g("./zipObject"),it=g("./generate"),dt=g("./nodejsUtils"),ot=g("./nodejs/NodejsStreamInputAdapter"),ct=function(Tt){Tt.slice(-1)==="/"&&(Tt=Tt.substring(0,Tt.length-1));var St=Tt.lastIndexOf("/");return 0<St?Tt.substring(0,St):""},lt=function(Tt){return Tt.slice(-1)!=="/"&&(Tt+="/"),Tt},ut=function(Tt,St){return St=St!==void 0?St:nt.createFolders,Tt=lt(Tt),this.files[Tt]||$.call(this,Tt,null,{dir:!0,createFolders:St}),this.files[Tt]};function ft(Tt){return Object.prototype.toString.call(Tt)==="[object RegExp]"}var Et={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(Tt){var St,ht,kt;for(St in this.files)kt=this.files[St],(ht=St.slice(this.root.length,St.length))&&St.slice(0,this.root.length)===this.root&&Tt(ht,kt)},filter:function(Tt){var St=[];return this.forEach(function(ht,kt){Tt(ht,kt)&&St.push(kt)}),St},file:function(Tt,St,ht){if(arguments.length!==1)return Tt=this.root+Tt,$.call(this,Tt,St,ht),this;if(ft(Tt)){var kt=Tt;return this.filter(function(Mt,Zt){return!Zt.dir&&kt.test(Mt)})}var Rt=this.files[this.root+Tt];return Rt&&!Rt.dir?Rt:null},folder:function(Tt){if(!Tt)return this;if(ft(Tt))return this.filter(function(Rt,Mt){return Mt.dir&&Tt.test(Rt)});var St=this.root+Tt,ht=ut.call(this,St),kt=this.clone();return kt.root=ht.name,kt},remove:function(Tt){Tt=this.root+Tt;var St=this.files[Tt];if(St||(Tt.slice(-1)!=="/"&&(Tt+="/"),St=this.files[Tt]),St&&!St.dir)delete this.files[Tt];else for(var ht=this.filter(function(Rt,Mt){return Mt.name.slice(0,Tt.length)===Tt}),kt=0;kt<ht.length;kt++)delete this.files[ht[kt].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(Tt){var St,ht={};try{if((ht=_e.extend(Tt||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:j.utf8encode})).type=ht.type.toLowerCase(),ht.compression=ht.compression.toUpperCase(),ht.type==="binarystring"&&(ht.type="string"),!ht.type)throw new Error("No output type specified.");_e.checkSupport(ht.type),ht.platform!=="darwin"&&ht.platform!=="freebsd"&&ht.platform!=="linux"&&ht.platform!=="sunos"||(ht.platform="UNIX"),ht.platform==="win32"&&(ht.platform="DOS");var kt=ht.comment||this.comment||"";St=it.generateWorker(this,ht,kt)}catch(Rt){(St=new et("error")).error(Rt)}return new rt(St,ht.type||"string",ht.mimeType)},generateAsync:function(Tt,St){return this.generateInternalStream(Tt).accumulate(St)},generateNodeStream:function(Tt,St){return(Tt=Tt||{}).type||(Tt.type="nodebuffer"),this.generateInternalStream(Tt).toNodejsStream(St)}};b.exports=Et},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(g,b,_){b.exports=g("stream")},{stream:void 0}],17:[function(g,b,_){var $=g("./DataReader");function j(_e){$.call(this,_e);for(var et=0;et<this.data.length;et++)_e[et]=255&_e[et]}g("../utils").inherits(j,$),j.prototype.byteAt=function(_e){return this.data[this.zero+_e]},j.prototype.lastIndexOfSignature=function(_e){for(var et=_e.charCodeAt(0),rt=_e.charCodeAt(1),nt=_e.charCodeAt(2),st=_e.charCodeAt(3),at=this.length-4;0<=at;--at)if(this.data[at]===et&&this.data[at+1]===rt&&this.data[at+2]===nt&&this.data[at+3]===st)return at-this.zero;return-1},j.prototype.readAndCheckSignature=function(_e){var et=_e.charCodeAt(0),rt=_e.charCodeAt(1),nt=_e.charCodeAt(2),st=_e.charCodeAt(3),at=this.readData(4);return et===at[0]&&rt===at[1]&&nt===at[2]&&st===at[3]},j.prototype.readData=function(_e){if(this.checkOffset(_e),_e===0)return[];var et=this.data.slice(this.zero+this.index,this.zero+this.index+_e);return this.index+=_e,et},b.exports=j},{"../utils":32,"./DataReader":18}],18:[function(g,b,_){var $=g("../utils");function j(_e){this.data=_e,this.length=_e.length,this.index=0,this.zero=0}j.prototype={checkOffset:function(_e){this.checkIndex(this.index+_e)},checkIndex:function(_e){if(this.length<this.zero+_e||_e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+_e+"). Corrupted zip ?")},setIndex:function(_e){this.checkIndex(_e),this.index=_e},skip:function(_e){this.setIndex(this.index+_e)},byteAt:function(){},readInt:function(_e){var et,rt=0;for(this.checkOffset(_e),et=this.index+_e-1;et>=this.index;et--)rt=(rt<<8)+this.byteAt(et);return this.index+=_e,rt},readString:function(_e){return $.transformTo("string",this.readData(_e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var _e=this.readInt(4);return new Date(Date.UTC(1980+(_e>>25&127),(_e>>21&15)-1,_e>>16&31,_e>>11&31,_e>>5&63,(31&_e)<<1))}},b.exports=j},{"../utils":32}],19:[function(g,b,_){var $=g("./Uint8ArrayReader");function j(_e){$.call(this,_e)}g("../utils").inherits(j,$),j.prototype.readData=function(_e){this.checkOffset(_e);var et=this.data.slice(this.zero+this.index,this.zero+this.index+_e);return this.index+=_e,et},b.exports=j},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(g,b,_){var $=g("./DataReader");function j(_e){$.call(this,_e)}g("../utils").inherits(j,$),j.prototype.byteAt=function(_e){return this.data.charCodeAt(this.zero+_e)},j.prototype.lastIndexOfSignature=function(_e){return this.data.lastIndexOf(_e)-this.zero},j.prototype.readAndCheckSignature=function(_e){return _e===this.readData(4)},j.prototype.readData=function(_e){this.checkOffset(_e);var et=this.data.slice(this.zero+this.index,this.zero+this.index+_e);return this.index+=_e,et},b.exports=j},{"../utils":32,"./DataReader":18}],21:[function(g,b,_){var $=g("./ArrayReader");function j(_e){$.call(this,_e)}g("../utils").inherits(j,$),j.prototype.readData=function(_e){if(this.checkOffset(_e),_e===0)return new Uint8Array(0);var et=this.data.subarray(this.zero+this.index,this.zero+this.index+_e);return this.index+=_e,et},b.exports=j},{"../utils":32,"./ArrayReader":17}],22:[function(g,b,_){var $=g("../utils"),j=g("../support"),_e=g("./ArrayReader"),et=g("./StringReader"),rt=g("./NodeBufferReader"),nt=g("./Uint8ArrayReader");b.exports=function(st){var at=$.getTypeOf(st);return $.checkSupport(at),at!=="string"||j.uint8array?at==="nodebuffer"?new rt(st):j.uint8array?new nt($.transformTo("uint8array",st)):new _e($.transformTo("array",st)):new et(st)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(g,b,_){_.LOCAL_FILE_HEADER="PK",_.CENTRAL_FILE_HEADER="PK",_.CENTRAL_DIRECTORY_END="PK",_.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",_.ZIP64_CENTRAL_DIRECTORY_END="PK",_.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(g,b,_){var $=g("./GenericWorker"),j=g("../utils");function _e(et){$.call(this,"ConvertWorker to "+et),this.destType=et}j.inherits(_e,$),_e.prototype.processChunk=function(et){this.push({data:j.transformTo(this.destType,et.data),meta:et.meta})},b.exports=_e},{"../utils":32,"./GenericWorker":28}],25:[function(g,b,_){var $=g("./GenericWorker"),j=g("../crc32");function _e(){$.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}g("../utils").inherits(_e,$),_e.prototype.processChunk=function(et){this.streamInfo.crc32=j(et.data,this.streamInfo.crc32||0),this.push(et)},b.exports=_e},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(g,b,_){var $=g("../utils"),j=g("./GenericWorker");function _e(et){j.call(this,"DataLengthProbe for "+et),this.propName=et,this.withStreamInfo(et,0)}$.inherits(_e,j),_e.prototype.processChunk=function(et){if(et){var rt=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=rt+et.data.length}j.prototype.processChunk.call(this,et)},b.exports=_e},{"../utils":32,"./GenericWorker":28}],27:[function(g,b,_){var $=g("../utils"),j=g("./GenericWorker");function _e(et){j.call(this,"DataWorker");var rt=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,et.then(function(nt){rt.dataIsReady=!0,rt.data=nt,rt.max=nt&&nt.length||0,rt.type=$.getTypeOf(nt),rt.isPaused||rt._tickAndRepeat()},function(nt){rt.error(nt)})}$.inherits(_e,j),_e.prototype.cleanUp=function(){j.prototype.cleanUp.call(this),this.data=null},_e.prototype.resume=function(){return!!j.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,$.delay(this._tickAndRepeat,[],this)),!0)},_e.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||($.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},_e.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var et=null,rt=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":et=this.data.substring(this.index,rt);break;case"uint8array":et=this.data.subarray(this.index,rt);break;case"array":case"nodebuffer":et=this.data.slice(this.index,rt)}return this.index=rt,this.push({data:et,meta:{percent:this.max?this.index/this.max*100:0}})},b.exports=_e},{"../utils":32,"./GenericWorker":28}],28:[function(g,b,_){function $(j){this.name=j||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}$.prototype={push:function(j){this.emit("data",j)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(j){this.emit("error",j)}return!0},error:function(j){return!this.isFinished&&(this.isPaused?this.generatedError=j:(this.isFinished=!0,this.emit("error",j),this.previous&&this.previous.error(j),this.cleanUp()),!0)},on:function(j,_e){return this._listeners[j].push(_e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(j,_e){if(this._listeners[j])for(var et=0;et<this._listeners[j].length;et++)this._listeners[j][et].call(this,_e)},pipe:function(j){return j.registerPrevious(this)},registerPrevious:function(j){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=j.streamInfo,this.mergeStreamInfo(),this.previous=j;var _e=this;return j.on("data",function(et){_e.processChunk(et)}),j.on("end",function(){_e.end()}),j.on("error",function(et){_e.error(et)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var j=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),j=!0),this.previous&&this.previous.resume(),!j},flush:function(){},processChunk:function(j){this.push(j)},withStreamInfo:function(j,_e){return this.extraStreamInfo[j]=_e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var j in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,j)&&(this.streamInfo[j]=this.extraStreamInfo[j])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var j="Worker "+this.name;return this.previous?this.previous+" -> "+j:j}},b.exports=$},{}],29:[function(g,b,_){var $=g("../utils"),j=g("./ConvertWorker"),_e=g("./GenericWorker"),et=g("../base64"),rt=g("../support"),nt=g("../external"),st=null;if(rt.nodestream)try{st=g("../nodejs/NodejsStreamOutputAdapter")}catch{}function at(dt,ot){return new nt.Promise(function(ct,lt){var ut=[],ft=dt._internalType,Et=dt._outputType,Tt=dt._mimeType;dt.on("data",function(St,ht){ut.push(St),ot&&ot(ht)}).on("error",function(St){ut=[],lt(St)}).on("end",function(){try{var St=function(ht,kt,Rt){switch(ht){case"blob":return $.newBlob($.transformTo("arraybuffer",kt),Rt);case"base64":return et.encode(kt);default:return $.transformTo(ht,kt)}}(Et,function(ht,kt){var Rt,Mt=0,Zt=null,Ct=0;for(Rt=0;Rt<kt.length;Rt++)Ct+=kt[Rt].length;switch(ht){case"string":return kt.join("");case"array":return Array.prototype.concat.apply([],kt);case"uint8array":for(Zt=new Uint8Array(Ct),Rt=0;Rt<kt.length;Rt++)Zt.set(kt[Rt],Mt),Mt+=kt[Rt].length;return Zt;case"nodebuffer":return Buffer.concat(kt);default:throw new Error("concat : unsupported type '"+ht+"'")}}(ft,ut),Tt);ct(St)}catch(ht){lt(ht)}ut=[]}).resume()})}function it(dt,ot,ct){var lt=ot;switch(ot){case"blob":case"arraybuffer":lt="uint8array";break;case"base64":lt="string"}try{this._internalType=lt,this._outputType=ot,this._mimeType=ct,$.checkSupport(lt),this._worker=dt.pipe(new j(lt)),dt.lock()}catch(ut){this._worker=new _e("error"),this._worker.error(ut)}}it.prototype={accumulate:function(dt){return at(this,dt)},on:function(dt,ot){var ct=this;return dt==="data"?this._worker.on(dt,function(lt){ot.call(ct,lt.data,lt.meta)}):this._worker.on(dt,function(){$.delay(ot,arguments,ct)}),this},resume:function(){return $.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(dt){if($.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new st(this,{objectMode:this._outputType!=="nodebuffer"},dt)}},b.exports=it},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(g,b,_){if(_.base64=!0,_.array=!0,_.string=!0,_.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",_.nodebuffer=typeof Buffer<"u",_.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")_.blob=!1;else{var $=new ArrayBuffer(0);try{_.blob=new Blob([$],{type:"application/zip"}).size===0}catch{try{var j=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);j.append($),_.blob=j.getBlob("application/zip").size===0}catch{_.blob=!1}}}try{_.nodestream=!!g("readable-stream").Readable}catch{_.nodestream=!1}},{"readable-stream":16}],31:[function(g,b,_){for(var $=g("./utils"),j=g("./support"),_e=g("./nodejsUtils"),et=g("./stream/GenericWorker"),rt=new Array(256),nt=0;nt<256;nt++)rt[nt]=252<=nt?6:248<=nt?5:240<=nt?4:224<=nt?3:192<=nt?2:1;rt[254]=rt[254]=1;function st(){et.call(this,"utf-8 decode"),this.leftOver=null}function at(){et.call(this,"utf-8 encode")}_.utf8encode=function(it){return j.nodebuffer?_e.newBufferFrom(it,"utf-8"):function(dt){var ot,ct,lt,ut,ft,Et=dt.length,Tt=0;for(ut=0;ut<Et;ut++)(64512&(ct=dt.charCodeAt(ut)))==55296&&ut+1<Et&&(64512&(lt=dt.charCodeAt(ut+1)))==56320&&(ct=65536+(ct-55296<<10)+(lt-56320),ut++),Tt+=ct<128?1:ct<2048?2:ct<65536?3:4;for(ot=j.uint8array?new Uint8Array(Tt):new Array(Tt),ut=ft=0;ft<Tt;ut++)(64512&(ct=dt.charCodeAt(ut)))==55296&&ut+1<Et&&(64512&(lt=dt.charCodeAt(ut+1)))==56320&&(ct=65536+(ct-55296<<10)+(lt-56320),ut++),ct<128?ot[ft++]=ct:(ct<2048?ot[ft++]=192|ct>>>6:(ct<65536?ot[ft++]=224|ct>>>12:(ot[ft++]=240|ct>>>18,ot[ft++]=128|ct>>>12&63),ot[ft++]=128|ct>>>6&63),ot[ft++]=128|63&ct);return ot}(it)},_.utf8decode=function(it){return j.nodebuffer?$.transformTo("nodebuffer",it).toString("utf-8"):function(dt){var ot,ct,lt,ut,ft=dt.length,Et=new Array(2*ft);for(ot=ct=0;ot<ft;)if((lt=dt[ot++])<128)Et[ct++]=lt;else if(4<(ut=rt[lt]))Et[ct++]=65533,ot+=ut-1;else{for(lt&=ut===2?31:ut===3?15:7;1<ut&&ot<ft;)lt=lt<<6|63&dt[ot++],ut--;1<ut?Et[ct++]=65533:lt<65536?Et[ct++]=lt:(lt-=65536,Et[ct++]=55296|lt>>10&1023,Et[ct++]=56320|1023&lt)}return Et.length!==ct&&(Et.subarray?Et=Et.subarray(0,ct):Et.length=ct),$.applyFromCharCode(Et)}(it=$.transformTo(j.uint8array?"uint8array":"array",it))},$.inherits(st,et),st.prototype.processChunk=function(it){var dt=$.transformTo(j.uint8array?"uint8array":"array",it.data);if(this.leftOver&&this.leftOver.length){if(j.uint8array){var ot=dt;(dt=new Uint8Array(ot.length+this.leftOver.length)).set(this.leftOver,0),dt.set(ot,this.leftOver.length)}else dt=this.leftOver.concat(dt);this.leftOver=null}var ct=function(ut,ft){var Et;for((ft=ft||ut.length)>ut.length&&(ft=ut.length),Et=ft-1;0<=Et&&(192&ut[Et])==128;)Et--;return Et<0||Et===0?ft:Et+rt[ut[Et]]>ft?Et:ft}(dt),lt=dt;ct!==dt.length&&(j.uint8array?(lt=dt.subarray(0,ct),this.leftOver=dt.subarray(ct,dt.length)):(lt=dt.slice(0,ct),this.leftOver=dt.slice(ct,dt.length))),this.push({data:_.utf8decode(lt),meta:it.meta})},st.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:_.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},_.Utf8DecodeWorker=st,$.inherits(at,et),at.prototype.processChunk=function(it){this.push({data:_.utf8encode(it.data),meta:it.meta})},_.Utf8EncodeWorker=at},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(g,b,_){var $=g("./support"),j=g("./base64"),_e=g("./nodejsUtils"),et=g("./external");function rt(ot){return ot}function nt(ot,ct){for(var lt=0;lt<ot.length;++lt)ct[lt]=255&ot.charCodeAt(lt);return ct}g("setimmediate"),_.newBlob=function(ot,ct){_.checkSupport("blob");try{return new Blob([ot],{type:ct})}catch{try{var lt=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return lt.append(ot),lt.getBlob(ct)}catch{throw new Error("Bug : can't construct the Blob.")}}};var st={stringifyByChunk:function(ot,ct,lt){var ut=[],ft=0,Et=ot.length;if(Et<=lt)return String.fromCharCode.apply(null,ot);for(;ft<Et;)ct==="array"||ct==="nodebuffer"?ut.push(String.fromCharCode.apply(null,ot.slice(ft,Math.min(ft+lt,Et)))):ut.push(String.fromCharCode.apply(null,ot.subarray(ft,Math.min(ft+lt,Et)))),ft+=lt;return ut.join("")},stringifyByChar:function(ot){for(var ct="",lt=0;lt<ot.length;lt++)ct+=String.fromCharCode(ot[lt]);return ct},applyCanBeUsed:{uint8array:function(){try{return $.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return $.nodebuffer&&String.fromCharCode.apply(null,_e.allocBuffer(1)).length===1}catch{return!1}}()}};function at(ot){var ct=65536,lt=_.getTypeOf(ot),ut=!0;if(lt==="uint8array"?ut=st.applyCanBeUsed.uint8array:lt==="nodebuffer"&&(ut=st.applyCanBeUsed.nodebuffer),ut)for(;1<ct;)try{return st.stringifyByChunk(ot,lt,ct)}catch{ct=Math.floor(ct/2)}return st.stringifyByChar(ot)}function it(ot,ct){for(var lt=0;lt<ot.length;lt++)ct[lt]=ot[lt];return ct}_.applyFromCharCode=at;var dt={};dt.string={string:rt,array:function(ot){return nt(ot,new Array(ot.length))},arraybuffer:function(ot){return dt.string.uint8array(ot).buffer},uint8array:function(ot){return nt(ot,new Uint8Array(ot.length))},nodebuffer:function(ot){return nt(ot,_e.allocBuffer(ot.length))}},dt.array={string:at,array:rt,arraybuffer:function(ot){return new Uint8Array(ot).buffer},uint8array:function(ot){return new Uint8Array(ot)},nodebuffer:function(ot){return _e.newBufferFrom(ot)}},dt.arraybuffer={string:function(ot){return at(new Uint8Array(ot))},array:function(ot){return it(new Uint8Array(ot),new Array(ot.byteLength))},arraybuffer:rt,uint8array:function(ot){return new Uint8Array(ot)},nodebuffer:function(ot){return _e.newBufferFrom(new Uint8Array(ot))}},dt.uint8array={string:at,array:function(ot){return it(ot,new Array(ot.length))},arraybuffer:function(ot){return ot.buffer},uint8array:rt,nodebuffer:function(ot){return _e.newBufferFrom(ot)}},dt.nodebuffer={string:at,array:function(ot){return it(ot,new Array(ot.length))},arraybuffer:function(ot){return dt.nodebuffer.uint8array(ot).buffer},uint8array:function(ot){return it(ot,new Uint8Array(ot.length))},nodebuffer:rt},_.transformTo=function(ot,ct){if(ct=ct||"",!ot)return ct;_.checkSupport(ot);var lt=_.getTypeOf(ct);return dt[lt][ot](ct)},_.resolve=function(ot){for(var ct=ot.split("/"),lt=[],ut=0;ut<ct.length;ut++){var ft=ct[ut];ft==="."||ft===""&&ut!==0&&ut!==ct.length-1||(ft===".."?lt.pop():lt.push(ft))}return lt.join("/")},_.getTypeOf=function(ot){return typeof ot=="string"?"string":Object.prototype.toString.call(ot)==="[object Array]"?"array":$.nodebuffer&&_e.isBuffer(ot)?"nodebuffer":$.uint8array&&ot instanceof Uint8Array?"uint8array":$.arraybuffer&&ot instanceof ArrayBuffer?"arraybuffer":void 0},_.checkSupport=function(ot){if(!$[ot.toLowerCase()])throw new Error(ot+" is not supported by this platform")},_.MAX_VALUE_16BITS=65535,_.MAX_VALUE_32BITS=-1,_.pretty=function(ot){var ct,lt,ut="";for(lt=0;lt<(ot||"").length;lt++)ut+="\\x"+((ct=ot.charCodeAt(lt))<16?"0":"")+ct.toString(16).toUpperCase();return ut},_.delay=function(ot,ct,lt){setImmediate(function(){ot.apply(lt||null,ct||[])})},_.inherits=function(ot,ct){function lt(){}lt.prototype=ct.prototype,ot.prototype=new lt},_.extend=function(){var ot,ct,lt={};for(ot=0;ot<arguments.length;ot++)for(ct in arguments[ot])Object.prototype.hasOwnProperty.call(arguments[ot],ct)&&lt[ct]===void 0&&(lt[ct]=arguments[ot][ct]);return lt},_.prepareContent=function(ot,ct,lt,ut,ft){return et.Promise.resolve(ct).then(function(Et){return $.blob&&(Et instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(Et))!==-1)&&typeof FileReader<"u"?new et.Promise(function(Tt,St){var ht=new FileReader;ht.onload=function(kt){Tt(kt.target.result)},ht.onerror=function(kt){St(kt.target.error)},ht.readAsArrayBuffer(Et)}):Et}).then(function(Et){var Tt=_.getTypeOf(Et);return Tt?(Tt==="arraybuffer"?Et=_.transformTo("uint8array",Et):Tt==="string"&&(ft?Et=j.decode(Et):lt&&ut!==!0&&(Et=function(St){return nt(St,$.uint8array?new Uint8Array(St.length):new Array(St.length))}(Et))),Et):et.Promise.reject(new Error("Can't read the data of '"+ot+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(g,b,_){var $=g("./reader/readerFor"),j=g("./utils"),_e=g("./signature"),et=g("./zipEntry"),rt=g("./support");function nt(st){this.files=[],this.loadOptions=st}nt.prototype={checkSignature:function(st){if(!this.reader.readAndCheckSignature(st)){this.reader.index-=4;var at=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+j.pretty(at)+", expected "+j.pretty(st)+")")}},isSignature:function(st,at){var it=this.reader.index;this.reader.setIndex(st);var dt=this.reader.readString(4)===at;return this.reader.setIndex(it),dt},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var st=this.reader.readData(this.zipCommentLength),at=rt.uint8array?"uint8array":"array",it=j.transformTo(at,st);this.zipComment=this.loadOptions.decodeFileName(it)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var st,at,it,dt=this.zip64EndOfCentralSize-44;0<dt;)st=this.reader.readInt(2),at=this.reader.readInt(4),it=this.reader.readData(at),this.zip64ExtensibleData[st]={id:st,length:at,value:it}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var st,at;for(st=0;st<this.files.length;st++)at=this.files[st],this.reader.setIndex(at.localHeaderOffset),this.checkSignature(_e.LOCAL_FILE_HEADER),at.readLocalPart(this.reader),at.handleUTF8(),at.processAttributes()},readCentralDir:function(){var st;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(_e.CENTRAL_FILE_HEADER);)(st=new et({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(st);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var st=this.reader.lastIndexOfSignature(_e.CENTRAL_DIRECTORY_END);if(st<0)throw this.isSignature(0,_e.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(st);var at=st;if(this.checkSignature(_e.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===j.MAX_VALUE_16BITS||this.diskWithCentralDirStart===j.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===j.MAX_VALUE_16BITS||this.centralDirRecords===j.MAX_VALUE_16BITS||this.centralDirSize===j.MAX_VALUE_32BITS||this.centralDirOffset===j.MAX_VALUE_32BITS){if(this.zip64=!0,(st=this.reader.lastIndexOfSignature(_e.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(st),this.checkSignature(_e.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,_e.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(_e.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(_e.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var it=this.centralDirOffset+this.centralDirSize;this.zip64&&(it+=20,it+=12+this.zip64EndOfCentralSize);var dt=at-it;if(0<dt)this.isSignature(at,_e.CENTRAL_FILE_HEADER)||(this.reader.zero=dt);else if(dt<0)throw new Error("Corrupted zip: missing "+Math.abs(dt)+" bytes.")},prepareReader:function(st){this.reader=$(st)},load:function(st){this.prepareReader(st),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},b.exports=nt},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(g,b,_){var $=g("./reader/readerFor"),j=g("./utils"),_e=g("./compressedObject"),et=g("./crc32"),rt=g("./utf8"),nt=g("./compressions"),st=g("./support");function at(it,dt){this.options=it,this.loadOptions=dt}at.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(it){var dt,ot;if(it.skip(22),this.fileNameLength=it.readInt(2),ot=it.readInt(2),this.fileName=it.readData(this.fileNameLength),it.skip(ot),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((dt=function(ct){for(var lt in nt)if(Object.prototype.hasOwnProperty.call(nt,lt)&&nt[lt].magic===ct)return nt[lt];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+j.pretty(this.compressionMethod)+" unknown (inner file : "+j.transformTo("string",this.fileName)+")");this.decompressed=new _e(this.compressedSize,this.uncompressedSize,this.crc32,dt,it.readData(this.compressedSize))},readCentralPart:function(it){this.versionMadeBy=it.readInt(2),it.skip(2),this.bitFlag=it.readInt(2),this.compressionMethod=it.readString(2),this.date=it.readDate(),this.crc32=it.readInt(4),this.compressedSize=it.readInt(4),this.uncompressedSize=it.readInt(4);var dt=it.readInt(2);if(this.extraFieldsLength=it.readInt(2),this.fileCommentLength=it.readInt(2),this.diskNumberStart=it.readInt(2),this.internalFileAttributes=it.readInt(2),this.externalFileAttributes=it.readInt(4),this.localHeaderOffset=it.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");it.skip(dt),this.readExtraFields(it),this.parseZIP64ExtraField(it),this.fileComment=it.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var it=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),it==0&&(this.dosPermissions=63&this.externalFileAttributes),it==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var it=$(this.extraFields[1].value);this.uncompressedSize===j.MAX_VALUE_32BITS&&(this.uncompressedSize=it.readInt(8)),this.compressedSize===j.MAX_VALUE_32BITS&&(this.compressedSize=it.readInt(8)),this.localHeaderOffset===j.MAX_VALUE_32BITS&&(this.localHeaderOffset=it.readInt(8)),this.diskNumberStart===j.MAX_VALUE_32BITS&&(this.diskNumberStart=it.readInt(4))}},readExtraFields:function(it){var dt,ot,ct,lt=it.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});it.index+4<lt;)dt=it.readInt(2),ot=it.readInt(2),ct=it.readData(ot),this.extraFields[dt]={id:dt,length:ot,value:ct};it.setIndex(lt)},handleUTF8:function(){var it=st.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=rt.utf8decode(this.fileName),this.fileCommentStr=rt.utf8decode(this.fileComment);else{var dt=this.findExtraFieldUnicodePath();if(dt!==null)this.fileNameStr=dt;else{var ot=j.transformTo(it,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(ot)}var ct=this.findExtraFieldUnicodeComment();if(ct!==null)this.fileCommentStr=ct;else{var lt=j.transformTo(it,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(lt)}}},findExtraFieldUnicodePath:function(){var it=this.extraFields[28789];if(it){var dt=$(it.value);return dt.readInt(1)!==1||et(this.fileName)!==dt.readInt(4)?null:rt.utf8decode(dt.readData(it.length-5))}return null},findExtraFieldUnicodeComment:function(){var it=this.extraFields[25461];if(it){var dt=$(it.value);return dt.readInt(1)!==1||et(this.fileComment)!==dt.readInt(4)?null:rt.utf8decode(dt.readData(it.length-5))}return null}},b.exports=at},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(g,b,_){function $(dt,ot,ct){this.name=dt,this.dir=ct.dir,this.date=ct.date,this.comment=ct.comment,this.unixPermissions=ct.unixPermissions,this.dosPermissions=ct.dosPermissions,this._data=ot,this._dataBinary=ct.binary,this.options={compression:ct.compression,compressionOptions:ct.compressionOptions}}var j=g("./stream/StreamHelper"),_e=g("./stream/DataWorker"),et=g("./utf8"),rt=g("./compressedObject"),nt=g("./stream/GenericWorker");$.prototype={internalStream:function(dt){var ot=null,ct="string";try{if(!dt)throw new Error("No output type specified.");var lt=(ct=dt.toLowerCase())==="string"||ct==="text";ct!=="binarystring"&&ct!=="text"||(ct="string"),ot=this._decompressWorker();var ut=!this._dataBinary;ut&&!lt&&(ot=ot.pipe(new et.Utf8EncodeWorker)),!ut&&lt&&(ot=ot.pipe(new et.Utf8DecodeWorker))}catch(ft){(ot=new nt("error")).error(ft)}return new j(ot,ct,"")},async:function(dt,ot){return this.internalStream(dt).accumulate(ot)},nodeStream:function(dt,ot){return this.internalStream(dt||"nodebuffer").toNodejsStream(ot)},_compressWorker:function(dt,ot){if(this._data instanceof rt&&this._data.compression.magic===dt.magic)return this._data.getCompressedWorker();var ct=this._decompressWorker();return this._dataBinary||(ct=ct.pipe(new et.Utf8EncodeWorker)),rt.createWorkerFrom(ct,dt,ot)},_decompressWorker:function(){return this._data instanceof rt?this._data.getContentWorker():this._data instanceof nt?this._data:new _e(this._data)}};for(var st=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],at=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},it=0;it<st.length;it++)$.prototype[st[it]]=at;b.exports=$},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(g,b,_){(function($){var j,_e,et=$.MutationObserver||$.WebKitMutationObserver;if(et){var rt=0,nt=new et(dt),st=$.document.createTextNode("");nt.observe(st,{characterData:!0}),j=function(){st.data=rt=++rt%2}}else if($.setImmediate||$.MessageChannel===void 0)j="document"in $&&"onreadystatechange"in $.document.createElement("script")?function(){var ot=$.document.createElement("script");ot.onreadystatechange=function(){dt(),ot.onreadystatechange=null,ot.parentNode.removeChild(ot),ot=null},$.document.documentElement.appendChild(ot)}:function(){setTimeout(dt,0)};else{var at=new $.MessageChannel;at.port1.onmessage=dt,j=function(){at.port2.postMessage(0)}}var it=[];function dt(){var ot,ct;_e=!0;for(var lt=it.length;lt;){for(ct=it,it=[],ot=-1;++ot<lt;)ct[ot]();lt=it.length}_e=!1}b.exports=function(ot){it.push(ot)!==1||_e||j()}}).call(this,typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(g,b,_){var $=g("immediate");function j(){}var _e={},et=["REJECTED"],rt=["FULFILLED"],nt=["PENDING"];function st(lt){if(typeof lt!="function")throw new TypeError("resolver must be a function");this.state=nt,this.queue=[],this.outcome=void 0,lt!==j&&ot(this,lt)}function at(lt,ut,ft){this.promise=lt,typeof ut=="function"&&(this.onFulfilled=ut,this.callFulfilled=this.otherCallFulfilled),typeof ft=="function"&&(this.onRejected=ft,this.callRejected=this.otherCallRejected)}function it(lt,ut,ft){$(function(){var Et;try{Et=ut(ft)}catch(Tt){return _e.reject(lt,Tt)}Et===lt?_e.reject(lt,new TypeError("Cannot resolve promise with itself")):_e.resolve(lt,Et)})}function dt(lt){var ut=lt&&lt.then;if(lt&&(typeof lt=="object"||typeof lt=="function")&&typeof ut=="function")return function(){ut.apply(lt,arguments)}}function ot(lt,ut){var ft=!1;function Et(ht){ft||(ft=!0,_e.reject(lt,ht))}function Tt(ht){ft||(ft=!0,_e.resolve(lt,ht))}var St=ct(function(){ut(Tt,Et)});St.status==="error"&&Et(St.value)}function ct(lt,ut){var ft={};try{ft.value=lt(ut),ft.status="success"}catch(Et){ft.status="error",ft.value=Et}return ft}(b.exports=st).prototype.finally=function(lt){if(typeof lt!="function")return this;var ut=this.constructor;return this.then(function(ft){return ut.resolve(lt()).then(function(){return ft})},function(ft){return ut.resolve(lt()).then(function(){throw ft})})},st.prototype.catch=function(lt){return this.then(null,lt)},st.prototype.then=function(lt,ut){if(typeof lt!="function"&&this.state===rt||typeof ut!="function"&&this.state===et)return this;var ft=new this.constructor(j);return this.state!==nt?it(ft,this.state===rt?lt:ut,this.outcome):this.queue.push(new at(ft,lt,ut)),ft},at.prototype.callFulfilled=function(lt){_e.resolve(this.promise,lt)},at.prototype.otherCallFulfilled=function(lt){it(this.promise,this.onFulfilled,lt)},at.prototype.callRejected=function(lt){_e.reject(this.promise,lt)},at.prototype.otherCallRejected=function(lt){it(this.promise,this.onRejected,lt)},_e.resolve=function(lt,ut){var ft=ct(dt,ut);if(ft.status==="error")return _e.reject(lt,ft.value);var Et=ft.value;if(Et)ot(lt,Et);else{lt.state=rt,lt.outcome=ut;for(var Tt=-1,St=lt.queue.length;++Tt<St;)lt.queue[Tt].callFulfilled(ut)}return lt},_e.reject=function(lt,ut){lt.state=et,lt.outcome=ut;for(var ft=-1,Et=lt.queue.length;++ft<Et;)lt.queue[ft].callRejected(ut);return lt},st.resolve=function(lt){return lt instanceof this?lt:_e.resolve(new this(j),lt)},st.reject=function(lt){var ut=new this(j);return _e.reject(ut,lt)},st.all=function(lt){var ut=this;if(Object.prototype.toString.call(lt)!=="[object Array]")return this.reject(new TypeError("must be an array"));var ft=lt.length,Et=!1;if(!ft)return this.resolve([]);for(var Tt=new Array(ft),St=0,ht=-1,kt=new this(j);++ht<ft;)Rt(lt[ht],ht);return kt;function Rt(Mt,Zt){ut.resolve(Mt).then(function(Ct){Tt[Zt]=Ct,++St!==ft||Et||(Et=!0,_e.resolve(kt,Tt))},function(Ct){Et||(Et=!0,_e.reject(kt,Ct))})}},st.race=function(lt){var ut=this;if(Object.prototype.toString.call(lt)!=="[object Array]")return this.reject(new TypeError("must be an array"));var ft=lt.length,Et=!1;if(!ft)return this.resolve([]);for(var Tt=-1,St=new this(j);++Tt<ft;)ht=lt[Tt],ut.resolve(ht).then(function(kt){Et||(Et=!0,_e.resolve(St,kt))},function(kt){Et||(Et=!0,_e.reject(St,kt))});var ht;return St}},{immediate:36}],38:[function(g,b,_){var $={};(0,g("./lib/utils/common").assign)($,g("./lib/deflate"),g("./lib/inflate"),g("./lib/zlib/constants")),b.exports=$},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(g,b,_){var $=g("./zlib/deflate"),j=g("./utils/common"),_e=g("./utils/strings"),et=g("./zlib/messages"),rt=g("./zlib/zstream"),nt=Object.prototype.toString,st=0,at=-1,it=0,dt=8;function ot(lt){if(!(this instanceof ot))return new ot(lt);this.options=j.assign({level:at,method:dt,chunkSize:16384,windowBits:15,memLevel:8,strategy:it,to:""},lt||{});var ut=this.options;ut.raw&&0<ut.windowBits?ut.windowBits=-ut.windowBits:ut.gzip&&0<ut.windowBits&&ut.windowBits<16&&(ut.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new rt,this.strm.avail_out=0;var ft=$.deflateInit2(this.strm,ut.level,ut.method,ut.windowBits,ut.memLevel,ut.strategy);if(ft!==st)throw new Error(et[ft]);if(ut.header&&$.deflateSetHeader(this.strm,ut.header),ut.dictionary){var Et;if(Et=typeof ut.dictionary=="string"?_e.string2buf(ut.dictionary):nt.call(ut.dictionary)==="[object ArrayBuffer]"?new Uint8Array(ut.dictionary):ut.dictionary,(ft=$.deflateSetDictionary(this.strm,Et))!==st)throw new Error(et[ft]);this._dict_set=!0}}function ct(lt,ut){var ft=new ot(ut);if(ft.push(lt,!0),ft.err)throw ft.msg||et[ft.err];return ft.result}ot.prototype.push=function(lt,ut){var ft,Et,Tt=this.strm,St=this.options.chunkSize;if(this.ended)return!1;Et=ut===~~ut?ut:ut===!0?4:0,typeof lt=="string"?Tt.input=_e.string2buf(lt):nt.call(lt)==="[object ArrayBuffer]"?Tt.input=new Uint8Array(lt):Tt.input=lt,Tt.next_in=0,Tt.avail_in=Tt.input.length;do{if(Tt.avail_out===0&&(Tt.output=new j.Buf8(St),Tt.next_out=0,Tt.avail_out=St),(ft=$.deflate(Tt,Et))!==1&&ft!==st)return this.onEnd(ft),!(this.ended=!0);Tt.avail_out!==0&&(Tt.avail_in!==0||Et!==4&&Et!==2)||(this.options.to==="string"?this.onData(_e.buf2binstring(j.shrinkBuf(Tt.output,Tt.next_out))):this.onData(j.shrinkBuf(Tt.output,Tt.next_out)))}while((0<Tt.avail_in||Tt.avail_out===0)&&ft!==1);return Et===4?(ft=$.deflateEnd(this.strm),this.onEnd(ft),this.ended=!0,ft===st):Et!==2||(this.onEnd(st),!(Tt.avail_out=0))},ot.prototype.onData=function(lt){this.chunks.push(lt)},ot.prototype.onEnd=function(lt){lt===st&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=j.flattenChunks(this.chunks)),this.chunks=[],this.err=lt,this.msg=this.strm.msg},_.Deflate=ot,_.deflate=ct,_.deflateRaw=function(lt,ut){return(ut=ut||{}).raw=!0,ct(lt,ut)},_.gzip=function(lt,ut){return(ut=ut||{}).gzip=!0,ct(lt,ut)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(g,b,_){var $=g("./zlib/inflate"),j=g("./utils/common"),_e=g("./utils/strings"),et=g("./zlib/constants"),rt=g("./zlib/messages"),nt=g("./zlib/zstream"),st=g("./zlib/gzheader"),at=Object.prototype.toString;function it(ot){if(!(this instanceof it))return new it(ot);this.options=j.assign({chunkSize:16384,windowBits:0,to:""},ot||{});var ct=this.options;ct.raw&&0<=ct.windowBits&&ct.windowBits<16&&(ct.windowBits=-ct.windowBits,ct.windowBits===0&&(ct.windowBits=-15)),!(0<=ct.windowBits&&ct.windowBits<16)||ot&&ot.windowBits||(ct.windowBits+=32),15<ct.windowBits&&ct.windowBits<48&&!(15&ct.windowBits)&&(ct.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new nt,this.strm.avail_out=0;var lt=$.inflateInit2(this.strm,ct.windowBits);if(lt!==et.Z_OK)throw new Error(rt[lt]);this.header=new st,$.inflateGetHeader(this.strm,this.header)}function dt(ot,ct){var lt=new it(ct);if(lt.push(ot,!0),lt.err)throw lt.msg||rt[lt.err];return lt.result}it.prototype.push=function(ot,ct){var lt,ut,ft,Et,Tt,St,ht=this.strm,kt=this.options.chunkSize,Rt=this.options.dictionary,Mt=!1;if(this.ended)return!1;ut=ct===~~ct?ct:ct===!0?et.Z_FINISH:et.Z_NO_FLUSH,typeof ot=="string"?ht.input=_e.binstring2buf(ot):at.call(ot)==="[object ArrayBuffer]"?ht.input=new Uint8Array(ot):ht.input=ot,ht.next_in=0,ht.avail_in=ht.input.length;do{if(ht.avail_out===0&&(ht.output=new j.Buf8(kt),ht.next_out=0,ht.avail_out=kt),(lt=$.inflate(ht,et.Z_NO_FLUSH))===et.Z_NEED_DICT&&Rt&&(St=typeof Rt=="string"?_e.string2buf(Rt):at.call(Rt)==="[object ArrayBuffer]"?new Uint8Array(Rt):Rt,lt=$.inflateSetDictionary(this.strm,St)),lt===et.Z_BUF_ERROR&&Mt===!0&&(lt=et.Z_OK,Mt=!1),lt!==et.Z_STREAM_END&&lt!==et.Z_OK)return this.onEnd(lt),!(this.ended=!0);ht.next_out&&(ht.avail_out!==0&&lt!==et.Z_STREAM_END&&(ht.avail_in!==0||ut!==et.Z_FINISH&&ut!==et.Z_SYNC_FLUSH)||(this.options.to==="string"?(ft=_e.utf8border(ht.output,ht.next_out),Et=ht.next_out-ft,Tt=_e.buf2string(ht.output,ft),ht.next_out=Et,ht.avail_out=kt-Et,Et&&j.arraySet(ht.output,ht.output,ft,Et,0),this.onData(Tt)):this.onData(j.shrinkBuf(ht.output,ht.next_out)))),ht.avail_in===0&&ht.avail_out===0&&(Mt=!0)}while((0<ht.avail_in||ht.avail_out===0)&&lt!==et.Z_STREAM_END);return lt===et.Z_STREAM_END&&(ut=et.Z_FINISH),ut===et.Z_FINISH?(lt=$.inflateEnd(this.strm),this.onEnd(lt),this.ended=!0,lt===et.Z_OK):ut!==et.Z_SYNC_FLUSH||(this.onEnd(et.Z_OK),!(ht.avail_out=0))},it.prototype.onData=function(ot){this.chunks.push(ot)},it.prototype.onEnd=function(ot){ot===et.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=j.flattenChunks(this.chunks)),this.chunks=[],this.err=ot,this.msg=this.strm.msg},_.Inflate=it,_.inflate=dt,_.inflateRaw=function(ot,ct){return(ct=ct||{}).raw=!0,dt(ot,ct)},_.ungzip=dt},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(g,b,_){var $=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";_.assign=function(et){for(var rt=Array.prototype.slice.call(arguments,1);rt.length;){var nt=rt.shift();if(nt){if(typeof nt!="object")throw new TypeError(nt+"must be non-object");for(var st in nt)nt.hasOwnProperty(st)&&(et[st]=nt[st])}}return et},_.shrinkBuf=function(et,rt){return et.length===rt?et:et.subarray?et.subarray(0,rt):(et.length=rt,et)};var j={arraySet:function(et,rt,nt,st,at){if(rt.subarray&&et.subarray)et.set(rt.subarray(nt,nt+st),at);else for(var it=0;it<st;it++)et[at+it]=rt[nt+it]},flattenChunks:function(et){var rt,nt,st,at,it,dt;for(rt=st=0,nt=et.length;rt<nt;rt++)st+=et[rt].length;for(dt=new Uint8Array(st),rt=at=0,nt=et.length;rt<nt;rt++)it=et[rt],dt.set(it,at),at+=it.length;return dt}},_e={arraySet:function(et,rt,nt,st,at){for(var it=0;it<st;it++)et[at+it]=rt[nt+it]},flattenChunks:function(et){return[].concat.apply([],et)}};_.setTyped=function(et){et?(_.Buf8=Uint8Array,_.Buf16=Uint16Array,_.Buf32=Int32Array,_.assign(_,j)):(_.Buf8=Array,_.Buf16=Array,_.Buf32=Array,_.assign(_,_e))},_.setTyped($)},{}],42:[function(g,b,_){var $=g("./common"),j=!0,_e=!0;try{String.fromCharCode.apply(null,[0])}catch{j=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{_e=!1}for(var et=new $.Buf8(256),rt=0;rt<256;rt++)et[rt]=252<=rt?6:248<=rt?5:240<=rt?4:224<=rt?3:192<=rt?2:1;function nt(st,at){if(at<65537&&(st.subarray&&_e||!st.subarray&&j))return String.fromCharCode.apply(null,$.shrinkBuf(st,at));for(var it="",dt=0;dt<at;dt++)it+=String.fromCharCode(st[dt]);return it}et[254]=et[254]=1,_.string2buf=function(st){var at,it,dt,ot,ct,lt=st.length,ut=0;for(ot=0;ot<lt;ot++)(64512&(it=st.charCodeAt(ot)))==55296&&ot+1<lt&&(64512&(dt=st.charCodeAt(ot+1)))==56320&&(it=65536+(it-55296<<10)+(dt-56320),ot++),ut+=it<128?1:it<2048?2:it<65536?3:4;for(at=new $.Buf8(ut),ot=ct=0;ct<ut;ot++)(64512&(it=st.charCodeAt(ot)))==55296&&ot+1<lt&&(64512&(dt=st.charCodeAt(ot+1)))==56320&&(it=65536+(it-55296<<10)+(dt-56320),ot++),it<128?at[ct++]=it:(it<2048?at[ct++]=192|it>>>6:(it<65536?at[ct++]=224|it>>>12:(at[ct++]=240|it>>>18,at[ct++]=128|it>>>12&63),at[ct++]=128|it>>>6&63),at[ct++]=128|63&it);return at},_.buf2binstring=function(st){return nt(st,st.length)},_.binstring2buf=function(st){for(var at=new $.Buf8(st.length),it=0,dt=at.length;it<dt;it++)at[it]=st.charCodeAt(it);return at},_.buf2string=function(st,at){var it,dt,ot,ct,lt=at||st.length,ut=new Array(2*lt);for(it=dt=0;it<lt;)if((ot=st[it++])<128)ut[dt++]=ot;else if(4<(ct=et[ot]))ut[dt++]=65533,it+=ct-1;else{for(ot&=ct===2?31:ct===3?15:7;1<ct&&it<lt;)ot=ot<<6|63&st[it++],ct--;1<ct?ut[dt++]=65533:ot<65536?ut[dt++]=ot:(ot-=65536,ut[dt++]=55296|ot>>10&1023,ut[dt++]=56320|1023&ot)}return nt(ut,dt)},_.utf8border=function(st,at){var it;for((at=at||st.length)>st.length&&(at=st.length),it=at-1;0<=it&&(192&st[it])==128;)it--;return it<0||it===0?at:it+et[st[it]]>at?it:at}},{"./common":41}],43:[function(g,b,_){b.exports=function($,j,_e,et){for(var rt=65535&$|0,nt=$>>>16&65535|0,st=0;_e!==0;){for(_e-=st=2e3<_e?2e3:_e;nt=nt+(rt=rt+j[et++]|0)|0,--st;);rt%=65521,nt%=65521}return rt|nt<<16|0}},{}],44:[function(g,b,_){b.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(g,b,_){var $=function(){for(var j,_e=[],et=0;et<256;et++){j=et;for(var rt=0;rt<8;rt++)j=1&j?3988292384^j>>>1:j>>>1;_e[et]=j}return _e}();b.exports=function(j,_e,et,rt){var nt=$,st=rt+et;j^=-1;for(var at=rt;at<st;at++)j=j>>>8^nt[255&(j^_e[at])];return-1^j}},{}],46:[function(g,b,_){var $,j=g("../utils/common"),_e=g("./trees"),et=g("./adler32"),rt=g("./crc32"),nt=g("./messages"),st=0,at=4,it=0,dt=-2,ot=-1,ct=4,lt=2,ut=8,ft=9,Et=286,Tt=30,St=19,ht=2*Et+1,kt=15,Rt=3,Mt=258,Zt=Mt+Rt+1,Ct=42,Pt=113,xt=1,Ht=2,tr=3,er=4;function Kt(mt,Vt){return mt.msg=nt[Vt],Vt}function Bt(mt){return(mt<<1)-(4<mt?9:0)}function nr(mt){for(var Vt=mt.length;0<=--Vt;)mt[Vt]=0}function Ut(mt){var Vt=mt.state,Qt=Vt.pending;Qt>mt.avail_out&&(Qt=mt.avail_out),Qt!==0&&(j.arraySet(mt.output,Vt.pending_buf,Vt.pending_out,Qt,mt.next_out),mt.next_out+=Qt,Vt.pending_out+=Qt,mt.total_out+=Qt,mt.avail_out-=Qt,Vt.pending-=Qt,Vt.pending===0&&(Vt.pending_out=0))}function zt(mt,Vt){_e._tr_flush_block(mt,0<=mt.block_start?mt.block_start:-1,mt.strstart-mt.block_start,Vt),mt.block_start=mt.strstart,Ut(mt.strm)}function sr(mt,Vt){mt.pending_buf[mt.pending++]=Vt}function or(mt,Vt){mt.pending_buf[mt.pending++]=Vt>>>8&255,mt.pending_buf[mt.pending++]=255&Vt}function ur(mt,Vt){var Qt,It,Nt=mt.max_chain_length,qt=mt.strstart,ar=mt.prev_length,lr=mt.nice_match,Gt=mt.strstart>mt.w_size-Zt?mt.strstart-(mt.w_size-Zt):0,dr=mt.window,mr=mt.w_mask,fr=mt.prev,gr=mt.strstart+Mt,At=dr[qt+ar-1],pt=dr[qt+ar];mt.prev_length>=mt.good_match&&(Nt>>=2),lr>mt.lookahead&&(lr=mt.lookahead);do if(dr[(Qt=Vt)+ar]===pt&&dr[Qt+ar-1]===At&&dr[Qt]===dr[qt]&&dr[++Qt]===dr[qt+1]){qt+=2,Qt++;do;while(dr[++qt]===dr[++Qt]&&dr[++qt]===dr[++Qt]&&dr[++qt]===dr[++Qt]&&dr[++qt]===dr[++Qt]&&dr[++qt]===dr[++Qt]&&dr[++qt]===dr[++Qt]&&dr[++qt]===dr[++Qt]&&dr[++qt]===dr[++Qt]&&qt<gr);if(It=Mt-(gr-qt),qt=gr-Mt,ar<It){if(mt.match_start=Vt,lr<=(ar=It))break;At=dr[qt+ar-1],pt=dr[qt+ar]}}while((Vt=fr[Vt&mr])>Gt&&--Nt!=0);return ar<=mt.lookahead?ar:mt.lookahead}function _r(mt){var Vt,Qt,It,Nt,qt,ar,lr,Gt,dr,mr,fr=mt.w_size;do{if(Nt=mt.window_size-mt.lookahead-mt.strstart,mt.strstart>=fr+(fr-Zt)){for(j.arraySet(mt.window,mt.window,fr,fr,0),mt.match_start-=fr,mt.strstart-=fr,mt.block_start-=fr,Vt=Qt=mt.hash_size;It=mt.head[--Vt],mt.head[Vt]=fr<=It?It-fr:0,--Qt;);for(Vt=Qt=fr;It=mt.prev[--Vt],mt.prev[Vt]=fr<=It?It-fr:0,--Qt;);Nt+=fr}if(mt.strm.avail_in===0)break;if(ar=mt.strm,lr=mt.window,Gt=mt.strstart+mt.lookahead,dr=Nt,mr=void 0,mr=ar.avail_in,dr<mr&&(mr=dr),Qt=mr===0?0:(ar.avail_in-=mr,j.arraySet(lr,ar.input,ar.next_in,mr,Gt),ar.state.wrap===1?ar.adler=et(ar.adler,lr,mr,Gt):ar.state.wrap===2&&(ar.adler=rt(ar.adler,lr,mr,Gt)),ar.next_in+=mr,ar.total_in+=mr,mr),mt.lookahead+=Qt,mt.lookahead+mt.insert>=Rt)for(qt=mt.strstart-mt.insert,mt.ins_h=mt.window[qt],mt.ins_h=(mt.ins_h<<mt.hash_shift^mt.window[qt+1])&mt.hash_mask;mt.insert&&(mt.ins_h=(mt.ins_h<<mt.hash_shift^mt.window[qt+Rt-1])&mt.hash_mask,mt.prev[qt&mt.w_mask]=mt.head[mt.ins_h],mt.head[mt.ins_h]=qt,qt++,mt.insert--,!(mt.lookahead+mt.insert<Rt)););}while(mt.lookahead<Zt&&mt.strm.avail_in!==0)}function vr(mt,Vt){for(var Qt,It;;){if(mt.lookahead<Zt){if(_r(mt),mt.lookahead<Zt&&Vt===st)return xt;if(mt.lookahead===0)break}if(Qt=0,mt.lookahead>=Rt&&(mt.ins_h=(mt.ins_h<<mt.hash_shift^mt.window[mt.strstart+Rt-1])&mt.hash_mask,Qt=mt.prev[mt.strstart&mt.w_mask]=mt.head[mt.ins_h],mt.head[mt.ins_h]=mt.strstart),Qt!==0&&mt.strstart-Qt<=mt.w_size-Zt&&(mt.match_length=ur(mt,Qt)),mt.match_length>=Rt)if(It=_e._tr_tally(mt,mt.strstart-mt.match_start,mt.match_length-Rt),mt.lookahead-=mt.match_length,mt.match_length<=mt.max_lazy_match&&mt.lookahead>=Rt){for(mt.match_length--;mt.strstart++,mt.ins_h=(mt.ins_h<<mt.hash_shift^mt.window[mt.strstart+Rt-1])&mt.hash_mask,Qt=mt.prev[mt.strstart&mt.w_mask]=mt.head[mt.ins_h],mt.head[mt.ins_h]=mt.strstart,--mt.match_length!=0;);mt.strstart++}else mt.strstart+=mt.match_length,mt.match_length=0,mt.ins_h=mt.window[mt.strstart],mt.ins_h=(mt.ins_h<<mt.hash_shift^mt.window[mt.strstart+1])&mt.hash_mask;else It=_e._tr_tally(mt,0,mt.window[mt.strstart]),mt.lookahead--,mt.strstart++;if(It&&(zt(mt,!1),mt.strm.avail_out===0))return xt}return mt.insert=mt.strstart<Rt-1?mt.strstart:Rt-1,Vt===at?(zt(mt,!0),mt.strm.avail_out===0?tr:er):mt.last_lit&&(zt(mt,!1),mt.strm.avail_out===0)?xt:Ht}function br(mt,Vt){for(var Qt,It,Nt;;){if(mt.lookahead<Zt){if(_r(mt),mt.lookahead<Zt&&Vt===st)return xt;if(mt.lookahead===0)break}if(Qt=0,mt.lookahead>=Rt&&(mt.ins_h=(mt.ins_h<<mt.hash_shift^mt.window[mt.strstart+Rt-1])&mt.hash_mask,Qt=mt.prev[mt.strstart&mt.w_mask]=mt.head[mt.ins_h],mt.head[mt.ins_h]=mt.strstart),mt.prev_length=mt.match_length,mt.prev_match=mt.match_start,mt.match_length=Rt-1,Qt!==0&&mt.prev_length<mt.max_lazy_match&&mt.strstart-Qt<=mt.w_size-Zt&&(mt.match_length=ur(mt,Qt),mt.match_length<=5&&(mt.strategy===1||mt.match_length===Rt&&4096<mt.strstart-mt.match_start)&&(mt.match_length=Rt-1)),mt.prev_length>=Rt&&mt.match_length<=mt.prev_length){for(Nt=mt.strstart+mt.lookahead-Rt,It=_e._tr_tally(mt,mt.strstart-1-mt.prev_match,mt.prev_length-Rt),mt.lookahead-=mt.prev_length-1,mt.prev_length-=2;++mt.strstart<=Nt&&(mt.ins_h=(mt.ins_h<<mt.hash_shift^mt.window[mt.strstart+Rt-1])&mt.hash_mask,Qt=mt.prev[mt.strstart&mt.w_mask]=mt.head[mt.ins_h],mt.head[mt.ins_h]=mt.strstart),--mt.prev_length!=0;);if(mt.match_available=0,mt.match_length=Rt-1,mt.strstart++,It&&(zt(mt,!1),mt.strm.avail_out===0))return xt}else if(mt.match_available){if((It=_e._tr_tally(mt,0,mt.window[mt.strstart-1]))&&zt(mt,!1),mt.strstart++,mt.lookahead--,mt.strm.avail_out===0)return xt}else mt.match_available=1,mt.strstart++,mt.lookahead--}return mt.match_available&&(It=_e._tr_tally(mt,0,mt.window[mt.strstart-1]),mt.match_available=0),mt.insert=mt.strstart<Rt-1?mt.strstart:Rt-1,Vt===at?(zt(mt,!0),mt.strm.avail_out===0?tr:er):mt.last_lit&&(zt(mt,!1),mt.strm.avail_out===0)?xt:Ht}function Er(mt,Vt,Qt,It,Nt){this.good_length=mt,this.max_lazy=Vt,this.nice_length=Qt,this.max_chain=It,this.func=Nt}function Cr(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ut,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new j.Buf16(2*ht),this.dyn_dtree=new j.Buf16(2*(2*Tt+1)),this.bl_tree=new j.Buf16(2*(2*St+1)),nr(this.dyn_ltree),nr(this.dyn_dtree),nr(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new j.Buf16(kt+1),this.heap=new j.Buf16(2*Et+1),nr(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new j.Buf16(2*Et+1),nr(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function kr(mt){var Vt;return mt&&mt.state?(mt.total_in=mt.total_out=0,mt.data_type=lt,(Vt=mt.state).pending=0,Vt.pending_out=0,Vt.wrap<0&&(Vt.wrap=-Vt.wrap),Vt.status=Vt.wrap?Ct:Pt,mt.adler=Vt.wrap===2?0:1,Vt.last_flush=st,_e._tr_init(Vt),it):Kt(mt,dt)}function Or(mt){var Vt=kr(mt);return Vt===it&&function(Qt){Qt.window_size=2*Qt.w_size,nr(Qt.head),Qt.max_lazy_match=$[Qt.level].max_lazy,Qt.good_match=$[Qt.level].good_length,Qt.nice_match=$[Qt.level].nice_length,Qt.max_chain_length=$[Qt.level].max_chain,Qt.strstart=0,Qt.block_start=0,Qt.lookahead=0,Qt.insert=0,Qt.match_length=Qt.prev_length=Rt-1,Qt.match_available=0,Qt.ins_h=0}(mt.state),Vt}function Jt(mt,Vt,Qt,It,Nt,qt){if(!mt)return dt;var ar=1;if(Vt===ot&&(Vt=6),It<0?(ar=0,It=-It):15<It&&(ar=2,It-=16),Nt<1||ft<Nt||Qt!==ut||It<8||15<It||Vt<0||9<Vt||qt<0||ct<qt)return Kt(mt,dt);It===8&&(It=9);var lr=new Cr;return(mt.state=lr).strm=mt,lr.wrap=ar,lr.gzhead=null,lr.w_bits=It,lr.w_size=1<<lr.w_bits,lr.w_mask=lr.w_size-1,lr.hash_bits=Nt+7,lr.hash_size=1<<lr.hash_bits,lr.hash_mask=lr.hash_size-1,lr.hash_shift=~~((lr.hash_bits+Rt-1)/Rt),lr.window=new j.Buf8(2*lr.w_size),lr.head=new j.Buf16(lr.hash_size),lr.prev=new j.Buf16(lr.w_size),lr.lit_bufsize=1<<Nt+6,lr.pending_buf_size=4*lr.lit_bufsize,lr.pending_buf=new j.Buf8(lr.pending_buf_size),lr.d_buf=1*lr.lit_bufsize,lr.l_buf=3*lr.lit_bufsize,lr.level=Vt,lr.strategy=qt,lr.method=Qt,Or(mt)}$=[new Er(0,0,0,0,function(mt,Vt){var Qt=65535;for(Qt>mt.pending_buf_size-5&&(Qt=mt.pending_buf_size-5);;){if(mt.lookahead<=1){if(_r(mt),mt.lookahead===0&&Vt===st)return xt;if(mt.lookahead===0)break}mt.strstart+=mt.lookahead,mt.lookahead=0;var It=mt.block_start+Qt;if((mt.strstart===0||mt.strstart>=It)&&(mt.lookahead=mt.strstart-It,mt.strstart=It,zt(mt,!1),mt.strm.avail_out===0)||mt.strstart-mt.block_start>=mt.w_size-Zt&&(zt(mt,!1),mt.strm.avail_out===0))return xt}return mt.insert=0,Vt===at?(zt(mt,!0),mt.strm.avail_out===0?tr:er):(mt.strstart>mt.block_start&&(zt(mt,!1),mt.strm.avail_out),xt)}),new Er(4,4,8,4,vr),new Er(4,5,16,8,vr),new Er(4,6,32,32,vr),new Er(4,4,16,16,br),new Er(8,16,32,32,br),new Er(8,16,128,128,br),new Er(8,32,128,256,br),new Er(32,128,258,1024,br),new Er(32,258,258,4096,br)],_.deflateInit=function(mt,Vt){return Jt(mt,Vt,ut,15,8,0)},_.deflateInit2=Jt,_.deflateReset=Or,_.deflateResetKeep=kr,_.deflateSetHeader=function(mt,Vt){return mt&&mt.state?mt.state.wrap!==2?dt:(mt.state.gzhead=Vt,it):dt},_.deflate=function(mt,Vt){var Qt,It,Nt,qt;if(!mt||!mt.state||5<Vt||Vt<0)return mt?Kt(mt,dt):dt;if(It=mt.state,!mt.output||!mt.input&&mt.avail_in!==0||It.status===666&&Vt!==at)return Kt(mt,mt.avail_out===0?-5:dt);if(It.strm=mt,Qt=It.last_flush,It.last_flush=Vt,It.status===Ct)if(It.wrap===2)mt.adler=0,sr(It,31),sr(It,139),sr(It,8),It.gzhead?(sr(It,(It.gzhead.text?1:0)+(It.gzhead.hcrc?2:0)+(It.gzhead.extra?4:0)+(It.gzhead.name?8:0)+(It.gzhead.comment?16:0)),sr(It,255&It.gzhead.time),sr(It,It.gzhead.time>>8&255),sr(It,It.gzhead.time>>16&255),sr(It,It.gzhead.time>>24&255),sr(It,It.level===9?2:2<=It.strategy||It.level<2?4:0),sr(It,255&It.gzhead.os),It.gzhead.extra&&It.gzhead.extra.length&&(sr(It,255&It.gzhead.extra.length),sr(It,It.gzhead.extra.length>>8&255)),It.gzhead.hcrc&&(mt.adler=rt(mt.adler,It.pending_buf,It.pending,0)),It.gzindex=0,It.status=69):(sr(It,0),sr(It,0),sr(It,0),sr(It,0),sr(It,0),sr(It,It.level===9?2:2<=It.strategy||It.level<2?4:0),sr(It,3),It.status=Pt);else{var ar=ut+(It.w_bits-8<<4)<<8;ar|=(2<=It.strategy||It.level<2?0:It.level<6?1:It.level===6?2:3)<<6,It.strstart!==0&&(ar|=32),ar+=31-ar%31,It.status=Pt,or(It,ar),It.strstart!==0&&(or(It,mt.adler>>>16),or(It,65535&mt.adler)),mt.adler=1}if(It.status===69)if(It.gzhead.extra){for(Nt=It.pending;It.gzindex<(65535&It.gzhead.extra.length)&&(It.pending!==It.pending_buf_size||(It.gzhead.hcrc&&It.pending>Nt&&(mt.adler=rt(mt.adler,It.pending_buf,It.pending-Nt,Nt)),Ut(mt),Nt=It.pending,It.pending!==It.pending_buf_size));)sr(It,255&It.gzhead.extra[It.gzindex]),It.gzindex++;It.gzhead.hcrc&&It.pending>Nt&&(mt.adler=rt(mt.adler,It.pending_buf,It.pending-Nt,Nt)),It.gzindex===It.gzhead.extra.length&&(It.gzindex=0,It.status=73)}else It.status=73;if(It.status===73)if(It.gzhead.name){Nt=It.pending;do{if(It.pending===It.pending_buf_size&&(It.gzhead.hcrc&&It.pending>Nt&&(mt.adler=rt(mt.adler,It.pending_buf,It.pending-Nt,Nt)),Ut(mt),Nt=It.pending,It.pending===It.pending_buf_size)){qt=1;break}qt=It.gzindex<It.gzhead.name.length?255&It.gzhead.name.charCodeAt(It.gzindex++):0,sr(It,qt)}while(qt!==0);It.gzhead.hcrc&&It.pending>Nt&&(mt.adler=rt(mt.adler,It.pending_buf,It.pending-Nt,Nt)),qt===0&&(It.gzindex=0,It.status=91)}else It.status=91;if(It.status===91)if(It.gzhead.comment){Nt=It.pending;do{if(It.pending===It.pending_buf_size&&(It.gzhead.hcrc&&It.pending>Nt&&(mt.adler=rt(mt.adler,It.pending_buf,It.pending-Nt,Nt)),Ut(mt),Nt=It.pending,It.pending===It.pending_buf_size)){qt=1;break}qt=It.gzindex<It.gzhead.comment.length?255&It.gzhead.comment.charCodeAt(It.gzindex++):0,sr(It,qt)}while(qt!==0);It.gzhead.hcrc&&It.pending>Nt&&(mt.adler=rt(mt.adler,It.pending_buf,It.pending-Nt,Nt)),qt===0&&(It.status=103)}else It.status=103;if(It.status===103&&(It.gzhead.hcrc?(It.pending+2>It.pending_buf_size&&Ut(mt),It.pending+2<=It.pending_buf_size&&(sr(It,255&mt.adler),sr(It,mt.adler>>8&255),mt.adler=0,It.status=Pt)):It.status=Pt),It.pending!==0){if(Ut(mt),mt.avail_out===0)return It.last_flush=-1,it}else if(mt.avail_in===0&&Bt(Vt)<=Bt(Qt)&&Vt!==at)return Kt(mt,-5);if(It.status===666&&mt.avail_in!==0)return Kt(mt,-5);if(mt.avail_in!==0||It.lookahead!==0||Vt!==st&&It.status!==666){var lr=It.strategy===2?function(Gt,dr){for(var mr;;){if(Gt.lookahead===0&&(_r(Gt),Gt.lookahead===0)){if(dr===st)return xt;break}if(Gt.match_length=0,mr=_e._tr_tally(Gt,0,Gt.window[Gt.strstart]),Gt.lookahead--,Gt.strstart++,mr&&(zt(Gt,!1),Gt.strm.avail_out===0))return xt}return Gt.insert=0,dr===at?(zt(Gt,!0),Gt.strm.avail_out===0?tr:er):Gt.last_lit&&(zt(Gt,!1),Gt.strm.avail_out===0)?xt:Ht}(It,Vt):It.strategy===3?function(Gt,dr){for(var mr,fr,gr,At,pt=Gt.window;;){if(Gt.lookahead<=Mt){if(_r(Gt),Gt.lookahead<=Mt&&dr===st)return xt;if(Gt.lookahead===0)break}if(Gt.match_length=0,Gt.lookahead>=Rt&&0<Gt.strstart&&(fr=pt[gr=Gt.strstart-1])===pt[++gr]&&fr===pt[++gr]&&fr===pt[++gr]){At=Gt.strstart+Mt;do;while(fr===pt[++gr]&&fr===pt[++gr]&&fr===pt[++gr]&&fr===pt[++gr]&&fr===pt[++gr]&&fr===pt[++gr]&&fr===pt[++gr]&&fr===pt[++gr]&&gr<At);Gt.match_length=Mt-(At-gr),Gt.match_length>Gt.lookahead&&(Gt.match_length=Gt.lookahead)}if(Gt.match_length>=Rt?(mr=_e._tr_tally(Gt,1,Gt.match_length-Rt),Gt.lookahead-=Gt.match_length,Gt.strstart+=Gt.match_length,Gt.match_length=0):(mr=_e._tr_tally(Gt,0,Gt.window[Gt.strstart]),Gt.lookahead--,Gt.strstart++),mr&&(zt(Gt,!1),Gt.strm.avail_out===0))return xt}return Gt.insert=0,dr===at?(zt(Gt,!0),Gt.strm.avail_out===0?tr:er):Gt.last_lit&&(zt(Gt,!1),Gt.strm.avail_out===0)?xt:Ht}(It,Vt):$[It.level].func(It,Vt);if(lr!==tr&&lr!==er||(It.status=666),lr===xt||lr===tr)return mt.avail_out===0&&(It.last_flush=-1),it;if(lr===Ht&&(Vt===1?_e._tr_align(It):Vt!==5&&(_e._tr_stored_block(It,0,0,!1),Vt===3&&(nr(It.head),It.lookahead===0&&(It.strstart=0,It.block_start=0,It.insert=0))),Ut(mt),mt.avail_out===0))return It.last_flush=-1,it}return Vt!==at?it:It.wrap<=0?1:(It.wrap===2?(sr(It,255&mt.adler),sr(It,mt.adler>>8&255),sr(It,mt.adler>>16&255),sr(It,mt.adler>>24&255),sr(It,255&mt.total_in),sr(It,mt.total_in>>8&255),sr(It,mt.total_in>>16&255),sr(It,mt.total_in>>24&255)):(or(It,mt.adler>>>16),or(It,65535&mt.adler)),Ut(mt),0<It.wrap&&(It.wrap=-It.wrap),It.pending!==0?it:1)},_.deflateEnd=function(mt){var Vt;return mt&&mt.state?(Vt=mt.state.status)!==Ct&&Vt!==69&&Vt!==73&&Vt!==91&&Vt!==103&&Vt!==Pt&&Vt!==666?Kt(mt,dt):(mt.state=null,Vt===Pt?Kt(mt,-3):it):dt},_.deflateSetDictionary=function(mt,Vt){var Qt,It,Nt,qt,ar,lr,Gt,dr,mr=Vt.length;if(!mt||!mt.state||(qt=(Qt=mt.state).wrap)===2||qt===1&&Qt.status!==Ct||Qt.lookahead)return dt;for(qt===1&&(mt.adler=et(mt.adler,Vt,mr,0)),Qt.wrap=0,mr>=Qt.w_size&&(qt===0&&(nr(Qt.head),Qt.strstart=0,Qt.block_start=0,Qt.insert=0),dr=new j.Buf8(Qt.w_size),j.arraySet(dr,Vt,mr-Qt.w_size,Qt.w_size,0),Vt=dr,mr=Qt.w_size),ar=mt.avail_in,lr=mt.next_in,Gt=mt.input,mt.avail_in=mr,mt.next_in=0,mt.input=Vt,_r(Qt);Qt.lookahead>=Rt;){for(It=Qt.strstart,Nt=Qt.lookahead-(Rt-1);Qt.ins_h=(Qt.ins_h<<Qt.hash_shift^Qt.window[It+Rt-1])&Qt.hash_mask,Qt.prev[It&Qt.w_mask]=Qt.head[Qt.ins_h],Qt.head[Qt.ins_h]=It,It++,--Nt;);Qt.strstart=It,Qt.lookahead=Rt-1,_r(Qt)}return Qt.strstart+=Qt.lookahead,Qt.block_start=Qt.strstart,Qt.insert=Qt.lookahead,Qt.lookahead=0,Qt.match_length=Qt.prev_length=Rt-1,Qt.match_available=0,mt.next_in=lr,mt.input=Gt,mt.avail_in=ar,Qt.wrap=qt,it},_.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(g,b,_){b.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(g,b,_){b.exports=function($,j){var _e,et,rt,nt,st,at,it,dt,ot,ct,lt,ut,ft,Et,Tt,St,ht,kt,Rt,Mt,Zt,Ct,Pt,xt,Ht;_e=$.state,et=$.next_in,xt=$.input,rt=et+($.avail_in-5),nt=$.next_out,Ht=$.output,st=nt-(j-$.avail_out),at=nt+($.avail_out-257),it=_e.dmax,dt=_e.wsize,ot=_e.whave,ct=_e.wnext,lt=_e.window,ut=_e.hold,ft=_e.bits,Et=_e.lencode,Tt=_e.distcode,St=(1<<_e.lenbits)-1,ht=(1<<_e.distbits)-1;e:do{ft<15&&(ut+=xt[et++]<<ft,ft+=8,ut+=xt[et++]<<ft,ft+=8),kt=Et[ut&St];t:for(;;){if(ut>>>=Rt=kt>>>24,ft-=Rt,(Rt=kt>>>16&255)===0)Ht[nt++]=65535&kt;else{if(!(16&Rt)){if(!(64&Rt)){kt=Et[(65535&kt)+(ut&(1<<Rt)-1)];continue t}if(32&Rt){_e.mode=12;break e}$.msg="invalid literal/length code",_e.mode=30;break e}Mt=65535&kt,(Rt&=15)&&(ft<Rt&&(ut+=xt[et++]<<ft,ft+=8),Mt+=ut&(1<<Rt)-1,ut>>>=Rt,ft-=Rt),ft<15&&(ut+=xt[et++]<<ft,ft+=8,ut+=xt[et++]<<ft,ft+=8),kt=Tt[ut&ht];r:for(;;){if(ut>>>=Rt=kt>>>24,ft-=Rt,!(16&(Rt=kt>>>16&255))){if(!(64&Rt)){kt=Tt[(65535&kt)+(ut&(1<<Rt)-1)];continue r}$.msg="invalid distance code",_e.mode=30;break e}if(Zt=65535&kt,ft<(Rt&=15)&&(ut+=xt[et++]<<ft,(ft+=8)<Rt&&(ut+=xt[et++]<<ft,ft+=8)),it<(Zt+=ut&(1<<Rt)-1)){$.msg="invalid distance too far back",_e.mode=30;break e}if(ut>>>=Rt,ft-=Rt,(Rt=nt-st)<Zt){if(ot<(Rt=Zt-Rt)&&_e.sane){$.msg="invalid distance too far back",_e.mode=30;break e}if(Pt=lt,(Ct=0)===ct){if(Ct+=dt-Rt,Rt<Mt){for(Mt-=Rt;Ht[nt++]=lt[Ct++],--Rt;);Ct=nt-Zt,Pt=Ht}}else if(ct<Rt){if(Ct+=dt+ct-Rt,(Rt-=ct)<Mt){for(Mt-=Rt;Ht[nt++]=lt[Ct++],--Rt;);if(Ct=0,ct<Mt){for(Mt-=Rt=ct;Ht[nt++]=lt[Ct++],--Rt;);Ct=nt-Zt,Pt=Ht}}}else if(Ct+=ct-Rt,Rt<Mt){for(Mt-=Rt;Ht[nt++]=lt[Ct++],--Rt;);Ct=nt-Zt,Pt=Ht}for(;2<Mt;)Ht[nt++]=Pt[Ct++],Ht[nt++]=Pt[Ct++],Ht[nt++]=Pt[Ct++],Mt-=3;Mt&&(Ht[nt++]=Pt[Ct++],1<Mt&&(Ht[nt++]=Pt[Ct++]))}else{for(Ct=nt-Zt;Ht[nt++]=Ht[Ct++],Ht[nt++]=Ht[Ct++],Ht[nt++]=Ht[Ct++],2<(Mt-=3););Mt&&(Ht[nt++]=Ht[Ct++],1<Mt&&(Ht[nt++]=Ht[Ct++]))}break}}break}}while(et<rt&&nt<at);et-=Mt=ft>>3,ut&=(1<<(ft-=Mt<<3))-1,$.next_in=et,$.next_out=nt,$.avail_in=et<rt?rt-et+5:5-(et-rt),$.avail_out=nt<at?at-nt+257:257-(nt-at),_e.hold=ut,_e.bits=ft}},{}],49:[function(g,b,_){var $=g("../utils/common"),j=g("./adler32"),_e=g("./crc32"),et=g("./inffast"),rt=g("./inftrees"),nt=1,st=2,at=0,it=-2,dt=1,ot=852,ct=592;function lt(Ct){return(Ct>>>24&255)+(Ct>>>8&65280)+((65280&Ct)<<8)+((255&Ct)<<24)}function ut(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new $.Buf16(320),this.work=new $.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function ft(Ct){var Pt;return Ct&&Ct.state?(Pt=Ct.state,Ct.total_in=Ct.total_out=Pt.total=0,Ct.msg="",Pt.wrap&&(Ct.adler=1&Pt.wrap),Pt.mode=dt,Pt.last=0,Pt.havedict=0,Pt.dmax=32768,Pt.head=null,Pt.hold=0,Pt.bits=0,Pt.lencode=Pt.lendyn=new $.Buf32(ot),Pt.distcode=Pt.distdyn=new $.Buf32(ct),Pt.sane=1,Pt.back=-1,at):it}function Et(Ct){var Pt;return Ct&&Ct.state?((Pt=Ct.state).wsize=0,Pt.whave=0,Pt.wnext=0,ft(Ct)):it}function Tt(Ct,Pt){var xt,Ht;return Ct&&Ct.state?(Ht=Ct.state,Pt<0?(xt=0,Pt=-Pt):(xt=1+(Pt>>4),Pt<48&&(Pt&=15)),Pt&&(Pt<8||15<Pt)?it:(Ht.window!==null&&Ht.wbits!==Pt&&(Ht.window=null),Ht.wrap=xt,Ht.wbits=Pt,Et(Ct))):it}function St(Ct,Pt){var xt,Ht;return Ct?(Ht=new ut,(Ct.state=Ht).window=null,(xt=Tt(Ct,Pt))!==at&&(Ct.state=null),xt):it}var ht,kt,Rt=!0;function Mt(Ct){if(Rt){var Pt;for(ht=new $.Buf32(512),kt=new $.Buf32(32),Pt=0;Pt<144;)Ct.lens[Pt++]=8;for(;Pt<256;)Ct.lens[Pt++]=9;for(;Pt<280;)Ct.lens[Pt++]=7;for(;Pt<288;)Ct.lens[Pt++]=8;for(rt(nt,Ct.lens,0,288,ht,0,Ct.work,{bits:9}),Pt=0;Pt<32;)Ct.lens[Pt++]=5;rt(st,Ct.lens,0,32,kt,0,Ct.work,{bits:5}),Rt=!1}Ct.lencode=ht,Ct.lenbits=9,Ct.distcode=kt,Ct.distbits=5}function Zt(Ct,Pt,xt,Ht){var tr,er=Ct.state;return er.window===null&&(er.wsize=1<<er.wbits,er.wnext=0,er.whave=0,er.window=new $.Buf8(er.wsize)),Ht>=er.wsize?($.arraySet(er.window,Pt,xt-er.wsize,er.wsize,0),er.wnext=0,er.whave=er.wsize):(Ht<(tr=er.wsize-er.wnext)&&(tr=Ht),$.arraySet(er.window,Pt,xt-Ht,tr,er.wnext),(Ht-=tr)?($.arraySet(er.window,Pt,xt-Ht,Ht,0),er.wnext=Ht,er.whave=er.wsize):(er.wnext+=tr,er.wnext===er.wsize&&(er.wnext=0),er.whave<er.wsize&&(er.whave+=tr))),0}_.inflateReset=Et,_.inflateReset2=Tt,_.inflateResetKeep=ft,_.inflateInit=function(Ct){return St(Ct,15)},_.inflateInit2=St,_.inflate=function(Ct,Pt){var xt,Ht,tr,er,Kt,Bt,nr,Ut,zt,sr,or,ur,_r,vr,br,Er,Cr,kr,Or,Jt,mt,Vt,Qt,It,Nt=0,qt=new $.Buf8(4),ar=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!Ct||!Ct.state||!Ct.output||!Ct.input&&Ct.avail_in!==0)return it;(xt=Ct.state).mode===12&&(xt.mode=13),Kt=Ct.next_out,tr=Ct.output,nr=Ct.avail_out,er=Ct.next_in,Ht=Ct.input,Bt=Ct.avail_in,Ut=xt.hold,zt=xt.bits,sr=Bt,or=nr,Vt=at;e:for(;;)switch(xt.mode){case dt:if(xt.wrap===0){xt.mode=13;break}for(;zt<16;){if(Bt===0)break e;Bt--,Ut+=Ht[er++]<<zt,zt+=8}if(2&xt.wrap&&Ut===35615){qt[xt.check=0]=255&Ut,qt[1]=Ut>>>8&255,xt.check=_e(xt.check,qt,2,0),zt=Ut=0,xt.mode=2;break}if(xt.flags=0,xt.head&&(xt.head.done=!1),!(1&xt.wrap)||(((255&Ut)<<8)+(Ut>>8))%31){Ct.msg="incorrect header check",xt.mode=30;break}if((15&Ut)!=8){Ct.msg="unknown compression method",xt.mode=30;break}if(zt-=4,mt=8+(15&(Ut>>>=4)),xt.wbits===0)xt.wbits=mt;else if(mt>xt.wbits){Ct.msg="invalid window size",xt.mode=30;break}xt.dmax=1<<mt,Ct.adler=xt.check=1,xt.mode=512&Ut?10:12,zt=Ut=0;break;case 2:for(;zt<16;){if(Bt===0)break e;Bt--,Ut+=Ht[er++]<<zt,zt+=8}if(xt.flags=Ut,(255&xt.flags)!=8){Ct.msg="unknown compression method",xt.mode=30;break}if(57344&xt.flags){Ct.msg="unknown header flags set",xt.mode=30;break}xt.head&&(xt.head.text=Ut>>8&1),512&xt.flags&&(qt[0]=255&Ut,qt[1]=Ut>>>8&255,xt.check=_e(xt.check,qt,2,0)),zt=Ut=0,xt.mode=3;case 3:for(;zt<32;){if(Bt===0)break e;Bt--,Ut+=Ht[er++]<<zt,zt+=8}xt.head&&(xt.head.time=Ut),512&xt.flags&&(qt[0]=255&Ut,qt[1]=Ut>>>8&255,qt[2]=Ut>>>16&255,qt[3]=Ut>>>24&255,xt.check=_e(xt.check,qt,4,0)),zt=Ut=0,xt.mode=4;case 4:for(;zt<16;){if(Bt===0)break e;Bt--,Ut+=Ht[er++]<<zt,zt+=8}xt.head&&(xt.head.xflags=255&Ut,xt.head.os=Ut>>8),512&xt.flags&&(qt[0]=255&Ut,qt[1]=Ut>>>8&255,xt.check=_e(xt.check,qt,2,0)),zt=Ut=0,xt.mode=5;case 5:if(1024&xt.flags){for(;zt<16;){if(Bt===0)break e;Bt--,Ut+=Ht[er++]<<zt,zt+=8}xt.length=Ut,xt.head&&(xt.head.extra_len=Ut),512&xt.flags&&(qt[0]=255&Ut,qt[1]=Ut>>>8&255,xt.check=_e(xt.check,qt,2,0)),zt=Ut=0}else xt.head&&(xt.head.extra=null);xt.mode=6;case 6:if(1024&xt.flags&&(Bt<(ur=xt.length)&&(ur=Bt),ur&&(xt.head&&(mt=xt.head.extra_len-xt.length,xt.head.extra||(xt.head.extra=new Array(xt.head.extra_len)),$.arraySet(xt.head.extra,Ht,er,ur,mt)),512&xt.flags&&(xt.check=_e(xt.check,Ht,ur,er)),Bt-=ur,er+=ur,xt.length-=ur),xt.length))break e;xt.length=0,xt.mode=7;case 7:if(2048&xt.flags){if(Bt===0)break e;for(ur=0;mt=Ht[er+ur++],xt.head&&mt&&xt.length<65536&&(xt.head.name+=String.fromCharCode(mt)),mt&&ur<Bt;);if(512&xt.flags&&(xt.check=_e(xt.check,Ht,ur,er)),Bt-=ur,er+=ur,mt)break e}else xt.head&&(xt.head.name=null);xt.length=0,xt.mode=8;case 8:if(4096&xt.flags){if(Bt===0)break e;for(ur=0;mt=Ht[er+ur++],xt.head&&mt&&xt.length<65536&&(xt.head.comment+=String.fromCharCode(mt)),mt&&ur<Bt;);if(512&xt.flags&&(xt.check=_e(xt.check,Ht,ur,er)),Bt-=ur,er+=ur,mt)break e}else xt.head&&(xt.head.comment=null);xt.mode=9;case 9:if(512&xt.flags){for(;zt<16;){if(Bt===0)break e;Bt--,Ut+=Ht[er++]<<zt,zt+=8}if(Ut!==(65535&xt.check)){Ct.msg="header crc mismatch",xt.mode=30;break}zt=Ut=0}xt.head&&(xt.head.hcrc=xt.flags>>9&1,xt.head.done=!0),Ct.adler=xt.check=0,xt.mode=12;break;case 10:for(;zt<32;){if(Bt===0)break e;Bt--,Ut+=Ht[er++]<<zt,zt+=8}Ct.adler=xt.check=lt(Ut),zt=Ut=0,xt.mode=11;case 11:if(xt.havedict===0)return Ct.next_out=Kt,Ct.avail_out=nr,Ct.next_in=er,Ct.avail_in=Bt,xt.hold=Ut,xt.bits=zt,2;Ct.adler=xt.check=1,xt.mode=12;case 12:if(Pt===5||Pt===6)break e;case 13:if(xt.last){Ut>>>=7&zt,zt-=7&zt,xt.mode=27;break}for(;zt<3;){if(Bt===0)break e;Bt--,Ut+=Ht[er++]<<zt,zt+=8}switch(xt.last=1&Ut,zt-=1,3&(Ut>>>=1)){case 0:xt.mode=14;break;case 1:if(Mt(xt),xt.mode=20,Pt!==6)break;Ut>>>=2,zt-=2;break e;case 2:xt.mode=17;break;case 3:Ct.msg="invalid block type",xt.mode=30}Ut>>>=2,zt-=2;break;case 14:for(Ut>>>=7&zt,zt-=7&zt;zt<32;){if(Bt===0)break e;Bt--,Ut+=Ht[er++]<<zt,zt+=8}if((65535&Ut)!=(Ut>>>16^65535)){Ct.msg="invalid stored block lengths",xt.mode=30;break}if(xt.length=65535&Ut,zt=Ut=0,xt.mode=15,Pt===6)break e;case 15:xt.mode=16;case 16:if(ur=xt.length){if(Bt<ur&&(ur=Bt),nr<ur&&(ur=nr),ur===0)break e;$.arraySet(tr,Ht,er,ur,Kt),Bt-=ur,er+=ur,nr-=ur,Kt+=ur,xt.length-=ur;break}xt.mode=12;break;case 17:for(;zt<14;){if(Bt===0)break e;Bt--,Ut+=Ht[er++]<<zt,zt+=8}if(xt.nlen=257+(31&Ut),Ut>>>=5,zt-=5,xt.ndist=1+(31&Ut),Ut>>>=5,zt-=5,xt.ncode=4+(15&Ut),Ut>>>=4,zt-=4,286<xt.nlen||30<xt.ndist){Ct.msg="too many length or distance symbols",xt.mode=30;break}xt.have=0,xt.mode=18;case 18:for(;xt.have<xt.ncode;){for(;zt<3;){if(Bt===0)break e;Bt--,Ut+=Ht[er++]<<zt,zt+=8}xt.lens[ar[xt.have++]]=7&Ut,Ut>>>=3,zt-=3}for(;xt.have<19;)xt.lens[ar[xt.have++]]=0;if(xt.lencode=xt.lendyn,xt.lenbits=7,Qt={bits:xt.lenbits},Vt=rt(0,xt.lens,0,19,xt.lencode,0,xt.work,Qt),xt.lenbits=Qt.bits,Vt){Ct.msg="invalid code lengths set",xt.mode=30;break}xt.have=0,xt.mode=19;case 19:for(;xt.have<xt.nlen+xt.ndist;){for(;Er=(Nt=xt.lencode[Ut&(1<<xt.lenbits)-1])>>>16&255,Cr=65535&Nt,!((br=Nt>>>24)<=zt);){if(Bt===0)break e;Bt--,Ut+=Ht[er++]<<zt,zt+=8}if(Cr<16)Ut>>>=br,zt-=br,xt.lens[xt.have++]=Cr;else{if(Cr===16){for(It=br+2;zt<It;){if(Bt===0)break e;Bt--,Ut+=Ht[er++]<<zt,zt+=8}if(Ut>>>=br,zt-=br,xt.have===0){Ct.msg="invalid bit length repeat",xt.mode=30;break}mt=xt.lens[xt.have-1],ur=3+(3&Ut),Ut>>>=2,zt-=2}else if(Cr===17){for(It=br+3;zt<It;){if(Bt===0)break e;Bt--,Ut+=Ht[er++]<<zt,zt+=8}zt-=br,mt=0,ur=3+(7&(Ut>>>=br)),Ut>>>=3,zt-=3}else{for(It=br+7;zt<It;){if(Bt===0)break e;Bt--,Ut+=Ht[er++]<<zt,zt+=8}zt-=br,mt=0,ur=11+(127&(Ut>>>=br)),Ut>>>=7,zt-=7}if(xt.have+ur>xt.nlen+xt.ndist){Ct.msg="invalid bit length repeat",xt.mode=30;break}for(;ur--;)xt.lens[xt.have++]=mt}}if(xt.mode===30)break;if(xt.lens[256]===0){Ct.msg="invalid code -- missing end-of-block",xt.mode=30;break}if(xt.lenbits=9,Qt={bits:xt.lenbits},Vt=rt(nt,xt.lens,0,xt.nlen,xt.lencode,0,xt.work,Qt),xt.lenbits=Qt.bits,Vt){Ct.msg="invalid literal/lengths set",xt.mode=30;break}if(xt.distbits=6,xt.distcode=xt.distdyn,Qt={bits:xt.distbits},Vt=rt(st,xt.lens,xt.nlen,xt.ndist,xt.distcode,0,xt.work,Qt),xt.distbits=Qt.bits,Vt){Ct.msg="invalid distances set",xt.mode=30;break}if(xt.mode=20,Pt===6)break e;case 20:xt.mode=21;case 21:if(6<=Bt&&258<=nr){Ct.next_out=Kt,Ct.avail_out=nr,Ct.next_in=er,Ct.avail_in=Bt,xt.hold=Ut,xt.bits=zt,et(Ct,or),Kt=Ct.next_out,tr=Ct.output,nr=Ct.avail_out,er=Ct.next_in,Ht=Ct.input,Bt=Ct.avail_in,Ut=xt.hold,zt=xt.bits,xt.mode===12&&(xt.back=-1);break}for(xt.back=0;Er=(Nt=xt.lencode[Ut&(1<<xt.lenbits)-1])>>>16&255,Cr=65535&Nt,!((br=Nt>>>24)<=zt);){if(Bt===0)break e;Bt--,Ut+=Ht[er++]<<zt,zt+=8}if(Er&&!(240&Er)){for(kr=br,Or=Er,Jt=Cr;Er=(Nt=xt.lencode[Jt+((Ut&(1<<kr+Or)-1)>>kr)])>>>16&255,Cr=65535&Nt,!(kr+(br=Nt>>>24)<=zt);){if(Bt===0)break e;Bt--,Ut+=Ht[er++]<<zt,zt+=8}Ut>>>=kr,zt-=kr,xt.back+=kr}if(Ut>>>=br,zt-=br,xt.back+=br,xt.length=Cr,Er===0){xt.mode=26;break}if(32&Er){xt.back=-1,xt.mode=12;break}if(64&Er){Ct.msg="invalid literal/length code",xt.mode=30;break}xt.extra=15&Er,xt.mode=22;case 22:if(xt.extra){for(It=xt.extra;zt<It;){if(Bt===0)break e;Bt--,Ut+=Ht[er++]<<zt,zt+=8}xt.length+=Ut&(1<<xt.extra)-1,Ut>>>=xt.extra,zt-=xt.extra,xt.back+=xt.extra}xt.was=xt.length,xt.mode=23;case 23:for(;Er=(Nt=xt.distcode[Ut&(1<<xt.distbits)-1])>>>16&255,Cr=65535&Nt,!((br=Nt>>>24)<=zt);){if(Bt===0)break e;Bt--,Ut+=Ht[er++]<<zt,zt+=8}if(!(240&Er)){for(kr=br,Or=Er,Jt=Cr;Er=(Nt=xt.distcode[Jt+((Ut&(1<<kr+Or)-1)>>kr)])>>>16&255,Cr=65535&Nt,!(kr+(br=Nt>>>24)<=zt);){if(Bt===0)break e;Bt--,Ut+=Ht[er++]<<zt,zt+=8}Ut>>>=kr,zt-=kr,xt.back+=kr}if(Ut>>>=br,zt-=br,xt.back+=br,64&Er){Ct.msg="invalid distance code",xt.mode=30;break}xt.offset=Cr,xt.extra=15&Er,xt.mode=24;case 24:if(xt.extra){for(It=xt.extra;zt<It;){if(Bt===0)break e;Bt--,Ut+=Ht[er++]<<zt,zt+=8}xt.offset+=Ut&(1<<xt.extra)-1,Ut>>>=xt.extra,zt-=xt.extra,xt.back+=xt.extra}if(xt.offset>xt.dmax){Ct.msg="invalid distance too far back",xt.mode=30;break}xt.mode=25;case 25:if(nr===0)break e;if(ur=or-nr,xt.offset>ur){if((ur=xt.offset-ur)>xt.whave&&xt.sane){Ct.msg="invalid distance too far back",xt.mode=30;break}_r=ur>xt.wnext?(ur-=xt.wnext,xt.wsize-ur):xt.wnext-ur,ur>xt.length&&(ur=xt.length),vr=xt.window}else vr=tr,_r=Kt-xt.offset,ur=xt.length;for(nr<ur&&(ur=nr),nr-=ur,xt.length-=ur;tr[Kt++]=vr[_r++],--ur;);xt.length===0&&(xt.mode=21);break;case 26:if(nr===0)break e;tr[Kt++]=xt.length,nr--,xt.mode=21;break;case 27:if(xt.wrap){for(;zt<32;){if(Bt===0)break e;Bt--,Ut|=Ht[er++]<<zt,zt+=8}if(or-=nr,Ct.total_out+=or,xt.total+=or,or&&(Ct.adler=xt.check=xt.flags?_e(xt.check,tr,or,Kt-or):j(xt.check,tr,or,Kt-or)),or=nr,(xt.flags?Ut:lt(Ut))!==xt.check){Ct.msg="incorrect data check",xt.mode=30;break}zt=Ut=0}xt.mode=28;case 28:if(xt.wrap&&xt.flags){for(;zt<32;){if(Bt===0)break e;Bt--,Ut+=Ht[er++]<<zt,zt+=8}if(Ut!==(4294967295&xt.total)){Ct.msg="incorrect length check",xt.mode=30;break}zt=Ut=0}xt.mode=29;case 29:Vt=1;break e;case 30:Vt=-3;break e;case 31:return-4;case 32:default:return it}return Ct.next_out=Kt,Ct.avail_out=nr,Ct.next_in=er,Ct.avail_in=Bt,xt.hold=Ut,xt.bits=zt,(xt.wsize||or!==Ct.avail_out&&xt.mode<30&&(xt.mode<27||Pt!==4))&&Zt(Ct,Ct.output,Ct.next_out,or-Ct.avail_out)?(xt.mode=31,-4):(sr-=Ct.avail_in,or-=Ct.avail_out,Ct.total_in+=sr,Ct.total_out+=or,xt.total+=or,xt.wrap&&or&&(Ct.adler=xt.check=xt.flags?_e(xt.check,tr,or,Ct.next_out-or):j(xt.check,tr,or,Ct.next_out-or)),Ct.data_type=xt.bits+(xt.last?64:0)+(xt.mode===12?128:0)+(xt.mode===20||xt.mode===15?256:0),(sr==0&&or===0||Pt===4)&&Vt===at&&(Vt=-5),Vt)},_.inflateEnd=function(Ct){if(!Ct||!Ct.state)return it;var Pt=Ct.state;return Pt.window&&(Pt.window=null),Ct.state=null,at},_.inflateGetHeader=function(Ct,Pt){var xt;return Ct&&Ct.state&&2&(xt=Ct.state).wrap?((xt.head=Pt).done=!1,at):it},_.inflateSetDictionary=function(Ct,Pt){var xt,Ht=Pt.length;return Ct&&Ct.state?(xt=Ct.state).wrap!==0&&xt.mode!==11?it:xt.mode===11&&j(1,Pt,Ht,0)!==xt.check?-3:Zt(Ct,Pt,Ht,Ht)?(xt.mode=31,-4):(xt.havedict=1,at):it},_.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(g,b,_){var $=g("../utils/common"),j=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],_e=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],et=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],rt=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];b.exports=function(nt,st,at,it,dt,ot,ct,lt){var ut,ft,Et,Tt,St,ht,kt,Rt,Mt,Zt=lt.bits,Ct=0,Pt=0,xt=0,Ht=0,tr=0,er=0,Kt=0,Bt=0,nr=0,Ut=0,zt=null,sr=0,or=new $.Buf16(16),ur=new $.Buf16(16),_r=null,vr=0;for(Ct=0;Ct<=15;Ct++)or[Ct]=0;for(Pt=0;Pt<it;Pt++)or[st[at+Pt]]++;for(tr=Zt,Ht=15;1<=Ht&&or[Ht]===0;Ht--);if(Ht<tr&&(tr=Ht),Ht===0)return dt[ot++]=20971520,dt[ot++]=20971520,lt.bits=1,0;for(xt=1;xt<Ht&&or[xt]===0;xt++);for(tr<xt&&(tr=xt),Ct=Bt=1;Ct<=15;Ct++)if(Bt<<=1,(Bt-=or[Ct])<0)return-1;if(0<Bt&&(nt===0||Ht!==1))return-1;for(ur[1]=0,Ct=1;Ct<15;Ct++)ur[Ct+1]=ur[Ct]+or[Ct];for(Pt=0;Pt<it;Pt++)st[at+Pt]!==0&&(ct[ur[st[at+Pt]]++]=Pt);if(ht=nt===0?(zt=_r=ct,19):nt===1?(zt=j,sr-=257,_r=_e,vr-=257,256):(zt=et,_r=rt,-1),Ct=xt,St=ot,Kt=Pt=Ut=0,Et=-1,Tt=(nr=1<<(er=tr))-1,nt===1&&852<nr||nt===2&&592<nr)return 1;for(;;){for(kt=Ct-Kt,Mt=ct[Pt]<ht?(Rt=0,ct[Pt]):ct[Pt]>ht?(Rt=_r[vr+ct[Pt]],zt[sr+ct[Pt]]):(Rt=96,0),ut=1<<Ct-Kt,xt=ft=1<<er;dt[St+(Ut>>Kt)+(ft-=ut)]=kt<<24|Rt<<16|Mt|0,ft!==0;);for(ut=1<<Ct-1;Ut&ut;)ut>>=1;if(ut!==0?(Ut&=ut-1,Ut+=ut):Ut=0,Pt++,--or[Ct]==0){if(Ct===Ht)break;Ct=st[at+ct[Pt]]}if(tr<Ct&&(Ut&Tt)!==Et){for(Kt===0&&(Kt=tr),St+=xt,Bt=1<<(er=Ct-Kt);er+Kt<Ht&&!((Bt-=or[er+Kt])<=0);)er++,Bt<<=1;if(nr+=1<<er,nt===1&&852<nr||nt===2&&592<nr)return 1;dt[Et=Ut&Tt]=tr<<24|er<<16|St-ot|0}}return Ut!==0&&(dt[St+Ut]=Ct-Kt<<24|64<<16|0),lt.bits=tr,0}},{"../utils/common":41}],51:[function(g,b,_){b.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(g,b,_){var $=g("../utils/common"),j=0,_e=1;function et(Nt){for(var qt=Nt.length;0<=--qt;)Nt[qt]=0}var rt=0,nt=29,st=256,at=st+1+nt,it=30,dt=19,ot=2*at+1,ct=15,lt=16,ut=7,ft=256,Et=16,Tt=17,St=18,ht=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],kt=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Rt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Mt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Zt=new Array(2*(at+2));et(Zt);var Ct=new Array(2*it);et(Ct);var Pt=new Array(512);et(Pt);var xt=new Array(256);et(xt);var Ht=new Array(nt);et(Ht);var tr,er,Kt,Bt=new Array(it);function nr(Nt,qt,ar,lr,Gt){this.static_tree=Nt,this.extra_bits=qt,this.extra_base=ar,this.elems=lr,this.max_length=Gt,this.has_stree=Nt&&Nt.length}function Ut(Nt,qt){this.dyn_tree=Nt,this.max_code=0,this.stat_desc=qt}function zt(Nt){return Nt<256?Pt[Nt]:Pt[256+(Nt>>>7)]}function sr(Nt,qt){Nt.pending_buf[Nt.pending++]=255&qt,Nt.pending_buf[Nt.pending++]=qt>>>8&255}function or(Nt,qt,ar){Nt.bi_valid>lt-ar?(Nt.bi_buf|=qt<<Nt.bi_valid&65535,sr(Nt,Nt.bi_buf),Nt.bi_buf=qt>>lt-Nt.bi_valid,Nt.bi_valid+=ar-lt):(Nt.bi_buf|=qt<<Nt.bi_valid&65535,Nt.bi_valid+=ar)}function ur(Nt,qt,ar){or(Nt,ar[2*qt],ar[2*qt+1])}function _r(Nt,qt){for(var ar=0;ar|=1&Nt,Nt>>>=1,ar<<=1,0<--qt;);return ar>>>1}function vr(Nt,qt,ar){var lr,Gt,dr=new Array(ct+1),mr=0;for(lr=1;lr<=ct;lr++)dr[lr]=mr=mr+ar[lr-1]<<1;for(Gt=0;Gt<=qt;Gt++){var fr=Nt[2*Gt+1];fr!==0&&(Nt[2*Gt]=_r(dr[fr]++,fr))}}function br(Nt){var qt;for(qt=0;qt<at;qt++)Nt.dyn_ltree[2*qt]=0;for(qt=0;qt<it;qt++)Nt.dyn_dtree[2*qt]=0;for(qt=0;qt<dt;qt++)Nt.bl_tree[2*qt]=0;Nt.dyn_ltree[2*ft]=1,Nt.opt_len=Nt.static_len=0,Nt.last_lit=Nt.matches=0}function Er(Nt){8<Nt.bi_valid?sr(Nt,Nt.bi_buf):0<Nt.bi_valid&&(Nt.pending_buf[Nt.pending++]=Nt.bi_buf),Nt.bi_buf=0,Nt.bi_valid=0}function Cr(Nt,qt,ar,lr){var Gt=2*qt,dr=2*ar;return Nt[Gt]<Nt[dr]||Nt[Gt]===Nt[dr]&&lr[qt]<=lr[ar]}function kr(Nt,qt,ar){for(var lr=Nt.heap[ar],Gt=ar<<1;Gt<=Nt.heap_len&&(Gt<Nt.heap_len&&Cr(qt,Nt.heap[Gt+1],Nt.heap[Gt],Nt.depth)&&Gt++,!Cr(qt,lr,Nt.heap[Gt],Nt.depth));)Nt.heap[ar]=Nt.heap[Gt],ar=Gt,Gt<<=1;Nt.heap[ar]=lr}function Or(Nt,qt,ar){var lr,Gt,dr,mr,fr=0;if(Nt.last_lit!==0)for(;lr=Nt.pending_buf[Nt.d_buf+2*fr]<<8|Nt.pending_buf[Nt.d_buf+2*fr+1],Gt=Nt.pending_buf[Nt.l_buf+fr],fr++,lr===0?ur(Nt,Gt,qt):(ur(Nt,(dr=xt[Gt])+st+1,qt),(mr=ht[dr])!==0&&or(Nt,Gt-=Ht[dr],mr),ur(Nt,dr=zt(--lr),ar),(mr=kt[dr])!==0&&or(Nt,lr-=Bt[dr],mr)),fr<Nt.last_lit;);ur(Nt,ft,qt)}function Jt(Nt,qt){var ar,lr,Gt,dr=qt.dyn_tree,mr=qt.stat_desc.static_tree,fr=qt.stat_desc.has_stree,gr=qt.stat_desc.elems,At=-1;for(Nt.heap_len=0,Nt.heap_max=ot,ar=0;ar<gr;ar++)dr[2*ar]!==0?(Nt.heap[++Nt.heap_len]=At=ar,Nt.depth[ar]=0):dr[2*ar+1]=0;for(;Nt.heap_len<2;)dr[2*(Gt=Nt.heap[++Nt.heap_len]=At<2?++At:0)]=1,Nt.depth[Gt]=0,Nt.opt_len--,fr&&(Nt.static_len-=mr[2*Gt+1]);for(qt.max_code=At,ar=Nt.heap_len>>1;1<=ar;ar--)kr(Nt,dr,ar);for(Gt=gr;ar=Nt.heap[1],Nt.heap[1]=Nt.heap[Nt.heap_len--],kr(Nt,dr,1),lr=Nt.heap[1],Nt.heap[--Nt.heap_max]=ar,Nt.heap[--Nt.heap_max]=lr,dr[2*Gt]=dr[2*ar]+dr[2*lr],Nt.depth[Gt]=(Nt.depth[ar]>=Nt.depth[lr]?Nt.depth[ar]:Nt.depth[lr])+1,dr[2*ar+1]=dr[2*lr+1]=Gt,Nt.heap[1]=Gt++,kr(Nt,dr,1),2<=Nt.heap_len;);Nt.heap[--Nt.heap_max]=Nt.heap[1],function(pt,gt){var Dt,Xt,rr,ir,wr,Ir,Tr=gt.dyn_tree,$r=gt.max_code,Ar=gt.stat_desc.static_tree,nn=gt.stat_desc.has_stree,mn=gt.stat_desc.extra_bits,sn=gt.stat_desc.extra_base,Ur=gt.stat_desc.max_length,Fr=0;for(ir=0;ir<=ct;ir++)pt.bl_count[ir]=0;for(Tr[2*pt.heap[pt.heap_max]+1]=0,Dt=pt.heap_max+1;Dt<ot;Dt++)Ur<(ir=Tr[2*Tr[2*(Xt=pt.heap[Dt])+1]+1]+1)&&(ir=Ur,Fr++),Tr[2*Xt+1]=ir,$r<Xt||(pt.bl_count[ir]++,wr=0,sn<=Xt&&(wr=mn[Xt-sn]),Ir=Tr[2*Xt],pt.opt_len+=Ir*(ir+wr),nn&&(pt.static_len+=Ir*(Ar[2*Xt+1]+wr)));if(Fr!==0){do{for(ir=Ur-1;pt.bl_count[ir]===0;)ir--;pt.bl_count[ir]--,pt.bl_count[ir+1]+=2,pt.bl_count[Ur]--,Fr-=2}while(0<Fr);for(ir=Ur;ir!==0;ir--)for(Xt=pt.bl_count[ir];Xt!==0;)$r<(rr=pt.heap[--Dt])||(Tr[2*rr+1]!==ir&&(pt.opt_len+=(ir-Tr[2*rr+1])*Tr[2*rr],Tr[2*rr+1]=ir),Xt--)}}(Nt,qt),vr(dr,At,Nt.bl_count)}function mt(Nt,qt,ar){var lr,Gt,dr=-1,mr=qt[1],fr=0,gr=7,At=4;for(mr===0&&(gr=138,At=3),qt[2*(ar+1)+1]=65535,lr=0;lr<=ar;lr++)Gt=mr,mr=qt[2*(lr+1)+1],++fr<gr&&Gt===mr||(fr<At?Nt.bl_tree[2*Gt]+=fr:Gt!==0?(Gt!==dr&&Nt.bl_tree[2*Gt]++,Nt.bl_tree[2*Et]++):fr<=10?Nt.bl_tree[2*Tt]++:Nt.bl_tree[2*St]++,dr=Gt,At=(fr=0)===mr?(gr=138,3):Gt===mr?(gr=6,3):(gr=7,4))}function Vt(Nt,qt,ar){var lr,Gt,dr=-1,mr=qt[1],fr=0,gr=7,At=4;for(mr===0&&(gr=138,At=3),lr=0;lr<=ar;lr++)if(Gt=mr,mr=qt[2*(lr+1)+1],!(++fr<gr&&Gt===mr)){if(fr<At)for(;ur(Nt,Gt,Nt.bl_tree),--fr!=0;);else Gt!==0?(Gt!==dr&&(ur(Nt,Gt,Nt.bl_tree),fr--),ur(Nt,Et,Nt.bl_tree),or(Nt,fr-3,2)):fr<=10?(ur(Nt,Tt,Nt.bl_tree),or(Nt,fr-3,3)):(ur(Nt,St,Nt.bl_tree),or(Nt,fr-11,7));dr=Gt,At=(fr=0)===mr?(gr=138,3):Gt===mr?(gr=6,3):(gr=7,4)}}et(Bt);var Qt=!1;function It(Nt,qt,ar,lr){or(Nt,(rt<<1)+(lr?1:0),3),function(Gt,dr,mr,fr){Er(Gt),sr(Gt,mr),sr(Gt,~mr),$.arraySet(Gt.pending_buf,Gt.window,dr,mr,Gt.pending),Gt.pending+=mr}(Nt,qt,ar)}_._tr_init=function(Nt){Qt||(function(){var qt,ar,lr,Gt,dr,mr=new Array(ct+1);for(Gt=lr=0;Gt<nt-1;Gt++)for(Ht[Gt]=lr,qt=0;qt<1<<ht[Gt];qt++)xt[lr++]=Gt;for(xt[lr-1]=Gt,Gt=dr=0;Gt<16;Gt++)for(Bt[Gt]=dr,qt=0;qt<1<<kt[Gt];qt++)Pt[dr++]=Gt;for(dr>>=7;Gt<it;Gt++)for(Bt[Gt]=dr<<7,qt=0;qt<1<<kt[Gt]-7;qt++)Pt[256+dr++]=Gt;for(ar=0;ar<=ct;ar++)mr[ar]=0;for(qt=0;qt<=143;)Zt[2*qt+1]=8,qt++,mr[8]++;for(;qt<=255;)Zt[2*qt+1]=9,qt++,mr[9]++;for(;qt<=279;)Zt[2*qt+1]=7,qt++,mr[7]++;for(;qt<=287;)Zt[2*qt+1]=8,qt++,mr[8]++;for(vr(Zt,at+1,mr),qt=0;qt<it;qt++)Ct[2*qt+1]=5,Ct[2*qt]=_r(qt,5);tr=new nr(Zt,ht,st+1,at,ct),er=new nr(Ct,kt,0,it,ct),Kt=new nr(new Array(0),Rt,0,dt,ut)}(),Qt=!0),Nt.l_desc=new Ut(Nt.dyn_ltree,tr),Nt.d_desc=new Ut(Nt.dyn_dtree,er),Nt.bl_desc=new Ut(Nt.bl_tree,Kt),Nt.bi_buf=0,Nt.bi_valid=0,br(Nt)},_._tr_stored_block=It,_._tr_flush_block=function(Nt,qt,ar,lr){var Gt,dr,mr=0;0<Nt.level?(Nt.strm.data_type===2&&(Nt.strm.data_type=function(fr){var gr,At=4093624447;for(gr=0;gr<=31;gr++,At>>>=1)if(1&At&&fr.dyn_ltree[2*gr]!==0)return j;if(fr.dyn_ltree[18]!==0||fr.dyn_ltree[20]!==0||fr.dyn_ltree[26]!==0)return _e;for(gr=32;gr<st;gr++)if(fr.dyn_ltree[2*gr]!==0)return _e;return j}(Nt)),Jt(Nt,Nt.l_desc),Jt(Nt,Nt.d_desc),mr=function(fr){var gr;for(mt(fr,fr.dyn_ltree,fr.l_desc.max_code),mt(fr,fr.dyn_dtree,fr.d_desc.max_code),Jt(fr,fr.bl_desc),gr=dt-1;3<=gr&&fr.bl_tree[2*Mt[gr]+1]===0;gr--);return fr.opt_len+=3*(gr+1)+5+5+4,gr}(Nt),Gt=Nt.opt_len+3+7>>>3,(dr=Nt.static_len+3+7>>>3)<=Gt&&(Gt=dr)):Gt=dr=ar+5,ar+4<=Gt&&qt!==-1?It(Nt,qt,ar,lr):Nt.strategy===4||dr===Gt?(or(Nt,2+(lr?1:0),3),Or(Nt,Zt,Ct)):(or(Nt,4+(lr?1:0),3),function(fr,gr,At,pt){var gt;for(or(fr,gr-257,5),or(fr,At-1,5),or(fr,pt-4,4),gt=0;gt<pt;gt++)or(fr,fr.bl_tree[2*Mt[gt]+1],3);Vt(fr,fr.dyn_ltree,gr-1),Vt(fr,fr.dyn_dtree,At-1)}(Nt,Nt.l_desc.max_code+1,Nt.d_desc.max_code+1,mr+1),Or(Nt,Nt.dyn_ltree,Nt.dyn_dtree)),br(Nt),lr&&Er(Nt)},_._tr_tally=function(Nt,qt,ar){return Nt.pending_buf[Nt.d_buf+2*Nt.last_lit]=qt>>>8&255,Nt.pending_buf[Nt.d_buf+2*Nt.last_lit+1]=255&qt,Nt.pending_buf[Nt.l_buf+Nt.last_lit]=255&ar,Nt.last_lit++,qt===0?Nt.dyn_ltree[2*ar]++:(Nt.matches++,qt--,Nt.dyn_ltree[2*(xt[ar]+st+1)]++,Nt.dyn_dtree[2*zt(qt)]++),Nt.last_lit===Nt.lit_bufsize-1},_._tr_align=function(Nt){or(Nt,2,3),ur(Nt,ft,Zt),function(qt){qt.bi_valid===16?(sr(qt,qt.bi_buf),qt.bi_buf=0,qt.bi_valid=0):8<=qt.bi_valid&&(qt.pending_buf[qt.pending++]=255&qt.bi_buf,qt.bi_buf>>=8,qt.bi_valid-=8)}(Nt)}},{"../utils/common":41}],53:[function(g,b,_){b.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(g,b,_){(function($){(function(j,_e){if(!j.setImmediate){var et,rt,nt,st,at=1,it={},dt=!1,ot=j.document,ct=Object.getPrototypeOf&&Object.getPrototypeOf(j);ct=ct&&ct.setTimeout?ct:j,et={}.toString.call(j.process)==="[object process]"?function(Et){process.nextTick(function(){ut(Et)})}:function(){if(j.postMessage&&!j.importScripts){var Et=!0,Tt=j.onmessage;return j.onmessage=function(){Et=!1},j.postMessage("","*"),j.onmessage=Tt,Et}}()?(st="setImmediate$"+Math.random()+"$",j.addEventListener?j.addEventListener("message",ft,!1):j.attachEvent("onmessage",ft),function(Et){j.postMessage(st+Et,"*")}):j.MessageChannel?((nt=new MessageChannel).port1.onmessage=function(Et){ut(Et.data)},function(Et){nt.port2.postMessage(Et)}):ot&&"onreadystatechange"in ot.createElement("script")?(rt=ot.documentElement,function(Et){var Tt=ot.createElement("script");Tt.onreadystatechange=function(){ut(Et),Tt.onreadystatechange=null,rt.removeChild(Tt),Tt=null},rt.appendChild(Tt)}):function(Et){setTimeout(ut,0,Et)},ct.setImmediate=function(Et){typeof Et!="function"&&(Et=new Function(""+Et));for(var Tt=new Array(arguments.length-1),St=0;St<Tt.length;St++)Tt[St]=arguments[St+1];var ht={callback:Et,args:Tt};return it[at]=ht,et(at),at++},ct.clearImmediate=lt}function lt(Et){delete it[Et]}function ut(Et){if(dt)setTimeout(ut,0,Et);else{var Tt=it[Et];if(Tt){dt=!0;try{(function(St){var ht=St.callback,kt=St.args;switch(kt.length){case 0:ht();break;case 1:ht(kt[0]);break;case 2:ht(kt[0],kt[1]);break;case 3:ht(kt[0],kt[1],kt[2]);break;default:ht.apply(_e,kt)}})(Tt)}finally{lt(Et),dt=!1}}}}function ft(Et){Et.source===j&&typeof Et.data=="string"&&Et.data.indexOf(st)===0&&ut(+Et.data.slice(st.length))}})(typeof self>"u"?$===void 0?this:$:self)}).call(this,typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(jszip_min);var jszip_minExports=jszip_min.exports;const JSZip=getDefaultExportFromCjs(jszip_minExports);function useTrackProcessor(){const[h,d]=reactExports.useState([]),[g,b]=reactExports.useState(!1),[_,$]=reactExports.useState({current:0,total:0}),[j,_e]=reactExports.useState(0),[et,rt]=reactExports.useState(!1),nt=reactExports.useRef(!1);reactExports.useEffect(()=>{(async()=>{const ht=await loadPersistedTracks();if(ht.length===0)return;rt(!0);const kt=await loadPersistedFiles(),Rt=ht.map(Zt=>({id:Zt.id,file:kt.get(Zt.id)||null,fileName:Zt.fileName,currentMetadata:Zt.currentMetadata,suggestedMetadata:Zt.suggestedMetadata,selectedMetadata:Zt.selectedMetadata,allResults:Zt.allResults,status:Zt.status==="searching"?"pending":Zt.status}));d(Rt),kt.size>0?ue.success("Session restored",{description:`${ht.length} tracks ready to download.`}):ue.info("Session restored",{description:"Re-add your MP3 files to download with corrected metadata."})})()},[]);const st=reactExports.useCallback(ht=>{const kt={id:ht.id,fileName:ht.fileName,currentMetadata:ht.currentMetadata,suggestedMetadata:ht.suggestedMetadata,selectedMetadata:ht.selectedMetadata,allResults:ht.allResults,status:ht.status,savedAt:Date.now()};persistTrack(kt)},[]),at=reactExports.useCallback(async(ht,kt,Rt)=>{let Mt=[],Zt=[];try{[Mt,Zt]=await Promise.all([searchTrack(ht).catch(()=>[]),searchYouTube(ht).catch(()=>[])])}catch{}let Ct=[...Mt,...Zt],Pt=filterByRelevance(Ct,kt,Rt);if(Pt.length>=3)return{allResults:Pt,suggestion:Pt[0]};let xt=[],Ht=[],tr=[];try{[Ht,xt,tr]=await Promise.all([searchDeezer(ht).catch(()=>[]),searchMusicBrainz(ht).catch(()=>[]),searchPiped(ht).catch(()=>[])])}catch{}if(Ct=[...Mt,...Zt,...Ht,...xt,...tr],Pt=filterByRelevance(Ct,kt,Rt),Pt.length>=3)return{allResults:Pt,suggestion:Pt[0]};try{const Kt=await searchYtDlp(ht).catch(()=>[]);Kt.length>0&&(Ct=[...Ct,...Kt],Pt=filterByRelevance(Ct,kt,Rt))}catch{}const er=Pt.length>0?Pt[0]:null;return{allResults:Pt,suggestion:er}},[]),it=reactExports.useCallback(async ht=>{const kt=ht.filter(Ht=>Ht.name.toLowerCase().endsWith(".mp3"));if(kt.length===0)return;nt.current=!1,_e(0),resetCircuitBreakers();const Rt=[],Mt=[];if(d(Ht=>{const tr=new Map;Ht.forEach(Kt=>tr.set(Kt.fileName,Kt));const er=[...Ht];for(const Kt of kt){const Bt=tr.get(Kt.name);if(Bt){const nr=er.findIndex(Ut=>Ut.id===Bt.id);nr!==-1&&(er[nr]={...er[nr],file:Kt},Rt.push(er[nr]))}else Mt.push(Kt)}return er}),Rt.length>0){for(let tr=0;tr<Rt.length;tr+=10){const er=Rt.slice(tr,tr+10).map(Kt=>({id:Kt.id,fileName:Kt.fileName,file:Kt.file}));await persistFileBatch(er)}ue.success("Files reattached",{description:`${Rt.length} tracks restored.`})}if(Mt.length===0){rt(!1);return}b(!0),rt(!1),await clearPersistedTracks();const Zt=25,Ct=10,Pt=[];let xt=0;for(let Ht=0;Ht<Mt.length&&!nt.current;Ht++){const tr=Mt[Ht];try{const er=await readMetadata(tr);Pt.push({id:`${tr.name}-${Date.now()}-${Math.random().toString(36).slice(2,7)}`,file:tr,fileName:tr.name,currentMetadata:er,suggestedMetadata:null,selectedMetadata:null,allResults:[],status:"pending"})}catch(er){console.warn("Could not read metadata, using filename:",tr.name,er);const Kt=extractFromFilename(tr.name);Pt.push({id:`${tr.name}-${Date.now()}-${Math.random().toString(36).slice(2,7)}`,file:tr,fileName:tr.name,currentMetadata:Kt,suggestedMetadata:null,selectedMetadata:null,allResults:[],status:"pending"})}if(Pt.length-xt>=Zt||Ht===Mt.length-1){const er=Pt.slice(xt);xt=Pt.length,d(Kt=>[...Kt,...er]),await delay(100)}}(async()=>{for(let Ht=0;Ht<Pt.length;Ht+=Ct){const tr=Pt.slice(Ht,Ht+Ct).map(er=>({id:er.id,fileName:er.fileName,file:er.file}));await persistFileBatch(tr),await delay(0)}})(),ue.info(`Processing ${Pt.length} tracks`),$({current:0,total:Pt.length});for(let Ht=0;Ht<Pt.length&&!nt.current;Ht++){const tr=Pt[Ht],er=buildSearchQuery(tr.currentMetadata);d(Kt=>Kt.map(Bt=>Bt.id===tr.id?{...Bt,status:"searching"}:Bt));try{const{allResults:Kt,suggestion:Bt}=await at(er,tr.currentMetadata.artist,tr.currentMetadata.title),nr={...tr,suggestedMetadata:Bt,allResults:Kt,status:Bt?"found":"not-found"};d(Ut=>Ut.map(zt=>zt.id===tr.id?nr:zt)),st(nr)}catch(Kt){console.error("Search failed for",tr.fileName,":",Kt);const Bt={...tr,status:"error"};d(nr=>nr.map(Ut=>Ut.id===tr.id?Bt:Ut)),st(Bt)}$({current:Ht+1,total:Pt.length}),Ht<Pt.length-1&&await delay(800)}b(!1),ue.success("Scan complete",{description:`${Pt.length} tracks processed.`})},[at,st]),dt=reactExports.useCallback(ht=>{d(kt=>kt.map(Rt=>{if(Rt.id===ht&&Rt.suggestedMetadata){const Mt={...Rt,selectedMetadata:Rt.suggestedMetadata};return st(Mt),Mt}return Rt}))},[st]),ot=reactExports.useCallback(()=>{let ht=0;d(kt=>kt.map(Rt=>{if(Rt.suggestedMetadata&&Rt.status==="found"&&!Rt.selectedMetadata){ht++;const Mt={...Rt,selectedMetadata:Rt.suggestedMetadata};return st(Mt),Mt}return Rt})),ht>0&&ue.success(`Accepted ${ht} tracks`)},[st]),ct=reactExports.useCallback((ht,kt)=>{d(Rt=>Rt.map(Mt=>{if(Mt.id===ht){const Zt={...Mt,suggestedMetadata:kt,selectedMetadata:kt};return st(Zt),Zt}return Mt}))},[st]),lt=reactExports.useCallback(ht=>{d(kt=>kt.map(Rt=>{if(Rt.id===ht){const Mt=Rt.suggestedMetadata?"found":"not-found",Zt={...Rt,selectedMetadata:null,status:Mt};return st(Zt),Zt}return Rt}))},[st]),ut=reactExports.useCallback(ht=>{d(kt=>kt.filter(Rt=>Rt.id!==ht)),removePersistedTrack(ht)},[]),ft=reactExports.useCallback(async ht=>{const kt=h.find(Mt=>Mt.id===ht);if(!kt||!kt.file){ue.error("File not available",{description:"Re-add the MP3 file to download."});return}const Rt=kt.selectedMetadata;if(Rt)try{const Mt=await writeMetadata(kt.file,Rt);downloadBlob(Mt,kt.fileName),d(Zt=>Zt.map(Ct=>Ct.id===ht?{...Ct,status:"fixed"}:Ct)),ue.success("Downloaded",{description:kt.fileName})}catch(Mt){console.error("Failed to write metadata:",Mt),ue.error("Download failed",{description:kt.fileName})}},[h]),Et=reactExports.useCallback(async()=>{const ht=h.filter(kt=>kt.file&&kt.selectedMetadata);if(ht.length===0){ue.error("No accepted tracks to download");return}b(!0),$({current:0,total:ht.length});for(let kt=0;kt<ht.length;kt++){const Rt=ht[kt],Mt=Rt.selectedMetadata;if(Mt){try{const Zt=await writeMetadata(Rt.file,Mt);downloadBlob(Zt,Rt.fileName),d(Ct=>Ct.map(Pt=>Pt.id===Rt.id?{...Pt,status:"fixed"}:Pt))}catch(Zt){console.error("Failed to write metadata for",Rt.fileName,Zt)}$({current:kt+1,total:ht.length}),await delay(100)}}b(!1),ue.success(`Downloaded ${ht.length} tracks`)},[h]),Tt=reactExports.useCallback(async()=>{const ht=h.filter(Mt=>Mt.file&&Mt.selectedMetadata);if(ht.length===0){ue.error("No tracks ready to export",{description:"Accept some tracks first, then try ZIP export."});return}b(!0),$({current:0,total:ht.length});const kt=new JSZip,Rt=20;for(let Mt=0;Mt<ht.length;Mt+=Rt){const Zt=ht.slice(Mt,Mt+Rt);for(let Ct=0;Ct<Zt.length;Ct++){const Pt=Zt[Ct],xt=Pt.selectedMetadata,Ht=Mt+Ct;try{let tr;xt?tr=await writeMetadata(Pt.file,xt):tr=Pt.file;const er=await tr.arrayBuffer();kt.file(Pt.fileName,er),d(Kt=>Kt.map(Bt=>Bt.id===Pt.id&&xt?{...Bt,status:"fixed"}:Bt))}catch(tr){console.error("Failed to process",Pt.fileName,tr),kt.file(Pt.fileName,Pt.file)}$({current:Ht+1,total:ht.length})}await delay(0)}try{const Mt=await kt.generateAsync({type:"blob",compression:"STORE",streamFiles:!0}),Zt=new Date().toISOString().slice(0,10);downloadBlob(Mt,`tagfix-${Zt}.zip`),ue.success("ZIP downloaded",{description:`${ht.length} tracks exported.`})}catch(Mt){console.error("Failed to generate ZIP:",Mt),ue.error("ZIP generation failed")}b(!1)},[h]),St=reactExports.useCallback(()=>{d([]),nt.current=!0,b(!1),$({current:0,total:0}),_e(0),rt(!1),clearPersistedTracks(),ue.info("All tracks cleared")},[]);return{tracks:h,isProcessing:g,progress:_,skippedCount:j,hasRestoredSession:et,addFiles:it,acceptSuggestion:dt,acceptAll:ot,selectResult:ct,revertTrack:lt,removeTrack:ut,downloadTrack:ft,downloadAll:Et,downloadAllAsZip:Tt,clearAll:St}}const Index=()=>{const[h,d]=reactExports.useState(!1),{tracks:g,isProcessing:b,progress:_,skippedCount:$,hasRestoredSession:j,addFiles:_e,acceptSuggestion:et,acceptAll:rt,selectResult:nt,revertTrack:st,removeTrack:at,downloadTrack:it,downloadAll:dt,downloadAllAsZip:ot,clearAll:ct}=useTrackProcessor(),lt=g.length>0,ut=g.some(Tt=>!!Tt.selectedMetadata),ft=g.some(Tt=>Tt.status==="found"&&!Tt.selectedMetadata),Et=_.total>0?_.current/_.total*100:0;return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-background relative",children:[jsxRuntimeExports.jsx(Toaster,{position:"top-center",toastOptions:{className:"glass !border-glass-border/50 !text-foreground"}}),jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute -top-[40%] -left-[20%] w-[80%] h-[80%] rounded-full bg-primary/[0.03] blur-[120px]"}),jsxRuntimeExports.jsx("div",{className:"absolute -bottom-[30%] -right-[20%] w-[60%] h-[60%] rounded-full bg-primary/[0.02] blur-[100px]"})]}),jsxRuntimeExports.jsx("header",{className:"sticky top-0 z-20 glass-header",children:jsxRuntimeExports.jsxs("div",{className:"px-5 py-3.5 flex items-center justify-between max-w-2xl mx-auto",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsxs("h1",{className:"text-lg font-semibold tracking-tight text-foreground",children:["META",jsxRuntimeExports.jsx("span",{className:"text-primary/90",children:"/"}),"DATA"]}),jsxRuntimeExports.jsx(ContributeKeyDialog,{}),jsxRuntimeExports.jsx("button",{onClick:()=>d(!0),className:"flex items-center h-8 px-2 rounded-full text-muted-foreground hover:text-primary transition-colors",title:"Source Settings",children:jsxRuntimeExports.jsx(Settings,{className:"w-4 h-4"})})]}),lt&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[ft&&jsxRuntimeExports.jsxs("button",{onClick:rt,className:"ios-pill flex items-center gap-1.5 bg-primary text-primary-foreground text-xs",children:[jsxRuntimeExports.jsx(CheckCheck,{className:"w-3.5 h-3.5"}),jsxRuntimeExports.jsx("span",{className:"hidden sm:inline",children:"Accept All"})]}),ut&&jsxRuntimeExports.jsxs("button",{onClick:dt,disabled:b,className:"ios-pill flex items-center gap-1.5 bg-success text-success-foreground text-xs disabled:opacity-40",children:[jsxRuntimeExports.jsx(Download,{className:"w-3.5 h-3.5"}),jsxRuntimeExports.jsx("span",{className:"hidden sm:inline",children:"Save All"})]}),jsxRuntimeExports.jsxs("button",{onClick:ot,disabled:b,className:"glass-button ios-pill flex items-center gap-1.5 text-foreground text-xs disabled:opacity-40",children:[jsxRuntimeExports.jsx(Archive,{className:"w-3.5 h-3.5"}),jsxRuntimeExports.jsx("span",{className:"hidden sm:inline",children:"ZIP"})]}),jsxRuntimeExports.jsx("button",{onClick:ct,className:"flex items-center h-8 px-2 rounded-full text-muted-foreground active:text-destructive transition-colors",children:jsxRuntimeExports.jsx(Trash2,{className:"w-3.5 h-3.5"})})]})]})}),jsxRuntimeExports.jsxs("main",{className:"relative px-4 py-5 max-w-2xl mx-auto pb-24",children:[jsxRuntimeExports.jsx("div",{className:lt?"mb-4":"",children:jsxRuntimeExports.jsx(DropZone,{onFilesAdded:_e,compact:lt,isProcessing:b})}),jsxRuntimeExports.jsx(TrackList,{tracks:g,onAccept:et,onRevert:st,onRemove:at,onDownload:it,onSelectResult:nt}),!lt&&jsxRuntimeExports.jsxs("div",{className:"text-center mt-20 space-y-3",children:[jsxRuntimeExports.jsx("p",{className:"text-muted-foreground font-medium text-4xl",children:"Fix your MP3 metadata automatically"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground/40 tracking-wide text-xl",children:"Title  Artist  Album  Artwork  Year"})]})]}),b&&_.total>0&&jsxRuntimeExports.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-30 glass-header",children:jsxRuntimeExports.jsxs("div",{className:"max-w-2xl mx-auto px-5 py-3 space-y-1.5",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between text-xs",children:[jsxRuntimeExports.jsx("span",{className:"font-medium text-foreground/70",children:"Scanning"}),jsxRuntimeExports.jsxs("span",{className:"font-mono text-[11px] text-muted-foreground",children:[_.current,"/",_.total,$>0&&jsxRuntimeExports.jsxs("span",{className:"text-destructive ml-1",children:["(",$," skipped)"]})]})]}),jsxRuntimeExports.jsx(Progress,{value:Et,className:"h-1 rounded-full"})]})}),jsxRuntimeExports.jsx(SourceSettings,{open:h,onOpenChange:d})]})},NotFound=()=>{const h=useLocation();return reactExports.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",h.pathname)},[h.pathname]),jsxRuntimeExports.jsx("div",{className:"flex min-h-screen items-center justify-center bg-muted",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),jsxRuntimeExports.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),jsxRuntimeExports.jsx("a",{href:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})})},queryClient=new QueryClient,App=()=>jsxRuntimeExports.jsx(QueryClientProvider,{client:queryClient,children:jsxRuntimeExports.jsxs(TooltipProvider,{children:[jsxRuntimeExports.jsx(Toaster$1,{}),jsxRuntimeExports.jsx(Toaster,{}),jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(Index,{})}),jsxRuntimeExports.jsx(Route,{path:"*",element:jsxRuntimeExports.jsx(NotFound,{})})]})})]})});createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(App,{}));
